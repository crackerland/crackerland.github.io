!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){(function(t,r,i){var o;(function(s){var u={function:!0,object:!0};function c(t){return t&&t.Object===Object?t:null}var h,a=u[typeof e]&&e&&!e.nodeType?e:null,l=u[typeof t]&&t&&!t.nodeType?t:null,f=c(a&&l&&"object"==typeof r&&r),p=c(u[typeof self]&&self),d=c(u[typeof window]&&window),b=l&&l.exports===a?a:null,v=c(u[typeof this]&&this),_=f||d!==(v&&v.window)&&d||p||v||Function("return this")(),y={internals:{},config:{Promise:_.Promise},helpers:{}},w=y.helpers.noop=function(){},m=y.helpers.identity=function(t){return t},g=y.helpers.defaultNow=Date.now,E=y.helpers.defaultComparer=function(t,e){return mt(t,e)},C=y.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},x=(y.helpers.defaultKeySerializer=function(t){return t.toString()},y.helpers.defaultError=function(t){throw t}),N=y.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},D=y.helpers.isFunction=((h=function(t){return"function"==typeof t||!1})(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),h);function S(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}var A={e:{}};var k=y.internals.tryCatch=function(t){if(!D(t))throw new TypeError("fn must be a function");return e=t,function(){try{return e.apply(this,arguments)}catch(t){return A.e=t,A}};var e};function O(t){throw t}y.config.longStackSupport=!1;var j=!1,q=k(function(){throw new Error})();j=!!q.e&&!!q.e.stack;var F,T=V(),R="From previous event:";function P(t,e){if(j&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(R)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+R+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];!M(o)&&(-1===(s=o).indexOf("(module.js:")&&-1===s.indexOf("(node.js:"))&&o&&n.push(o)}var s;return n.join("\n")}(i)}}function M(t){var e=L(t);if(!e)return!1;var n=e[0],r=e[1];return n===F&&r>=T&&r<=Bo}function V(){if(j)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=L(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return F=e[0],e[1]}}function L(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}var W=y.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};W.prototype=Object.create(Error.prototype),W.prototype.name="EmptyError";var I=y.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};I.prototype=Object.create(Error.prototype),I.prototype.name="ObjectDisposedError";var B=y.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};B.prototype=Object.create(Error.prototype),B.prototype.name="ArgumentOutOfRangeError";var z=y.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};z.prototype=Object.create(Error.prototype),z.prototype.name="NotSupportedError";var U=y.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};U.prototype=Object.create(Error.prototype),U.prototype.name="NotImplementedError";var G=y.helpers.notImplemented=function(){throw new U},H=(y.helpers.notSupported=function(){throw new z},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");_.Set&&"function"==typeof(new _.Set)["@@iterator"]&&(H="@@iterator");var K=y.doneEnumerator={done:!0,value:s},Q=y.helpers.isIterable=function(t){return t&&t[H]!==s},J=y.helpers.isArrayLike=function(t){return t&&t.length!==s};y.helpers.iterator=H;var $=y.internals.bindCallback=function(t,e,n){if(void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},X="[object Arguments]",Y="[object Array]",Z="[object Boolean]",tt="[object Date]",et="[object Error]",nt="[object Number]",rt="[object Object]",it="[object RegExp]",ot="[object String]",st={};st["[object Float32Array]"]=st["[object Float64Array]"]=st["[object Int8Array]"]=st["[object Int16Array]"]=st["[object Int32Array]"]=st["[object Uint8Array]"]=st["[object Uint8ClampedArray]"]=st["[object Uint16Array]"]=st["[object Uint32Array]"]=!0,st[X]=st[Y]=st["[object ArrayBuffer]"]=st[Z]=st[tt]=st[et]=st["[object Function]"]=st["[object Map]"]=st[nt]=st[rt]=st[it]=st["[object Set]"]=st[ot]=st["[object WeakMap]"]=!1;var ut=Object.prototype,ct=ut.hasOwnProperty,ht=ut.toString,at=Math.pow(2,53)-1,lt=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(s=0;s<r;s++)t.call(i,n[s])&&u.push(n[s]);return u}}();var ft=y.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)};function pt(t){return!!t&&"object"==typeof t}function dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=at}var bt=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();var vt=Array.isArray||function(t){return pt(t)&&dt(t.length)&&ht.call(t)===Y};function _t(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function yt(t,e,n,r,i,o){var u,c=vt(t),h=vt(e),a=Y,l=Y;c||((a=ht.call(t))===X?a=rt:a!==rt&&(c=pt(u=t)&&dt(u.length)&&!!st[ht.call(u)])),h||(l=ht.call(e))===X&&(l=rt);var f=a===rt&&!bt(t),p=l===rt&&!bt(e),d=a===l;if(d&&!c&&!f)return function(t,e,n){switch(n){case Z:case tt:return+t==+e;case et:return t.name===e.name&&t.message===e.message;case nt:return t!==+t?e!==+e:t===+e;case it:case ot:return t===e+""}return!1}(t,e,a);if(!r){var b=f&&ct.call(t,"__wrapped__"),v=p&&ct.call(e,"__wrapped__");if(b||v)return n(b?t.value():t,v?e.value():e,r,i,o)}if(!d)return!1;i||(i=[]),o||(o=[]);for(var _=i.length;_--;)if(i[_]===t)return o[_]===e;i.push(t),o.push(e);var y=(c?function(t,e,n,r,i,o){var u=-1,c=t.length,h=e.length;if(c!==h&&!(r&&h>c))return!1;for(;++u<c;){var a=t[u],l=e[u];if(void 0!==s)return!1;if(r){if(!_t(e,function(t){return a===t||n(a,t,r,i,o)}))return!1}else if(a!==l&&!n(a,l,r,i,o))return!1}return!0}:function(t,e,n,r,i,o){var u=lt(t),c=u.length;if(c!==lt(e).length&&!r)return!1;for(var h,a=c;a--;)if(h=u[a],!(r?h in e:ct.call(e,h)))return!1;for(var l=r;++a<c;){var f=t[h=u[a]],p=e[h];if(!(void 0===s?n(f,p,r,i,o):void 0))return!1;l||(l="constructor"===h)}if(!l){var d=t.constructor,b=e.constructor;if(d!==b&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof b&&b instanceof b))return!1}return!0})(t,e,n,r,i,o);return i.pop(),o.pop(),y}function wt(t,e,n,r,i){return t===e||(null==t||null==e||!ft(t)&&!pt(e)?t!=t&&e!=e:yt(t,e,wt,n,r,i))}var mt=y.internals.isEqual=function(t,e){return wt(t,e)},gt=(Array.prototype.slice,y.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),Et=y.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var u in s)t[u]=s[u]}},Ct=y.internals.addRef=function(t,e){return new Fo(function(n){return new Vt(e.getDisposable(),t.subscribe(n))})};function xt(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function Nt(t,e){this.id=t,this.value=e}Nt.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Dt=y.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},St=Dt.prototype;St.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},St.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},St.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},St.peek=function(){return this.items[0].value},St.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},St.dequeue=function(){var t=this.peek();return this.removeAt(0),t},St.enqueue=function(t){var e=this.length++;this.items[e]=new Nt(Dt.count++,t),this.percolate(e)},St.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Dt.count=0;var At=y.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},kt=At.prototype;kt.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},kt.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},kt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var Ot=y.Disposable=function(t){this.isDisposed=!1,this.action=t||w};Ot.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var jt=Ot.create=function(t){return new Ot(t)},qt=Ot.empty={dispose:w},Ft=Ot.isDisposable=function(t){return t&&D(t.dispose)},Tt=Ot.checkDisposed=function(t){if(t.isDisposed)throw new I},Rt=Ot._fixup=function(t){return Ft(t)?t:qt},Pt=y.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Pt.prototype.getDisposable=function(){return this.current},Pt.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Pt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var Mt=y.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Mt.prototype.getDisposable=function(){return this.current},Mt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},Mt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Vt=y.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Vt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Lt=y.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Lt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var Wt=y.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?qt:new t(this)},e}();function It(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function Bt(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}It.prototype.dispose=function(){this.scheduler.schedule(this,Bt)};var zt=y.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||C,this.disposable=new Pt};zt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},zt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},zt.prototype.isCancelled=function(){return this.disposable.isDisposed},zt.prototype.invokeCore=function(){return Rt(this.action(this.scheduler,this.state))};var Ut,Gt=y.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new U},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),0===(i=t.normalize(i))?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new U},t.now=g,t.prototype.now=g,t.normalize=function(t){return t<0&&(t=0),t},t}(),Ht=Gt.normalize,Kt=Gt.isScheduler;!function(t){function e(t,e){var n=e[0],r=e[1],i=new At;return r(n,function(e){var n=!1,s=!1;var u=t.schedule(e,function(t,e){n?i.remove(u):s=!0;return r(e,o),qt});s||(i.add(u),n=!0)}),i;function o(e){var n=false,s=false;var u=t.schedule(e,c);if(!s){i.add(u);n=true}function c(t,e){if(n){i.remove(u)}else{s=true}return r(e,o),qt}}}function n(t,e){var n=e[0],r=e[1],i=new At;return r(n,function(e,n){var s=!1,u=!1;var c=t.scheduleFuture(e,n,function(t,e){s?i.remove(c):u=!0;return r(e,o),qt});u||(i.add(c),s=!0)}),i;function o(e,n){var s=false,u=false;var c=t.scheduleFuture(e,n,h);if(!u){i.add(c);s=true}function h(t,e){if(s){i.remove(c)}else{u=true}return r(e,o),qt}}}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(Gt.prototype),Gt.prototype.schedulePeriodic=function(t,e,n){if(void 0===_.setInterval)throw new z;e=Ht(e);var r=t,i=_.setInterval(function(){r=n(r)},e);return jt(function(){_.clearInterval(i)})},(Ut=Gt.prototype).catchError=Ut.catch=function(t){return new se(this,t)};var Qt,Jt,$t=y.internals.SchedulePeriodicRecursive=function(){function t(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return t.prototype.start=function(){var t,e=new Pt;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,(t=this,function(e,n){n(0,t._period);var r=k(t._action)(t._state);r===A&&(t._cancel.dispose(),O(r.e)),t._state=r}))),e},t}(),Xt=function(t){function e(){t.call(this)}return gt(e,t),e.prototype.schedule=function(t,e){return Rt(e(this,t))},e}(Gt),Yt=Gt.immediate=new Xt,Zt=function(t){var e;function n(){for(;e.length>0;){var t=e.dequeue();!t.isCancelled()&&t.invoke()}}function r(){t.call(this)}return gt(r,t),r.prototype.schedule=function(t,r){var i=new zt(this,t,r,this.now());if(e)e.enqueue(i);else{(e=new Dt(4)).enqueue(i);var o=k(n)();e=null,o===A&&O(o.e)}return i.disposable},r.prototype.scheduleRequired=function(){return!e},r}(Gt),te=Gt.currentThread=new Zt,ee=function(){var t,e=w;if(_.setTimeout)t=_.setTimeout,e=_.clearTimeout;else{if(!_.WScript)throw new z;t=function(t,e){_.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),ne=ee.setTimeout,re=ee.clearTimeout;!function(){var t=1,e={},n=!1;function r(t){if(n)ne(function(){r(t)},0);else{var i=e[t];if(i){n=!0;var o=k(i)();Jt(t),n=!1,o===A&&O(o.e)}}}Jt=function(t){delete e[t]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),s="function"==typeof(s=f&&b&&f.setImmediate)&&!o.test(s)&&s;if(D(s))Qt=function(n){var i=t++;return e[i]=n,s(function(){r(i)}),i};else if(void 0!==i&&"[object process]"==={}.toString.call(i))Qt=function(n){var o=t++;return e[o]=n,i.nextTick(function(){r(o)}),o};else if(function(){if(!_.postMessage||_.importScripts)return!1;var t=!1,e=_.onmessage;return _.onmessage=function(){t=!0},_.postMessage("","*"),_.onmessage=e,t}()){var u="ms.rx.schedule"+Math.random();_.addEventListener("message",function(t){"string"==typeof t.data&&t.data.substring(0,u.length)===u&&r(t.data.substring(u.length))},!1),Qt=function(n){var r=t++;return e[r]=n,_.postMessage(u+r,"*"),r}}else if(_.MessageChannel){var c=new _.MessageChannel;c.port1.onmessage=function(t){r(t.data)},Qt=function(n){var r=t++;return e[r]=n,c.port2.postMessage(r),r}}else Qt="document"in _&&"onreadystatechange"in _.document.createElement("script")?function(n){var i=_.document.createElement("script"),o=t++;return e[o]=n,i.onreadystatechange=function(){r(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},_.document.documentElement.appendChild(i),o}:function(n){var i=t++;return e[i]=n,ne(function(){r(i)},0),i}}();var ie=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(Ot._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}return gt(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Jt(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,re(this._id))},e.prototype.schedule=function(t,e){var i=new Pt,o=Qt(n(i,e,this,t));return new Vt(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new Pt,s=ne(n(o,r,this,t),e);return new Vt(o,new i(s))},e.prototype.scheduleLongRunning=function(t,e){var n=jt(w);return Qt(function(t,e,n){return function(){e(t,n)}}(t,e,n)),n},e}(Gt),oe=Gt.default=Gt.async=new ie,se=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return gt(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var i=k(t)(e._getRecursiveWrapper(n),r);return i===A?(e._handler(i.e)||O(i.e),qt):Rt(i)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,i=!1,o=new Pt;return o.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(i)return null;var e=k(n)(t);return e===A?(i=!0,r._handler(e.e)||O(e.e),o.dispose(),null):e})),o},e}(Gt),ue=y.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new U},t.prototype._acceptObserver=function(t,e,n){throw new U},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Kt(t)||(t=Yt),new Fo(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),ce=function(t){function e(t){this.value=t,this.kind="N"}return gt(e,ue),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(),he=function(t){function e(t){this.error=t,this.kind="E"}return gt(e,ue),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(),ae=function(t){function e(){this.kind="C"}return gt(e,ue),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(),le=ue.createOnNext=function(t){return new ce(t)},fe=ue.createOnError=function(t){return new he(t)},pe=ue.createOnCompleted=function(){return new ae},de=y.Observer=function(){};de.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},de.prototype.asObserver=function(){var t=this;return new ye(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},de.prototype.checked=function(){return new we(this)};var be=de.create=function(t,e,n){return t||(t=w),e||(e=x),n||(n=w),new ye(t,e,n)};de.fromNotifier=function(t,e){var n=$(t,e,1);return new ye(function(t){return n(le(t))},function(t){return n(fe(t))},function(){return n(pe())})},de.prototype.notifyOn=function(t){return new ge(t,this)},de.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var ve,_e=y.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return gt(e,de),e.prototype.next=G,e.prototype.error=G,e.prototype.completed=G,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(),ye=y.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return gt(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(_e),we=function(t){function e(e){t.call(this),this._observer=e,this._state=0}gt(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=k(this._observer.onNext).call(this._observer,t);this._state=0,e===A&&O(e.e)},n.onError=function(t){this.checkAccess();var e=k(this._observer.onError).call(this._observer,t);this._state=2,e===A&&O(e.e)},n.onCompleted=function(){this.checkAccess();var t=k(this._observer.onCompleted).call(this._observer);this._state=2,t===A&&O(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(de),me=y.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Mt}function n(t,e){var n;if(t.queue.length>0){n=t.queue.shift();var r=k(n)();if(r===A)return t.queue=[],t.hasFaulted=!0,O(r.e);e(t)}else t.isAcquired=!1}return gt(e,t),e.prototype.next=function(t){this.queue.push(function(t,e){return function(){t.onNext(e)}}(this.observer,t))},e.prototype.error=function(t){this.queue.push(function(t,e){return function(){t.onError(e)}}(this.observer,t))},e.prototype.completed=function(){var t;this.queue.push((t=this.observer,function(){t.onCompleted()}))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,n))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(_e),ge=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return gt(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(me),Ee=y.Observable=function(){function t(){if(y.config.longStackSupport&&j){var t=this._subscribe,e=k(O)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=(n=this,r=t,function(t){var e=t.onError;return t.onError=function(r){P(r,n),e.call(t,r)},r.call(n,t)})}var n,r}return ve=t.prototype,t.isObservable=function(t){return t&&D(t.subscribe)},ve.subscribe=ve.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:be(t,e,n))},ve.subscribeOnNext=function(t,e){return this._subscribe(be(void 0!==e?function(n){t.call(e,n)}:t))},ve.subscribeOnError=function(t,e){return this._subscribe(be(null,void 0!==e?function(n){t.call(e,n)}:t))},ve.subscribeOnCompleted=function(t,e){return this._subscribe(be(null,null,void 0!==e?function(){t.call(e)}:t))},t}(),Ce=y.ObservableBase=function(t){function e(t,e){var n,r=e[0],i=e[1],o=k(i.subscribeCore).call(i,r);o!==A||r.fail(A.e)||O(A.e),r.setDisposable((n=o)&&D(n.dispose)?n:D(n)?jt(n):qt)}function n(){t.call(this)}return gt(n,t),n.prototype._subscribe=function(t){var n=new To(t),r=[n,this];return te.scheduleRequired()?te.schedule(r,e):e(0,r),n},n.prototype.subscribeCore=G,n}(Ee),xe=y.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=D(r)?r:null,this.selector=$(D(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},gt(n,_e),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=k(this.selector)(t,e,this.source);if(n===A)return this.o.onError(n.e);N(n)&&(n=Pe(n)),(J(n)||Q(n))&&(n=Ee.from(n)),this.o.onNext(this._wrapResult(n,t,e))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce),Ne=y.internals.Enumerable=function(){};function De(t){this._s=t,this.isDisposed=!1}De.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var Se=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=k(t.e.next).call(t.e);if(n===A)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;N(i)&&(i=Pe(i));var o=new Pt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r={isDisposed:!1,o:t,subscription:e,e:this.sources[H]()},i=te.scheduleRecursive(r,n);return new Lt([e,i,new De(r)])},gt(r,_e),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Ce);Ne.prototype.concat=function(){return new Se(this)};var Ae=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=k(t.e.next).call(t.e);if(n===A)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;N(i)&&(i=Pe(i));var o=new Pt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r={isDisposed:!1,e:this.sources[H](),subscription:e,lastError:null,o:t},i=te.scheduleRecursive(r,n);return new Lt([e,i,new De(r)])},gt(r,_e),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Ce);Ne.prototype.catchError=function(){return new Ae(this)};var ke=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return gt(e,Ne),e.prototype[H]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?K:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(),Oe=Ne.repeat=function(t,e){return new ke(t,e)},je=function(t){function e(t,e,n){this.s=t,this.fn=e?$(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return gt(e,Ne),e.prototype[H]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:K},e}(),qe=Ne.of=function(t,e,n){return new je(t,e,n)},Fe=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ge(this._s,t))},e}(Ce);ve.observeOn=function(t){return new Fe(this,t)};var Te=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];r.setDisposable(new It(t,n.subscribe(i)))}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Pt,r=new Mt;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Ce);ve.subscribeOn=function(t){return new Te(this,t)};var Re=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Pt,i=this,o=this._p;return D(o)&&(o=k(o)())===A?(t.onError(o.e),e):(o.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e)},e}(Ce),Pe=Ee.fromPromise=function(t,e){return e||(e=oe),new Re(t,e)};ve.toPromise=function(t){if(t||(t=y.config.Promise),!t)throw new z("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var Me=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},gt(n,_e),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Ce);ve.toArray=function(){return new Me(this)},Ee.create=function(t,e){return new Fo(t,e)};var Ve=function(t){function e(e){this._f=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=k(this._f)();return e===A?hn(e.e).subscribe(t):(N(e)&&(e=Pe(e)),e.subscribe(t))},e}(Ce),Le=Ee.defer=function(t){return new Ve(t)},We=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),qt}return gt(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Yt?r(0,t):this.scheduler.schedule(t,r)},e}(Ce),Ie=new We(Yt),Be=Ee.empty=function(t){return Kt(t)||(t=Yt),t===Yt?Ie:new We(t)},ze=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=function(t){var e=t[H];if(!e&&"string"==typeof t)return new Ge(t)[H]();if(!e&&t.length!==s)return new Ke(t)[H]();if(!e)throw new TypeError("Object is not iterable");return t[H]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){var o=k(e.next).call(e);if(o===A)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;if(D(n)&&(s=k(n)(s,r))===A)return t.onError(s.e);t.onNext(s),i(r+1)}}(t,e,this._fn))},e}(Ce),Ue=Math.pow(2,53)-1;function Ge(t){this._s=t}function He(t){this._s=t,this._l=t.length,this._i=0}function Ke(t){this._a=t}function Qe(t){this._a=t,this._l=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(n=e,"number"!=typeof n||!_.isFinite(n)))return e;var n;if((e=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>Ue)return Ue;return e}(t),this._i=0}Ge.prototype[H]=function(){return new He(this._s)},He.prototype[H]=function(){return this},He.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:K},Ke.prototype[H]=function(){return new Qe(this._a)},Qe.prototype[H]=function(){return this},Qe.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:K};var Je=Ee.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!D(e))throw new Error("mapFn when provided must be a function");if(e)var i=$(e,n,2);return Kt(r)||(r=te),new ze(t,i,r)},$e=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e){var n=e.length;return function(r,i){r<n?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}(t,this._args))},e}(Ce),Xe=Ee.fromArray=function(t,e){return Kt(e)||(e=te),new $e(t,e)},Ye=function(t){function e(e,n,r,i,o){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._s=o,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=k(t.self._itrFn)(t.newState),t.newState===A)return t.o.onError(t.newState.e);var n=k(t.self._cndFn)(t.newState);if(n===A)return t.o.onError(n.e);if(n){var r=k(t.self._resFn)(t.newState);if(r===A)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Ce);function Ze(t,e){return Kt(t)||(t=te),new $e(e,t)}Ee.generate=function(t,e,n,r,i){return Kt(i)||(i=te),new Ye(t,e,n,r,i)},Ee.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new $e(e,te)},Ee.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new $e(n,t)},Ee.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Fo(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Ee.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Fo(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var tn=new(function(t){function e(){t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return qt},e}(Ce)),en=Ee.never=function(){return tn},nn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}(t,this._o,this._keys))},e}(Ce);Ee.pairs=function(t,e){return e||(e=te),new nn(t,e)};var rn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){r<e?(n.onNext(t+r),i(r+1)):n.onCompleted()}}(this.start,this.rangeCount,t))},e}(Ce);Ee.range=function(t,e,n){return Kt(n)||(n=te),new rn(t,e,n)};var on=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new sn(t,this).run()},e}(Ce);function sn(t,e){this.observer=t,this.parent=e}sn.prototype.run=function(){var t=this.observer,e=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function(n,r){if((-1===n||n>0)&&(t.onNext(e),n>0&&n--),0===n)return t.onCompleted();r(n)})},Ee.repeat=function(t,e,n){return Kt(n)||(n=te),new on(t,e,n)};var un=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),qt}return gt(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Yt?n(null,e):this._scheduler.schedule(e,n)},e}(Ce),cn=(Ee.return=Ee.just=function(t,e){return Kt(e)||(e=Yt),new un(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),qt}return gt(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Yt?n(null,e):this._scheduler.schedule(e,n)},e}(Ce)),hn=Ee.throw=function(t,e){return Kt(e)||(e=Yt),new cn(t,e)},an=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=qt,n=k(this._resFn)();if(n===A)return new Vt(hn(n.e).subscribe(t),e);n&&(e=n);var r=k(this._obsFn)(n);return new Vt(r===A?hn(r.e).subscribe(t):r.subscribe(t),e)},e}(Ce);Ee.using=function(t,e){return new an(t,e)},ve.amb=function(t){var e=this;return new Fo(function(n){var r,i="L",o="R",s=new Pt,u=new Pt;function c(){r||(r=i,u.dispose())}function h(){r||(r=o,s.dispose())}N(t)&&(t=Pe(t));var a=be(function(t){c(),r===i&&n.onNext(t)},function(t){c(),r===i&&n.onError(t)},function(){c(),r===i&&n.onCompleted()}),l=be(function(t){h(),r===o&&n.onNext(t)},function(t){h(),r===o&&n.onError(t)},function(){h(),r===o&&n.onCompleted()});return s.setDisposable(e.subscribe(a)),u.setDisposable(t.subscribe(l)),new Vt(s,u)})},Ee.amb=function(){var t,e,n,r=en();if(Array.isArray(arguments[0]))t=arguments[0];else{var i=arguments.length;t=new Array(t);for(var o=0;o<i;o++)t[o]=arguments[o]}for(o=0,i=t.length;o<i;o++)e=r,n=t[o],r=e.amb(n);return r};var ln=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Pt,n=new Mt;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new fn(t,n,this._fn))),n},e}(Ce),fn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=k(this._fn)(t);if(e===A)return this._o.onError(e.e);N(e)&&(e=Pe(e));var n=new Pt;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(_e);ve.catch=function(t){return D(t)?new ln(this,t):pn([this,t])};var pn=Ee.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return qe(t).catchError()};function dn(){return!1}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),yn.apply(this,e)};var vn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:xt(e,dn),hasValueAll:!1,isDone:xt(e,dn),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],s=new Pt;n[i]=s,N(o)&&(o=Pe(o)),s.setDisposable(o.subscribe(new _n(t,i,this._cb,r)))}return new Lt(n)},e}(Ce),_n=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(m))){var e=k(this._cb).apply(null,this._state.values);if(e===A)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter((n=this._i,function(t,e){return e!==n})).every(m)&&this._o.onCompleted();var n},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(m)&&this._o.onCompleted()},e}(_e),yn=Ee.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new vn(e,r)};ve.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),gn.apply(null,t)};var wn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(_e),mn=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];N(n)&&(n=Pe(n));var r=new Pt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new wn(t,e)))}}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r=jt(w),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=Yt.scheduleRecursive(i,n);return new Lt([e,r,o])},e}(Ce),gn=Ee.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new mn(t)};ve.concatAll=function(){return this.merge(1)};var En=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new At;return e.add(this.source.subscribe(new Cn(t,this.maxConcurrent,e))),e},e}(Ce),Cn=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return gt(e,t),e.prototype.handleSubscribe=function(t){var e=new Pt;this.g.add(e),N(t)&&(t=Pe(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(_e);ve.merge=function(t){return"number"!=typeof t?xn(this,t):new En(this,t)};var xn=Ee.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Kt(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=Yt,e=0;e<r;e++)n.push(arguments[e]);else for(t=Yt,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),Ze(t,n).mergeAll()},Nn=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new At,n=new Pt;return e.add(n),n.setDisposable(this.source.subscribe(new Dn(t,e))),e},e}(Ce),Dn=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=new Pt;this.g.add(e),N(t)&&(t=Pe(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(_e);ve.mergeAll=function(){return new Nn(this)};var Sn=y.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Sn.prototype=Object.create(Error.prototype),Sn.prototype.name="CompositeError";var An=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new At,n=new Pt,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new kn(e,r))),e},e}(Ce),kn=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Sn(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=new Pt;this._group.add(e),N(t)&&(t=Pe(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},gt(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(_e);Ee.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=Ze(null,t);return new An(r)},ve.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return qn([this,t])};var On=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];N(n)&&(n=Pe(n));var r=new Pt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new jn(t,e)))}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r={pos:0,subscription:e,o:t,sources:this.sources},i=Yt.scheduleRecursive(r,n);return new Vt(e,i)},e}(Ce),jn=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(_e),qn=Ee.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new On(t)},Fn=function(t){function e(e,n){this._s=e,this._o=N(n)?Pe(n):n,this._open=!1,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Pt;e.setDisposable(this._s.subscribe(new Tn(t,this))),N(this._o)&&(this._o=Pe(this._o));var n=new Pt;return n.setDisposable(this._o.subscribe(new Rn(t,this,n))),new Vt(e,n)},e}(Ce),Tn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(_e),Rn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return gt(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(_e);ve.skipUntil=function(t){return new Fn(this,t)};var Pn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,_e.call(this)}function r(t,e){this.parent=t,this.id=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r=this.source.subscribe(new n(t,e));return new Vt(r,e)},gt(n,_e),n.prototype.next=function(t){var e=new Pt,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),N(t)&&(t=Pe(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},gt(r,_e),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Ce);ve.switch=ve.switchLatest=function(){return new Pn(this)};var Mn=function(t){function e(e,n){this.source=e,this.other=N(n)?Pe(n):n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this.source.subscribe(t),this.other.subscribe(new Vn(t)))},e}(Ce),Vn=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=w,e}(_e);function dn(){return!1}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.takeUntil=function(t){return new Mn(this,t)};var Ln=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:xt(e,dn),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var s=this._ss[o],u=new Pt;N(s)&&(s=Pe(s)),u.setDisposable(s.subscribe(new Wn(t,o,n))),i[o]=u}var c=new Pt;return c.setDisposable(this._s.subscribe(new In(t,this._cb,n))),i[r]=c,new Lt(i)},e}(Ce),Wn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(m)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=w,e}(_e),In=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=k(this._cb).apply(null,e);if(n===A)return this._o.onError(n.e);this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);function dn(){return!1}function Bn(){return[]}ve.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new Ln(this,e,r)};var zn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=xt(e,dn),i=xt(e,Bn),o=0;o<e;o++){var s=this._s[o],u=new Pt;n[o]=u,N(s)&&(s=Pe(s)),u.setDisposable(s.subscribe(new Un(t,o,this,i,r)))}return new Lt(n)},e}(Ce),Un=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return gt(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=k(this._p._cb).apply(null,e);if(i===A)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter((o=this._i,function(t,e){return e!==o})).every(m)&&this._o.onCompleted();var o},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(m)&&this._o.onCompleted()},e}(_e);function dn(){return!1}function Bn(){return[]}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(e[t-1])?e.pop():bn;Array.isArray(e[0])&&(e=e[0]);return e.unshift(this),new zn(e,r)},Ee.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=D(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var Gn=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:xt(n,Bn),done:xt(n,dn),cb:this._cb,o:t},o=0;o<n;o++)!function(t){var n=e[t],o=new Pt;(J(n)||Q(n))&&(n=Je(n)),r[t]=o,o.setDisposable(n.subscribe(new Hn(i,t)))}(o);return new Lt(r)},e}(Ce),Hn=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return gt(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=k(this._s.cb).apply(null,e);if(i===A)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter((o=this._i,function(t,e){return e!==o})).every(m)&&this._s.o.onCompleted();var o},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(m)&&this._s.o.onCompleted()},e}(_e);function Kn(t){return t.toArray()}function Qn(t){return t.length>0}ve.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(e[t-1])?e.pop():bn;return e.unshift(this),new Gn(e,r)},ve.asObservable=function(){return new Fo((t=this,function(e){return t.subscribe(e)}),this);var t},ve.bufferWithCount=ve.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(Kn).filter(Qn)};var Jn=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $n(t))},e}(Ce),$n=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.dematerialize=function(){return new Jn(this)};var Xn=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yn(t,this.keyFn,this.comparer))},e}(Ce),Yn=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e,n=t;return D(this.keyFn)&&(n=k(this.keyFn)(t))===A?this.o.onError(n.e):this.hasCurrentKey&&(e=k(this.comparer)(this.currentKey,n))===A?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(_e);ve.distinctUntilChanged=function(t,e){return e||(e=E),new Xn(this,t,e)};var Zn=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||D(e._oN)?be(e._oN||w,e._oE||w,e._oC||w):e._oN,this.isStopped=!1,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},gt(n,_e),n.prototype.next=function(t){var e=k(this.t.onNext).call(this.t,t);e===A&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=k(this.t.onError).call(this.t,t);if(e===A)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=k(this.t.onCompleted).call(this.t);if(t===A)return this.o.onError(t.e);this.o.onCompleted()},e}(Ce);ve.do=ve.tap=ve.doAction=function(t,e,n){return new Zn(this,t,e,n)},ve.doOnNext=ve.tapOnNext=function(t,e){return this.tap(void 0!==e?function(n){t.call(e,n)}:t)},ve.doOnError=ve.tapOnError=function(t,e){return this.tap(w,void 0!==e?function(n){t.call(e,n)}:t)},ve.doOnCompleted=ve.tapOnCompleted=function(t,e){return this.tap(w,null,void 0!==e?function(){t.call(e)}:t)};var tr=function(t){function e(e,n,r){this.source=e,this._fn=$(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return gt(e,t),e.prototype.subscribeCore=function(t){var e=k(this.source.subscribe).call(this.source,t);return e===A&&(this._fn(),O(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=k(this._s.dispose).call(this._s);this._fn(),t===A&&O(t.e)}},e}(Ce);ve.finally=function(t,e){return new tr(this,t,e)};var er=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=w,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Ce);ve.ignoreElements=function(){return new er(this)};var nr=function(t){function e(e,n){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new rr(t))},e}(Ce),rr=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext(le(t))},e.prototype.error=function(t){this._o.onNext(fe(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(pe()),this._o.onCompleted()},e}(_e);function ir(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}ve.materialize=function(){return new nr(this)},ve.repeat=function(t){return Oe(this,t).concat()},ve.retry=function(t){return Oe(this,t).catchError()};var or=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return gt(n,t),n.prototype.subscribeCore=function(t){var n=new Mo,r=new Mo,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),s={isDisposed:!1},u=new Mt,c=te.scheduleRecursive(null,function(e,i){if(!s.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var h=c.value;N(h)&&(h=Pe(h));var a=new Pt,l=new Pt;u.setDisposable(new Vt(l,a)),a.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){l.setDisposable(r.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(e),a.dispose()},function(){t.onCompleted()}))}}});return new Lt([i,u,c,e(s)])},n}(Ce);function ir(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}ve.retryWhen=function(t){return new or(ir(this),t)};var sr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return gt(n,t),n.prototype.subscribeCore=function(t){var n=new Mo,r=new Mo,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),s={isDisposed:!1},u=new Mt,c=te.scheduleRecursive(null,function(e,i){if(!s.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var h=c.value;N(h)&&(h=Pe(h));var a=new Pt,l=new Pt;u.setDisposable(new Vt(l,a)),a.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){l.setDisposable(r.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(null),a.dispose()}))}}});return new Lt([i,u,c,e(s)])},n}(Ce);ve.repeatWhen=function(t){return new sr(ir(this),t)};var ur=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new cr(t,this))},e}(Ce),cr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=k(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?k(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===A)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(_e);ve.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new ur(this,n,e,t)};var hr=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ar(t,this._c))},e}(Ce),ar=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipLast=function(t){if(t<0)throw new B;return new hr(this,t)},ve.startWith=function(){var t,e=0;arguments.length&&Kt(arguments[0])?(t=arguments[0],e=1):t=Yt;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return gn.apply(null,[Xe(n,t),this])};var lr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(_e);ve.takeLast=function(t){if(t<0)throw new B;var e=this;return new Fo(function(n){return e.subscribe(new lr(n,t))},e)};var fr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(_e);function pr(t,e,n){var r=$(e,n,3);return t.map(function(e,n){var i=r(e,n,t);return N(i)&&(i=Pe(i)),(J(i)||Q(i))&&(i=Je(i)),i}).concatAll()}ve.takeLastBuffer=function(t){if(t<0)throw new B;var e=this;return new Fo(function(n){return e.subscribe(new fr(n,t))},e)},ve.windowWithCount=ve.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new B;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new B;return new Fo(function(r){var i=new Pt,o=new Wt(i),s=0,u=[];function c(){var t=new Mo;u.push(t),r.onNext(Ct(t,o))}return c(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=u.length;r<i;r++)u[r].onNext(n);var o=s-t+1;o>=0&&o%e==0&&u.shift().onCompleted(),++s%e==0&&c()},function(t){for(;u.length>0;)u.shift().onError(t);r.onError(t)},function(){for(;u.length>0;)u.shift().onCompleted();r.onCompleted()})),o},n)},ve.selectConcat=ve.concatMap=function(t,e,n){return D(t)&&D(e)?this.concatMap(function(n,r){var i=t(n,r);return N(i)&&(i=Pe(i)),(J(i)||Q(i))&&(i=Je(i)),i.map(function(t,i){return e(n,t,r,i)})}):D(t)?pr(this,t,n):pr(this,function(){return t})},ve.concatMapObserver=ve.selectConcatObserver=function(t,e,n,r){var i=this,o=$(t,r,2),s=$(e,r,1),u=$(n,r,0);return new Fo(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(e){return void t.onError(e)}N(r)&&(r=Pe(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(e){return void t.onError(e)}N(n)&&(n=Pe(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(e){return void t.onError(e)}N(e)&&(e=Pe(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var dr=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(_e);function br(t){this.comparer=t,this.set=[]}ve.defaultIfEmpty=function(t){var e=this;return t===s&&(t=null),new Fo(function(n){return e.subscribe(new dr(n,t))},e)},br.prototype.push=function(t){var e=-1===function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n(t[r],e))return r;return-1}(this.set,t,this.comparer);return e&&this.set.push(t),e};var vr=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _r(t,this._keyFn,this._cmpFn))},e}(Ce),_r=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new br(r),t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=t;if(D(this._keyFn)&&(e=k(this._keyFn)(t))===A)return this._o.onError(e.e);this._h.push(e)&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.distinct=function(t,e){return e||(e=E),new vr(this,t,e)},ve.groupBy=function(t,e){return this.groupByUntil(t,e,en)},ve.groupByUntil=function(t,e,n){var r=this;return new Fo(function(i){var o=new Wi,u=new At,c=new Wt(u),h=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var a=k(t)(r);if(a===A)return o.forEach(h(a.e)),i.onError(a.e);var l=!1,f=o.get(a);if(f===s&&(f=new Mo,o.set(a,f),l=!0),l){var p=new Po(a,f,c),d=new Po(a,f),b=k(n)(d);if(b===A)return o.forEach(h(b.e)),i.onError(b.e);i.onNext(p);var v=new Pt;u.add(v),v.setDisposable(b.take(1).subscribe(w,function(t){o.forEach(h(t)),i.onError(t)},function(){o.delete(a)&&f.onCompleted(),u.remove(v)}))}var _=r;if(D(e)&&(_=k(e)(r))===A)return o.forEach(h(_.e)),i.onError(_.e);f.onNext(_)},function(t){o.forEach(h(t)),i.onError(t)},function(){o.forEach(function(t){t.onCompleted()}),i.onCompleted()})),c},r)};var yr=function(t){function e(e,n,r){this.source=e,this.selector=$(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,_e.call(this)}return gt(e,t),e.prototype.internalMap=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}(t,this),n)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this))},gt(n,_e),n.prototype.next=function(t){var e=k(this.selector)(t,this.i++,this.source);if(e===A)return this.o.onError(e.e);this.o.onNext(e)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce);ve.map=ve.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yr?this.internalMap(n,e):new yr(this,n,e)},ve.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return s;r=o}return r}}(e,t))},ve.flatMap=ve.selectMany=ve.mergeMap=function(t,e,n){return new xe(this,t,e,n).mergeAll()},ve.flatMapObserver=ve.selectManyObserver=function(t,e,n,r){var i=this;return new Fo(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(t){return void o.onError(t)}N(n)&&(n=Pe(n)),o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(t){return void o.onError(t)}N(n)&&(n=Pe(n)),o.onNext(n),o.onCompleted()},function(){var t;try{t=n.call(r)}catch(t){return void o.onError(t)}N(t)&&(t=Pe(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},ve.flatMapLatest=ve.switchMap=function(t,e,n){return new xe(this,t,e,n).switchLatest()};var wr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},gt(n,_e),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ce);ve.skip=function(t){if(t<0)throw new B;return new wr(this,t)};var mr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new gr(t,this))},e}(Ce),gr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._r){var e=k(this._p._fn)(t,this._i++,this._p);if(e===A)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipWhile=function(t,e){var n=$(t,e,3);return new mr(this,n)};var Er=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},gt(n,_e),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ce);ve.take=function(t,e){if(t<0)throw new B;return 0===t?Be(e):new Er(this,t)};var Cr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xr(t,this))},e}(Ce),xr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._r&&(this._r=k(this._p._fn)(t,this._i++,this._p),this._r===A))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.takeWhile=function(t,e){var n=$(t,e,3);return new Cr(this,n)};var Nr=function(t){function e(e,n,r){this.source=e,this.predicate=$(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.predicate,this))},e.prototype.internalFilter=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}(t,this),n)},gt(n,_e),n.prototype.next=function(t){var e=k(this.predicate)(t,this.i++,this.source);if(e===A)return this.o.onError(e.e);e&&this.o.onNext(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce);ve.filter=ve.where=function(t,e){return this instanceof Nr?this.internalFilter(t,e):new Nr(this,t,e)};var Dr=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Sr(t,this._k,this._c))},e}(Ce),Sr=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._k)(t);if(e===A)return this._o.onError(e.e);var n=0;if(this._hv){if((n=k(this._c)(e,this._v))===A)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(_e);function Ar(t){if(0===t.length)throw new W;return t[0]}var kr=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Or(t,this))},e}(Ce),Or=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=k(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?k(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===A)return this._o.onError(this._a.e);this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new W),this._o.onCompleted()},e}(_e);ve.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new kr(this,n,e,t)};var jr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new qr(t,this._fn,this.source))},e}(Ce),qr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._fn)(t,this._i++,this._s);if(e===A)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(_e);ve.some=function(t,e){var n=$(t,e,3);return new jr(this,n)};var Fr=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Tr(t))},e}(Ce),Tr=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(_e);ve.isEmpty=function(){return new Fr(this)};var Rr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Pr(t,this._fn,this.source))},e}(Ce),Pr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._fn)(t,this._i++,this._s);if(e===A)return this._o.onError(e.e);Boolean(e)||(this._o.onNext(!1),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(_e);ve.every=function(t,e){var n=$(t,e,3);return new Rr(this,n)};var Mr=function(t){function e(e,n,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=e,this._elem=n,this._n=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),qt):this.source.subscribe(new Vr(t,this._elem,this._n))},e}(Ce),Vr=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e,n;this._i++>=this._n&&(e=t,n=this._elem,0===e&&0===n||e===n||isNaN(e)&&isNaN(n))&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(_e);ve.includes=function(t,e){return new Mr(this,t,e)};var Lr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Wr(t,this._fn,this.source))},e}(Ce),Wr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=k(this._fn)(t,this._i++,this._s);if(e===A)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(_e);ve.count=function(t,e){var n=$(t,e,3);return new Lr(this,n)};var Ir=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),qt):this.source.subscribe(new Br(t,this._e,this._n))},e}(Ce),Br=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(_e);ve.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new Ir(this,t,n)};var zr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ur(t,this._fn,this.source))},e}(Ce),Ur=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=k(this._fn)(t,this._i++,this._s);if(e===A)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(_e);ve.sum=function(t,e){var n=$(t,e,3);return new zr(this,n)},ve.minBy=function(t,e){return e||(e=C),new Dr(this,t,function(t,n){return-1*e(t,n)})},ve.min=function(t){return this.minBy(m,t).map(Ar)},ve.maxBy=function(t,e){return e||(e=C),new Dr(this,t,e)},ve.max=function(t){return this.maxBy(m,t).map(Ar)};var Gr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Hr(t,this._fn,this.source))},e}(Ce),Hr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=k(this._fn)(t,this._c++,this._s);if(e===A)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){if(0===this._c)return this._o.onError(new W);this._o.onNext(this._t/this._c),this._o.onCompleted()},e}(_e);ve.average=function(t,e){var n;return D(t)&&(n=$(t,e,3)),new Gr(this,n)},ve.sequenceEqual=function(t,e){var n=this;return e||(e=E),new Fo(function(r){var i=!1,o=!1,s=[],u=[],c=n.subscribe(function(t){if(u.length>0){var n=u.shift(),i=k(e)(n,t);if(i===A)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(J(t)||Q(t))&&(t=Je(t)),N(t)&&(t=Pe(t));var h=t.subscribe(function(t){if(s.length>0){var n=s.shift(),o=k(e)(n,t);if(o===A)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new Vt(c,h)},n)};var Kr=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Qr(t,this._i,this._d))},e}(Ce),Qr=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){0==this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===s?this._o.onError(new B):(this._o.onNext(this._d),this._o.onCompleted())},e}(_e);ve.elementAt=function(t,e){if(t<0)throw new B;return new Kr(this,t,e)};var Jr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=k(this._obj.predicate)(t,this._i++,this._s);if(n===A)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},D(n.predicate)){var i=n.predicate;n.predicate=$(i,n.thisArg,3)}return new Fo(function(t){return r.subscribe(new Jr(t,n,r))},r)};var $r=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xr(t,this._obj,this.source))},e}(Ce),Xr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=k(this._obj.predicate)(t,this._i++,this._s);if(e===A)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},D(t.predicate)){var e=t.predicate;t.predicate=$(e,t.thisArg,3)}return new $r(this,t)};var Yr=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zr(t,this._obj,this.source))},e}(Ce),Zr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=k(this._obj.predicate)(t,this._i++,this._s);if(n===A)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},D(t.predicate)){var e=t.predicate;t.predicate=$(e,t.thisArg,3)}return new Yr(this,t)};var ti=function(t){function e(e,n,r,i){this._o=e,this._s=n,this._cb=r,this._y=i,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._cb)(t,this._i,this._s);if(e===A)return this._o.onError(e.e);e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(_e);function ei(t,e,n,r){var i=$(e,n,3);return new Fo(function(e){return t.subscribe(new ti(e,t,i,r))},t)}ve.find=function(t,e){return ei(this,t,e,!1)},ve.findIndex=function(t,e){return ei(this,t,e,!0)};var ni=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ri(t))},e}(Ce),ri=function(t){function e(e){this._o=e,this._s=new _.Set,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(_e);ve.toSet=function(){if(void 0===_.Set)throw new TypeError;return new ni(this)};var ii=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new oi(t,this._k,this._e))},e}(Ce),oi=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new _.Map,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._k)(t);if(e===A)return this._o.onError(e.e);var n=t;if(this._e&&(n=k(this._e)(t))===A)return this._o.onError(n.e);this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(_e);ve.toMap=function(t,e){if(void 0===_.Map)throw new TypeError;return new ii(this,t,e)};var si=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ui(t,this._b,this._e))},e}(Ce),ui=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.slice=function(t,e){var n=t||0;if(n<0)throw new y.ArgumentOutOfRangeError;if("number"==typeof e&&e<n)throw new y.ArgumentOutOfRangeError;return new si(this,n,e)};var ci=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),qt):this.source.subscribe(new hi(t,this._e,this._n))},e}(Ce),hi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(_e);ve.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ci(this,t,n)},Ee.wrap=function(t){function e(){return Ee.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var ai=Ee.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,i=arguments.length;r<i;r++)n.push(arguments[r]);return new Fo(function(r){var i=new At;if(D(t)&&(t=t.apply(e,n)),!t||!D(t.next))return r.onNext(t),r.onCompleted();function o(e){var n=k(t.next).call(t,e);if(n===A)return r.onError(n.e);u(n)}function s(e){var n=k(t.next).call(t,e);if(n===A)return r.onError(n.e);u(n)}function u(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=li.call(e,t.value),u=null,c=!1;Ee.isObservable(n)?i.add(n.subscribe(function(t){c=!0,u=t},s,function(){c&&o(u)})):s(new TypeError("type not supported"))}return o(),i})};function li(t){return t?Ee.isObservable(t)?t:N(t)?Ee.fromPromise(t):function(t){var e=t.constructor;if(!e)return!1;if("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)return!0;return fi(e.prototype)}(t)||fi(t)?ai.call(this,t):D(t)?function(t){var e=this;return new Fo(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;i<o;i++)r.push(arguments[i]);e=r}n.onNext(e),n.onCompleted()})})}.call(this,t):J(t)||Q(t)?function(t){return Ee.from(t).concatMap(function(t){return Ee.isObservable(t)||ft(t)?li.call(null,t):y.Observable.just(t)}).toArray()}.call(this,t):ft(t)?function(t){for(var e=new t.constructor,n=Object.keys(t),r=[],i=0,o=n.length;i<o;i++){var u=n[i],c=li.call(this,t[u]);c&&Ee.isObservable(c)?h(c,u):e[u]=t[u]}return Ee.forkJoin.apply(Ee,r).map(function(){return e});function h(t,n){e[n]=s,r.push(t.map(function(t){e[n]=t}))}}.call(this,t):t:t}function fi(t){return D(t.next)&&D(t.throw)}function ft(t){return Object==t.constructor}Ee.start=function(t,e,n){return pi(t,e,n)()};var pi=Ee.toAsync=function(t,e,n){return Kt(n)||(n=oe),function(){var r=arguments,i=new Vo;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(t){return void i.onError(t)}i.onNext(n),i.onCompleted()}),i.asObservable()}};function di(t,e,n,r){var i=new Vo;return r.push(function(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(D(n)){if((i=k(n).apply(e,i))===A)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function bi(t,e,n,r){var i=new Vo;return r.push(function(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;s<i;s++)o[s-1]=arguments[s];if(D(n)){var o=k(n).apply(e,o);if(o===A)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function vi(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function _i(t,e,n){var r=new At,i=Object.prototype.toString.call(t);if(function(t){return _.StaticNodeList?t instanceof _.StaticNodeList||t instanceof _.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;o<s;o++)r.add(_i(t.item(o),e,n));else t&&r.add(new vi(t,e,n));return r}Ee.fromCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return di(t,e,n,i)}},Ee.fromNodeCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return bi(t,e,n,i)}},vi.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},y.config.useNativeEvents=!1;var yi=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return _i(this._el,this._n,function(t,e){return function(){var n=arguments[0];if(D(e)&&(n=k(e).apply(null,arguments))===A)return t.onError(n.e);t.onNext(n)}}(t,this._fn))},e}(Ce);Ee.fromEvent=function(t,e,n){return t.addListener?mi(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):y.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new yi(t,e,n).publish().refCount():mi(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var wi=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return gt(e,t),e.prototype.subscribeCore=function(t){var e=function(t,e){return function(){var n=arguments[0];if(D(e)&&(n=k(e).apply(null,arguments))===A)return t.onError(n.e);t.onNext(n)}}(t,this._fn),r=this._add(e);return new n(this._del,e,r)},n.prototype.dispose=function(){this.isDisposed||(D(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Ce),mi=Ee.fromEventPattern=function(t,e,n){return new wi(t,e,n).publish().refCount()};Ee.startAsync=function(t){var e=k(t)();return e===A?hn(e.e):Pe(e)};var gi=function(t){function e(e,n){this.source=e,this.controller=new Mo,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return gt(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=qt,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=qt)});return new Lt([n,r,i])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Ee);ve.pausable=function(t){return new gi(this,t)};var Ei=function(t){function e(e,n){this.source=e,this.controller=new Mo,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return gt(e,t),e.prototype._subscribe=function(t){var e,n,r,i,o=[];function u(){for(;o.length>0;)t.onNext(o.shift())}return(n=this.source,r=this.pauser.startWith(!this.paused).distinctUntilChanged(),i=function(t,e){return{data:t,shouldFire:e}},new Fo(function(t){var e,o=[!1,!1],s=!1,u=!1,c=new Array(2);function h(n,r){if(c[r]=n,o[r]=!0,s||(s=o.every(m))){if(e)return t.onError(e);var h=k(i).apply(null,c);if(h===A)return t.onError(h.e);t.onNext(h)}u&&c[1]&&t.onCompleted()}return new Vt(n.subscribe(function(t){h(t,0)},function(n){c[1]?t.onError(n):e=n},function(){u=!0,c[1]&&t.onCompleted()}),r.subscribe(function(t){h(t,1)},function(e){t.onError(e)},function(){u=!0,h(!0,1)}))},n)).subscribe(function(n){e!==s&&n.shouldFire!==e?(e=n.shouldFire,n.shouldFire&&u()):(e=n.shouldFire,n.shouldFire?t.onNext(n.data):o.push(n.data))},function(e){u(),t.onError(e)},function(){u(),t.onCompleted()})},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Ee);ve.pausableBuffered=function(t){return new Ei(this,t)};var Ci=function(t){function e(e,n,r){t.call(this),this.subject=new xi(n,r),this.source=e.multicast(this.subject).refCount()}return gt(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Ee),xi=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Mo,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||te}return gt(e,t),Et(e.prototype,de,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(ue.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(ue.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(ue.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);if(!(e.hasCompleted||e.hasFailed)&&r>0)return e.requestedCount=r,jt(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Ee);ve.controlled=function(t,e){return t&&Kt(t)&&(e=t,t=!0),null==t&&(t=!0),new Ci(this,t,e)};var Ni=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}gt(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Vt(this.subscription,oe.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return gt(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=oe.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(_e);return e}(Ee);Ci.prototype.stopAndWait=function(){return new Ni(this)};var Di=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}gt(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Vt(this.subscription,oe.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return gt(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=oe.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(_e);return e}(Ee);Ci.prototype.windowed=function(t){return new Di(this,t)},ve.pipe=function(t){var e=this.pausableBuffered();function n(){e.resume()}return t.addListener("drain",n),e.subscribe(function(n){!t.write(n)&&e.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",n)}),e.resume(),t};var Si=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Vt(this._fn2(e).subscribe(t),e.connect())},e}(Ce);ve.multicast=function(t,e){return D(t)?new Si(this,t,e):new Oi(this,t)},ve.publish=function(t){return t&&D(t)?this.multicast(function(){return new Mo},t):this.multicast(new Mo)},ve.share=function(){return this.publish().refCount()},ve.publishLast=function(t){return t&&D(t)?this.multicast(function(){return new Vo},t):this.multicast(new Vo)},ve.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new Lo(e)},t):this.multicast(new Lo(t))},ve.shareValue=function(t){return this.publishValue(t).refCount()},ve.replay=function(t,e,n,r){return t&&D(t)?this.multicast(function(){return new Wo(e,n,r)},t):this.multicast(new Wo(e,n,r))},ve.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Ai=function(t,e){this._s=t,this._o=e};Ai.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var ki=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return gt(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Ce),Oi=y.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return gt(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return qt;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new ki(this)},e}(Ee);function Kn(t){return t.toArray()}ve.singleInstance=function(){var t,e=this,n=!1;return new Fo(function(r){return(n||(n=!0,t=e.finally(function(){n=!1}).publish().refCount()),t).subscribe(r)})},ve.join=function(t,e,n,r){var i=this;return new Fo(function(o){var s=new At,u=!1,c=!1,h=0,a=0,l=new Wi,f=new Wi,p=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var n=h++,i=new Pt;l.set(n,t),s.add(i);var c=k(e)(t);if(c===A)return o.onError(c.e);i.setDisposable(c.take(1).subscribe(w,p,function(){l.delete(n)&&0===l.size&&u&&o.onCompleted(),s.remove(i)})),f.forEach(function(e){var n=k(r)(t,e);if(n===A)return o.onError(n.e);o.onNext(n)})},p,function(){u=!0,(c||0===l.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var e=a++,i=new Pt;f.set(e,t),s.add(i);var u=k(n)(t);if(u===A)return o.onError(u.e);i.setDisposable(u.take(1).subscribe(w,p,function(){f.delete(e)&&0===f.size&&c&&o.onCompleted(),s.remove(i)})),l.forEach(function(e){var n=k(r)(e,t);if(n===A)return o.onError(n.e);o.onNext(n)})},p,function(){c=!0,(u||0===f.size)&&o.onCompleted()})),s},i)},ve.groupJoin=function(t,e,n,r){var i=this;return new Fo(function(o){var s=new At,u=new Wt(s),c=new Wi,h=new Wi,a=0,l=0,f=function(t){return function(e){e.onError(t)}};function f(t){}return s.add(i.subscribe(function(t){var n=new Mo,i=a++;c.set(i,n);var l=k(r)(t,Ct(n,u));if(l===A)return c.forEach(f(l.e)),o.onError(l.e);o.onNext(l),h.forEach(function(t){n.onNext(t)});var p=new Pt;s.add(p);var d=k(e)(t);if(d===A)return c.forEach(f(d.e)),o.onError(d.e);p.setDisposable(d.take(1).subscribe(w,function(t){c.forEach(f(t)),o.onError(t)},function(){c.delete(i)&&n.onCompleted(),s.remove(p)}))},function(t){c.forEach(f(t)),o.onError(t)},function(){o.onCompleted()})),s.add(t.subscribe(function(t){var e=l++;h.set(e,t);var r=new Pt;s.add(r);var i=k(n)(t);if(i===A)return c.forEach(f(i.e)),o.onError(i.e);r.setDisposable(i.take(1).subscribe(w,function(t){c.forEach(f(t)),o.onError(t)},function(){h.delete(e),s.remove(r)})),c.forEach(function(e){e.onNext(t)})},function(t){c.forEach(f(t)),o.onError(t)})),u},i)},ve.buffer=function(){return this.window.apply(this,arguments).flatMap(Kn)},ve.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?function(t){var e=this;return new Fo(function(n){var r=new Mo,i=new At,o=new Wt(i);return n.onNext(Ct(r,o)),i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),N(t)&&(t=Pe(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new Mo,n.onNext(Ct(r,o))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),o},e)}.call(this,t):"function"==typeof t?function(t){var e=this;return new Fo(function(n){var r=new Mt,i=new At(r),o=new Wt(i),s=new Mo;return n.onNext(Ct(s,o)),i.add(e.subscribe(function(t){s.onNext(t)},function(t){s.onError(t),n.onError(t)},function(){s.onCompleted(),n.onCompleted()})),function e(){var i;try{i=t()}catch(t){return void n.onError(t)}N(i)&&(i=Pe(i));var u=new Pt;r.setDisposable(u);u.setDisposable(i.take(1).subscribe(w,function(t){s.onError(t),n.onError(t)},function(){s.onCompleted(),s=new Mo,n.onNext(Ct(s,o)),e()}))}(),o},e)}.call(this,t):function(t,e){return t.groupJoin(this,e,Be,function(t,e){return e})}.call(this,t,e)};var ji=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new qi(t))},e}(Ce),qi=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.pairwise=function(){return new ji(this)},ve.partition=function(t,e){var n=$(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Fi=function(t){function e(t,e){this.c=t,this.s=e}return gt(e,Ne),e.prototype[H]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}();ve.letBind=ve.let=function(t){return t(this)},Ee.if=function(t,e,n){return Le(function(){return n||(n=Be()),N(e)&&(e=Pe(e)),N(n)&&(n=Pe(n)),"function"==typeof n.now&&(n=Be(n)),t()?e:n})},Ee.for=Ee.forIn=function(t,e,n){return qe(t,e,n).concat()};var Ti=Ee.while=Ee.whileDo=function(t,e){return N(e)&&(e=Pe(e)),function(t,e){return new Fi(t,e)}(t,e).concat()};ve.doWhile=function(t){return gn([this,Ti(t,this)])},Ee.case=function(t,e,n){return Le(function(){N(n)&&(n=Pe(n)),n||(n=Be()),Kt(n)&&(n=Be(n));var r=e[t()];return N(r)&&(r=Pe(r)),r||n})};var Ri=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],i=t[1];if(r.q.length>0){n=r.q.shift();var o=new Pt;r.d.add(o),o.setDisposable(n.subscribe(new Pi(r,i,o))),e([r,i])}else r.isAcquired=!1}return gt(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new Mt,n=new At(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Ce),Pi=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=k(this._p._fn)(t);if(e===A)return this._s.o.onError(e.e);this._s.q.push(e),this._s.activeCount++,this._p._ensureActive(this._s)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(_e);function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.expand=function(t,e){return Kt(e)||(e=te),new Ri(this,t,e)};var Mi=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),qt;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new At,i=0,o=this._sources.length;i<o;i++){var s=this._sources[i];N(s)&&(s=Pe(s)),r.add(s.subscribe(new Vi(t,n,i,this._cb,r)))}return r},e}(Ce),Vi=function(t){function e(e,n,r,i,o){this._o=e,this._s=n,this._i=r,this._cb=i,this._subs=o,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=k(this._cb).apply(null,this._s.results);if(e===A)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(_e);Ee.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=D(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new Mi(e,r)},ve.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Ee.forkJoin.apply(null,e)},ve.manySelect=ve.extend=function(t,e){Kt(e)||(e=y.Scheduler.immediate);var n=this;return Le(function(){var r;return n.map(function(t){var e=new Li(t);return r&&r.onNext(t),r=e,e}).tap(w,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Li=function(t){function e(e){t.call(this),this.head=e,this.tail=new Vo}return gt(e,t),Et(e.prototype,de,{_subscribe:function(t){var e=new At;return e.add(te.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Ee.empty())},onError:function(t){this.onNext(Ee.throw(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Ee),Wi=_.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?s:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();function Ii(t){this.patterns=t}function Bi(t,e){this.expression=t,this.selector=e}function zi(t,e,n){var r=t.get(e);if(!r){var i=new Gi(e,n);return t.set(e,i),i}return r}function Ui(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Wi;for(var r=0,i=this.joinObserverArray.length;r<i;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}Ii.prototype.and=function(t){return new Ii(this.patterns.concat(t))},Ii.prototype.thenDo=function(t){return new Bi(this,t)},Bi.prototype.activate=function(t,e,n){for(var r,i=[],o=(r=e,function(t){r.onError(t)}),s=0,u=this.expression.patterns.length;s<u;s++)i.push(zi(t,this.expression.patterns[s],o));var c=new Ui(i,function(t,e){return function(){var n=k(t.selector).apply(t,arguments);if(n===A)return e.onError(n.e);e.onNext(n)}}(this,e),function(){for(var t=0,e=i.length;t<e;t++)i[t].removeActivePlan(c);n(c)});for(s=0,u=i.length;s<u;s++)i[s].addActivePlan(c);return c},Ui.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Ui.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;t<e;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],i=!1;for(t=0,e=this.joinObserverArray.length;t<e;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Gi=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Pt,this.isDisposed=!1}gt(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;n<r;n++)e[n].match()}},n.error=w,n.completed=w,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(_e);ve.and=function(t){return new Ii([this,t])},ve.thenDo=function(t){return new Ii([this]).thenDo(t)},Ee.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Fo(function(e){var n=[],r=new Wi,i=be(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var o=0,s=t.length;o<s;o++)n.push(t[o].activate(r,i,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(t){return hn(t).subscribe(e)}var u=new At;return r.forEach(function(t){t.subscribe(),u.add(t)}),u})};var Hi=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Ce);function Ki(t,e,n){return new Fo(function(r){var i=t,o=Ht(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();(i=new Date(i.getTime()+o)).getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function Qi(t,e,n){return t===e?new Fo(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):Le(function(){return Ki(new Date(n.now()+t),e,n)})}var Ji=Ee.interval=function(t,e){return Qi(t,t,Kt(e)?e:oe)};Ee.timer=function(t,e,n){var r;return Kt(n)||(n=oe),null!=e&&"number"==typeof e?r=e:Kt(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?function(t,e){return new Hi(t,e)}(t,n):t instanceof Date&&r!==s?Ki(t,e,n):Qi(t,r,n)};function $i(t,e,n){return new Fo(function(r){var i,o=!1,s=new Mt,u=null,c=[],h=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,a;"E"===t.value.kind?((c=[]).push(t),u=t.value.error,a=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),a=!o,o=!0),a&&(null!==u?r.onError(u):(i=new Pt,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,a,l;if(null===u){h=!0;do{a=null,c.length>0&&c[0].timestamp-n.now()<=0&&(a=c.shift().value),null!==a&&a.accept(r)}while(null!==a);l=!1,s=0,c.length>0?(l=!0,s=Math.max(0,c[0].timestamp-n.now())):o=!1,h=!1,null!==(i=u)?r.onError(i):l&&e(null,s)}}))))}),new Vt(i,s)},t)}ve.delay=function(){var t,e,n,r,i,o=arguments[0];if("number"==typeof o||o instanceof Date){var s=o,u=arguments[1];return Kt(u)||(u=oe),s instanceof Date?function(t,e,n){return Le(function(){return $i(t,e-n.now(),n)})}(this,s,u):$i(this,s,u)}if(Ee.isObservable(o)||D(o))return t=this,e=o,n=arguments[1],D(e)?i=e:(r=e,i=n),new Fo(function(e){var n=new At,o=!1,s=new Mt;function u(){s.setDisposable(t.subscribe(function(t){var r=k(i)(t);if(r===A)return e.onError(r.e);var o=new Pt;n.add(o),o.setDisposable(r.subscribe(function(){e.onNext(t),n.remove(o),c()},function(t){e.onError(t)},function(){e.onNext(t),n.remove(o),c()}))},function(t){e.onError(t)},function(){o=!0,s.dispose(),c()}))}function c(){o&&0===n.length&&e.onCompleted()}return r?s.setDisposable(r.subscribe(u,function(t){e.onError(t)},u)):u(),new Vt(s,n)},t);throw new Error("Invalid arguments")};var Xi=function(t){function e(e,n,r){Kt(r)||(r=oe),this.source=e,this._dt=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt;return new Vt(this.source.subscribe(new Yi(t,this._dt,this._s,e)),e)},e}(Ce),Yi=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new Pt;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(_e);function Kn(t){return t.toArray()}function Kn(t){return t.toArray()}ve.debounce=function(){if(D(arguments[0]))return t=this,e=arguments[0],new Fo(function(n){var r,i=!1,o=new Mt,s=0,u=t.subscribe(function(t){var u=k(e)(t);if(u===A)return n.onError(u.e);N(u)&&(u=Pe(u)),i=!0,r=t;var c=++s,h=new Pt;o.setDisposable(h),h.setDisposable(u.subscribe(function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()},function(t){n.onError(t)},function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new Vt(u,o)},t);if("number"==typeof arguments[0])return new Xi(this,arguments[0],arguments[1]);throw new Error("Invalid arguments");var t,e},ve.windowWithTime=ve.windowTime=function(t,e,n){var r,i=this;return null==e&&(r=t),Kt(n)||(n=oe),"number"==typeof e?r=e:Kt(e)&&(r=t,n=e),new Fo(function(e){var o,s,u=r,c=t,h=[],a=new Mt,l=0;return o=new At(a),s=new Wt(o),h.push(new Mo),e.onNext(Ct(h[0],s)),function t(){var i=new Pt,o=!1,f=!1;a.setDisposable(i),c===u?(o=!0,f=!0):c<u?o=!0:f=!0;var p=o?c:u,d=p-l;l=p,o&&(c+=r),f&&(u+=r),i.setDisposable(n.scheduleFuture(null,d,function(){if(f){var n=new Mo;h.push(n),e.onNext(Ct(n,s))}o&&h.shift().onCompleted(),t()}))}(),o.add(i.subscribe(function(t){for(var e=0,n=h.length;e<n;e++)h[e].onNext(t)},function(t){for(var n=0,r=h.length;n<r;n++)h[n].onError(t);e.onError(t)},function(){for(var t=0,n=h.length;t<n;t++)h[t].onCompleted();e.onCompleted()})),s},i)},ve.windowWithTimeOrCount=ve.windowTimeOrCount=function(t,e,n){var r=this;return Kt(n)||(n=oe),new Fo(function(i){var o=new Mt,s=new At(o),u=new Wt(s),c=0,h=0,a=new Mo;function l(e){var r=new Pt;o.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===h){c=0;var t=++h;a.onCompleted(),a=new Mo,i.onNext(Ct(a,u)),l(t)}}))}return i.onNext(Ct(a,u)),l(0),s.add(r.subscribe(function(t){var n=0,r=!1;a.onNext(t),++c===e&&(r=!0,c=0,n=++h,a.onCompleted(),a=new Mo,i.onNext(Ct(a,u))),r&&l(n)},function(t){a.onError(t),i.onError(t)},function(){a.onCompleted(),i.onCompleted()})),u},r)},ve.bufferWithTime=ve.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(Kn)},ve.bufferWithTimeOrCount=ve.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(Kn)};var Zi=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new to(t,this._s))},e}(Ce),to=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.timeInterval=function(t){return Kt(t)||(t=oe),new Zi(this,t)};var eo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new no(t,this._s))},e}(Ce),no=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.timestamp=function(t){return Kt(t)||(t=oe),new eo(this,t)};var ro=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Pt};return e.sourceSubscription.setDisposable(this.source.subscribe(new oo(e))),new Vt(e.sourceSubscription,this._sampler.subscribe(new io(e)))},e}(Ce),io=function(t){function e(e){this._s=e,t.call(this)}return gt(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(_e),oo=function(t){function e(e){this._s=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(_e);ve.sample=function(t,e){return Kt(e)||(e=oe),new ro(this,"number"==typeof t?Ji(t,e):t)};var so=y.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};so.prototype=Object.create(Error.prototype),ve.timeout=function(){var t,e,n,r,i=arguments[0];if(i instanceof Date||"number"==typeof i)return t=this,e=i,n=arguments[1],r=arguments[2],Kt(n)&&(r=n,n=hn(new so)),n instanceof Error&&(n=hn(n)),Kt(r)||(r=oe),Ee.isObservable(n)||(n=hn(new so)),new Fo(function(i){var o=0,s=new Pt,u=new Mt,c=!1,h=new Mt;function a(){var t=o;h.setDisposable(r.scheduleFuture(null,e,function(){(c=o===t)&&(N(n)&&(n=Pe(n)),u.setDisposable(n.subscribe(i)))}))}return u.setDisposable(s),a(),s.setDisposable(t.subscribe(function(t){c||(o++,i.onNext(t),a())},function(t){c||(o++,i.onError(t))},function(){c||(o++,i.onCompleted())})),new Vt(u,h)},t);if(Ee.isObservable(i)||D(i))return function(t,e,n,r){return D(e)&&(r=n,n=e,e=en()),Ee.isObservable(r)||(r=hn(new so)),new Fo(function(i){var o=new Mt,s=new Mt,u=new Pt;o.setDisposable(u);var c=0,h=!1;function a(t){var e=c,n=new Pt;function u(){return h=e===c}s.setDisposable(n),n.setDisposable(t.subscribe(function(){u()&&o.setDisposable(r.subscribe(i)),n.dispose()},function(t){u()&&i.onError(t)},function(){u()&&o.setDisposable(r.subscribe(i))}))}function l(){var t=!h;return t&&c++,t}return a(e),u.setDisposable(t.subscribe(function(t){if(l()){i.onNext(t);var e=k(n)(t);if(e===A)return i.onError(e.e);a(N(e)?Pe(e):e)}},function(t){l()&&i.onError(t)},function(){l()&&i.onCompleted()})),new Vt(o,s)},t)}(this,i,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var uo=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=k(t.self._itrFn)(t.newState),t.newState===A)return t.o.onError(t.newState.e);if(t.hasResult=k(t.self._cndFn)(t.newState),t.hasResult===A)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=k(t.self._resFn)(t.newState),t.result===A)return t.o.onError(t.result.e);var n=k(t.self._timeFn)(t.newState);if(n===A)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Ce);Ee.generateWithAbsoluteTime=function(t,e,n,r,i,o){return Kt(o)||(o=oe),new uo(t,e,n,r,i,o)};var co=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=k(t.self._itrFn)(t.newState),t.newState===A)return t.o.onError(t.newState.e);if(t.hasResult=k(t.self._cndFn)(t.newState),t.hasResult===A)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=k(t.self._resFn)(t.newState),t.result===A)return t.o.onError(t.result.e);var n=k(t.self._timeFn)(t.newState);if(n===A)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Ce);Ee.generateWithRelativeTime=function(t,e,n,r,i,o){return Kt(o)||(o=oe),new co(t,e,n,r,i,o)};var ho=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1];e[2].setDisposable(n.subscribe(r))}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Ce);ve.delaySubscription=function(t,e){return Kt(e)||(e=oe),new ho(this,t,e)};var ao=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lo(t,this))},e}(Ce),lo=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(_e);ve.skipLastWithTime=function(t,e){return Kt(e)||(e=oe),new ao(this,t,e)};var fo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t,this._d,this._s))},e}(Ce),po=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(_e);ve.takeLastWithTime=function(t,e){return Kt(e)||(e=oe),new fo(this,t,e)},ve.takeLastBufferWithTime=function(t,e){var n=this;return Kt(e)||(e=oe),new Fo(function(r){var i=[];return n.subscribe(function(n){var r=e.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},n)};var bo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Ce);ve.takeWithTime=function(t,e){return Kt(e)||(e=oe),new bo(this,t,e)};var vo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new _o(t,this)))},e}(Ce),_o=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipWithTime=function(t,e){return Kt(e)||(e=oe),new vo(this,t,e)};var yo=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return gt(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new Vt(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new wo(t,this)))},e}(Ce),wo=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipUntilWithTime=function(t,e){return Kt(e)||(e=oe),new yo(this,t,e)},ve.takeUntilWithTime=function(t,e){Kt(e)||(e=oe);var n=this;return new Fo(function(r){return new Vt(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},ve.throttle=function(t,e){Kt(e)||(e=oe);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Fo(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var mo=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=k(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===A&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(_e);ve.transduce=function(t){var e=this;return new Fo(function(n){var r=t(function(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}(n));return e.subscribe(new mo(n,r))},e)};var go=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Pt,n=new At,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new Eo(r))),n},e}(Ce),Eo=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,N(t)&&(t=Pe(t));var e=new Pt;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(_e);ve.switchFirst=function(){return new go(this)},ve.flatMapFirst=ve.exhaustMap=function(t,e,n){return new xe(this,t,e,n).switchFirst()},ve.flatMapWithMaxConcurrent=ve.flatMapMaxConcurrent=function(t,e,n,r){return new xe(this,e,n,r).merge(t)};var Co=y.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new Dt(1024),t.call(this)}gt(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=G,n.toAbsoluteTime=G,n.toRelativeTime=G,n.schedulePeriodic=function(t,e,n){return new $t(this,t,e,n).start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new B;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new B;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new B;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){var r=this;var i=new zt(this,t,function(t,e){return r.queue.remove(i),n(t,e)},e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(Gt);function xo(t){this.predicate=t}function No(t){this.predicate=t}y.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,i=n||C;t.call(this,r,i)}gt(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(y.VirtualTimeScheduler),xo.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},No.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var Do=y.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return new So(t,"function"==typeof e?new xo(e):ue.createOnNext(e))},onError:function(t,e){return new So(t,"function"==typeof e?new No(e):ue.createOnError(e))},onCompleted:function(t){return new So(t,ue.createOnCompleted())},subscribe:function(t,e){return new Ao(t,e)}},So=y.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||E};So.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},So.prototype.toString=function(){return this.value.toString()+"@"+this.time};var Ao=y.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};Ao.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},Ao.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"},(y.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)}).prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var ko=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}gt(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new So(this.scheduler.clock,ue.createOnNext(t)))},n.onError=function(t){this.messages.push(new So(this.scheduler.clock,ue.createOnError(t)))},n.onCompleted=function(){this.messages.push(new So(this.scheduler.clock,ue.createOnCompleted()))},e}(de);function Oo(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;r<i;r++){var o=this.messages[r];!function(e){t.scheduleAbsolute(null,o.time,function(){for(var t=n.observers.slice(0),r=0,i=t.length;r<i;r++)e.accept(t[r]);return qt})}(o.value)}}Oo.prototype.then=function(t,e){var n=this;this.subscriptions.push(new Ao(this.scheduler.clock));var r,i=this.subscriptions.length-1,o=y.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var c=n.scheduler.clock;r=new Oo(n.scheduler,[y.ReactiveTest.onNext(c,s),y.ReactiveTest.onCompleted(c)])}var h=n.observers.indexOf(o);n.observers.splice(h,1),n.subscriptions[i]=new Ao(n.subscriptions[i].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(o);n.observers.splice(r,1),n.subscriptions[i]=new Ao(n.subscriptions[i].subscribe,n.scheduler.clock)});return this.observers.push(o),r||new Oo(this.scheduler,this.messages)};var jo=function(t){function e(e,n){t.call(this);var r,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var o=0,s=this.messages.length;o<s;o++)!function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;n<r;n++)t.accept(e[n]);return qt})}((r=this.messages[o]).value)}return gt(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new Ao(this.scheduler.clock));var n=this.subscriptions.length-1;return jt(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new Ao(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Ee),qo=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return gt(e,t),e.prototype._subscribe=function(t){var e,n=this;this.subscriptions.push(new Ao(this.scheduler.clock));for(var r=this.subscriptions.length-1,i=new At,o=0,s=this.messages.length;o<s;o++)!function(r){i.add(n.scheduler.scheduleRelative(null,e.time,function(){return r.accept(t),qt}))}((e=this.messages[o]).value);return jt(function(){n.subscriptions[r]=new Ao(n.subscriptions[r].subscribe,n.scheduler.clock),i.dispose()})},e}(Ee);y.TestScheduler=function(t){function e(t,e){return t>e?1:t<e?-1:0}function n(){t.call(this,0,e)}return gt(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=Do.created),null==e.subscribed&&(e.subscribed=Do.subscribed),null==e.disposed&&(e.disposed=Do.disposed);var n,r,i=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),qt}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(i),qt}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),qt}),this.start(),i},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new jo(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new qo(this,t)},n.prototype.createResolvedPromise=function(t,e){return new Oo(this,[y.ReactiveTest.onNext(t,e),y.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new Oo(this,[y.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new ko(this)},n}(Co);var Fo=y.AnonymousObservable=function(t){function e(t,e){var n,r=e[0],i=e[1],o=k(i.__subscribe).call(i,r);o!==A||r.fail(A.e)||O(A.e),r.setDisposable((n=o)&&D(n.dispose)?n:D(n)?jt(n):qt)}function n(e,n){this.source=n,this.__subscribe=e,t.call(this)}return gt(n,t),n.prototype._subscribe=function(t){var n=new To(t),r=[n,this];return te.scheduleRequired()?te.schedule(r,e):e(0,r),n},n}(Ee),To=function(t){function e(e){t.call(this),this.observer=e,this.m=new Pt}gt(e,t);var n=e.prototype;return n.next=function(t){var e=k(this.observer.onNext).call(this.observer,t);e===A&&(this.dispose(),O(e.e))},n.error=function(t){var e=k(this.observer.onError).call(this.observer,t);this.dispose(),e===A&&O(e.e)},n.completed=function(){var t=k(this.observer.onCompleted).call(this.observer);this.dispose(),t===A&&O(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(_e),Ro=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._m.getDisposable(),this._u.subscribe(t))},e}(Ce),Po=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Ro(r,n):n}return gt(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Ee),Mo=y.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Tt(this),this.isStopped?this.hasError?(t.onError(this.error),qt):(t.onCompleted(),qt):(this.observers.push(t),new Ai(this,t))},hasObservers:function(){return Tt(this),this.observers.length>0},onCompleted:function(){if(Tt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=S(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Tt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=S(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Tt(this),!this.isStopped)for(var e=0,n=S(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Io(t,e)},e}(Ee),Vo=y.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Tt(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),qt):(this.observers.push(t),new Ai(this,t))},hasObservers:function(){return Tt(this),this.observers.length>0},onCompleted:function(){var t;if(Tt(this),!this.isStopped){this.isStopped=!0;var e=S(this.observers),n=e.length;if(this.hasValue)for(t=0;t<n;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Tt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=S(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Tt(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Ee),Lo=y.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Tt(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),qt):(this.observers.push(t),t.onNext(this.value),new Ai(this,t))},getValue:function(){return Tt(this),this.hasError&&O(this.error),this.value},hasObservers:function(){return Tt(this),this.observers.length>0},onCompleted:function(){if(Tt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=S(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Tt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=S(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Tt(this),!this.isStopped){this.value=t;for(var e=0,n=S(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Ee),Wo=y.ReplaySubject=function(t){var e=Math.pow(2,53)-1;function n(n,r,i){this.bufferSize=null==n?e:n,this.windowSize=null==r?e:r,this.scheduler=i||te,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}return gt(n,t),Et(n.prototype,de.prototype,{_subscribe:function(t){Tt(this);var e,n,r=new me(this.scheduler,t),i=(e=this,n=r,jt(function(){n.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(n),1)}));this._trim(this.scheduler.now()),this.observers.push(r);for(var o=0,s=this.q.length;o<s;o++)r.onNext(this.q[o].value);return this.hasError?r.onError(this.error):this.isStopped&&r.onCompleted(),r.ensureActive(),i},hasObservers:function(){return Tt(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Tt(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=S(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(Tt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=S(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Tt(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=S(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Ee),Io=y.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Ee);y.Pauser=function(t){function e(){t.call(this)}return gt(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Mo),_.Rx=y,(o=function(){return y}.call(e,n,e,t))===s||(t.exports=o);var Bo=V()}).call(this)}).call(this,n(1)(t),n(2),n(3))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,h=[],a=!1,l=-1;function f(){a&&c&&(a=!1,c.length?h=c.concat(h):l=-1,h.length&&p())}function p(){if(!a){var t=u(f);a=!0;for(var e=h.length;e;){for(c=h,h=[];++l<e;)c&&c[l].run();l=-1,e=h.length}c=null,a=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function b(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||a||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e);var r=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},i=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=function(){function t(t,e){this.viewFile=t,this.loader=e}return t.create=function(e,n){return new t(e,n)},t.prototype.load=function(){return r(this,void 0,void 0,function(){var t,e,n;return i(this,function(r){switch(r.label){case 0:return this.element?[2,this.element]:[4,this.loader.load(this.viewFile)];case 1:if(t=r.sent(),!(e=(new DOMParser).parseFromString(t,"text/html").firstChild))throw new Error("Could not load view from "+this.viewFile);return n=e.getElementsByTagName("body"),this.element=n&&n[0].firstElementChild?n[0].firstElementChild:e,[2,this.element]}})})},t}(),s=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},u=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},c=function(){function t(t,e){this.ViewFile="EditEntryCardView.html",this.view=o.create(this.ViewFile,t),this.viewModel=e}return t.prototype.loadIntoParent=function(t){return s(this,void 0,void 0,function(){var e,n,r,i=this;return u(this,function(o){switch(o.label){case 0:return[4,this.view.load()];case 1:return e=o.sent(),t.appendChild(e),(n=e.querySelector("input[id='answerInput']")).value=this.viewModel.answer,(r=e.querySelector("input[id='questionInput']")).value=this.viewModel.question,e.querySelector("button[id='saveEntry']").onclick=function(t){i.viewModel.Save(),n.value=i.viewModel.answer,r.value=i.viewModel.question},[2]}})})},t}(),h=function(){function t(t){this.factory=t}return Object.defineProperty(t.prototype,"Value",{get:function(){return this.value||(this.value=this.factory())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsCreated",{get:function(){return!!this.value},enumerable:!0,configurable:!0}),t.Create=function(e){return new t(e)},t}(),a=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},l=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},f=function(){function t(t){var e=this;this.ViewFile="CardView.html",this.view=o.create(this.ViewFile,t),this.element=h.Create(function(){return a(e,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.view.load()];case 1:return[2,t.sent()]}})})})}return Object.defineProperty(t.prototype,"viewModel",{get:function(){return this._viewModel},set:function(t){this._viewModel=t},enumerable:!0,configurable:!0}),t.prototype.detach=function(){return a(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return this.element.IsCreated?[4,this.element.Value]:[3,2];case 1:t.sent().remove(),t.label=2;case 2:return[2]}})})},t.prototype.loadIntoParent=function(t){return a(this,void 0,void 0,function(){var e,n;return l(this,function(r){switch(r.label){case 0:return[4,this.detach()];case 1:return r.sent(),n=(e=t).appendChild,[4,this.element.Value];case 2:return n.apply(e,[r.sent()]),[2]}})})},t}(),p=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},d=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},b=function(){function t(t,e){var n=this;this.ViewFile="EditorPage.html",this.cardViews=[],this.loader=t,this.viewModel=e,this.element=h.Create(function(){return p(n,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,o.create(this.ViewFile,t).load()];case 1:return[2,e.sent()]}})})})}return t.prototype.loadIntoParent=function(t){return p(this,void 0,void 0,function(){var e,n,r,i=this;return d(this,function(o){switch(o.label){case 0:return[4,this.element.Value];case 1:if(e=o.sent(),t.appendChild(e),n=e.querySelector("div[id='editorContainer']"),r=e.querySelector("div[id='cardsContainer']"),!n||!r)throw Error("Could not find all views in layout.");return[4,this.viewModel.load()];case 2:return o.sent(),[4,new c(this.loader,this.viewModel.EditEntryViewModel).loadIntoParent(n)];case 3:return o.sent(),this.viewModel.flashCards.subscribe(function(t){return i.onFlashCardsChanged(t,r)}),[2]}})})},t.prototype.onFlashCardsChanged=function(t,e){return p(this,void 0,void 0,function(){var n,r,i,o;return d(this,function(s){switch(s.label){case 0:if(!((n=t.length-this.cardViews.length)<0))return[3,1];for(i=n;i<0;){if(!(r=this.cardViews.pop()))throw new Error("Controller undefined when attempting to remove.");r.detach(),++i}return[3,4];case 1:if(!(n>0))return[3,4];i=0,s.label=2;case 2:return i<n?[4,(o=new f(this.loader)).loadIntoParent(e)]:[3,4];case 3:return s.sent(),this.cardViews.push(o),++i,[3,2];case 4:return t.forEach(function(t){}),[2]}})})},t}(),v=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},_=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},y=function(){function t(t){this.databaseVersion=1,this.dbProvider=t}return t.prototype.save=function(t){return v(this,void 0,void 0,function(){var e,n;return _(this,function(r){switch(r.label){case 0:return[4,this.open()];case 1:return e=r.sent(),n=e.transaction("Entries","readwrite"),n.objectStore("Entries").add(t),[2]}})})},t.prototype.getAll=function(){return v(this,void 0,void 0,function(){var t,e;return _(this,function(n){switch(n.label){case 0:return[4,this.open()];case 1:return t=n.sent(),e=t.transaction("Entries").objectStore("Entries").getAll(),[2,new Promise(function(t,n){e.onsuccess=function(n){var r=e.result||[];t(r)}})]}})})},t.prototype.open=function(){var t=this.dbProvider.open("FlashCards",this.databaseVersion);return new Promise(function(e,n){t.onupgradeneeded=function(e){var n=t.result;n&&n.createObjectStore("Entries",{autoIncrement:!0})},t.onsuccess=function(r){var i=t.result;i?e(i):n(new Error("Could not open FlashCards database."))}})},t}(),w=function(){function t(){}return t.Utf8ArrayToStr=function(t){var e,n,r,i,o,s;for(e="",r=t.length,n=0;n<r;)switch((i=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(i);break;case 12:case 13:o=t[n++],e+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=t[n++],s=t[n++],e+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&s)<<0)}return e},t}(),m=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},g=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},E=function(){function t(){}return t.createFetchHtmlLoader=function(t){return new C(t,"./html/")},t}(),C=function(){function t(t,e){this.root=e,this.globalFetch=t}return t.prototype.load=function(t){return m(this,void 0,void 0,function(){var e,n,r,i;return g(this,function(o){switch(o.label){case 0:return e=this.root+t,[4,this.globalFetch.fetch(e)];case 1:return(n=o.sent())&&n.body?[4,n.body.getReader().read()]:[2,""];case 2:return r=o.sent(),r.done,i=r.value,[2,w.Utf8ArrayToStr(i)]}})})},t}(),x=n(0),N=function(){return function(t,e){this.question=t,this.answer=e}}(),D=function(){function t(t){this._question="",this._answer="",this.savedSubject=new x.Subject,this.entryService=t}return Object.defineProperty(t.prototype,"answer",{get:function(){return this._answer},set:function(t){this._answer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this._question},set:function(t){this._question},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saved",{get:function(){return this.savedSubject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.Save=function(){var t=new N(this.question,this.answer);this.entryService.save(t),this.savedSubject.onNext(t),this.question="",this.answer=""},t}(),S=function(){function t(t,e){this.question=t,this.answer=e}return Object.defineProperty(t.prototype,"Question",{get:function(){return this.question},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Answer",{get:function(){return this.answer},enumerable:!0,configurable:!0}),t}(),A=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},k=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},O=function(){function t(t){var e=this;this.flashCardsSubject=new x.BehaviorSubject([]),this.entryService=t,this.editEntryViewModel=new D(t),this.editEntryViewModel.saved.subscribe(function(t){var n=e.flashCardsSubject.getValue();n.push(new S(t.question,t.answer)),e.flashCardsSubject.onNext(n)})}return Object.defineProperty(t.prototype,"EditEntryViewModel",{get:function(){return this.editEntryViewModel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flashCards",{get:function(){return this.flashCardsSubject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.load=function(){return A(this,void 0,void 0,function(){var t;return k(this,function(e){switch(e.label){case 0:return[4,this.entryService.getAll()];case 1:return t=e.sent(),this.flashCardsSubject.onNext(t.map(function(t){return new S(t.question,t.answer)})),[2]}})})},t}(),j=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},q=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},F=function(){function t(t,e){var n=this;this.entryService=new y(t.indexedDB),t.onload=function(){return j(n,void 0,void 0,function(){return q(this,function(t){switch(t.label){case 0:return[4,this.onWindowLoaded()];case 1:return t.sent(),[2]}})})},"serviceWorker"in navigator&&this.registerServiceWorker(navigator.serviceWorker),t.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.promptInstallation({platforms:t.platforms,userChoice:t.userChoice,prompt:function(){return t.prompt.call(t)}})})}return t.prototype.onWindowLoaded=function(){return j(this,void 0,void 0,function(){var t,e,n,r;return q(this,function(i){switch(i.label){case 0:return[4,navigator.serviceWorker.ready];case 1:return t=i.sent(),t.active?(e=E.createFetchHtmlLoader(window),(n=document.getElementById("main"))?(r=new O(this.entryService),new b(e,r).loadIntoParent(n),[2]):[2]):[2]}})})},t.prototype.onServiceWorkerChanged=function(t){var e=document.getElementById("butRefresh");e&&(e.addEventListener("click",function(){t.postMessage({action:"skipWaiting"})}),e.hidden=!1)},t.prototype.registerServiceWorker=function(t){var e,n=this;t.register("/service-worker.js").then(function(t){t.addEventListener("updatefound",function(){if(t.installing){var e=t.installing;e.addEventListener("statechange",function(){switch(e.state){case"installed":navigator.serviceWorker.controller&&n.onServiceWorkerChanged(e)}})}})}),t.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})},t}(),T=function(){function t(){}return t.prototype.promptInstallation=function(t){var e=document.getElementById("butAdd");e&&(e.hidden=!1,e.onclick=t.prompt)},t}();new F(window,new T)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4L2Rpc3QvcnguYWxsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlldy9WaWV3LnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvQ29udHJvbGxlcnMvRWRpdEVudHJ5Q29udHJvbGxlci50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL0NvcmUvTGF6eS9MYXp5LnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvQ29udHJvbGxlcnMvQ2FyZFZpZXdDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvQ29udHJvbGxlcnMvRWRpdG9yUGFnZUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9TZXJ2aWNlcy9FbnRyeVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9UZXh0VXRpbHMvVXRmOFBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL1ZpZXcvVmlld0xvYWRlci50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL01vZGVscy9FbnRyeS50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL1ZpZXdNb2RlbHMvRWRpdEVudHJ5Vmlld01vZGVsLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlld01vZGVscy9GbGFzaENhcmRWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9WaWV3TW9kZWxzL0VkaXRvclBhZ2VWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcHAudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWwiLCJwcm9jZXNzIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJ1bmRlZmluZWQiLCJvYmplY3RUeXBlcyIsImZ1bmN0aW9uIiwiY2hlY2tHbG9iYWwiLCJpc0ZuIiwiZnJlZUV4cG9ydHMiLCJub2RlVHlwZSIsImZyZWVNb2R1bGUiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJzZWxmIiwiZnJlZVdpbmRvdyIsIndpbmRvdyIsIm1vZHVsZUV4cG9ydHMiLCJ0aGlzR2xvYmFsIiwidGhpcyIsInJvb3QiLCJGdW5jdGlvbiIsIlJ4IiwiaW50ZXJuYWxzIiwiY29uZmlnIiwiUHJvbWlzZSIsImhlbHBlcnMiLCJub29wIiwiaWRlbnRpdHkiLCJ4IiwiZGVmYXVsdE5vdyIsIkRhdGUiLCJub3ciLCJkZWZhdWx0Q29tcGFyZXIiLCJ5IiwiaXNFcXVhbCIsImRlZmF1bHRTdWJDb21wYXJlciIsImRlZmF1bHRFcnJvciIsImRlZmF1bHRLZXlTZXJpYWxpemVyIiwidG9TdHJpbmciLCJlcnIiLCJpc1Byb21pc2UiLCJzdWJzY3JpYmUiLCJ0aGVuIiwiaXNGdW5jdGlvbiIsImNsb25lQXJyYXkiLCJhcnIiLCJhIiwibGVuIiwibGVuZ3RoIiwicHVzaCIsImVycm9yT2JqIiwiZSIsInRyeUNhdGNoIiwiZm4iLCJUeXBlRXJyb3IiLCJ0cnlDYXRjaFRhcmdldCIsImFwcGx5IiwiYXJndW1lbnRzIiwidGhyb3dlciIsImxvbmdTdGFja1N1cHBvcnQiLCJoYXNTdGFja3MiLCJzdGFja3MiLCJFcnJvciIsInN0YWNrIiwickZpbGVOYW1lIiwiclN0YXJ0aW5nTGluZSIsImNhcHR1cmVMaW5lIiwiU1RBQ0tfSlVNUF9TRVBBUkFUT1IiLCJtYWtlU3RhY2tUcmFjZUxvbmciLCJlcnJvciIsIm9ic2VydmFibGUiLCJpbmRleE9mIiwic291cmNlIiwidW5zaGlmdCIsImNvbmNhdGVkU3RhY2tzIiwiam9pbiIsInN0YWNrU3RyaW5nIiwibGluZXMiLCJzcGxpdCIsImRlc2lyZWRMaW5lcyIsImxpbmUiLCJpc0ludGVybmFsRnJhbWUiLCJzdGFja0xpbmUiLCJmaWx0ZXJTdGFja1N0cmluZyIsImZpbGVOYW1lQW5kTGluZU51bWJlciIsImdldEZpbGVOYW1lQW5kTGluZU51bWJlciIsImZpbGVOYW1lIiwibGluZU51bWJlciIsInJFbmRpbmdMaW5lIiwiYXR0ZW1wdDEiLCJleGVjIiwiTnVtYmVyIiwiYXR0ZW1wdDIiLCJhdHRlbXB0MyIsIkVtcHR5RXJyb3IiLCJtZXNzYWdlIiwiT2JqZWN0RGlzcG9zZWRFcnJvciIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIiwiTm90U3VwcG9ydGVkRXJyb3IiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwibm90SW1wbGVtZW50ZWQiLCIkaXRlcmF0b3IkIiwibm90U3VwcG9ydGVkIiwiaXRlcmF0b3IiLCJTZXQiLCJkb25lRW51bWVyYXRvciIsImRvbmUiLCJpc0l0ZXJhYmxlIiwiaXNBcnJheUxpa2UiLCJiaW5kQ2FsbGJhY2siLCJmdW5jIiwidGhpc0FyZyIsImFyZ0NvdW50IiwiYXJnIiwiaW5kZXgiLCJjb2xsZWN0aW9uIiwiYXJnc1RhZyIsImFycmF5VGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsIm51bWJlclRhZyIsIm9iamVjdFRhZyIsInJlZ2V4cFRhZyIsInN0cmluZ1RhZyIsInR5cGVkQXJyYXlUYWdzIiwib2JqZWN0UHJvdG8iLCJvYmpUb1N0cmluZyIsIk1BWF9TQUZFX0lOVEVHRVIiLCJNYXRoIiwicG93Iiwia2V5cyIsImhhc0RvbnRFbnVtQnVnIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJkb250RW51bXMiLCJkb250RW51bXNMZW5ndGgiLCJvYmoiLCJwcm9wIiwicmVzdWx0IiwiaXNPYmplY3QiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNMZW5ndGgiLCJpc0hvc3RPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJhcnJheVNvbWUiLCJhcnJheSIsInByZWRpY2F0ZSIsImJhc2VJc0VxdWFsRGVlcCIsIm90aGVyIiwiZXF1YWxGdW5jIiwiaXNMb29zZSIsInN0YWNrQSIsInN0YWNrQiIsIm9iaklzQXJyIiwib3RoSXNBcnIiLCJvYmpUYWciLCJvdGhUYWciLCJvYmpJc09iaiIsIm90aElzT2JqIiwiaXNTYW1lVGFnIiwidGFnIiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsImFyckxlbmd0aCIsIm90aExlbmd0aCIsImFyclZhbHVlIiwib3RoVmFsdWUiLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsInNraXBDdG9yIiwib2JqVmFsdWUiLCJvYmpDdG9yIiwiY29uc3RydWN0b3IiLCJvdGhDdG9yIiwicG9wIiwiYmFzZUlzRXF1YWwiLCJpbmhlcml0cyIsInNsaWNlIiwiY2hpbGQiLCJwYXJlbnQiLCJfXyIsImFkZFByb3BlcnRpZXMiLCJzb3VyY2VzIiwiaWR4IiwibG4iLCJhZGRSZWYiLCJ4cyIsIkFub255bW91c09ic2VydmFibGUiLCJvYnNlcnZlciIsIkJpbmFyeURpc3Bvc2FibGUiLCJnZXREaXNwb3NhYmxlIiwiYXJyYXlJbml0aWFsaXplIiwiY291bnQiLCJmYWN0b3J5IiwiSW5kZXhlZEl0ZW0iLCJpZCIsImNvbXBhcmVUbyIsIlByaW9yaXR5UXVldWUiLCJjYXBhY2l0eSIsIml0ZW1zIiwicHJpb3JpdHlQcm90byIsImlzSGlnaGVyUHJpb3JpdHkiLCJsZWZ0IiwicmlnaHQiLCJwZXJjb2xhdGUiLCJ0ZW1wIiwiaGVhcGlmeSIsImZpcnN0IiwicGVlayIsInJlbW92ZUF0IiwiZGVxdWV1ZSIsImVucXVldWUiLCJpdGVtIiwicmVtb3ZlIiwiQ29tcG9zaXRlRGlzcG9zYWJsZSIsImFyZ3MiLCJkaXNwb3NhYmxlcyIsImlzRGlzcG9zZWQiLCJDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlIiwiYWRkIiwiZGlzcG9zZSIsInNob3VsZERpc3Bvc2UiLCJzcGxpY2UiLCJjdXJyZW50RGlzcG9zYWJsZXMiLCJEaXNwb3NhYmxlIiwiYWN0aW9uIiwiZGlzcG9zYWJsZUNyZWF0ZSIsImRpc3Bvc2FibGVFbXB0eSIsImVtcHR5IiwiaXNEaXNwb3NhYmxlIiwiY2hlY2tEaXNwb3NlZCIsImRpc3Bvc2FibGUiLCJkaXNwb3NhYmxlRml4dXAiLCJfZml4dXAiLCJTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSIsImN1cnJlbnQiLCJzZXREaXNwb3NhYmxlIiwib2xkIiwiU2VyaWFsRGlzcG9zYWJsZSIsInNlY29uZCIsIl9maXJzdCIsIl9zZWNvbmQiLCJvbGQxIiwib2xkMiIsIk5BcnlEaXNwb3NhYmxlIiwiX2Rpc3Bvc2FibGVzIiwiUmVmQ291bnREaXNwb3NhYmxlIiwiSW5uZXJEaXNwb3NhYmxlIiwiaXNJbm5lckRpc3Bvc2VkIiwidW5kZXJseWluZ0Rpc3Bvc2FibGUiLCJpc1ByaW1hcnlEaXNwb3NlZCIsIlNjaGVkdWxlZERpc3Bvc2FibGUiLCJzY2hlZHVsZXIiLCJzY2hlZHVsZUl0ZW0iLCJzY2hlZHVsZSIsIlNjaGVkdWxlZEl0ZW0iLCJzdGF0ZSIsImR1ZVRpbWUiLCJjb21wYXJlciIsImludm9rZSIsImludm9rZUNvcmUiLCJpc0NhbmNlbGxlZCIsInNjaGVkdWxlclByb3RvIiwiU2NoZWR1bGVyIiwiaXNTY2hlZHVsZXIiLCJzY2hlZHVsZUZ1dHVyZSIsImR0Iiwibm9ybWFsaXplIiwiX3NjaGVkdWxlRnV0dXJlIiwidGltZVNwYW4iLCJub3JtYWxpemVUaW1lIiwiaW52b2tlUmVjSW1tZWRpYXRlIiwicGFpciIsImdyb3VwIiwic3RhdGUyIiwiaXNBZGRlZCIsImlzRG9uZSIsIl8iLCJzdGF0ZTMiLCJpbm5lckFjdGlvbiIsInNjaGVkdWxlV29yayIsImludm9rZVJlY0RhdGUiLCJkdWVUaW1lMSIsInNjaGVkdWxlUmVjdXJzaXZlIiwic2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUiLCJzY2hlZHVsZVBlcmlvZGljIiwicGVyaW9kIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2F0Y2hFcnJvciIsImhhbmRsZXIiLCJDYXRjaFNjaGVkdWxlciIsInNjaGVkdWxlTWV0aG9kIiwiY2xlYXJNZXRob2QiLCJTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlIiwiX3NjaGVkdWxlciIsIl9zdGF0ZSIsIl9wZXJpb2QiLCJfYWN0aW9uIiwic3RhcnQiLCJfY2FuY2VsIiwiY29tbWFuZCIsInJlY3Vyc2UiLCJJbW1lZGlhdGVTY2hlZHVsZXIiLCJfX3N1cGVyX18iLCJpbW1lZGlhdGVTY2hlZHVsZXIiLCJpbW1lZGlhdGUiLCJDdXJyZW50VGhyZWFkU2NoZWR1bGVyIiwicXVldWUiLCJydW5UcmFtcG9saW5lIiwic2kiLCJzY2hlZHVsZVJlcXVpcmVkIiwiY3VycmVudFRocmVhZFNjaGVkdWxlciIsImN1cnJlbnRUaHJlYWQiLCJsb2NhbFRpbWVyIiwibG9jYWxTZXRUaW1lb3V0IiwibG9jYWxDbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiV1NjcmlwdCIsInRpbWUiLCJTbGVlcCIsIm5leHRIYW5kbGUiLCJ0YXNrc0J5SGFuZGxlIiwiY3VycmVudGx5UnVubmluZyIsInJ1blRhc2siLCJoYW5kbGUiLCJ0YXNrIiwicmVOYXRpdmUiLCJSZWdFeHAiLCJTdHJpbmciLCJyZXBsYWNlIiwic2V0SW1tZWRpYXRlIiwidGVzdCIsIm5leHRUaWNrIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwiaXNBc3luYyIsIm9sZEhhbmRsZXIiLCJvbm1lc3NhZ2UiLCJwb3N0TWVzc2FnZVN1cHBvcnRlZCIsIk1TR19QUkVGSVgiLCJyYW5kb20iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkYXRhIiwic3Vic3RyaW5nIiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdEVsZW1lbnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIkRlZmF1bHRTY2hlZHVsZXIiLCJzY2hlZHVsZUFjdGlvbiIsIkNsZWFyRGlzcG9zYWJsZSIsIl9pZCIsIkxvY2FsQ2xlYXJEaXNwb3NhYmxlIiwic2NoZWR1bGVMb25nUnVubmluZyIsImRlZmF1bHRTY2hlZHVsZXIiLCJhc3luYyIsIl9oYW5kbGVyIiwiX3JlY3Vyc2l2ZU9yaWdpbmFsIiwiX3JlY3Vyc2l2ZVdyYXBwZXIiLCJfd3JhcCIsIl9jbG9uZSIsInJlcyIsIl9nZXRSZWN1cnNpdmVXcmFwcGVyIiwid3JhcHBlciIsImZhaWxlZCIsInN0YXRlMSIsIk5vdGlmaWNhdGlvbiIsIl9hY2NlcHQiLCJvbk5leHQiLCJvbkVycm9yIiwib25Db21wbGV0ZWQiLCJfYWNjZXB0T2JzZXJ2ZXIiLCJhY2NlcHQiLCJvYnNlcnZlck9yT25OZXh0IiwidG9PYnNlcnZhYmxlIiwibm90aWZpY2F0aW9uIiwia2luZCIsIk9uTmV4dE5vdGlmaWNhdGlvbiIsIk9uRXJyb3JOb3RpZmljYXRpb24iLCJPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCIsImNyZWF0ZU9uTmV4dCIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IiLCJjcmVhdGVPbkVycm9yIiwibm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQiLCJjcmVhdGVPbkNvbXBsZXRlZCIsIk9ic2VydmVyIiwidG9Ob3RpZmllciIsImFzT2JzZXJ2ZXIiLCJBbm9ueW1vdXNPYnNlcnZlciIsImNoZWNrZWQiLCJDaGVja2VkT2JzZXJ2ZXIiLCJvYnNlcnZlckNyZWF0ZSIsImZyb21Ob3RpZmllciIsImNiIiwibm90aWZ5T24iLCJPYnNlcnZlT25PYnNlcnZlciIsIm1ha2VTYWZlIiwiQW5vbnltb3VzU2FmZU9ic2VydmVyIiwiX29uTmV4dCIsIl9vbkVycm9yIiwiX29uQ29tcGxldGVkIiwib2JzZXJ2YWJsZVByb3RvIiwiQWJzdHJhY3RPYnNlcnZlciIsImlzU3RvcHBlZCIsIm5leHQiLCJjb21wbGV0ZWQiLCJmYWlsIiwiX29ic2VydmVyIiwiQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlIiwiY2hlY2tBY2Nlc3MiLCJTY2hlZHVsZWRPYnNlcnZlciIsImlzQWNxdWlyZWQiLCJoYXNGYXVsdGVkIiwid29yayIsInNoaWZ0IiwiZW5xdWV1ZU5leHQiLCJlbnF1ZXVlRXJyb3IiLCJlbnN1cmVBY3RpdmUiLCJpc093bmVyIiwiY2FuY2VsIiwiT2JzZXJ2YWJsZSIsIm9sZFN1YnNjcmliZSIsIl9zdWJzY3JpYmUiLCJvbGRPbkVycm9yIiwiaXNPYnNlcnZhYmxlIiwiZm9yRWFjaCIsIm9Pck9uTmV4dCIsInN1YnNjcmliZU9uTmV4dCIsInN1YnNjcmliZU9uRXJyb3IiLCJzdWJzY3JpYmVPbkNvbXBsZXRlZCIsIk9ic2VydmFibGVCYXNlIiwic3Vic2NyaWJlciIsImFkbyIsInN1YiIsInN1YnNjcmliZUNvcmUiLCJBdXRvRGV0YWNoT2JzZXJ2ZXIiLCJGbGF0TWFwT2JzZXJ2YWJsZSIsInNlbGVjdG9yIiwicmVzdWx0U2VsZWN0b3IiLCJJbm5lck9ic2VydmVyIiwiX3dyYXBSZXN1bHQiLCJtYXAiLCJpMiIsIm9ic2VydmFibGVGcm9tUHJvbWlzZSIsImZyb20iLCJFbnVtZXJhYmxlIiwiSXNEaXNwb3NlZERpc3Bvc2FibGUiLCJfcyIsIkNvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlIiwiY3VycmVudEl0ZW0iLCJjdXJyZW50VmFsdWUiLCJzdWJzY3JpcHRpb24iLCJfcmVjdXJzZSIsImNhbmNlbGFibGUiLCJjb25jYXQiLCJDYXRjaEVycm9yT2JzZXJ2YWJsZSIsImxhc3RFcnJvciIsIlJlcGVhdEVudW1lcmFibGUiLCJ2IiwiUmVwZWF0RW51bWVyYXRvciIsImVudW1lcmFibGVSZXBlYXQiLCJyZXBlYXQiLCJyZXBlYXRDb3VudCIsIk9mRW51bWVyYWJsZSIsIk9mRW51bWVyYXRvciIsImVudW1lcmFibGVPZiIsIm9mIiwiT2JzZXJ2ZU9uT2JzZXJ2YWJsZSIsIm9ic2VydmVPbiIsIlN1YnNjcmliZU9uT2JzZXJ2YWJsZSIsInN1YnNjcmliZU9uIiwiRnJvbVByb21pc2VPYnNlcnZhYmxlIiwiX3AiLCJzY2hlZHVsZU5leHQiLCJzY2hlZHVsZUVycm9yIiwic2FkIiwiZnJvbVByb21pc2UiLCJwcm9taXNlIiwidG9Qcm9taXNlIiwicHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwiVG9BcnJheU9ic2VydmFibGUiLCJ0b0FycmF5IiwiRGVmZXIiLCJfZiIsIm9ic2VydmFibGVUaHJvdyIsIm9ic2VydmFibGVEZWZlciIsImRlZmVyIiwib2JzZXJ2YWJsZUZhY3RvcnkiLCJFbXB0eU9ic2VydmFibGUiLCJFbXB0eVNpbmsiLCJydW4iLCJFTVBUWV9PQlNFUlZBQkxFIiwib2JzZXJ2YWJsZUVtcHR5IiwiRnJvbU9ic2VydmFibGUiLCJpdGVyYWJsZSIsIl9pdGVyYWJsZSIsIl9mbiIsIml0IiwiU3RyaW5nSXRlcmFibGUiLCJBcnJheUl0ZXJhYmxlIiwiZ2V0SXRlcmFibGUiLCJjcmVhdGVTY2hlZHVsZU1ldGhvZCIsIm1heFNhZmVJbnRlZ2VyIiwiU3RyaW5nSXRlcmF0b3IiLCJfbCIsIl9pIiwiX2EiLCJBcnJheUl0ZXJhdG9yIiwiaXNOYU4iLCJpc0Zpbml0ZSIsIm51bWJlciIsInNpZ24iLCJmbG9vciIsImFicyIsInRvTGVuZ3RoIiwiY2hhckF0Iiwib2JzZXJ2YWJsZUZyb20iLCJtYXBGbiIsIm1hcHBlciIsIkZyb21BcnJheU9ic2VydmFibGUiLCJfYXJncyIsIm9ic2VydmFibGVGcm9tQXJyYXkiLCJmcm9tQXJyYXkiLCJHZW5lcmF0ZU9ic2VydmFibGUiLCJjbmRGbiIsIml0ckZuIiwicmVzRm4iLCJfaW5pdGlhbFN0YXRlIiwiX2NuZEZuIiwiX2l0ckZuIiwiX3Jlc0ZuIiwibmV3U3RhdGUiLCJoYXNSZXN1bHQiLCJvYnNlcnZhYmxlT2YiLCJnZW5lcmF0ZSIsImluaXRpYWxTdGF0ZSIsImNvbmRpdGlvbiIsIml0ZXJhdGUiLCJvZldpdGhTY2hlZHVsZXIiLCJvZkFycmF5Q2hhbmdlcyIsIm9ic2VydmUiLCJ1bm9ic2VydmUiLCJvYnNlcnZlckZuIiwiY2hhbmdlcyIsIm9mT2JqZWN0Q2hhbmdlcyIsIk5FVkVSX09CU0VSVkFCTEUiLCJOZXZlck9ic2VydmFibGUiLCJvYnNlcnZhYmxlTmV2ZXIiLCJuZXZlciIsIlBhaXJzT2JzZXJ2YWJsZSIsIl9vIiwiX2tleXMiLCJwYWlycyIsIlJhbmdlT2JzZXJ2YWJsZSIsInJhbmdlQ291bnQiLCJsb29wUmVjdXJzaXZlIiwicmFuZ2UiLCJSZXBlYXRPYnNlcnZhYmxlIiwiUmVwZWF0U2luayIsIkp1c3RPYnNlcnZhYmxlIiwiX3ZhbHVlIiwiVGhyb3dPYnNlcnZhYmxlIiwianVzdCIsIl9lcnJvciIsIlVzaW5nT2JzZXJ2YWJsZSIsIm9ic0ZuIiwiX29ic0ZuIiwicmVzb3VyY2UiLCJ1c2luZyIsInJlc291cmNlRmFjdG9yeSIsImFtYiIsInJpZ2h0U291cmNlIiwibGVmdFNvdXJjZSIsImNob2ljZSIsImxlZnRDaG9pY2UiLCJyaWdodENob2ljZSIsImxlZnRTdWJzY3JpcHRpb24iLCJyaWdodFN1YnNjcmlwdGlvbiIsImNob2ljZUwiLCJjaG9pY2VSIiwibGVmdFN1YnNjcmliZSIsInJpZ2h0U3Vic2NyaWJlIiwiYWNjIiwiQ2F0Y2hPYnNlcnZhYmxlIiwiZDEiLCJDYXRjaE9ic2VydmVyIiwiaGFuZGxlck9yU2Vjb25kIiwib2JzZXJ2YWJsZUNhdGNoIiwiZmFsc2VGYWN0b3J5IiwiYXJndW1lbnRzVG9BcnJheSIsImNvbWJpbmVMYXRlc3QiLCJDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSIsInBhcmFtcyIsIl9wYXJhbXMiLCJfY2IiLCJzdWJzY3JpcHRpb25zIiwiaGFzVmFsdWUiLCJoYXNWYWx1ZUFsbCIsInZhbHVlcyIsIkNvbWJpbmVMYXRlc3RPYnNlcnZlciIsImV2ZXJ5IiwiZmlsdGVyIiwiaiIsIm9ic2VydmFibGVDb25jYXQiLCJDb25jYXRPYnNlcnZlciIsIkNvbmNhdE9ic2VydmFibGUiLCJfc291cmNlcyIsImNvbmNhdEFsbCIsIm1lcmdlIiwiTWVyZ2VPYnNlcnZhYmxlIiwibWF4Q29uY3VycmVudCIsImciLCJNZXJnZU9ic2VydmVyIiwibWF4IiwicSIsImFjdGl2ZUNvdW50IiwiaGFuZGxlU3Vic2NyaWJlIiwiaW5uZXJTb3VyY2UiLCJtYXhDb25jdXJyZW50T3JPdGhlciIsIm9ic2VydmFibGVNZXJnZSIsIm1lcmdlQWxsIiwiTWVyZ2VBbGxPYnNlcnZhYmxlIiwiTWVyZ2VBbGxPYnNlcnZlciIsIkNvbXBvc2l0ZUVycm9yIiwiZXJyb3JzIiwiaW5uZXJFcnJvcnMiLCJNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlIiwiTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIiLCJfZ3JvdXAiLCJzZXRDb21wbGV0aW9uIiwiaW5uZXIiLCJfaW5uZXIiLCJtZXJnZURlbGF5RXJyb3IiLCJvbkVycm9yUmVzdW1lTmV4dCIsIk9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZSIsInBvcyIsIk9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIiLCJjYW5jZWxsYWJsZSIsIlNraXBVbnRpbE9ic2VydmFibGUiLCJfb3BlbiIsIlNraXBVbnRpbFNvdXJjZU9ic2VydmVyIiwiU2tpcFVudGlsT3RoZXJPYnNlcnZlciIsIl9yIiwic2tpcFVudGlsIiwiU3dpdGNoT2JzZXJ2YWJsZSIsIlN3aXRjaE9ic2VydmVyIiwic3RvcHBlZCIsImxhdGVzdCIsImhhc0xhdGVzdCIsInN3aXRjaExhdGVzdCIsIlRha2VVbnRpbE9ic2VydmFibGUiLCJUYWtlVW50aWxPYnNlcnZlciIsInRha2VVbnRpbCIsIldpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSIsIl9zcyIsIldpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciIsIm91dGVyU2FkIiwiV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlciIsImFsbFZhbHVlcyIsImVtcHR5QXJyYXlGYWN0b3J5Iiwid2l0aExhdGVzdEZyb20iLCJaaXBPYnNlcnZhYmxlIiwiWmlwT2JzZXJ2ZXIiLCJfcSIsIl9kIiwibm90RW1wdHkiLCJzaGlmdEVhY2giLCJxdWV1ZWRWYWx1ZXMiLCJ6aXAiLCJaaXBJdGVyYWJsZU9ic2VydmFibGUiLCJaaXBJdGVyYWJsZU9ic2VydmVyIiwiemlwSXRlcmFibGUiLCJhc09ic2VydmFibGUiLCJidWZmZXJXaXRoQ291bnQiLCJidWZmZXJDb3VudCIsInNraXAiLCJ3aW5kb3dXaXRoQ291bnQiLCJmbGF0TWFwIiwiRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUiLCJEZW1hdGVyaWFsaXplT2JzZXJ2ZXIiLCJkZW1hdGVyaWFsaXplIiwiRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlIiwia2V5Rm4iLCJEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyIiwiaGFzQ3VycmVudEtleSIsImN1cnJlbnRLZXkiLCJjb21wYXJlckVxdWFscyIsImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwiVGFwT2JzZXJ2YWJsZSIsIl9vTiIsIl9vRSIsIl9vQyIsInRhcCIsImRvQWN0aW9uIiwiZG9Pbk5leHQiLCJ0YXBPbk5leHQiLCJkb09uRXJyb3IiLCJ0YXBPbkVycm9yIiwiZG9PbkNvbXBsZXRlZCIsInRhcE9uQ29tcGxldGVkIiwiRmluYWxseU9ic2VydmFibGUiLCJGaW5hbGx5RGlzcG9zYWJsZSIsIklnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSIsImlnbm9yZUVsZW1lbnRzIiwiTWF0ZXJpYWxpemVPYnNlcnZhYmxlIiwiTWF0ZXJpYWxpemVPYnNlcnZlciIsIkBAaXRlcmF0b3IiLCJtYXRlcmlhbGl6ZSIsInJldHJ5IiwicmV0cnlDb3VudCIsIlJldHJ5V2hlbk9ic2VydmFibGUiLCJjcmVhdGVEaXNwb3NhYmxlIiwibm90aWZpZXIiLCJfbm90aWZpZXIiLCJleGNlcHRpb25zIiwiU3ViamVjdCIsIm5vdGlmaWNhdGlvbkRpc3Bvc2FibGUiLCJvdXRlciIsImV4biIsImV4IiwicmV0cnlXaGVuIiwiUmVwZWF0V2hlbk9ic2VydmFibGUiLCJjb21wbGV0aW9ucyIsInJlcGVhdFdoZW4iLCJTY2FuT2JzZXJ2YWJsZSIsImFjY3VtdWxhdG9yIiwiaGFzU2VlZCIsInNlZWQiLCJTY2FuT2JzZXJ2ZXIiLCJfaHMiLCJfaGEiLCJfaHYiLCJzY2FuIiwiU2tpcExhc3RPYnNlcnZhYmxlIiwiX2MiLCJTa2lwTGFzdE9ic2VydmVyIiwic2tpcExhc3QiLCJzdGFydFdpdGgiLCJUYWtlTGFzdE9ic2VydmVyIiwidGFrZUxhc3QiLCJUYWtlTGFzdEJ1ZmZlck9ic2VydmVyIiwiY29uY2F0TWFwIiwic2VsZWN0b3JGdW5jIiwidGFrZUxhc3RCdWZmZXIiLCJ3aW5kb3dDb3VudCIsIkluZmluaXR5IiwicmVmQ291bnREaXNwb3NhYmxlIiwiY3JlYXRlV2luZG93Iiwic2VsZWN0Q29uY2F0Iiwic2VsZWN0b3JSZXN1bHQiLCJjb25jYXRNYXBPYnNlcnZlciIsInNlbGVjdENvbmNhdE9ic2VydmVyIiwib25OZXh0RnVuYyIsIm9uRXJyb3JGdW5jIiwib25Db21wbGV0ZWRGdW5jIiwiRGVmYXVsdElmRW1wdHlPYnNlcnZlciIsIkhhc2hTZXQiLCJzZXQiLCJkZWZhdWx0SWZFbXB0eSIsImRlZmF1bHRWYWx1ZSIsInJldFZhbHVlIiwiYXJyYXlJbmRleE9mQ29tcGFyZXIiLCJEaXN0aW5jdE9ic2VydmFibGUiLCJjbXBGbiIsIl9rZXlGbiIsIl9jbXBGbiIsIkRpc3RpbmN0T2JzZXJ2ZXIiLCJfaCIsImRpc3RpbmN0Iiwia2V5U2VsZWN0b3IiLCJncm91cEJ5IiwiZWxlbWVudFNlbGVjdG9yIiwiZ3JvdXBCeVVudGlsIiwiZHVyYXRpb25TZWxlY3RvciIsIk1hcCIsImdyb3VwRGlzcG9zYWJsZSIsImhhbmRsZUVycm9yIiwiZmlyZU5ld01hcEVudHJ5Iiwid3JpdGVyIiwiR3JvdXBlZE9ic2VydmFibGUiLCJkdXJhdGlvbkdyb3VwIiwiZHVyYXRpb24iLCJtZCIsInRha2UiLCJlbGVtZW50IiwiTWFwT2JzZXJ2YWJsZSIsImludGVybmFsTWFwIiwiaW5uZXJNYXAiLCJzZWxlY3QiLCJzZWxlY3RvckZuIiwicGx1Y2siLCJjdXJyZW50UHJvcCIsInBsdWNrZXIiLCJzZWxlY3RNYW55IiwibWVyZ2VNYXAiLCJmbGF0TWFwT2JzZXJ2ZXIiLCJzZWxlY3RNYW55T2JzZXJ2ZXIiLCJmbGF0TWFwTGF0ZXN0Iiwic3dpdGNoTWFwIiwiU2tpcE9ic2VydmFibGUiLCJfY291bnQiLCJTa2lwT2JzZXJ2ZXIiLCJTa2lwV2hpbGVPYnNlcnZhYmxlIiwiU2tpcFdoaWxlT2JzZXJ2ZXIiLCJza2lwV2hpbGUiLCJUYWtlT2JzZXJ2YWJsZSIsIlRha2VPYnNlcnZlciIsIlRha2VXaGlsZU9ic2VydmFibGUiLCJUYWtlV2hpbGVPYnNlcnZlciIsInRha2VXaGlsZSIsIkZpbHRlck9ic2VydmFibGUiLCJpbnRlcm5hbEZpbHRlciIsImlubmVyUHJlZGljYXRlIiwic2hvdWxkWWllbGQiLCJ3aGVyZSIsIkV4dHJlbWFCeU9ic2VydmFibGUiLCJrIiwiX2siLCJFeHRyZW1hQnlPYnNlcnZlciIsIl92IiwiY29tcGFyaXNvbiIsImZpcnN0T25seSIsIlJlZHVjZU9ic2VydmFibGUiLCJSZWR1Y2VPYnNlcnZlciIsInJlZHVjZSIsIlNvbWVPYnNlcnZhYmxlIiwiU29tZU9ic2VydmVyIiwiQm9vbGVhbiIsInNvbWUiLCJJc0VtcHR5T2JzZXJ2YWJsZSIsIklzRW1wdHlPYnNlcnZlciIsImlzRW1wdHkiLCJFdmVyeU9ic2VydmFibGUiLCJFdmVyeU9ic2VydmVyIiwiSW5jbHVkZXNPYnNlcnZhYmxlIiwiZWxlbSIsIl9lbGVtIiwiX24iLCJJbmNsdWRlc09ic2VydmVyIiwiYiIsImluY2x1ZGVzIiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsIkNvdW50T2JzZXJ2YWJsZSIsIkNvdW50T2JzZXJ2ZXIiLCJJbmRleE9mT2JzZXJ2YWJsZSIsIl9lIiwiSW5kZXhPZk9ic2VydmVyIiwiU3VtT2JzZXJ2YWJsZSIsIlN1bU9ic2VydmVyIiwic3VtIiwibWluQnkiLCJtaW4iLCJtYXhCeSIsIkF2ZXJhZ2VPYnNlcnZhYmxlIiwiQXZlcmFnZU9ic2VydmVyIiwiX3QiLCJhdmVyYWdlIiwic2VxdWVuY2VFcXVhbCIsImRvbmVsIiwiZG9uZXIiLCJxbCIsInFyIiwic3Vic2NyaXB0aW9uMSIsImVxdWFsIiwic3Vic2NyaXB0aW9uMiIsIkVsZW1lbnRBdE9ic2VydmFibGUiLCJFbGVtZW50QXRPYnNlcnZlciIsImVsZW1lbnRBdCIsIlNpbmdsZU9ic2VydmVyIiwiX29iaiIsInNpbmdsZSIsIkZpcnN0T2JzZXJ2YWJsZSIsIkZpcnN0T2JzZXJ2ZXIiLCJMYXN0T2JzZXJ2YWJsZSIsIkxhc3RPYnNlcnZlciIsImxhc3QiLCJGaW5kVmFsdWVPYnNlcnZlciIsImNhbGxiYWNrIiwieWllbGRJbmRleCIsIl95Iiwic2hvdWxkUnVuIiwiZmluZFZhbHVlIiwiZmluZCIsImZpbmRJbmRleCIsIlRvU2V0T2JzZXJ2YWJsZSIsIlRvU2V0T2JzZXJ2ZXIiLCJ0b1NldCIsIlRvTWFwT2JzZXJ2YWJsZSIsIlRvTWFwT2JzZXJ2ZXIiLCJfbSIsInRvTWFwIiwiU2xpY2VPYnNlcnZhYmxlIiwiX2IiLCJTbGljZU9ic2VydmVyIiwiYmVnaW4iLCJlbmQiLCJMYXN0SW5kZXhPZk9ic2VydmFibGUiLCJMYXN0SW5kZXhPZk9ic2VydmVyIiwibGFzdEluZGV4T2YiLCJ3cmFwIiwiY3JlYXRlT2JzZXJ2YWJsZSIsInNwYXduIiwiX19nZW5lcmF0b3JGdW5jdGlvbl9fIiwiZ2VuIiwicHJvY2Vzc0dlbmVyYXRvciIsInJldCIsIm9icyIsInZhbCIsImN0b3IiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsInJlc3VsdHMiLCJvYnNlcnZhYmxlcyIsImZvcmtKb2luIiwiY29udGV4dCIsIm9ic2VydmFibGVUb0FzeW5jIiwidG9Bc3luYyIsInN1YmplY3QiLCJBc3luY1N1YmplY3QiLCJjcmVhdGVDYk9ic2VydmFibGUiLCJjdHgiLCJjcmVhdGVDYkhhbmRsZXIiLCJjcmVhdGVOb2RlT2JzZXJ2YWJsZSIsImNyZWF0ZU5vZGVIYW5kbGVyIiwiTGlzdGVuRGlzcG9zYWJsZSIsImNyZWF0ZUV2ZW50TGlzdGVuZXIiLCJlbCIsImV2ZW50TmFtZSIsImVsZW1Ub1N0cmluZyIsIlN0YXRpY05vZGVMaXN0IiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiZnJvbUNhbGxiYWNrIiwiZnJvbU5vZGVDYWxsYmFjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1c2VOYXRpdmVFdmVudHMiLCJFdmVudE9ic2VydmFibGUiLCJfZWwiLCJjcmVhdGVIYW5kbGVyIiwiZnJvbUV2ZW50IiwiYWRkTGlzdGVuZXIiLCJmcm9tRXZlbnRQYXR0ZXJuIiwiaCIsInJlbW92ZUxpc3RlbmVyIiwib24iLCJvZmYiLCJwdWJsaXNoIiwicmVmQ291bnQiLCJFdmVudFBhdHRlcm5PYnNlcnZhYmxlIiwiZGVsIiwiX2FkZCIsIl9kZWwiLCJFdmVudFBhdHRlcm5EaXNwb3NhYmxlIiwiX3JldCIsInJldHVyblZhbHVlIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJzdGFydEFzeW5jIiwiZnVuY3Rpb25Bc3luYyIsIlBhdXNhYmxlT2JzZXJ2YWJsZSIsInBhdXNlciIsImNvbnRyb2xsZXIiLCJwYXVzZWQiLCJjb25uIiwiY29ubmVjdGlvbiIsInBhdXNhYmxlIiwiY29ubmVjdCIsInBhdXNlIiwicmVzdW1lIiwiUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUiLCJwcmV2aW91c1Nob3VsZEZpcmUiLCJkcmFpblF1ZXVlIiwic2hvdWxkRmlyZSIsInBhdXNhYmxlQnVmZmVyZWQiLCJDb250cm9sbGVkT2JzZXJ2YWJsZSIsImVuYWJsZVF1ZXVlIiwiQ29udHJvbGxlZFN1YmplY3QiLCJtdWx0aWNhc3QiLCJyZXF1ZXN0IiwibnVtYmVyT2ZJdGVtcyIsInJlcXVlc3RlZENvdW50IiwicmVxdWVzdGVkRGlzcG9zYWJsZSIsImhhc0ZhaWxlZCIsImhhc0NvbXBsZXRlZCIsImRpc3Bvc2VDdXJyZW50UmVxdWVzdCIsIl9wcm9jZXNzUmVxdWVzdCIsInJlbWFpbmluZyIsImNvbnRyb2xsZWQiLCJTdG9wQW5kV2FpdE9ic2VydmFibGUiLCJTdG9wQW5kV2FpdE9ic2VydmVyIiwiX19zdWJfXyIsInNjaGVkdWxlRGlzcG9zYWJsZSIsImlubmVyU2NoZWR1bGVNZXRob2QiLCJzdG9wQW5kV2FpdCIsIldpbmRvd2VkT2JzZXJ2YWJsZSIsIndpbmRvd1NpemUiLCJXaW5kb3dlZE9ic2VydmVyIiwicmVjZWl2ZWQiLCJ3aW5kb3dlZCIsInBpcGUiLCJkZXN0Iiwib25EcmFpbiIsIndyaXRlIiwiZW1pdCIsIl9pc1N0ZGlvIiwiTXVsdGljYXN0T2JzZXJ2YWJsZSIsImZuMSIsImZuMiIsIl9mbjEiLCJfZm4yIiwiY29ubmVjdGFibGUiLCJzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IiLCJDb25uZWN0YWJsZU9ic2VydmFibGUiLCJzaGFyZSIsInB1Ymxpc2hMYXN0IiwicHVibGlzaFZhbHVlIiwiaW5pdGlhbFZhbHVlT3JTZWxlY3RvciIsImluaXRpYWxWYWx1ZSIsIkJlaGF2aW9yU3ViamVjdCIsInNoYXJlVmFsdWUiLCJyZXBsYXkiLCJidWZmZXJTaXplIiwiUmVwbGF5U3ViamVjdCIsInNoYXJlUmVwbGF5IiwiSW5uZXJTdWJzY3JpcHRpb24iLCJvYnNlcnZlcnMiLCJSZWZDb3VudE9ic2VydmFibGUiLCJfY29ubmVjdGFibGVTdWJzY3JpcHRpb24iLCJfY29ubmVjdGlvbiIsIl9zb3VyY2UiLCJfc3ViamVjdCIsIkNvbm5lY3REaXNwb3NhYmxlIiwic2luZ2xlSW5zdGFuY2UiLCJoYXNPYnNlcnZhYmxlIiwibGVmdER1cmF0aW9uU2VsZWN0b3IiLCJyaWdodER1cmF0aW9uU2VsZWN0b3IiLCJsZWZ0RG9uZSIsInJpZ2h0RG9uZSIsImxlZnRJZCIsInJpZ2h0SWQiLCJsZWZ0TWFwIiwicmlnaHRNYXAiLCJzaXplIiwiZ3JvdXBKb2luIiwiYnVmZmVyIiwid2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciIsIndpbmRvd0Nsb3NpbmdTZWxlY3RvciIsIndpbmRvd0JvdW5kYXJpZXMiLCJ3aW4iLCJ3IiwiY3JlYXRlV2luZG93Q2xvc2UiLCJ3aW5kb3dDbG9zZSIsIm0xIiwid2luZG93T3BlbmluZ3MiLCJQYWlyd2lzZU9ic2VydmFibGUiLCJQYWlyd2lzZU9ic2VydmVyIiwiX2hwIiwicGFpcndpc2UiLCJwYXJ0aXRpb24iLCJXaGlsZUVudW1lcmFibGUiLCJsZXRCaW5kIiwidGhlblNvdXJjZSIsImVsc2VTb3VyY2VPclNjaGVkdWxlciIsImZvckluIiwib2JzZXJ2YWJsZVdoaWxlRG8iLCJ3aGlsZURvIiwiZW51bWVyYWJsZVdoaWxlIiwiZG9XaGlsZSIsImRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciIsIkV4cGFuZE9ic2VydmFibGUiLCJFeHBhbmRPYnNlcnZlciIsIl9lbnN1cmVBY3RpdmUiLCJfbTEiLCJleHBhbmQiLCJGb3JrSm9pbk9ic2VydmFibGUiLCJmaW5pc2hlZCIsImhhc1Jlc3VsdHMiLCJGb3JrSm9pbk9ic2VydmVyIiwic3VicyIsIl9zdWJzIiwibWFueVNlbGVjdCIsImV4dGVuZCIsImNoYWluIiwiY3VyciIsIkNoYWluT2JzZXJ2YWJsZSIsImhlYWQiLCJ0YWlsIiwiX3ZhbHVlcyIsIlBhdHRlcm4iLCJwYXR0ZXJucyIsIlBsYW4iLCJleHByZXNzaW9uIiwicGxhbkNyZWF0ZU9ic2VydmVyIiwiZXh0ZXJuYWxTdWJzY3JpcHRpb25zIiwiZW50cnkiLCJKb2luT2JzZXJ2ZXIiLCJBY3RpdmVQbGFuIiwiam9pbk9ic2VydmVyQXJyYXkiLCJqb2luT2JzZXJ2ZXJzIiwiam9pbk9ic2VydmVyIiwiYW5kIiwidGhlbkRvIiwiYWN0aXZhdGUiLCJkZWFjdGl2YXRlIiwiZXJySGFuZGxlciIsImFjdGl2ZVBsYW4iLCJoYW5kbGVPbk5leHQiLCJqbGVuIiwicmVtb3ZlQWN0aXZlUGxhbiIsImFkZEFjdGl2ZVBsYW4iLCJtYXRjaCIsImhhc1ZhbHVlcyIsImZpcnN0VmFsdWVzIiwiaXNDb21wbGV0ZWQiLCJhY3RpdmVQbGFucyIsIkpvaW5PYnNlcnZlclByb3RvdHlwZSIsIndoZW4iLCJwbGFucyIsIm91dE9ic2VydmVyIiwiVGltZXJPYnNlcnZhYmxlIiwiX2R0Iiwib2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZCIsImdldFRpbWUiLCJvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZCIsIm9ic2VydmFibGVpbnRlcnZhbCIsImludGVydmFsIiwidGltZXIiLCJwZXJpb2RPclNjaGVkdWxlciIsIl9vYnNlcnZhYmxlVGltZXIiLCJvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZSIsImFjdGl2ZSIsImV4Y2VwdGlvbiIsInJ1bm5pbmciLCJ0aW1lc3RhbXAiLCJyZWN1cnNlRHVlVGltZSIsInNob3VsZFJlY3Vyc2UiLCJkZWxheSIsInN1YnNjcmlwdGlvbkRlbGF5IiwiZGVsYXlEdXJhdGlvblNlbGVjdG9yIiwic3ViRGVsYXkiLCJmaXJzdEFyZyIsIm9ic2VydmFibGVEZWxheUFic29sdXRlIiwiZGVsYXlzIiwiYXRFbmQiLCJEZWJvdW5jZU9ic2VydmFibGUiLCJEZWJvdW5jZU9ic2VydmVyIiwiY3VycmVudElkIiwiZGVib3VuY2UiLCJ0aHJvdHRsZSIsImN1cnJlbnRpZCIsIndpbmRvd1dpdGhUaW1lIiwid2luZG93VGltZSIsInRpbWVTaGlmdE9yU2NoZWR1bGVyIiwidGltZVNoaWZ0IiwibmV4dFNoaWZ0IiwibmV4dFNwYW4iLCJ0aW1lckQiLCJ0b3RhbFRpbWUiLCJjcmVhdGVUaW1lciIsImlzU3BhbiIsImlzU2hpZnQiLCJuZXdUb3RhbFRpbWUiLCJ0cyIsIndpbmRvd1dpdGhUaW1lT3JDb3VudCIsIndpbmRvd1RpbWVPckNvdW50Iiwid2luZG93SWQiLCJuZXdJZCIsIm5ld1dpbmRvdyIsImJ1ZmZlcldpdGhUaW1lIiwiYnVmZmVyVGltZSIsImJ1ZmZlcldpdGhUaW1lT3JDb3VudCIsImJ1ZmZlclRpbWVPckNvdW50IiwiVGltZUludGVydmFsT2JzZXJ2YWJsZSIsIlRpbWVJbnRlcnZhbE9ic2VydmVyIiwic3BhbiIsInRpbWVJbnRlcnZhbCIsIlRpbWVzdGFtcE9ic2VydmFibGUiLCJUaW1lc3RhbXBPYnNlcnZlciIsIlNhbXBsZU9ic2VydmFibGUiLCJzYW1wbGVyIiwiX3NhbXBsZXIiLCJzb3VyY2VTdWJzY3JpcHRpb24iLCJTYW1wbGVTb3VyY2VPYnNlcnZlciIsIlNhbXBsZXJPYnNlcnZlciIsIl9oYW5kbGVNZXNzYWdlIiwic2FtcGxlIiwiaW50ZXJ2YWxPclNhbXBsZXIiLCJUaW1lb3V0RXJyb3IiLCJ0aW1lb3V0Iiwib3JpZ2luYWwiLCJzd2l0Y2hlZCIsIm15SWQiLCJmaXJzdFRpbWVvdXQiLCJ0aW1lb3V0RHVyYXRpb25TZWxlY3RvciIsInNldFRpbWVyIiwidGltZXJXaW5zIiwib1dpbnMiLCJ0aW1lb3V0V2l0aFNlbGVjdG9yIiwiR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUiLCJ0aW1lRm4iLCJfdGltZUZuIiwiZ2VuZXJhdGVXaXRoQWJzb2x1dGVUaW1lIiwidGltZVNlbGVjdG9yIiwiR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUiLCJnZW5lcmF0ZVdpdGhSZWxhdGl2ZVRpbWUiLCJEZWxheVN1YnNjcmlwdGlvbiIsImRlbGF5U3Vic2NyaXB0aW9uIiwiU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUiLCJTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIiLCJza2lwTGFzdFdpdGhUaW1lIiwiVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUiLCJUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIiLCJ0YWtlTGFzdFdpdGhUaW1lIiwidGFrZUxhc3RCdWZmZXJXaXRoVGltZSIsIlRha2VXaXRoVGltZU9ic2VydmFibGUiLCJ0YWtlV2l0aFRpbWUiLCJTa2lwV2l0aFRpbWVPYnNlcnZhYmxlIiwiU2tpcFdpdGhUaW1lT2JzZXJ2ZXIiLCJza2lwV2l0aFRpbWUiLCJTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUiLCJzdGFydFRpbWUiLCJfc3QiLCJTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyIiwic2tpcFVudGlsV2l0aFRpbWUiLCJ0YWtlVW50aWxXaXRoVGltZSIsImVuZFRpbWUiLCJ3aW5kb3dEdXJhdGlvbiIsIlJhbmdlRXJyb3IiLCJsYXN0T25OZXh0IiwiVHJhbnNkdWNlT2JzZXJ2ZXIiLCJ4Zm9ybSIsIl94Zm9ybSIsInRyYW5zZHVjZSIsInRyYW5zZHVjZXIiLCJAQHRyYW5zZHVjZXIvaW5pdCIsIkBAdHJhbnNkdWNlci9zdGVwIiwiaW5wdXQiLCJAQHRyYW5zZHVjZXIvcmVzdWx0IiwidHJhbnNmb3JtRm9yT2JzZXJ2ZXIiLCJTd2l0Y2hGaXJzdE9ic2VydmFibGUiLCJoYXNDdXJyZW50IiwiU3dpdGNoRmlyc3RPYnNlcnZlciIsInN3aXRjaEZpcnN0IiwiZmxhdE1hcEZpcnN0IiwiZXhoYXVzdE1hcCIsImZsYXRNYXBXaXRoTWF4Q29uY3VycmVudCIsImZsYXRNYXBNYXhDb25jdXJyZW50IiwibGltaXQiLCJWaXJ0dWFsVGltZVNjaGVkdWxlciIsImluaXRpYWxDbG9jayIsImNsb2NrIiwiaXNFbmFibGVkIiwiVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUiLCJ0b0Fic29sdXRlVGltZSIsInNjaGVkdWxlQWJzb2x1dGUiLCJ0b1JlbGF0aXZlVGltZSIsInNjaGVkdWxlUmVsYXRpdmUiLCJydW5BdCIsImdldE5leHQiLCJzdG9wIiwiYWR2YW5jZVRvIiwiZHVlVG9DbG9jayIsImFkdmFuY2VCeSIsInNsZWVwIiwiT25OZXh0UHJlZGljYXRlIiwiT25FcnJvclByZWRpY2F0ZSIsIkhpc3RvcmljYWxTY2hlZHVsZXIiLCJjbXAiLCJIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8iLCJhYnNvbHV0ZSIsInJlbGF0aXZlIiwiZXF1YWxzIiwiUmVhY3RpdmVUZXN0IiwiY3JlYXRlZCIsInN1YnNjcmliZWQiLCJkaXNwb3NlZCIsInRpY2tzIiwiUmVjb3JkZWQiLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIk1BWF9WQUxVRSIsIk1vY2tEaXNwb3NhYmxlIiwiZGlzcG9zZXMiLCJNb2NrT2JzZXJ2ZXIiLCJtZXNzYWdlcyIsIk1vY2tPYnNlcnZlclByb3RvdHlwZSIsIk1vY2tQcm9taXNlIiwiaW5uZXJOb3RpZmljYXRpb24iLCJqTGVuIiwib25SZXNvbHZlZCIsIm9uUmVqZWN0ZWQiLCJuZXdQcm9taXNlIiwiSG90T2JzZXJ2YWJsZSIsIkNvbGRPYnNlcnZhYmxlIiwiVGVzdFNjaGVkdWxlciIsImJhc2VDb21wYXJlciIsInN0YXJ0U2NoZWR1bGVyIiwiY3JlYXRlRm4iLCJzZXR0aW5ncyIsImNyZWF0ZU9ic2VydmVyIiwiY3JlYXRlSG90T2JzZXJ2YWJsZSIsImNyZWF0ZUNvbGRPYnNlcnZhYmxlIiwiY3JlYXRlUmVzb2x2ZWRQcm9taXNlIiwiY3JlYXRlUmVqZWN0ZWRQcm9taXNlIiwicmVhc29uIiwiX19zdWJzY3JpYmUiLCJBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUiLCJVbmRlcmx5aW5nT2JzZXJ2YWJsZSIsInUiLCJfdSIsInVuZGVybHlpbmdPYnNlcnZhYmxlIiwibWVyZ2VkRGlzcG9zYWJsZSIsImhhc0Vycm9yIiwiaGFzT2JzZXJ2ZXJzIiwib3MiLCJBbm9ueW1vdXNTdWJqZWN0IiwiZ2V0VmFsdWUiLCJzbyIsIl90cmltIiwiUGF1c2VyIiwid2VicGFja1BvbHlmaWxsIiwiZGVwcmVjYXRlIiwicGF0aHMiLCJjaGlsZHJlbiIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjdXJyZW50UXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJWaWV3Iiwidmlld0ZpbGUiLCJsb2FkZXIiLCJsb2FkIiwic3RyaW5ndmFsIiwic2VudCIsInZpZXciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJmaXJzdENoaWxkIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJFZGl0RW50cnlDb250cm9sbGVyX0VkaXRFbnRyeUNvbnRyb2xsZXIiLCJFZGl0RW50cnlDb250cm9sbGVyIiwidmlld01vZGVsIiwiVmlld0ZpbGUiLCJsb2FkSW50b1BhcmVudCIsImFuc3dlclZpZXciLCJxdWVyeVNlbGVjdG9yIiwiYW5zd2VyIiwicXVlc3Rpb25WaWV3IiwicXVlc3Rpb24iLCJvbmNsaWNrIiwiX3RoaXMiLCJTYXZlIiwiTGF6eSIsIkNyZWF0ZSIsIkNhcmRWaWV3Q29udHJvbGxlcl9DYXJkVmlld0NvbnRyb2xsZXIiLCJDYXJkVmlld0NvbnRyb2xsZXIiLCJDYXJkVmlld0NvbnRyb2xsZXJfYXdhaXRlciIsIkNhcmRWaWV3Q29udHJvbGxlcl9nZW5lcmF0b3IiLCJfdmlld01vZGVsIiwiZGV0YWNoIiwiSXNDcmVhdGVkIiwiVmFsdWUiLCJFZGl0b3JQYWdlQ29udHJvbGxlcl9FZGl0b3JQYWdlQ29udHJvbGxlciIsIkVkaXRvclBhZ2VDb250cm9sbGVyIiwiY2FyZFZpZXdzIiwiRWRpdG9yUGFnZUNvbnRyb2xsZXJfYXdhaXRlciIsIkVkaXRvclBhZ2VDb250cm9sbGVyX2dlbmVyYXRvciIsImVkaXRvckNvbnRhaW5lciIsImNhcmRzQ29udGFpbmVyIiwiRWRpdEVudHJ5Vmlld01vZGVsIiwiZmxhc2hDYXJkcyIsImNhcmRzIiwib25GbGFzaENhcmRzQ2hhbmdlZCIsInBhZ2VDb250YWluZXIiLCJjYXJkVmlldyIsImNhcmQiLCJFbnRyeVNlcnZpY2UiLCJkYlByb3ZpZGVyIiwiZGF0YWJhc2VWZXJzaW9uIiwic2F2ZSIsIm9wZW4iLCJkYiIsInRyYW5zYWN0aW9uIiwib2JqZWN0U3RvcmUiLCJnZXRBbGwiLCJvbnN1Y2Nlc3MiLCJyZXN1bHRTZXQiLCJvbnVwZ3JhZGVuZWVkZWQiLCJjcmVhdGVPYmplY3RTdG9yZSIsImF1dG9JbmNyZW1lbnQiLCJVdGY4UGFyc2VyIiwiVXRmOEFycmF5VG9TdHIiLCJvdXQiLCJjaGFyMiIsImNoYXIzIiwiZnJvbUNoYXJDb2RlIiwiRmlsZUxvYWRlckZhY3RvcnkiLCJjcmVhdGVGZXRjaEh0bWxMb2FkZXIiLCJnbG9iYWxGZXRjaCIsIlZpZXdMb2FkZXJfRmV0Y2hIdG1sTG9hZGVyIiwiRmV0Y2hIdG1sTG9hZGVyIiwiZmlsZVBhdGgiLCJmZXRjaCIsInJlc3BvbnNlIiwiZ2V0UmVhZGVyIiwicmVhZCIsIkVudHJ5IiwiRWRpdEVudHJ5Vmlld01vZGVsX0VkaXRFbnRyeVZpZXdNb2RlbCIsImVudHJ5U2VydmljZSIsIl9xdWVzdGlvbiIsIl9hbnN3ZXIiLCJzYXZlZFN1YmplY3QiLCJyeF9hbGwiLCJGbGFzaENhcmRWaWV3TW9kZWwiLCJFZGl0b3JQYWdlVmlld01vZGVsX0VkaXRvclBhZ2VWaWV3TW9kZWwiLCJFZGl0b3JQYWdlVmlld01vZGVsIiwiZmxhc2hDYXJkc1N1YmplY3QiLCJlZGl0RW50cnlWaWV3TW9kZWwiLCJzYXZlZCIsImN1cnJlbnRDYXJkcyIsImVudHJpZXMiLCJhcHBfQXBwbGljYXRpb24iLCJBcHBsaWNhdGlvbiIsImluc3RhbGxlciIsImluZGV4ZWREQiIsIm9ubG9hZCIsImFwcF9hd2FpdGVyIiwib25XaW5kb3dMb2FkZWQiLCJuYXZpZ2F0b3IiLCJyZWdpc3RlclNlcnZpY2VXb3JrZXIiLCJzZXJ2aWNlV29ya2VyIiwicHJldmVudERlZmF1bHQiLCJwcm9tcHRJbnN0YWxsYXRpb24iLCJwbGF0Zm9ybXMiLCJ1c2VyQ2hvaWNlIiwicHJvbXB0IiwicmVhZHkiLCJyZWdpc3RyYXRpb24iLCJ2aWV3TG9hZGVyIiwibWFpbiIsImdldEVsZW1lbnRCeUlkIiwib25TZXJ2aWNlV29ya2VyQ2hhbmdlZCIsIm5ld1dvcmtlciIsInJlZnJlc2hCdXR0b24iLCJoaWRkZW4iLCJyZWZyZXNoaW5nIiwicmVnaXN0ZXIiLCJyZWciLCJpbnN0YWxsaW5nIiwibG9jYXRpb24iLCJyZWxvYWQiLCJQd2FJbnN0YWxsZXJEZWYiLCJidXR0b24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FB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QUFJeUUsRUFBb0JsNkMsS0FBSzQ1QyxjQUM1QixJQUFJOUMsRUFBcUI0RSxFQUFZakcsR0FDM0NFLGVBQWVnRyxRQUx0QixLQU5BLFVBb0JBakIsRUFBQWg4QyxVQUFBbTlDLHVCQUFSLFNBQStCQyxHQUMzQixJQUFJQyxFQUFnQi9tQyxTQUFTNG1DLGVBQWUsY0FDdkNHLElBSUxBLEVBQWN2bkMsaUJBQWlCLFFBQVMsV0FDcENzbkMsRUFBVTluQyxZQUFZLENBQUU5RyxPQUFRLGtCQUlwQzZ1QyxFQUFjQyxRQUFTLElBR25CdEIsRUFBQWg4QyxVQUFBdThDLHNCQUFSLFNBQThCQyxHQUE5QixJQXVCUWUsRUF2QlIvRixFQUFBbDJDLEtBQ0lrN0MsRUFDS2dCLFNBQVMsc0JBQ1QxNkMsS0FBSyxTQUFBMjZDLEdBQ0ZBLEVBQUkzbkMsaUJBQWlCLGNBQWUsV0FFaEMsR0FBSzJuQyxFQUFJQyxXQUFULENBSUEsSUFBSU4sRUFBWUssRUFBSUMsV0FDcEJOLEVBQVV0bkMsaUJBQWlCLGNBQWUsV0FDdEMsT0FBUXNuQyxFQUFVN3NDLE9BQ2QsSUFBSyxZQUNHK3JDLFVBQVVFLGNBQWNoZixZQUN4QmdhLEVBQUsyRix1QkFBdUJDLFdBWXhEWixFQUFjMW1DLGlCQUFpQixtQkFBb0IsV0FDM0N5bkMsSUFJSnA4QyxPQUFPdzhDLFNBQVNDLFNBQ2hCTCxHQUFhLE1BR3pCdkIsRUF0R0EsR0F3R0E2QixFQUFBLG9CQUFBQSxLQVFBLE9BUElBLEVBQUE3OUMsVUFBQTA4QyxtQkFBQSxTQUFtQkcsR0FDZixJQUFJaUIsRUFBU3huQyxTQUFTNG1DLGVBQWUsVUFDakNZLElBQ0FBLEVBQU9SLFFBQVMsRUFDaEJRLEVBQU92RyxRQUFVc0YsRUFBT0EsU0FHcENnQixFQVJBLEdBZ0JBLElBQUk5QixFQUFZNTZDLE9BQVEsSUFBSTA4QyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCwgQWxsIHJpZ2h0cyByZXNlcnZlZC4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG5cbjsoZnVuY3Rpb24gKHVuZGVmaW5lZCkge1xuXG4gIHZhciBvYmplY3RUeXBlcyA9IHtcbiAgICAnZnVuY3Rpb24nOiB0cnVlLFxuICAgICdvYmplY3QnOiB0cnVlXG4gIH07XG5cbiAgZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIHZhciBmcmVlRXhwb3J0cyA9IChvYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSkgPyBleHBvcnRzIDogbnVsbDtcbiAgdmFyIGZyZWVNb2R1bGUgPSAob2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUpID8gbW9kdWxlIDogbnVsbDtcbiAgdmFyIGZyZWVHbG9iYWwgPSBjaGVja0dsb2JhbChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlICYmIHR5cGVvZiBnbG9iYWwgPT09ICdvYmplY3QnICYmIGdsb2JhbCk7XG4gIHZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKG9iamVjdFR5cGVzW3R5cGVvZiBzZWxmXSAmJiBzZWxmKTtcbiAgdmFyIGZyZWVXaW5kb3cgPSBjaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2Ygd2luZG93XSAmJiB3aW5kb3cpO1xuICB2YXIgbW9kdWxlRXhwb3J0cyA9IChmcmVlTW9kdWxlICYmIGZyZWVNb2R1bGUuZXhwb3J0cyA9PT0gZnJlZUV4cG9ydHMpID8gZnJlZUV4cG9ydHMgOiBudWxsO1xuICB2YXIgdGhpc0dsb2JhbCA9IGNoZWNrR2xvYmFsKG9iamVjdFR5cGVzW3R5cGVvZiB0aGlzXSAmJiB0aGlzKTtcbiAgdmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8ICgoZnJlZVdpbmRvdyAhPT0gKHRoaXNHbG9iYWwgJiYgdGhpc0dsb2JhbC53aW5kb3cpKSAmJiBmcmVlV2luZG93KSB8fCBmcmVlU2VsZiB8fCB0aGlzR2xvYmFsIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbiAgdmFyIFJ4ID0ge1xuICAgIGludGVybmFsczoge30sXG4gICAgY29uZmlnOiB7XG4gICAgICBQcm9taXNlOiByb290LlByb21pc2VcbiAgICB9LFxuICAgIGhlbHBlcnM6IHsgfVxuICB9O1xuXG4gIC8vIERlZmF1bHRzXG4gIHZhciBub29wID0gUnguaGVscGVycy5ub29wID0gZnVuY3Rpb24gKCkgeyB9LFxuICAgIGlkZW50aXR5ID0gUnguaGVscGVycy5pZGVudGl0eSA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LFxuICAgIGRlZmF1bHROb3cgPSBSeC5oZWxwZXJzLmRlZmF1bHROb3cgPSBEYXRlLm5vdyxcbiAgICBkZWZhdWx0Q29tcGFyZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRDb21wYXJlciA9IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiBpc0VxdWFsKHgsIHkpOyB9LFxuICAgIGRlZmF1bHRTdWJDb21wYXJlciA9IFJ4LmhlbHBlcnMuZGVmYXVsdFN1YkNvbXBhcmVyID0gZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggPiB5ID8gMSA6ICh4IDwgeSA/IC0xIDogMCk7IH0sXG4gICAgZGVmYXVsdEtleVNlcmlhbGl6ZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRLZXlTZXJpYWxpemVyID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudG9TdHJpbmcoKTsgfSxcbiAgICBkZWZhdWx0RXJyb3IgPSBSeC5oZWxwZXJzLmRlZmF1bHRFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsgdGhyb3cgZXJyOyB9LFxuICAgIGlzUHJvbWlzZSA9IFJ4LmhlbHBlcnMuaXNQcm9taXNlID0gZnVuY3Rpb24gKHApIHsgcmV0dXJuICEhcCAmJiB0eXBlb2YgcC5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJzsgfSxcbiAgICBpc0Z1bmN0aW9uID0gUnguaGVscGVycy5pc0Z1bmN0aW9uID0gKGZ1bmN0aW9uICgpIHtcblxuICAgICAgdmFyIGlzRm4gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nIHx8IGZhbHNlO1xuICAgICAgfTtcblxuICAgICAgLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG4gICAgICBpZiAoaXNGbigveC8pKSB7XG4gICAgICAgIGlzRm4gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyAmJiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gaXNGbjtcbiAgICB9KCkpO1xuXG4gIGZ1bmN0aW9uIGNsb25lQXJyYXkoYXJyKSB7IGZvcih2YXIgYSA9IFtdLCBpID0gMCwgbGVuID0gYXJyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGEucHVzaChhcnJbaV0pOyB9IHJldHVybiBhO31cblxuICB2YXIgZXJyb3JPYmogPSB7ZToge319O1xuICBcbiAgZnVuY3Rpb24gdHJ5Q2F0Y2hlckdlbih0cnlDYXRjaFRhcmdldCkge1xuICAgIHJldHVybiBmdW5jdGlvbiB0cnlDYXRjaGVyKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRyeUNhdGNoVGFyZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVycm9yT2JqLmUgPSBlO1xuICAgICAgICByZXR1cm4gZXJyb3JPYmo7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciB0cnlDYXRjaCA9IFJ4LmludGVybmFscy50cnlDYXRjaCA9IGZ1bmN0aW9uIHRyeUNhdGNoKGZuKSB7XG4gICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdmbiBtdXN0IGJlIGEgZnVuY3Rpb24nKTsgfVxuICAgIHJldHVybiB0cnlDYXRjaGVyR2VuKGZuKTtcbiAgfTtcblxuICBmdW5jdGlvbiB0aHJvd2VyKGUpIHtcbiAgICB0aHJvdyBlO1xuICB9XG5cbiAgUnguY29uZmlnLmxvbmdTdGFja1N1cHBvcnQgPSBmYWxzZTtcbiAgdmFyIGhhc1N0YWNrcyA9IGZhbHNlLCBzdGFja3MgPSB0cnlDYXRjaChmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBFcnJvcigpOyB9KSgpO1xuICBoYXNTdGFja3MgPSAhIXN0YWNrcy5lICYmICEhc3RhY2tzLmUuc3RhY2s7XG5cbiAgLy8gQWxsIGNvZGUgYWZ0ZXIgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzIHJlcG9ydGVkIGJ5IFJ4SlNcbiAgdmFyIHJTdGFydGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpLCByRmlsZU5hbWU7XG5cbiAgdmFyIFNUQUNLX0pVTVBfU0VQQVJBVE9SID0gJ0Zyb20gcHJldmlvdXMgZXZlbnQ6JztcblxuICBmdW5jdGlvbiBtYWtlU3RhY2tUcmFjZUxvbmcoZXJyb3IsIG9ic2VydmFibGUpIHtcbiAgICAvLyBJZiBwb3NzaWJsZSwgdHJhbnNmb3JtIHRoZSBlcnJvciBzdGFjayB0cmFjZSBieSByZW1vdmluZyBOb2RlIGFuZCBSeEpTXG4gICAgLy8gY3J1ZnQsIHRoZW4gY29uY2F0ZW5hdGluZyB3aXRoIHRoZSBzdGFjayB0cmFjZSBvZiBgb2JzZXJ2YWJsZWAuXG4gICAgaWYgKGhhc1N0YWNrcyAmJlxuICAgICAgICBvYnNlcnZhYmxlLnN0YWNrICYmXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiZcbiAgICAgICAgZXJyb3Iuc3RhY2sgJiZcbiAgICAgICAgZXJyb3Iuc3RhY2suaW5kZXhPZihTVEFDS19KVU1QX1NFUEFSQVRPUikgPT09IC0xXG4gICAgKSB7XG4gICAgICB2YXIgc3RhY2tzID0gW107XG4gICAgICBmb3IgKHZhciBvID0gb2JzZXJ2YWJsZTsgISFvOyBvID0gby5zb3VyY2UpIHtcbiAgICAgICAgaWYgKG8uc3RhY2spIHtcbiAgICAgICAgICBzdGFja3MudW5zaGlmdChvLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RhY2tzLnVuc2hpZnQoZXJyb3Iuc3RhY2spO1xuXG4gICAgICB2YXIgY29uY2F0ZWRTdGFja3MgPSBzdGFja3Muam9pbignXFxuJyArIFNUQUNLX0pVTVBfU0VQQVJBVE9SICsgJ1xcbicpO1xuICAgICAgZXJyb3Iuc3RhY2sgPSBmaWx0ZXJTdGFja1N0cmluZyhjb25jYXRlZFN0YWNrcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsdGVyU3RhY2tTdHJpbmcoc3RhY2tTdHJpbmcpIHtcbiAgICB2YXIgbGluZXMgPSBzdGFja1N0cmluZy5zcGxpdCgnXFxuJyksIGRlc2lyZWRMaW5lcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaW5lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGxpbmUgPSBsaW5lc1tpXTtcblxuICAgICAgaWYgKCFpc0ludGVybmFsRnJhbWUobGluZSkgJiYgIWlzTm9kZUZyYW1lKGxpbmUpICYmIGxpbmUpIHtcbiAgICAgICAgZGVzaXJlZExpbmVzLnB1c2gobGluZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkZXNpcmVkTGluZXMuam9pbignXFxuJyk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0ludGVybmFsRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpO1xuICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBmaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXSwgbGluZU51bWJlciA9IGZpbGVOYW1lQW5kTGluZU51bWJlclsxXTtcblxuICAgIHJldHVybiBmaWxlTmFtZSA9PT0gckZpbGVOYW1lICYmXG4gICAgICBsaW5lTnVtYmVyID49IHJTdGFydGluZ0xpbmUgJiZcbiAgICAgIGxpbmVOdW1iZXIgPD0gckVuZGluZ0xpbmU7XG4gIH1cblxuICBmdW5jdGlvbiBpc05vZGVGcmFtZShzdGFja0xpbmUpIHtcbiAgICByZXR1cm4gc3RhY2tMaW5lLmluZGV4T2YoJyhtb2R1bGUuanM6JykgIT09IC0xIHx8XG4gICAgICBzdGFja0xpbmUuaW5kZXhPZignKG5vZGUuanM6JykgIT09IC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FwdHVyZUxpbmUoKSB7XG4gICAgaWYgKCFoYXNTdGFja3MpIHsgcmV0dXJuOyB9XG5cbiAgICB0cnkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdmFyIGxpbmVzID0gZS5zdGFjay5zcGxpdCgnXFxuJyk7XG4gICAgICB2YXIgZmlyc3RMaW5lID0gbGluZXNbMF0uaW5kZXhPZignQCcpID4gMCA/IGxpbmVzWzFdIDogbGluZXNbMl07XG4gICAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKGZpcnN0TGluZSk7XG4gICAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikgeyByZXR1cm47IH1cblxuICAgICAgckZpbGVOYW1lID0gZmlsZU5hbWVBbmRMaW5lTnVtYmVyWzBdO1xuICAgICAgcmV0dXJuIGZpbGVOYW1lQW5kTGluZU51bWJlclsxXTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKSB7XG4gICAgLy8gTmFtZWQgZnVuY3Rpb25zOiAnYXQgZnVuY3Rpb25OYW1lIChmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlciknXG4gICAgdmFyIGF0dGVtcHQxID0gL2F0IC4rIFxcKCguKyk6KFxcZCspOig/OlxcZCspXFwpJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0MSkgeyByZXR1cm4gW2F0dGVtcHQxWzFdLCBOdW1iZXIoYXR0ZW1wdDFbMl0pXTsgfVxuXG4gICAgLy8gQW5vbnltb3VzIGZ1bmN0aW9uczogJ2F0IGZpbGVuYW1lOmxpbmVOdW1iZXI6Y29sdW1uTnVtYmVyJ1xuICAgIHZhciBhdHRlbXB0MiA9IC9hdCAoW14gXSspOihcXGQrKTooPzpcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDIpIHsgcmV0dXJuIFthdHRlbXB0MlsxXSwgTnVtYmVyKGF0dGVtcHQyWzJdKV07IH1cblxuICAgIC8vIEZpcmVmb3ggc3R5bGU6ICdmdW5jdGlvbkBmaWxlbmFtZTpsaW5lTnVtYmVyIG9yIEBmaWxlbmFtZTpsaW5lTnVtYmVyJ1xuICAgIHZhciBhdHRlbXB0MyA9IC8uKkAoLispOihcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDMpIHsgcmV0dXJuIFthdHRlbXB0M1sxXSwgTnVtYmVyKGF0dGVtcHQzWzJdKV07IH1cbiAgfVxuXG4gIHZhciBFbXB0eUVycm9yID0gUnguRW1wdHlFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubWVzc2FnZSA9ICdTZXF1ZW5jZSBjb250YWlucyBubyBlbGVtZW50cy4nO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIEVtcHR5RXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBFbXB0eUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0VtcHR5RXJyb3InO1xuXG4gIHZhciBPYmplY3REaXNwb3NlZEVycm9yID0gUnguT2JqZWN0RGlzcG9zZWRFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubWVzc2FnZSA9ICdPYmplY3QgaGFzIGJlZW4gZGlzcG9zZWQnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIE9iamVjdERpc3Bvc2VkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBPYmplY3REaXNwb3NlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ09iamVjdERpc3Bvc2VkRXJyb3InO1xuXG4gIHZhciBBcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IFJ4LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubWVzc2FnZSA9ICdBcmd1bWVudCBvdXQgb2YgcmFuZ2UnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnQXJndW1lbnRPdXRPZlJhbmdlRXJyb3InO1xuXG4gIHZhciBOb3RTdXBwb3J0ZWRFcnJvciA9IFJ4Lk5vdFN1cHBvcnRlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBOb3RTdXBwb3J0ZWRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIE5vdFN1cHBvcnRlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ05vdFN1cHBvcnRlZEVycm9yJztcblxuICB2YXIgTm90SW1wbGVtZW50ZWRFcnJvciA9IFJ4Lk5vdEltcGxlbWVudGVkRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBpbXBsZW1lbnRlZCc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgTm90SW1wbGVtZW50ZWRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIE5vdEltcGxlbWVudGVkRXJyb3IucHJvdG90eXBlLm5hbWUgPSAnTm90SW1wbGVtZW50ZWRFcnJvcic7XG5cbiAgdmFyIG5vdEltcGxlbWVudGVkID0gUnguaGVscGVycy5ub3RJbXBsZW1lbnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9O1xuXG4gIHZhciBub3RTdXBwb3J0ZWQgPSBSeC5oZWxwZXJzLm5vdFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoKTtcbiAgfTtcblxuICAvLyBTaGltIGluIGl0ZXJhdG9yIHN1cHBvcnRcbiAgdmFyICRpdGVyYXRvciQgPSAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3IpIHx8XG4gICAgJ19lczZzaGltX2l0ZXJhdG9yXyc7XG4gIC8vIEJ1ZyBmb3IgbW96aWxsYSB2ZXJzaW9uXG4gIGlmIChyb290LlNldCAmJiB0eXBlb2YgbmV3IHJvb3QuU2V0KClbJ0BAaXRlcmF0b3InXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICRpdGVyYXRvciQgPSAnQEBpdGVyYXRvcic7XG4gIH1cblxuICB2YXIgZG9uZUVudW1lcmF0b3IgPSBSeC5kb25lRW51bWVyYXRvciA9IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuXG4gIHZhciBpc0l0ZXJhYmxlID0gUnguaGVscGVycy5pc0l0ZXJhYmxlID0gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gbyAmJiBvWyRpdGVyYXRvciRdICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgdmFyIGlzQXJyYXlMaWtlID0gUnguaGVscGVycy5pc0FycmF5TGlrZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIG8gJiYgby5sZW5ndGggIT09IHVuZGVmaW5lZDtcbiAgfTtcblxuICBSeC5oZWxwZXJzLml0ZXJhdG9yID0gJGl0ZXJhdG9yJDtcblxuICB2YXIgYmluZENhbGxiYWNrID0gUnguaW50ZXJuYWxzLmJpbmRDYWxsYmFjayA9IGZ1bmN0aW9uIChmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICAgIGlmICh0eXBlb2YgdGhpc0FyZyA9PT0gJ3VuZGVmaW5lZCcpIHsgcmV0dXJuIGZ1bmM7IH1cbiAgICBzd2l0Y2goYXJnQ291bnQpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZylcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnKTtcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4KTtcbiAgICAgICAgfTtcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIHZhbHVlcyBhcmUgb2YgdGhlIGxhbmd1YWdlIHR5cGUgT2JqZWN0ICovXG4gIHZhciBkb250RW51bXMgPSBbJ3RvU3RyaW5nJyxcbiAgICAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICd2YWx1ZU9mJyxcbiAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICdpc1Byb3RvdHlwZU9mJyxcbiAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLFxuICAgICdjb25zdHJ1Y3RvciddLFxuICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcbiAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG4gICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG4gICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG4gICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcbiAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9XG50eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9IHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGUsXG4gICAgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eSxcbiAgICBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nLFxuICAgIE1BWF9TQUZFX0lOVEVHRVIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXG52YXIga2V5cyA9IE9iamVjdC5rZXlzIHx8IChmdW5jdGlvbigpIHtcbiAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgICAgICBoYXNEb250RW51bUJ1ZyA9ICEoeyB0b1N0cmluZzogbnVsbCB9KS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKSxcbiAgICAgICAgZG9udEVudW1zID0gW1xuICAgICAgICAgICd0b1N0cmluZycsXG4gICAgICAgICAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAgICAgICAndmFsdWVPZicsXG4gICAgICAgICAgJ2hhc093blByb3BlcnR5JyxcbiAgICAgICAgICAnaXNQcm90b3R5cGVPZicsXG4gICAgICAgICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAgICAgICAnY29uc3RydWN0b3InXG4gICAgICAgIF0sXG4gICAgICAgIGRvbnRFbnVtc0xlbmd0aCA9IGRvbnRFbnVtcy5sZW5ndGg7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgJiYgKHR5cGVvZiBvYmogIT09ICdmdW5jdGlvbicgfHwgb2JqID09PSBudWxsKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVzdWx0ID0gW10sIHByb3AsIGk7XG5cbiAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHByb3ApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNEb250RW51bUJ1Zykge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZG9udEVudW1zTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGRvbnRFbnVtc1tpXSkpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRvbnRFbnVtc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH0oKSk7XG5cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPT0gb3RoTGVuZ3RoICYmICFpc0xvb3NlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aCwga2V5O1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc0xvb3NlID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgdmFyIHNraXBDdG9yID0gaXNMb29zZTtcbiAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XSxcbiAgICAgICAgcmVzdWx0O1xuXG4gICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWQgPyBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikgOiByZXN1bHQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKCFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICBpZiAob2JqQ3RvciAhPT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcpIHtcbiAgc3dpdGNoICh0YWcpIHtcbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgICAgcmV0dXJuICtvYmplY3QgPT09ICtvdGhlcjtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIHJldHVybiAob2JqZWN0ICE9PSArb2JqZWN0KSA/XG4gICAgICAgIG90aGVyICE9PSArb3RoZXIgOlxuICAgICAgICBvYmplY3QgPT09ICtvdGhlcjtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdCA9PT0gKG90aGVyICsgJycpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxudmFyIGlzT2JqZWN0ID0gUnguaW50ZXJuYWxzLmlzT2JqZWN0ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKTtcbn07XG5cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnO1xufVxuXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG52YXIgaXNIb3N0T2JqZWN0ID0gKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIE9iamVjdCh7ICd0b1N0cmluZyc6IDAgfSArICcnKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgKHZhbHVlICsgJycpID09PSAnc3RyaW5nJztcbiAgfTtcbn0oKSk7XG5cbmZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gYXJyYXlUYWc7XG59O1xuXG5mdW5jdGlvbiBhcnJheVNvbWUgKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gIGlmIChhcnJMZW5ndGggIT09IG90aExlbmd0aCAmJiAhKGlzTG9vc2UgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XSxcbiAgICAgICAgcmVzdWx0O1xuXG4gICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChpc0xvb3NlKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBhcnJheVRhZyxcbiAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXG4gIGlmICghb2JqSXNBcnIpIHtcbiAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG4gICAgaWYgKG9ialRhZyA9PT0gYXJnc1RhZykge1xuICAgICAgb2JqVGFnID0gb2JqZWN0VGFnO1xuICAgIH0gZWxzZSBpZiAob2JqVGFnICE9PSBvYmplY3RUYWcpIHtcbiAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgfVxuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG90aGVyKTtcbiAgICBpZiAob3RoVGFnID09PSBhcmdzVGFnKSB7XG4gICAgICBvdGhUYWcgPSBvYmplY3RUYWc7XG4gICAgfVxuICB9XG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob2JqZWN0KSxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT09IG90aFRhZztcblxuICBpZiAoaXNTYW1lVGFnICYmICEob2JqSXNBcnIgfHwgb2JqSXNPYmopKSB7XG4gICAgcmV0dXJuIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnKTtcbiAgfVxuICBpZiAoIWlzTG9vc2UpIHtcbiAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblxuICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICByZXR1cm4gZXF1YWxGdW5jKG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LCBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICB9XG4gIH1cbiAgaWYgKCFpc1NhbWVUYWcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAvLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBkZXRlY3RpbmcgY2lyY3VsYXIgcmVmZXJlbmNlcyBzZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyNKTy5cbiAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG4gIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuXG4gIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT09IG9iamVjdCkge1xuICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09PSBvdGhlcjtcbiAgICB9XG4gIH1cbiAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgc3RhY2tBLnB1c2gob2JqZWN0KTtcbiAgc3RhY2tCLnB1c2gob3RoZXIpO1xuXG4gIHZhciByZXN1bHQgPSAob2JqSXNBcnIgPyBlcXVhbEFycmF5cyA6IGVxdWFsT2JqZWN0cykob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cbiAgc3RhY2tBLnBvcCgpO1xuICBzdGFja0IucG9wKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcbiAgfVxuICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbn1cblxudmFyIGlzRXF1YWwgPSBSeC5pbnRlcm5hbHMuaXNFcXVhbCA9IGZ1bmN0aW9uICh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlcik7XG59O1xuXG4gIHZhciBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgICBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuICB2YXIgaW5oZXJpdHMgPSBSeC5pbnRlcm5hbHMuaW5oZXJpdHMgPSBmdW5jdGlvbiAoY2hpbGQsIHBhcmVudCkge1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH1cbiAgICBfXy5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBfXygpO1xuICB9O1xuXG4gIHZhciBhZGRQcm9wZXJ0aWVzID0gUnguaW50ZXJuYWxzLmFkZFByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqKSB7XG4gICAgZm9yKHZhciBzb3VyY2VzID0gW10sIGkgPSAxLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICBmb3IgKHZhciBpZHggPSAwLCBsbiA9IHNvdXJjZXMubGVuZ3RoOyBpZHggPCBsbjsgaWR4KyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2lkeF07XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIFJ4IFV0aWxzXG4gIHZhciBhZGRSZWYgPSBSeC5pbnRlcm5hbHMuYWRkUmVmID0gZnVuY3Rpb24gKHhzLCByKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHIuZ2V0RGlzcG9zYWJsZSgpLCB4cy5zdWJzY3JpYmUob2JzZXJ2ZXIpKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcnJheUluaXRpYWxpemUoY291bnQsIGZhY3RvcnkpIHtcbiAgICB2YXIgYSA9IG5ldyBBcnJheShjb3VudCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICBhW2ldID0gZmFjdG9yeSgpO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEluZGV4ZWRJdGVtKGlkLCB2YWx1ZSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBJbmRleGVkSXRlbS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgdmFyIGMgPSB0aGlzLnZhbHVlLmNvbXBhcmVUbyhvdGhlci52YWx1ZSk7XG4gICAgYyA9PT0gMCAmJiAoYyA9IHRoaXMuaWQgLSBvdGhlci5pZCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG5cbiAgdmFyIFByaW9yaXR5UXVldWUgPSBSeC5pbnRlcm5hbHMuUHJpb3JpdHlRdWV1ZSA9IGZ1bmN0aW9uIChjYXBhY2l0eSkge1xuICAgIHRoaXMuaXRlbXMgPSBuZXcgQXJyYXkoY2FwYWNpdHkpO1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgfTtcblxuICB2YXIgcHJpb3JpdHlQcm90byA9IFByaW9yaXR5UXVldWUucHJvdG90eXBlO1xuICBwcmlvcml0eVByb3RvLmlzSGlnaGVyUHJpb3JpdHkgPSBmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtc1tsZWZ0XS5jb21wYXJlVG8odGhpcy5pdGVtc1tyaWdodF0pIDwgMDtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLnBlcmNvbGF0ZSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCB8fCBpbmRleCA8IDApIHsgcmV0dXJuOyB9XG4gICAgdmFyIHBhcmVudCA9IGluZGV4IC0gMSA+PiAxO1xuICAgIGlmIChwYXJlbnQgPCAwIHx8IHBhcmVudCA9PT0gaW5kZXgpIHsgcmV0dXJuOyB9XG4gICAgaWYgKHRoaXMuaXNIaWdoZXJQcmlvcml0eShpbmRleCwgcGFyZW50KSkge1xuICAgICAgdmFyIHRlbXAgPSB0aGlzLml0ZW1zW2luZGV4XTtcbiAgICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gdGhpcy5pdGVtc1twYXJlbnRdO1xuICAgICAgdGhpcy5pdGVtc1twYXJlbnRdID0gdGVtcDtcbiAgICAgIHRoaXMucGVyY29sYXRlKHBhcmVudCk7XG4gICAgfVxuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8uaGVhcGlmeSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICtpbmRleCB8fCAoaW5kZXggPSAwKTtcbiAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGggfHwgaW5kZXggPCAwKSB7IHJldHVybjsgfVxuICAgIHZhciBsZWZ0ID0gMiAqIGluZGV4ICsgMSxcbiAgICAgICAgcmlnaHQgPSAyICogaW5kZXggKyAyLFxuICAgICAgICBmaXJzdCA9IGluZGV4O1xuICAgIGlmIChsZWZ0IDwgdGhpcy5sZW5ndGggJiYgdGhpcy5pc0hpZ2hlclByaW9yaXR5KGxlZnQsIGZpcnN0KSkge1xuICAgICAgZmlyc3QgPSBsZWZ0O1xuICAgIH1cbiAgICBpZiAocmlnaHQgPCB0aGlzLmxlbmd0aCAmJiB0aGlzLmlzSGlnaGVyUHJpb3JpdHkocmlnaHQsIGZpcnN0KSkge1xuICAgICAgZmlyc3QgPSByaWdodDtcbiAgICB9XG4gICAgaWYgKGZpcnN0ICE9PSBpbmRleCkge1xuICAgICAgdmFyIHRlbXAgPSB0aGlzLml0ZW1zW2luZGV4XTtcbiAgICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gdGhpcy5pdGVtc1tmaXJzdF07XG4gICAgICB0aGlzLml0ZW1zW2ZpcnN0XSA9IHRlbXA7XG4gICAgICB0aGlzLmhlYXBpZnkoZmlyc3QpO1xuICAgIH1cbiAgfTtcblxuICBwcmlvcml0eVByb3RvLnBlZWsgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLml0ZW1zWzBdLnZhbHVlOyB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucmVtb3ZlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbLS10aGlzLmxlbmd0aF07XG4gICAgdGhpcy5pdGVtc1t0aGlzLmxlbmd0aF0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5oZWFwaWZ5KCk7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXN1bHQgPSB0aGlzLnBlZWsoKTtcbiAgICB0aGlzLnJlbW92ZUF0KDApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5lbnF1ZXVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmxlbmd0aCsrO1xuICAgIHRoaXMuaXRlbXNbaW5kZXhdID0gbmV3IEluZGV4ZWRJdGVtKFByaW9yaXR5UXVldWUuY291bnQrKywgaXRlbSk7XG4gICAgdGhpcy5wZXJjb2xhdGUoaW5kZXgpO1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8ucmVtb3ZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLml0ZW1zW2ldLnZhbHVlID09PSBpdGVtKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIFByaW9yaXR5UXVldWUuY291bnQgPSAwO1xuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIGEgZ3JvdXAgb2YgZGlzcG9zYWJsZSByZXNvdXJjZXMgdGhhdCBhcmUgZGlzcG9zZWQgdG9nZXRoZXIuXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgdmFyIENvbXBvc2l0ZURpc3Bvc2FibGUgPSBSeC5Db21wb3NpdGVEaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gW10sIGksIGxlbjtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICB0aGlzLmRpc3Bvc2FibGVzID0gYXJncztcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICB9O1xuXG4gIHZhciBDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlID0gQ29tcG9zaXRlRGlzcG9zYWJsZS5wcm90b3R5cGU7XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBkaXNwb3NhYmxlIHRvIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlIG9yIGRpc3Bvc2VzIHRoZSBkaXNwb3NhYmxlIGlmIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlIGlzIGRpc3Bvc2VkLlxuICAgKiBAcGFyYW0ge01peGVkfSBpdGVtIERpc3Bvc2FibGUgdG8gYWRkLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIGl0ZW0uZGlzcG9zZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzLnB1c2goaXRlbSk7XG4gICAgICB0aGlzLmxlbmd0aCsrO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlcyBhbmQgZGlzcG9zZXMgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYSBkaXNwb3NhYmxlIGZyb20gdGhlIENvbXBvc2l0ZURpc3Bvc2FibGUuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGl0ZW0gRGlzcG9zYWJsZSB0byByZW1vdmUuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGZvdW5kOyBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdmFyIHNob3VsZERpc3Bvc2UgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdmFyIGlkeCA9IHRoaXMuZGlzcG9zYWJsZXMuaW5kZXhPZihpdGVtKTtcbiAgICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICAgIHNob3VsZERpc3Bvc2UgPSB0cnVlO1xuICAgICAgICB0aGlzLmRpc3Bvc2FibGVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB0aGlzLmxlbmd0aC0tO1xuICAgICAgICBpdGVtLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZERpc3Bvc2U7XG4gIH07XG5cbiAgLyoqXG4gICAqICBEaXNwb3NlcyBhbGwgZGlzcG9zYWJsZXMgaW4gdGhlIGdyb3VwIGFuZCByZW1vdmVzIHRoZW0gZnJvbSB0aGUgZ3JvdXAuXG4gICAqL1xuICBDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgbGVuID0gdGhpcy5kaXNwb3NhYmxlcy5sZW5ndGgsIGN1cnJlbnREaXNwb3NhYmxlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGN1cnJlbnREaXNwb3NhYmxlc1tpXSA9IHRoaXMuZGlzcG9zYWJsZXNbaV07IH1cbiAgICAgIHRoaXMuZGlzcG9zYWJsZXMgPSBbXTtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcblxuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnREaXNwb3NhYmxlc1tpXS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIHNldCBvZiBzdGF0aWMgbWV0aG9kcyBmb3IgY3JlYXRpbmcgRGlzcG9zYWJsZXMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3Bvc2UgQWN0aW9uIHRvIHJ1biBkdXJpbmcgdGhlIGZpcnN0IGNhbGwgdG8gZGlzcG9zZS4gVGhlIGFjdGlvbiBpcyBndWFyYW50ZWVkIHRvIGJlIHJ1biBhdCBtb3N0IG9uY2UuXG4gICAqL1xuICB2YXIgRGlzcG9zYWJsZSA9IFJ4LkRpc3Bvc2FibGUgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb24gfHwgbm9vcDtcbiAgfTtcblxuICAvKiogUGVyZm9ybXMgdGhlIHRhc2sgb2YgY2xlYW5pbmcgdXAgcmVzb3VyY2VzLiAqL1xuICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmFjdGlvbigpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IGludm9rZXMgdGhlIHNwZWNpZmllZCBhY3Rpb24gd2hlbiBkaXNwb3NlZC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZGlzcG9zZSBBY3Rpb24gdG8gcnVuIGR1cmluZyB0aGUgZmlyc3QgY2FsbCB0byBkaXNwb3NlLiBUaGUgYWN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgcnVuIGF0IG1vc3Qgb25jZS5cbiAgICogQHJldHVybiB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHRoYXQgcnVucyB0aGUgZ2l2ZW4gYWN0aW9uIHVwb24gZGlzcG9zYWwuXG4gICAqL1xuICB2YXIgZGlzcG9zYWJsZUNyZWF0ZSA9IERpc3Bvc2FibGUuY3JlYXRlID0gZnVuY3Rpb24gKGFjdGlvbikgeyByZXR1cm4gbmV3IERpc3Bvc2FibGUoYWN0aW9uKTsgfTtcblxuICAvKipcbiAgICogR2V0cyB0aGUgZGlzcG9zYWJsZSB0aGF0IGRvZXMgbm90aGluZyB3aGVuIGRpc3Bvc2VkLlxuICAgKi9cbiAgdmFyIGRpc3Bvc2FibGVFbXB0eSA9IERpc3Bvc2FibGUuZW1wdHkgPSB7IGRpc3Bvc2U6IG5vb3AgfTtcblxuICAvKipcbiAgICogVmFsaWRhdGVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIGRpc3Bvc2FibGVcbiAgICogQHBhcmFtIHtPYmplY3R9IE9iamVjdCB0byB0ZXN0IHdoZXRoZXIgaXQgaGFzIGEgZGlzcG9zZSBtZXRob2RcbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYSBkaXNwb3NhYmxlIG9iamVjdCwgZWxzZSBmYWxzZS5cbiAgICovXG4gIHZhciBpc0Rpc3Bvc2FibGUgPSBEaXNwb3NhYmxlLmlzRGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkKSB7XG4gICAgcmV0dXJuIGQgJiYgaXNGdW5jdGlvbihkLmRpc3Bvc2UpO1xuICB9O1xuXG4gIHZhciBjaGVja0Rpc3Bvc2VkID0gRGlzcG9zYWJsZS5jaGVja0Rpc3Bvc2VkID0gZnVuY3Rpb24gKGRpc3Bvc2FibGUpIHtcbiAgICBpZiAoZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkKSB7IHRocm93IG5ldyBPYmplY3REaXNwb3NlZEVycm9yKCk7IH1cbiAgfTtcblxuICB2YXIgZGlzcG9zYWJsZUZpeHVwID0gRGlzcG9zYWJsZS5fZml4dXAgPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIGlzRGlzcG9zYWJsZShyZXN1bHQpID8gcmVzdWx0IDogZGlzcG9zYWJsZUVtcHR5O1xuICB9O1xuXG4gIC8vIFNpbmdsZSBhc3NpZ25tZW50XG4gIHZhciBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSA9IFJ4LlNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gIH07XG4gIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH07XG4gIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuY3VycmVudCkgeyB0aHJvdyBuZXcgRXJyb3IoJ0Rpc3Bvc2FibGUgaGFzIGFscmVhZHkgYmVlbiBhc3NpZ25lZCcpOyB9XG4gICAgdmFyIHNob3VsZERpc3Bvc2UgPSB0aGlzLmlzRGlzcG9zZWQ7XG4gICAgIXNob3VsZERpc3Bvc2UgJiYgKHRoaXMuY3VycmVudCA9IHZhbHVlKTtcbiAgICBzaG91bGREaXNwb3NlICYmIHZhbHVlICYmIHZhbHVlLmRpc3Bvc2UoKTtcbiAgfTtcbiAgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICAgIG9sZCAmJiBvbGQuZGlzcG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBNdWx0aXBsZSBhc3NpZ25tZW50IGRpc3Bvc2FibGVcbiAgdmFyIFNlcmlhbERpc3Bvc2FibGUgPSBSeC5TZXJpYWxEaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudDtcbiAgfTtcbiAgU2VyaWFsRGlzcG9zYWJsZS5wcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuICAgIGlmICghc2hvdWxkRGlzcG9zZSkge1xuICAgICAgdmFyIG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudCA9IHZhbHVlO1xuICAgIH1cbiAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcbiAgICBzaG91bGREaXNwb3NlICYmIHZhbHVlICYmIHZhbHVlLmRpc3Bvc2UoKTtcbiAgfTtcbiAgU2VyaWFsRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcbiAgfTtcblxuICB2YXIgQmluYXJ5RGlzcG9zYWJsZSA9IFJ4LkJpbmFyeURpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgIHRoaXMuX2ZpcnN0ID0gZmlyc3Q7XG4gICAgdGhpcy5fc2Vjb25kID0gc2Vjb25kO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9O1xuXG4gIEJpbmFyeURpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgb2xkMSA9IHRoaXMuX2ZpcnN0O1xuICAgICAgdGhpcy5fZmlyc3QgPSBudWxsO1xuICAgICAgb2xkMSAmJiBvbGQxLmRpc3Bvc2UoKTtcbiAgICAgIHZhciBvbGQyID0gdGhpcy5fc2Vjb25kO1xuICAgICAgdGhpcy5fc2Vjb25kID0gbnVsbDtcbiAgICAgIG9sZDIgJiYgb2xkMi5kaXNwb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBOQXJ5RGlzcG9zYWJsZSA9IFJ4Lk5BcnlEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGRpc3Bvc2FibGVzKSB7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMgPSBkaXNwb3NhYmxlcztcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICBOQXJ5RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0aGlzLl9kaXNwb3NhYmxlc1tpXS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGggPSAwO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIGRpc3Bvc2FibGUgcmVzb3VyY2UgdGhhdCBvbmx5IGRpc3Bvc2VzIGl0cyB1bmRlcmx5aW5nIGRpc3Bvc2FibGUgcmVzb3VyY2Ugd2hlbiBhbGwgZGVwZW5kZW50IGRpc3Bvc2FibGUgb2JqZWN0cyBoYXZlIGJlZW4gZGlzcG9zZWQuXG4gICAqL1xuICB2YXIgUmVmQ291bnREaXNwb3NhYmxlID0gUnguUmVmQ291bnREaXNwb3NhYmxlID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIElubmVyRGlzcG9zYWJsZShkaXNwb3NhYmxlKSB7XG4gICAgICB0aGlzLmRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlLmNvdW50Kys7XG4gICAgICB0aGlzLmlzSW5uZXJEaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIElubmVyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5kaXNwb3NhYmxlLmlzRGlzcG9zZWQgJiYgIXRoaXMuaXNJbm5lckRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNJbm5lckRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlLmNvdW50LS07XG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2FibGUuY291bnQgPT09IDAgJiYgdGhpcy5kaXNwb3NhYmxlLmlzUHJpbWFyeURpc3Bvc2VkKSB7XG4gICAgICAgICAgdGhpcy5kaXNwb3NhYmxlLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZS51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlZkNvdW50RGlzcG9zYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgZGlzcG9zYWJsZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0Rpc3Bvc2FibGV9IGRpc3Bvc2FibGUgVW5kZXJseWluZyBkaXNwb3NhYmxlLlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBSZWZDb3VudERpc3Bvc2FibGUoZGlzcG9zYWJsZSkge1xuICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZSA9IGRpc3Bvc2FibGU7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUgb25seSB3aGVuIGFsbCBkZXBlbmRlbnQgZGlzcG9zYWJsZXMgaGF2ZSBiZWVuIGRpc3Bvc2VkXG4gICAgICovXG4gICAgUmVmQ291bnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQgJiYgIXRoaXMuaXNQcmltYXJ5RGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5pc1ByaW1hcnlEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLmNvdW50ID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnVuZGVybHlpbmdEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZGVwZW5kZW50IGRpc3Bvc2FibGUgdGhhdCB3aGVuIGRpc3Bvc2VkIGRlY3JlYXNlcyB0aGUgcmVmY291bnQgb24gdGhlIHVuZGVybHlpbmcgZGlzcG9zYWJsZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkZXBlbmRlbnQgZGlzcG9zYWJsZSBjb250cmlidXRpbmcgdG8gdGhlIHJlZmVyZW5jZSBjb3VudCB0aGF0IG1hbmFnZXMgdGhlIHVuZGVybHlpbmcgZGlzcG9zYWJsZSdzIGxpZmV0aW1lLlxuICAgICAqL1xuICAgIFJlZkNvdW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzRGlzcG9zZWQgPyBkaXNwb3NhYmxlRW1wdHkgOiBuZXcgSW5uZXJEaXNwb3NhYmxlKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVmQ291bnREaXNwb3NhYmxlO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIFNjaGVkdWxlZERpc3Bvc2FibGUoc2NoZWR1bGVyLCBkaXNwb3NhYmxlKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlSXRlbShzLCBzZWxmKSB7XG4gICAgaWYgKCFzZWxmLmlzRGlzcG9zZWQpIHtcbiAgICAgIHNlbGYuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICBzZWxmLmRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIFNjaGVkdWxlZERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgc2NoZWR1bGVJdGVtKTtcbiAgfTtcblxuICB2YXIgU2NoZWR1bGVkSXRlbSA9IFJ4LmludGVybmFscy5TY2hlZHVsZWRJdGVtID0gZnVuY3Rpb24gKHNjaGVkdWxlciwgc3RhdGUsIGFjdGlvbiwgZHVlVGltZSwgY29tcGFyZXIpIHtcbiAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy5hY3Rpb24gPSBhY3Rpb247XG4gICAgdGhpcy5kdWVUaW1lID0gZHVlVGltZTtcbiAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXIgfHwgZGVmYXVsdFN1YkNvbXBhcmVyO1xuICAgIHRoaXMuZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLmludm9rZUNvcmUoKSk7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuY29tcGFyZVRvID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuY29tcGFyZXIodGhpcy5kdWVUaW1lLCBvdGhlci5kdWVUaW1lKTtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pc0NhbmNlbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwb3NhYmxlLmlzRGlzcG9zZWQ7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaW52b2tlQ29yZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKHRoaXMuYWN0aW9uKHRoaXMuc2NoZWR1bGVyLCB0aGlzLnN0YXRlKSk7XG4gIH07XG5cbiAgLyoqIFByb3ZpZGVzIGEgc2V0IG9mIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIGFjY2VzcyBjb21tb25seSB1c2VkIHNjaGVkdWxlcnMuICovXG4gIHZhciBTY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gU2NoZWR1bGVyKCkgeyB9XG5cbiAgICAvKiogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBzY2hlZHVsZXIgKi9cbiAgICBTY2hlZHVsZXIuaXNTY2hlZHVsZXIgPSBmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBTY2hlZHVsZXI7XG4gICAgfTtcblxuICAgIHZhciBzY2hlZHVsZXJQcm90byA9IFNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkdWVUaW1lLlxuICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIFJlbGF0aXZlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAqL1xuICAgIHNjaGVkdWxlclByb3RvLnNjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkdCA9IGR1ZVRpbWU7XG4gICAgICBkdCBpbnN0YW5jZW9mIERhdGUgJiYgKGR0ID0gZHQgLSB0aGlzLm5vdygpKTtcbiAgICAgIGR0ID0gU2NoZWR1bGVyLm5vcm1hbGl6ZShkdCk7XG5cbiAgICAgIGlmIChkdCA9PT0gMCkgeyByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uKTsgfVxuXG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVGdXR1cmUoc3RhdGUsIGR0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICBzY2hlZHVsZXJQcm90by5fc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgLyoqIEdldHMgdGhlIGN1cnJlbnQgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIG1hY2hpbmUncyBzeXN0ZW0gY2xvY2suICovXG4gICAgU2NoZWR1bGVyLm5vdyA9IGRlZmF1bHROb3c7XG5cbiAgICAvKiogR2V0cyB0aGUgY3VycmVudCB0aW1lIGFjY29yZGluZyB0byB0aGUgbG9jYWwgbWFjaGluZSdzIHN5c3RlbSBjbG9jay4gKi9cbiAgICBTY2hlZHVsZXIucHJvdG90eXBlLm5vdyA9IGRlZmF1bHROb3c7XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemVzIHRoZSBzcGVjaWZpZWQgVGltZVNwYW4gdmFsdWUgdG8gYSBwb3NpdGl2ZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gVGhlIHRpbWUgc3BhbiB2YWx1ZSB0byBub3JtYWxpemUuXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhlIHNwZWNpZmllZCBUaW1lU3BhbiB2YWx1ZSBpZiBpdCBpcyB6ZXJvIG9yIHBvc2l0aXZlOyBvdGhlcndpc2UsIDBcbiAgICAgKi9cbiAgICBTY2hlZHVsZXIubm9ybWFsaXplID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICB0aW1lU3BhbiA8IDAgJiYgKHRpbWVTcGFuID0gMCk7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZXI7XG4gIH0oKSk7XG5cbiAgdmFyIG5vcm1hbGl6ZVRpbWUgPSBTY2hlZHVsZXIubm9ybWFsaXplLCBpc1NjaGVkdWxlciA9IFNjaGVkdWxlci5pc1NjaGVkdWxlcjtcblxuICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG5cbiAgICBmdW5jdGlvbiBpbnZva2VSZWNJbW1lZGlhdGUoc2NoZWR1bGVyLCBwYWlyKSB7XG4gICAgICB2YXIgc3RhdGUgPSBwYWlyWzBdLCBhY3Rpb24gPSBwYWlyWzFdLCBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBhY3Rpb24oc3RhdGUsIGlubmVyQWN0aW9uKTtcbiAgICAgIHJldHVybiBncm91cDtcblxuICAgICAgZnVuY3Rpb24gaW5uZXJBY3Rpb24oc3RhdGUyKSB7XG4gICAgICAgIHZhciBpc0FkZGVkID0gZmFsc2UsIGlzRG9uZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBkID0gc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlMiwgc2NoZWR1bGVXb3JrKTtcbiAgICAgICAgaWYgKCFpc0RvbmUpIHtcbiAgICAgICAgICBncm91cC5hZGQoZCk7XG4gICAgICAgICAgaXNBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVdvcmsoXywgc3RhdGUzKSB7XG4gICAgICAgICAgaWYgKGlzQWRkZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLnJlbW92ZShkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aW9uKHN0YXRlMywgaW5uZXJBY3Rpb24pO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnZva2VSZWNEYXRlKHNjaGVkdWxlciwgcGFpcikge1xuICAgICAgdmFyIHN0YXRlID0gcGFpclswXSwgYWN0aW9uID0gcGFpclsxXSwgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgYWN0aW9uKHN0YXRlLCBpbm5lckFjdGlvbik7XG4gICAgICByZXR1cm4gZ3JvdXA7XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyQWN0aW9uKHN0YXRlMiwgZHVlVGltZTEpIHtcbiAgICAgICAgdmFyIGlzQWRkZWQgPSBmYWxzZSwgaXNEb25lID0gZmFsc2U7XG5cbiAgICAgICAgdmFyIGQgPSBzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUoc3RhdGUyLCBkdWVUaW1lMSwgc2NoZWR1bGVXb3JrKTtcbiAgICAgICAgaWYgKCFpc0RvbmUpIHtcbiAgICAgICAgICBncm91cC5hZGQoZCk7XG4gICAgICAgICAgaXNBZGRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzY2hlZHVsZVdvcmsoXywgc3RhdGUzKSB7XG4gICAgICAgICAgaWYgKGlzQWRkZWQpIHtcbiAgICAgICAgICAgIGdyb3VwLnJlbW92ZShkKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWN0aW9uKHN0YXRlMywgaW5uZXJBY3Rpb24pO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIHJlY3Vyc2l2ZWx5LlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gZXhlY3V0ZSByZWN1cnNpdmVseS4gVGhlIGxhc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgYWN0aW9uIGlzIHVzZWQgdG8gdHJpZ2dlciByZWN1cnNpdmUgc2NoZWR1bGluZyBvZiB0aGUgYWN0aW9uLCBwYXNzaW5nIGluIHJlY3Vyc2l2ZSBpbnZvY2F0aW9uIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVJlY3Vyc2l2ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZShbc3RhdGUsIGFjdGlvbl0sIGludm9rZVJlY0ltbWVkaWF0ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgcmVjdXJzaXZlbHkgYWZ0ZXIgYSBzcGVjaWZpZWQgcmVsYXRpdmUgb3IgYWJzb2x1dGUgZHVlIHRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBleGVjdXRlIHJlY3Vyc2l2ZWx5LiBUaGUgbGFzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBhY3Rpb24gaXMgdXNlZCB0byB0cmlnZ2VyIHJlY3Vyc2l2ZSBzY2hlZHVsaW5nIG9mIHRoZSBhY3Rpb24sIHBhc3NpbmcgaW4gdGhlIHJlY3Vyc2l2ZSBkdWUgdGltZSBhbmQgaW52b2NhdGlvbiBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlciB8IERhdGV9IGR1ZVRpbWUgUmVsYXRpdmUgb3IgYWJzb2x1dGUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24gZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZUZ1dHVyZShbc3RhdGUsIGFjdGlvbl0sIGR1ZVRpbWUsIGludm9rZVJlY0RhdGUpO1xuICAgIH07XG5cbiAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cbiAgKGZ1bmN0aW9uIChzY2hlZHVsZXJQcm90bykge1xuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcGVyaW9kaWMgcGllY2Ugb2Ygd29yayBieSBkeW5hbWljYWxseSBkaXNjb3ZlcmluZyB0aGUgc2NoZWR1bGVyJ3MgY2FwYWJpbGl0aWVzLiBUaGUgcGVyaW9kaWMgdGFzayB3aWxsIGJlIHNjaGVkdWxlZCB1c2luZyB3aW5kb3cuc2V0SW50ZXJ2YWwgZm9yIHRoZSBiYXNlIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIEluaXRpYWwgc3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdXBvbiB0aGUgZmlyc3QgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBydW5uaW5nIHRoZSB3b3JrIHBlcmlvZGljYWxseS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLCBwb3RlbnRpYWxseSB1cGRhdGluZyB0aGUgc3RhdGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIHJlY3VycmluZyBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZVBlcmlvZGljID0gZnVuY3Rpb24oc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIHJvb3Quc2V0SW50ZXJ2YWwgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpOyB9XG4gICAgICBwZXJpb2QgPSBub3JtYWxpemVUaW1lKHBlcmlvZCk7XG4gICAgICB2YXIgcyA9IHN0YXRlLCBpZCA9IHJvb3Quc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgeyBzID0gYWN0aW9uKHMpOyB9LCBwZXJpb2QpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkgeyByb290LmNsZWFySW50ZXJ2YWwoaWQpOyB9KTtcbiAgICB9O1xuXG4gIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXG4gIChmdW5jdGlvbiAoc2NoZWR1bGVyUHJvdG8pIHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2NoZWR1bGVyIHRoYXQgd3JhcHMgdGhlIG9yaWdpbmFsIHNjaGVkdWxlciwgYWRkaW5nIGV4Y2VwdGlvbiBoYW5kbGluZyBmb3Igc2NoZWR1bGVkIGFjdGlvbnMuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBIYW5kbGVyIHRoYXQncyBydW4gaWYgYW4gZXhjZXB0aW9uIGlzIGNhdWdodC4gVGhlIGV4Y2VwdGlvbiB3aWxsIGJlIHJldGhyb3duIGlmIHRoZSBoYW5kbGVyIHJldHVybnMgZmFsc2UuXG4gICAgICogQHJldHVybnMge1NjaGVkdWxlcn0gV3JhcHBlciBhcm91bmQgdGhlIG9yaWdpbmFsIHNjaGVkdWxlciwgZW5mb3JjaW5nIGV4Y2VwdGlvbiBoYW5kbGluZy5cbiAgICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5jYXRjaEVycm9yID0gc2NoZWR1bGVyUHJvdG9bJ2NhdGNoJ10gPSBmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgcmV0dXJuIG5ldyBDYXRjaFNjaGVkdWxlcih0aGlzLCBoYW5kbGVyKTtcbiAgICB9O1xuICB9KFNjaGVkdWxlci5wcm90b3R5cGUpKTtcblxuICB2YXIgU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZSA9IFJ4LmludGVybmFscy5TY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVUaWNrKHNlbGYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiB0aWNrKGNvbW1hbmQsIHJlY3Vyc2UpIHtcbiAgICAgICAgcmVjdXJzZSgwLCBzZWxmLl9wZXJpb2QpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0cnlDYXRjaChzZWxmLl9hY3Rpb24pKHNlbGYuX3N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlID09PSBlcnJvck9iaikge1xuICAgICAgICAgIHNlbGYuX2NhbmNlbC5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhyb3dlcihzdGF0ZS5lKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlKHNjaGVkdWxlciwgc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fcGVyaW9kID0gcGVyaW9kO1xuICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuICAgIH1cblxuICAgIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX2NhbmNlbCA9IGQ7XG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKDAsIHRoaXMuX3BlcmlvZCwgY3JlYXRlVGljayh0aGlzKSkpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmU7XG4gIH0oKSk7XG5cbiAgLyoqIEdldHMgYSBzY2hlZHVsZXIgdGhhdCBzY2hlZHVsZXMgd29yayBpbW1lZGlhdGVseSBvbiB0aGUgY3VycmVudCB0aHJlYWQuICovXG4gICB2YXIgSW1tZWRpYXRlU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbW1lZGlhdGVTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW1tZWRpYXRlU2NoZWR1bGVyKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW1tZWRpYXRlU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKGFjdGlvbih0aGlzLCBzdGF0ZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW1tZWRpYXRlU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBpbW1lZGlhdGVTY2hlZHVsZXIgPSBTY2hlZHVsZXIuaW1tZWRpYXRlID0gbmV3IEltbWVkaWF0ZVNjaGVkdWxlcigpO1xuXG4gIC8qKlxuICAgKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgYXMgc29vbiBhcyBwb3NzaWJsZSBvbiB0aGUgY3VycmVudCB0aHJlYWQuXG4gICAqL1xuICB2YXIgQ3VycmVudFRocmVhZFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgdmFyIHF1ZXVlO1xuXG4gICAgZnVuY3Rpb24gcnVuVHJhbXBvbGluZSAoKSB7XG4gICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgaXRlbSA9IHF1ZXVlLmRlcXVldWUoKTtcbiAgICAgICAgIWl0ZW0uaXNDYW5jZWxsZWQoKSAmJiBpdGVtLmludm9rZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGluaGVyaXRzKEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ3VycmVudFRocmVhZFNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBzaSA9IG5ldyBTY2hlZHVsZWRJdGVtKHRoaXMsIHN0YXRlLCBhY3Rpb24sIHRoaXMubm93KCkpO1xuXG4gICAgICBpZiAoIXF1ZXVlKSB7XG4gICAgICAgIHF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoNCk7XG4gICAgICAgIHF1ZXVlLmVucXVldWUoc2kpO1xuXG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChydW5UcmFtcG9saW5lKSgpO1xuICAgICAgICBxdWV1ZSA9IG51bGw7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHRocm93ZXIocmVzdWx0LmUpOyB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZS5lbnF1ZXVlKHNpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaS5kaXNwb3NhYmxlO1xuICAgIH07XG5cbiAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZVJlcXVpcmVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gIXF1ZXVlOyB9O1xuXG4gICAgcmV0dXJuIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgdmFyIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIgPSBTY2hlZHVsZXIuY3VycmVudFRocmVhZCA9IG5ldyBDdXJyZW50VGhyZWFkU2NoZWR1bGVyKCk7XG5cbiAgdmFyIHNjaGVkdWxlTWV0aG9kLCBjbGVhck1ldGhvZDtcblxuICB2YXIgbG9jYWxUaW1lciA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxvY2FsU2V0VGltZW91dCwgbG9jYWxDbGVhclRpbWVvdXQgPSBub29wO1xuICAgIGlmICghIXJvb3Quc2V0VGltZW91dCkge1xuICAgICAgbG9jYWxTZXRUaW1lb3V0ID0gcm9vdC5zZXRUaW1lb3V0O1xuICAgICAgbG9jYWxDbGVhclRpbWVvdXQgPSByb290LmNsZWFyVGltZW91dDtcbiAgICB9IGVsc2UgaWYgKCEhcm9vdC5XU2NyaXB0KSB7XG4gICAgICBsb2NhbFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoZm4sIHRpbWUpIHtcbiAgICAgICAgcm9vdC5XU2NyaXB0LlNsZWVwKHRpbWUpO1xuICAgICAgICBmbigpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNldFRpbWVvdXQ6IGxvY2FsU2V0VGltZW91dCxcbiAgICAgIGNsZWFyVGltZW91dDogbG9jYWxDbGVhclRpbWVvdXRcbiAgICB9O1xuICB9KCkpO1xuICB2YXIgbG9jYWxTZXRUaW1lb3V0ID0gbG9jYWxUaW1lci5zZXRUaW1lb3V0LFxuICAgIGxvY2FsQ2xlYXJUaW1lb3V0ID0gbG9jYWxUaW1lci5jbGVhclRpbWVvdXQ7XG5cbiAgKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBuZXh0SGFuZGxlID0gMSwgdGFza3NCeUhhbmRsZSA9IHt9LCBjdXJyZW50bHlSdW5uaW5nID0gZmFsc2U7XG5cbiAgICBjbGVhck1ldGhvZCA9IGZ1bmN0aW9uIChoYW5kbGUpIHtcbiAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHJ1blRhc2soaGFuZGxlKSB7XG4gICAgICBpZiAoY3VycmVudGx5UnVubmluZykge1xuICAgICAgICBsb2NhbFNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBydW5UYXNrKGhhbmRsZSk7IH0sIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgY3VycmVudGx5UnVubmluZyA9IHRydWU7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRhc2spKCk7XG4gICAgICAgICAgY2xlYXJNZXRob2QoaGFuZGxlKTtcbiAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgdGhyb3dlcihyZXN1bHQuZSk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZU5hdGl2ZSA9IG5ldyBSZWdFeHAoJ14nICtcbiAgICAgIFN0cmluZyh0b1N0cmluZylcbiAgICAgICAgLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJylcbiAgICAgICAgLnJlcGxhY2UoL3RvU3RyaW5nfCBmb3IgW15cXF1dKy9nLCAnLio/JykgKyAnJCdcbiAgICApO1xuXG4gICAgdmFyIHNldEltbWVkaWF0ZSA9IHR5cGVvZiAoc2V0SW1tZWRpYXRlID0gZnJlZUdsb2JhbCAmJiBtb2R1bGVFeHBvcnRzICYmIGZyZWVHbG9iYWwuc2V0SW1tZWRpYXRlKSA9PSAnZnVuY3Rpb24nICYmXG4gICAgICAhcmVOYXRpdmUudGVzdChzZXRJbW1lZGlhdGUpICYmIHNldEltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHBvc3RNZXNzYWdlU3VwcG9ydGVkICgpIHtcbiAgICAgIC8vIEVuc3VyZSBub3QgaW4gYSB3b3JrZXJcbiAgICAgIGlmICghcm9vdC5wb3N0TWVzc2FnZSB8fCByb290LmltcG9ydFNjcmlwdHMpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICB2YXIgaXNBc3luYyA9IGZhbHNlLCBvbGRIYW5kbGVyID0gcm9vdC5vbm1lc3NhZ2U7XG4gICAgICAvLyBUZXN0IGZvciBhc3luY1xuICAgICAgcm9vdC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7IGlzQXN5bmMgPSB0cnVlOyB9O1xuICAgICAgcm9vdC5wb3N0TWVzc2FnZSgnJywgJyonKTtcbiAgICAgIHJvb3Qub25tZXNzYWdlID0gb2xkSGFuZGxlcjtcblxuICAgICAgcmV0dXJuIGlzQXN5bmM7XG4gICAgfVxuXG4gICAgLy8gVXNlIGluIG9yZGVyLCBzZXRJbW1lZGlhdGUsIG5leHRUaWNrLCBwb3N0TWVzc2FnZSwgTWVzc2FnZUNoYW5uZWwsIHNjcmlwdCByZWFkeXN0YXRlY2hhbmdlZCwgc2V0VGltZW91dFxuICAgIGlmIChpc0Z1bmN0aW9uKHNldEltbWVkaWF0ZSkpIHtcbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICBzZXRJbW1lZGlhdGUoZnVuY3Rpb24gKCkgeyBydW5UYXNrKGlkKTsgfSk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuVGFzayhpZCk7IH0pO1xuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChwb3N0TWVzc2FnZVN1cHBvcnRlZCgpKSB7XG4gICAgICB2YXIgTVNHX1BSRUZJWCA9ICdtcy5yeC5zY2hlZHVsZScgKyBNYXRoLnJhbmRvbSgpO1xuXG4gICAgICB2YXIgb25HbG9iYWxQb3N0TWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAvLyBPbmx5IGlmIHdlJ3JlIGEgbWF0Y2ggdG8gYXZvaWQgYW55IG90aGVyIGdsb2JhbCBldmVudHNcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudC5kYXRhID09PSAnc3RyaW5nJyAmJiBldmVudC5kYXRhLnN1YnN0cmluZygwLCBNU0dfUFJFRklYLmxlbmd0aCkgPT09IE1TR19QUkVGSVgpIHtcbiAgICAgICAgICBydW5UYXNrKGV2ZW50LmRhdGEuc3Vic3RyaW5nKE1TR19QUkVGSVgubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHJvb3QuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIG9uR2xvYmFsUG9zdE1lc3NhZ2UsIGZhbHNlKTtcblxuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIHJvb3QucG9zdE1lc3NhZ2UoTVNHX1BSRUZJWCArIGlkLCAnKicpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoISFyb290Lk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICB2YXIgY2hhbm5lbCA9IG5ldyByb290Lk1lc3NhZ2VDaGFubmVsKCk7XG5cbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsgcnVuVGFzayhlLmRhdGEpOyB9O1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShpZCk7XG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICgnZG9jdW1lbnQnIGluIHJvb3QgJiYgJ29ucmVhZHlzdGF0ZWNoYW5nZScgaW4gcm9vdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuXG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIHNjcmlwdEVsZW1lbnQgPSByb290LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuXG4gICAgICAgIHNjcmlwdEVsZW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJ1blRhc2soaWQpO1xuICAgICAgICAgIHNjcmlwdEVsZW1lbnQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICBzY3JpcHRFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gICAgICAgICAgc2NyaXB0RWxlbWVudCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHJvb3QuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICBsb2NhbFNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJ1blRhc2soaWQpO1xuICAgICAgICB9LCAwKTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH1cbiAgfSgpKTtcblxuICAvKipcbiAgICogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIHZpYSBhIHRpbWVkIGNhbGxiYWNrIGJhc2VkIHVwb24gcGxhdGZvcm0uXG4gICAqL1xuICAgdmFyIERlZmF1bHRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgICBpbmhlcml0cyhEZWZhdWx0U2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgICBmdW5jdGlvbiBEZWZhdWx0U2NoZWR1bGVyKCkge1xuICAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICB9XG5cbiAgICAgZnVuY3Rpb24gc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCBzY2hlZHVsZXIsIHN0YXRlKSB7XG4gICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNjaGVkdWxlKCkge1xuICAgICAgICAgZGlzcG9zYWJsZS5zZXREaXNwb3NhYmxlKERpc3Bvc2FibGUuX2ZpeHVwKGFjdGlvbihzY2hlZHVsZXIsIHN0YXRlKSkpO1xuICAgICAgIH07XG4gICAgIH1cblxuICAgICBmdW5jdGlvbiBDbGVhckRpc3Bvc2FibGUoaWQpIHtcbiAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICB9XG5cbiAgICAgQ2xlYXJEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgY2xlYXJNZXRob2QodGhpcy5faWQpO1xuICAgICAgIH1cbiAgICAgfTtcblxuICAgICBmdW5jdGlvbiBMb2NhbENsZWFyRGlzcG9zYWJsZShpZCkge1xuICAgICAgIHRoaXMuX2lkID0gaWQ7XG4gICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgIH1cblxuICAgICBMb2NhbENsZWFyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgIGxvY2FsQ2xlYXJUaW1lb3V0KHRoaXMuX2lkKTtcbiAgICAgICB9XG4gICAgIH07XG5cbiAgICBEZWZhdWx0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGlkID0gc2NoZWR1bGVNZXRob2Qoc2NoZWR1bGVBY3Rpb24oZGlzcG9zYWJsZSwgYWN0aW9uLCB0aGlzLCBzdGF0ZSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGRpc3Bvc2FibGUsIG5ldyBDbGVhckRpc3Bvc2FibGUoaWQpKTtcbiAgICB9O1xuXG4gICAgRGVmYXVsdFNjaGVkdWxlci5wcm90b3R5cGUuX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIGlmIChkdWVUaW1lID09PSAwKSB7IHJldHVybiB0aGlzLnNjaGVkdWxlKHN0YXRlLCBhY3Rpb24pOyB9XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGlkID0gbG9jYWxTZXRUaW1lb3V0KHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpLCBkdWVUaW1lKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShkaXNwb3NhYmxlLCBuZXcgTG9jYWxDbGVhckRpc3Bvc2FibGUoaWQpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVMb25nUnVubmluZyhzdGF0ZSwgYWN0aW9uLCBkaXNwb3NhYmxlKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkgeyBhY3Rpb24oc3RhdGUsIGRpc3Bvc2FibGUpOyB9O1xuICAgIH1cblxuICAgIERlZmF1bHRTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlTG9uZ1J1bm5pbmcgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlQ3JlYXRlKG5vb3ApO1xuICAgICAgc2NoZWR1bGVNZXRob2Qoc2NoZWR1bGVMb25nUnVubmluZyhzdGF0ZSwgYWN0aW9uLCBkaXNwb3NhYmxlKSk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmF1bHRTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgdmFyIGRlZmF1bHRTY2hlZHVsZXIgPSBTY2hlZHVsZXJbJ2RlZmF1bHQnXSA9IFNjaGVkdWxlci5hc3luYyA9IG5ldyBEZWZhdWx0U2NoZWR1bGVyKCk7XG5cbiAgdmFyIENhdGNoU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDYXRjaFNjaGVkdWxlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIENhdGNoU2NoZWR1bGVyKHNjaGVkdWxlciwgaGFuZGxlcikge1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5faGFuZGxlciA9IGhhbmRsZXI7XG4gICAgICB0aGlzLl9yZWN1cnNpdmVPcmlnaW5hbCA9IG51bGw7XG4gICAgICB0aGlzLl9yZWN1cnNpdmVXcmFwcGVyID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCB0aGlzLl93cmFwKGFjdGlvbikpO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIGR1ZVRpbWUsIHRoaXMuX3dyYXAoYWN0aW9uKSk7XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9zY2hlZHVsZXIubm93KCk7IH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX2Nsb25lID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgICByZXR1cm4gbmV3IENhdGNoU2NoZWR1bGVyKHNjaGVkdWxlciwgdGhpcy5faGFuZGxlcik7XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5fd3JhcCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBzdGF0ZSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2goYWN0aW9uKShwYXJlbnQuX2dldFJlY3Vyc2l2ZVdyYXBwZXIoc2VsZiksIHN0YXRlKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICBpZiAoIXBhcmVudC5faGFuZGxlcihyZXMuZSkpIHsgdGhyb3dlcihyZXMuZSk7IH1cbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRml4dXAocmVzKTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5fZ2V0UmVjdXJzaXZlV3JhcHBlciA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgIGlmICh0aGlzLl9yZWN1cnNpdmVPcmlnaW5hbCAhPT0gc2NoZWR1bGVyKSB7XG4gICAgICAgIHRoaXMuX3JlY3Vyc2l2ZU9yaWdpbmFsID0gc2NoZWR1bGVyO1xuICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuX2Nsb25lKHNjaGVkdWxlcik7XG4gICAgICAgIHdyYXBwZXIuX3JlY3Vyc2l2ZU9yaWdpbmFsID0gc2NoZWR1bGVyO1xuICAgICAgICB3cmFwcGVyLl9yZWN1cnNpdmVXcmFwcGVyID0gd3JhcHBlcjtcbiAgICAgICAgdGhpcy5fcmVjdXJzaXZlV3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fcmVjdXJzaXZlV3JhcHBlcjtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLnNjaGVkdWxlUGVyaW9kaWMgPSBmdW5jdGlvbiAoc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsIGZhaWxlZCA9IGZhbHNlLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVQZXJpb2RpYyhzdGF0ZSwgcGVyaW9kLCBmdW5jdGlvbiAoc3RhdGUxKSB7XG4gICAgICAgIGlmIChmYWlsZWQpIHsgcmV0dXJuIG51bGw7IH1cbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKGFjdGlvbikoc3RhdGUxKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICghc2VsZi5faGFuZGxlcihyZXMuZSkpIHsgdGhyb3dlcihyZXMuZSk7IH1cbiAgICAgICAgICBkLmRpc3Bvc2UoKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhdGNoU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIC8qKlxuICAgKiAgUmVwcmVzZW50cyBhIG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICovXG4gIHZhciBOb3RpZmljYXRpb24gPSBSeC5Ob3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbigpIHtcblxuICAgIH1cblxuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH07XG5cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBkZWxlZ2F0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBub3RpZmljYXRpb24gb3IgdGhlIG9ic2VydmVyJ3MgbWV0aG9kIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5vdGlmaWNhdGlvbiBhbmQgcmV0dXJucyB0aGUgcHJvZHVjZWQgcmVzdWx0LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb24gfCBPYnNlcnZlcn0gb2JzZXJ2ZXJPck9uTmV4dCBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGFuIE9uTmV4dCBub3RpZmljYXRpb24gb3IgT2JzZXJ2ZXIgdG8gaW52b2tlIHRoZSBub3RpZmljYXRpb24gb24uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBhbiBPbkVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGFuIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJucyB7QW55fSBSZXN1bHQgcHJvZHVjZWQgYnkgdGhlIG9ic2VydmF0aW9uLlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuYWNjZXB0ID0gZnVuY3Rpb24gKG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gb2JzZXJ2ZXJPck9uTmV4dCAmJiB0eXBlb2Ygb2JzZXJ2ZXJPck9uTmV4dCA9PT0gJ29iamVjdCcgP1xuICAgICAgICB0aGlzLl9hY2NlcHRPYnNlcnZlcihvYnNlcnZlck9yT25OZXh0KSA6XG4gICAgICAgIHRoaXMuX2FjY2VwdChvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIG5vdGlmaWNhdGlvbi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBOb3RpZmljYXRpb25zXG4gICAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgbm90aWZpY2F0aW9uIGNhbGxzIG9uLlxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHN1cmZhY2VzIHRoZSBiZWhhdmlvciBvZiB0aGUgbm90aWZpY2F0aW9uIHVwb24gc3Vic2NyaXB0aW9uLlxuICAgICAqL1xuICAgIE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9PYnNlcnZhYmxlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlKHNlbGYsIGZ1bmN0aW9uIChfLCBub3RpZmljYXRpb24pIHtcbiAgICAgICAgICBub3RpZmljYXRpb24uX2FjY2VwdE9ic2VydmVyKG8pO1xuICAgICAgICAgIG5vdGlmaWNhdGlvbi5raW5kID09PSAnTicgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gTm90aWZpY2F0aW9uO1xuICB9KSgpO1xuXG4gIHZhciBPbk5leHROb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uTmV4dE5vdGlmaWNhdGlvbiwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPbk5leHROb3RpZmljYXRpb24odmFsdWUpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMua2luZCA9ICdOJztcbiAgICB9XG5cbiAgICBPbk5leHROb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0KSB7XG4gICAgICByZXR1cm4gb25OZXh0KHRoaXMudmFsdWUpO1xuICAgIH07XG5cbiAgICBPbk5leHROb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHRPYnNlcnZlciA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgfTtcblxuICAgIE9uTmV4dE5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ09uTmV4dCgnICsgdGhpcy52YWx1ZSArICcpJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uTmV4dE5vdGlmaWNhdGlvbjtcbiAgfShOb3RpZmljYXRpb24pKTtcblxuICB2YXIgT25FcnJvck5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25FcnJvck5vdGlmaWNhdGlvbiwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPbkVycm9yTm90aWZpY2F0aW9uKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICB0aGlzLmtpbmQgPSAnRSc7XG4gICAgfVxuXG4gICAgT25FcnJvck5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdCA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IpIHtcbiAgICAgIHJldHVybiBvbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgIH07XG5cbiAgICBPbkVycm9yTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG8ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICB9O1xuXG4gICAgT25FcnJvck5vdGlmaWNhdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gJ09uRXJyb3IoJyArIHRoaXMuZXJyb3IgKyAnKSc7XG4gICAgfTtcblxuICAgIHJldHVybiBPbkVycm9yTm90aWZpY2F0aW9uO1xuICB9KE5vdGlmaWNhdGlvbikpO1xuXG4gIHZhciBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25Db21wbGV0ZWROb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25Db21wbGV0ZWROb3RpZmljYXRpb24oKSB7XG4gICAgICB0aGlzLmtpbmQgPSAnQyc7XG4gICAgfVxuXG4gICAgT25Db21wbGV0ZWROb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgcmV0dXJuIG9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgT25Db21wbGV0ZWROb3RpZmljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICdPbkNvbXBsZXRlZCgpJztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uO1xuICB9KE5vdGlmaWNhdGlvbikpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25OZXh0IG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICogQHBhcmFtIHtBbnl9IHZhbHVlIFRoZSB2YWx1ZSBjb250YWluZWQgaW4gdGhlIG5vdGlmaWNhdGlvbi5cbiAgICogQHJldHVybnMge05vdGlmaWNhdGlvbn0gVGhlIE9uTmV4dCBub3RpZmljYXRpb24gY29udGFpbmluZyB0aGUgdmFsdWUuXG4gICAqL1xuICB2YXIgbm90aWZpY2F0aW9uQ3JlYXRlT25OZXh0ID0gTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgT25OZXh0Tm90aWZpY2F0aW9uKHZhbHVlKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKiBAcGFyYW0ge0FueX0gZXJyb3IgVGhlIGV4Y2VwdGlvbiBjb250YWluZWQgaW4gdGhlIG5vdGlmaWNhdGlvbi5cbiAgICogQHJldHVybnMge05vdGlmaWNhdGlvbn0gVGhlIE9uRXJyb3Igbm90aWZpY2F0aW9uIGNvbnRhaW5pbmcgdGhlIGV4Y2VwdGlvbi5cbiAgICovXG4gIHZhciBub3RpZmljYXRpb25DcmVhdGVPbkVycm9yID0gTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICByZXR1cm4gbmV3IE9uRXJyb3JOb3RpZmljYXRpb24oZXJyb3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIHRvIGFuIG9ic2VydmVyLlxuICAgKiBAcmV0dXJucyB7Tm90aWZpY2F0aW9ufSBUaGUgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uQ29tcGxldGVkID0gTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgT25Db21wbGV0ZWROb3RpZmljYXRpb24oKTtcbiAgfTtcblxuICAvKipcbiAgICogU3VwcG9ydHMgcHVzaC1zdHlsZSBpdGVyYXRpb24gb3ZlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKi9cbiAgdmFyIE9ic2VydmVyID0gUnguT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7IH07XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGEgbm90aWZpY2F0aW9uIGNhbGxiYWNrIGZyb20gYW4gb2JzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIFRoZSBhY3Rpb24gdGhhdCBmb3J3YXJkcyBpdHMgaW5wdXQgbm90aWZpY2F0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIG9ic2VydmVyLlxuICAgKi9cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLnRvTm90aWZpZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9ic2VydmVyID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4uYWNjZXB0KG9ic2VydmVyKTsgfTtcbiAgfTtcblxuICAvKipcbiAgICogIEhpZGVzIHRoZSBpZGVudGl0eSBvZiBhbiBvYnNlcnZlci5cbiAgICogQHJldHVybnMgQW4gb2JzZXJ2ZXIgdGhhdCBoaWRlcyB0aGUgaWRlbnRpdHkgb2YgdGhlIHNwZWNpZmllZCBvYnNlcnZlci5cbiAgICovXG4gIE9ic2VydmVyLnByb3RvdHlwZS5hc09ic2VydmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmVyKFxuICAgICAgZnVuY3Rpb24gKHgpIHsgc2VsZi5vbk5leHQoeCk7IH0sXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7IHNlbGYub25FcnJvcihlcnIpOyB9LFxuICAgICAgZnVuY3Rpb24gKCkgeyBzZWxmLm9uQ29tcGxldGVkKCk7IH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ2hlY2tzIGFjY2VzcyB0byB0aGUgb2JzZXJ2ZXIgZm9yIGdyYW1tYXIgdmlvbGF0aW9ucy4gVGhpcyBpbmNsdWRlcyBjaGVja2luZyBmb3IgbXVsdGlwbGUgT25FcnJvciBvciBPbkNvbXBsZXRlZCBjYWxscywgYXMgd2VsbCBhcyByZWVudHJhbmN5IGluIGFueSBvZiB0aGUgb2JzZXJ2ZXIgbWV0aG9kcy5cbiAgICogIElmIGEgdmlvbGF0aW9uIGlzIGRldGVjdGVkLCBhbiBFcnJvciBpcyB0aHJvd24gZnJvbSB0aGUgb2ZmZW5kaW5nIG9ic2VydmVyIG1ldGhvZCBjYWxsLlxuICAgKiBAcmV0dXJucyBBbiBvYnNlcnZlciB0aGF0IGNoZWNrcyBjYWxsYmFja3MgaW52b2NhdGlvbnMgYWdhaW5zdCB0aGUgb2JzZXJ2ZXIgZ3JhbW1hciBhbmQsIGlmIHRoZSBjaGVja3MgcGFzcywgZm9yd2FyZHMgdGhvc2UgdG8gdGhlIHNwZWNpZmllZCBvYnNlcnZlci5cbiAgICovXG4gIE9ic2VydmVyLnByb3RvdHlwZS5jaGVja2VkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IENoZWNrZWRPYnNlcnZlcih0aGlzKTsgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSB0aGUgc3BlY2lmaWVkIE9uTmV4dCwgYWxvbmcgd2l0aCBvcHRpb25hbCBPbkVycm9yLCBhbmQgT25Db21wbGV0ZWQgYWN0aW9ucy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uTmV4dF0gT2JzZXJ2ZXIncyBPbk5leHQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gT2JzZXJ2ZXIncyBPbkVycm9yIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSBPYnNlcnZlcidzIE9uQ29tcGxldGVkIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmVyfSBUaGUgb2JzZXJ2ZXIgb2JqZWN0IGltcGxlbWVudGVkIHVzaW5nIHRoZSBnaXZlbiBhY3Rpb25zLlxuICAgKi9cbiAgdmFyIG9ic2VydmVyQ3JlYXRlID0gT2JzZXJ2ZXIuY3JlYXRlID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICBvbk5leHQgfHwgKG9uTmV4dCA9IG5vb3ApO1xuICAgIG9uRXJyb3IgfHwgKG9uRXJyb3IgPSBkZWZhdWx0RXJyb3IpO1xuICAgIG9uQ29tcGxldGVkIHx8IChvbkNvbXBsZXRlZCA9IG5vb3ApO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2ZXIob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGFuIG9ic2VydmVyIGZyb20gYSBub3RpZmljYXRpb24gY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgQWN0aW9uIHRoYXQgaGFuZGxlcyBhIG5vdGlmaWNhdGlvbi5cbiAgICogQHJldHVybnMgVGhlIG9ic2VydmVyIG9iamVjdCB0aGF0IGludm9rZXMgdGhlIHNwZWNpZmllZCBoYW5kbGVyIHVzaW5nIGEgbm90aWZpY2F0aW9uIGNvcnJlc3BvbmRpbmcgdG8gZWFjaCBtZXNzYWdlIGl0IHJlY2VpdmVzLlxuICAgKi9cbiAgT2JzZXJ2ZXIuZnJvbU5vdGlmaWVyID0gZnVuY3Rpb24gKGhhbmRsZXIsIHRoaXNBcmcpIHtcbiAgICB2YXIgY2IgPSBiaW5kQ2FsbGJhY2soaGFuZGxlciwgdGhpc0FyZywgMSk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZlcihmdW5jdGlvbiAoeCkge1xuICAgICAgcmV0dXJuIGNiKG5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCh4KSk7XG4gICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHJldHVybiBjYihub3RpZmljYXRpb25DcmVhdGVPbkVycm9yKGUpKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2Iobm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQoKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyB0aGUgaW52b2NhdGlvbiBvZiBvYnNlcnZlciBtZXRob2RzIG9uIHRoZSBnaXZlbiBzY2hlZHVsZXIuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHNjaGVkdWxlIG9ic2VydmVyIG1lc3NhZ2VzIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2ZXJ9IE9ic2VydmVyIHdob3NlIG1lc3NhZ2VzIGFyZSBzY2hlZHVsZWQgb24gdGhlIGdpdmVuIHNjaGVkdWxlci5cbiAgICovXG4gIE9ic2VydmVyLnByb3RvdHlwZS5ub3RpZnlPbiA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmVPbk9ic2VydmVyKHNjaGVkdWxlciwgdGhpcyk7XG4gIH07XG5cbiAgT2JzZXJ2ZXIucHJvdG90eXBlLm1ha2VTYWZlID0gZnVuY3Rpb24oZGlzcG9zYWJsZSkge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzU2FmZU9ic2VydmVyKHRoaXMuX29uTmV4dCwgdGhpcy5fb25FcnJvciwgdGhpcy5fb25Db21wbGV0ZWQsIGRpc3Bvc2FibGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIE9ic2VydmVyIGNsYXNzLlxuICAgKiBUaGlzIGJhc2UgY2xhc3MgZW5mb3JjZXMgdGhlIGdyYW1tYXIgb2Ygb2JzZXJ2ZXJzIHdoZXJlIE9uRXJyb3IgYW5kIE9uQ29tcGxldGVkIGFyZSB0ZXJtaW5hbCBtZXNzYWdlcy5cbiAgICovXG4gIHZhciBBYnN0cmFjdE9ic2VydmVyID0gUnguaW50ZXJuYWxzLkFic3RyYWN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFic3RyYWN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9ic2VydmVyIGluIGEgbm9uLXN0b3BwZWQgc3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQWJzdHJhY3RPYnNlcnZlcigpIHtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gTXVzdCBiZSBpbXBsZW1lbnRlZCBieSBvdGhlciBvYnNlcnZlcnNcbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gbm90SW1wbGVtZW50ZWQ7XG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBub3RJbXBsZW1lbnRlZDtcbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIHRoZSBvYnNlcnZlciBvZiBhIG5ldyBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgTmV4dCBlbGVtZW50IGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBBYnN0cmFjdE9ic2VydmVyLnByb3RvdHlwZS5vbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLm5leHQodmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyB0aGUgb2JzZXJ2ZXIgdGhhdCBhbiBleGNlcHRpb24gaGFzIG9jY3VycmVkLlxuICAgICAqIEBwYXJhbSB7QW55fSBlcnJvciBUaGUgZXJyb3IgdGhhdCBoYXMgb2NjdXJyZWQuXG4gICAgICovXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyB0aGUgb2JzZXJ2ZXIgb2YgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAgICovXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jb21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZXMgdGhlIG9ic2VydmVyLCBjYXVzaW5nIGl0IHRvIHRyYW5zaXRpb24gdG8gdGhlIHN0b3BwZWQgc3RhdGUuXG4gICAgICovXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHsgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOyB9O1xuXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFic3RyYWN0T2JzZXJ2ZXI7XG4gIH0oT2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ2xhc3MgdG8gY3JlYXRlIGFuIE9ic2VydmVyIGluc3RhbmNlIGZyb20gZGVsZWdhdGUtYmFzZWQgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBvbiogbWV0aG9kcy5cbiAgICovXG4gIHZhciBBbm9ueW1vdXNPYnNlcnZlciA9IFJ4LkFub255bW91c09ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBbm9ueW1vdXNPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgZnJvbSB0aGUgc3BlY2lmaWVkIE9uTmV4dCwgT25FcnJvciwgYW5kIE9uQ29tcGxldGVkIGFjdGlvbnMuXG4gICAgICogQHBhcmFtIHtBbnl9IG9uTmV4dCBPYnNlcnZlcidzIE9uTmV4dCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IG9uRXJyb3IgT2JzZXJ2ZXIncyBPbkVycm9yIGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gb25Db21wbGV0ZWQgT2JzZXJ2ZXIncyBPbkNvbXBsZXRlZCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gQW5vbnltb3VzT2JzZXJ2ZXIob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLl9vbk5leHQgPSBvbk5leHQ7XG4gICAgICB0aGlzLl9vbkVycm9yID0gb25FcnJvcjtcbiAgICAgIHRoaXMuX29uQ29tcGxldGVkID0gb25Db21wbGV0ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIG9uTmV4dCBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IHZhbHVlIE5leHQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICovXG4gICAgQW5vbnltb3VzT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX29uTmV4dCh2YWx1ZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBvbkVycm9yIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gZXJyb3IgVGhlIGVycm9yIHRoYXQgaGFzIG9jY3VycmVkLlxuICAgICAqL1xuICAgIEFub255bW91c09ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgdGhpcy5fb25FcnJvcihlcnJvcik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICBDYWxscyB0aGUgb25Db21wbGV0ZWQgYWN0aW9uLlxuICAgICAqL1xuICAgIEFub255bW91c09ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQW5vbnltb3VzT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBDaGVja2VkT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENoZWNrZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIENoZWNrZWRPYnNlcnZlcihvYnNlcnZlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5fc3RhdGUgPSAwOyAvLyAwIC0gaWRsZSwgMSAtIGJ1c3ksIDIgLSBkb25lXG4gICAgfVxuXG4gICAgdmFyIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZSA9IENoZWNrZWRPYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUub25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLmNoZWNrQWNjZXNzKCk7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JzZXJ2ZXIub25OZXh0KS5jYWxsKHRoaXMuX29ic2VydmVyLCB2YWx1ZSk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IDA7XG4gICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuICAgIH07XG5cbiAgICBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuY2hlY2tBY2Nlc3MoKTtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYnNlcnZlci5vbkVycm9yKS5jYWxsKHRoaXMuX29ic2VydmVyLCBlcnIpO1xuICAgICAgdGhpcy5fc3RhdGUgPSAyO1xuICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICB9O1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jaGVja0FjY2VzcygpO1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29ic2VydmVyLm9uQ29tcGxldGVkKS5jYWxsKHRoaXMuX29ic2VydmVyKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gMjtcbiAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgfTtcblxuICAgIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZS5jaGVja0FjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gMSkgeyB0aHJvdyBuZXcgRXJyb3IoJ1JlLWVudHJhbmN5IGRldGVjdGVkJyk7IH1cbiAgICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gMikgeyB0aHJvdyBuZXcgRXJyb3IoJ09ic2VydmVyIGNvbXBsZXRlZCcpOyB9XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IDApIHsgdGhpcy5fc3RhdGUgPSAxOyB9XG4gICAgfTtcblxuICAgIHJldHVybiBDaGVja2VkT2JzZXJ2ZXI7XG4gIH0oT2JzZXJ2ZXIpKTtcblxuICB2YXIgU2NoZWR1bGVkT2JzZXJ2ZXIgPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVkT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNjaGVkdWxlZE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2NoZWR1bGVkT2JzZXJ2ZXIoc2NoZWR1bGVyLCBvYnNlcnZlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuaXNBY3F1aXJlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNGYXVsdGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICB0aGlzLmRpc3Bvc2FibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVucXVldWVOZXh0KG9ic2VydmVyLCB4KSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IG9ic2VydmVyLm9uTmV4dCh4KTsgfTsgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVFcnJvcihvYnNlcnZlciwgZSkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBvYnNlcnZlci5vbkVycm9yKGUpOyB9OyB9XG4gICAgZnVuY3Rpb24gZW5xdWV1ZUNvbXBsZXRlZChvYnNlcnZlcikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBvYnNlcnZlci5vbkNvbXBsZXRlZCgpOyB9OyB9XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZU5leHQodGhpcy5vYnNlcnZlciwgeCkpO1xuICAgIH07XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVFcnJvcih0aGlzLm9ic2VydmVyLCBlKSk7XG4gICAgfTtcblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnF1ZXVlLnB1c2goZW5xdWV1ZUNvbXBsZXRlZCh0aGlzLm9ic2VydmVyKSk7XG4gICAgfTtcblxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHZhciB3b3JrO1xuICAgICAgaWYgKHN0YXRlLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgd29yayA9IHN0YXRlLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5pc0FjcXVpcmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh3b3JrKSgpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgc3RhdGUucXVldWUgPSBbXTtcbiAgICAgICAgc3RhdGUuaGFzRmF1bHRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aHJvd2VyKHJlcy5lKTtcbiAgICAgIH1cbiAgICAgIHJlY3Vyc2Uoc3RhdGUpO1xuICAgIH1cblxuICAgIFNjaGVkdWxlZE9ic2VydmVyLnByb3RvdHlwZS5lbnN1cmVBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNPd25lciA9IGZhbHNlO1xuICAgICAgaWYgKCF0aGlzLmhhc0ZhdWx0ZWQgJiYgdGhpcy5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlzT3duZXIgPSAhdGhpcy5pc0FjcXVpcmVkO1xuICAgICAgICB0aGlzLmlzQWNxdWlyZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaXNPd25lciAmJlxuICAgICAgICB0aGlzLmRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZSh0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSh0aGlzLCBzY2hlZHVsZU1ldGhvZCkpO1xuICAgIH07XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjaGVkdWxlZE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgT2JzZXJ2ZU9uT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9ic2VydmVPbk9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gT2JzZXJ2ZU9uT2JzZXJ2ZXIoc2NoZWR1bGVyLCBvYnNlcnZlciwgY2FuY2VsKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzLCBzY2hlZHVsZXIsIG9ic2VydmVyKTtcbiAgICAgIHRoaXMuX2NhbmNlbCA9IGNhbmNlbDtcbiAgICB9XG5cbiAgICBPYnNlcnZlT25PYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5lbnN1cmVBY3RpdmUoKTtcbiAgICB9O1xuXG4gICAgT2JzZXJ2ZU9uT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZXJyb3IuY2FsbCh0aGlzLCBlKTtcbiAgICAgIHRoaXMuZW5zdXJlQWN0aXZlKCk7XG4gICAgfTtcblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmNvbXBsZXRlZC5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5lbnN1cmVBY3RpdmUoKTtcbiAgICB9O1xuXG4gICAgT2JzZXJ2ZU9uT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuX2NhbmNlbCAmJiB0aGlzLl9jYW5jZWwuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fY2FuY2VsID0gbnVsbDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9ic2VydmVPbk9ic2VydmVyO1xuICB9KShTY2hlZHVsZWRPYnNlcnZlcik7XG5cbiAgdmFyIG9ic2VydmFibGVQcm90bztcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIHB1c2gtc3R5bGUgY29sbGVjdGlvbi5cbiAgICovXG4gIHZhciBPYnNlcnZhYmxlID0gUnguT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBtYWtlU3Vic2NyaWJlKHNlbGYsIHN1YnNjcmliZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBvbGRPbkVycm9yID0gby5vbkVycm9yO1xuICAgICAgICBvLm9uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhlLCBzZWxmKTtcbiAgICAgICAgICBvbGRPbkVycm9yLmNhbGwobywgZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZS5jYWxsKHNlbGYsIG8pO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgaWYgKFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ICYmIGhhc1N0YWNrcykge1xuICAgICAgICB2YXIgb2xkU3Vic2NyaWJlID0gdGhpcy5fc3Vic2NyaWJlO1xuICAgICAgICB2YXIgZSA9IHRyeUNhdGNoKHRocm93ZXIpKG5ldyBFcnJvcigpKS5lO1xuICAgICAgICB0aGlzLnN0YWNrID0gZS5zdGFjay5zdWJzdHJpbmcoZS5zdGFjay5pbmRleE9mKCdcXG4nKSArIDEpO1xuICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBtYWtlU3Vic2NyaWJlKHRoaXMsIG9sZFN1YnNjcmliZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb2JzZXJ2YWJsZVByb3RvID0gT2JzZXJ2YWJsZS5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGFuIE9ic2VydmFibGVcbiAgICAqIEBwYXJhbSB7QW55fSBBbiBvYmplY3QgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgaXQgaXMgYW4gT2JzZXJ2YWJsZVxuICAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYW4gT2JzZXJ2YWJsZSwgZWxzZSBmYWxzZS5cbiAgICAqL1xuICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvICYmIGlzRnVuY3Rpb24oby5zdWJzY3JpYmUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgU3Vic2NyaWJlcyBhbiBvIHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcGFyYW0ge01peGVkfSBbb09yT25OZXh0XSBUaGUgb2JqZWN0IHRoYXQgaXMgdG8gcmVjZWl2ZSBub3RpZmljYXRpb25zIG9yIGFuIGFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEByZXR1cm5zIHtEaXBvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmUgPSBvYnNlcnZhYmxlUHJvdG8uZm9yRWFjaCA9IGZ1bmN0aW9uIChvT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHR5cGVvZiBvT3JPbk5leHQgPT09ICdvYmplY3QnID9cbiAgICAgICAgb09yT25OZXh0IDpcbiAgICAgICAgb2JzZXJ2ZXJDcmVhdGUob09yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIHRoZSBuZXh0IHZhbHVlIGluIHRoZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIFwidGhpc1wiIGFyZ3VtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIG9uIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uTmV4dCA9IGZ1bmN0aW9uIChvbk5leHQsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUodHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmVzIHRvIGFuIGV4Y2VwdGlvbmFsIGNvbmRpdGlvbiBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIFRoZSBmdW5jdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gQSBkaXNwb3NhYmxlIGhhbmRsaW5nIHRoZSBzdWJzY3JpcHRpb25zIGFuZCB1bnN1YnNjcmlwdGlvbnMuXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLnN1YnNjcmliZU9uRXJyb3IgPSBmdW5jdGlvbiAob25FcnJvciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShvYnNlcnZlckNyZWF0ZShudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbihlKSB7IG9uRXJyb3IuY2FsbCh0aGlzQXJnLCBlKTsgfSA6IG9uRXJyb3IpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgbmV4dCB2YWx1ZSBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uIChvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShvYnNlcnZlckNyZWF0ZShudWxsLCBudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbigpIHsgb25Db21wbGV0ZWQuY2FsbCh0aGlzQXJnKTsgfSA6IG9uQ29tcGxldGVkKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBPYnNlcnZhYmxlO1xuICB9KSgpO1xuXG4gIHZhciBPYnNlcnZhYmxlQmFzZSA9IFJ4Lk9ic2VydmFibGVCYXNlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPYnNlcnZhYmxlQmFzZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIGZpeFN1YnNjcmliZXIoc3Vic2NyaWJlcikge1xuICAgICAgcmV0dXJuIHN1YnNjcmliZXIgJiYgaXNGdW5jdGlvbihzdWJzY3JpYmVyLmRpc3Bvc2UpID8gc3Vic2NyaWJlciA6XG4gICAgICAgIGlzRnVuY3Rpb24oc3Vic2NyaWJlcikgPyBkaXNwb3NhYmxlQ3JlYXRlKHN1YnNjcmliZXIpIDogZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldERpc3Bvc2FibGUocywgc3RhdGUpIHtcbiAgICAgIHZhciBhZG8gPSBzdGF0ZVswXSwgc2VsZiA9IHN0YXRlWzFdO1xuICAgICAgdmFyIHN1YiA9IHRyeUNhdGNoKHNlbGYuc3Vic2NyaWJlQ29yZSkuY2FsbChzZWxmLCBhZG8pO1xuICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cbiAgICAgIGFkby5zZXREaXNwb3NhYmxlKGZpeFN1YnNjcmliZXIoc3ViKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZUJhc2UoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBPYnNlcnZhYmxlQmFzZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWRvID0gbmV3IEF1dG9EZXRhY2hPYnNlcnZlcihvKSwgc3RhdGUgPSBbYWRvLCB0aGlzXTtcblxuICAgICAgaWYgKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZXF1aXJlZCgpKSB7XG4gICAgICAgIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNldERpc3Bvc2FibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RGlzcG9zYWJsZShudWxsLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWRvO1xuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlQmFzZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGVCYXNlO1xuICB9KE9ic2VydmFibGUpKTtcblxudmFyIEZsYXRNYXBPYnNlcnZhYmxlID0gUnguRmxhdE1hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG5cbiAgICBpbmhlcml0cyhGbGF0TWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEZsYXRNYXBPYnNlcnZhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihyZXN1bHRTZWxlY3RvcikgPyByZXN1bHRTZWxlY3RvciA6IG51bGw7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gYmluZENhbGxiYWNrKGlzRnVuY3Rpb24oc2VsZWN0b3IpID8gc2VsZWN0b3IgOiBmdW5jdGlvbigpIHsgcmV0dXJuIHNlbGVjdG9yOyB9LCB0aGlzQXJnLCAzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmxhdE1hcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMuc2VsZWN0b3IsIHRoaXMucmVzdWx0U2VsZWN0b3IsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvYnNlcnZlciwgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMuaSA9IDA7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICB0aGlzLnJlc3VsdFNlbGVjdG9yID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMubyA9IG9ic2VydmVyO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLl93cmFwUmVzdWx0ID0gZnVuY3Rpb24ocmVzdWx0LCB4LCBpKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRTZWxlY3RvciA/XG4gICAgICAgIHJlc3VsdC5tYXAoZnVuY3Rpb24oeSwgaTIpIHsgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IoeCwgeSwgaSwgaTIpOyB9LCB0aGlzKSA6XG4gICAgICAgIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBpID0gdGhpcy5pKys7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgaSwgdGhpcy5zb3VyY2UpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuXG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgKGlzQXJyYXlMaWtlKHJlc3VsdCkgfHwgaXNJdGVyYWJsZShyZXN1bHQpKSAmJiAocmVzdWx0ID0gT2JzZXJ2YWJsZS5mcm9tKHJlc3VsdCkpO1xuICAgICAgdGhpcy5vLm9uTmV4dCh0aGlzLl93cmFwUmVzdWx0KHJlc3VsdCwgeCwgaSkpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHsgdGhpcy5vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gRmxhdE1hcE9ic2VydmFibGU7XG5cbn0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRW51bWVyYWJsZSA9IFJ4LmludGVybmFscy5FbnVtZXJhYmxlID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gIGZ1bmN0aW9uIElzRGlzcG9zZWREaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9XG5cbiAgSXNEaXNwb3NlZERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB0aGlzLl9zLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICB2YXIgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuaXNEaXNwb3NlZCkgeyByZXR1cm47IH1cbiAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKHN0YXRlLmUubmV4dCkuY2FsbChzdGF0ZS5lKTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLmRvbmUpIHsgcmV0dXJuIHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIG86IG8sXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBlOiB0aGlzLnNvdXJjZXNbJGl0ZXJhdG9yJF0oKVxuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fc3RhdGUuby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG5cbiAgICByZXR1cm4gQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBDb25jYXRFbnVtZXJhYmxlT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgQ2F0Y2hFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gQ2F0Y2hFcnJvck9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKENhdGNoRXJyb3JPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgdmFyIGN1cnJlbnRJdGVtID0gdHJ5Q2F0Y2goc3RhdGUuZS5uZXh0KS5jYWxsKHN0YXRlLmUpO1xuICAgICAgaWYgKGN1cnJlbnRJdGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKGN1cnJlbnRJdGVtLmUpOyB9XG4gICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkgeyByZXR1cm4gc3RhdGUubGFzdEVycm9yICE9PSBudWxsID8gc3RhdGUuby5vbkVycm9yKHN0YXRlLmxhc3RFcnJvcikgOiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgaXNQcm9taXNlKGN1cnJlbnRWYWx1ZSkgJiYgKGN1cnJlbnRWYWx1ZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50VmFsdWUpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnRWYWx1ZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ2F0Y2hFcnJvck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBlOiB0aGlzLnNvdXJjZXNbJGl0ZXJhdG9yJF0oKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sXG4gICAgICAgIGxhc3RFcnJvcjogbnVsbCxcbiAgICAgICAgbzogb1xuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIG5ldyBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fc3RhdGUubGFzdEVycm9yID0gZTsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9zdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gQ2F0Y2hFcnJvck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBFbnVtZXJhYmxlLnByb3RvdHlwZS5jYXRjaEVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQ2F0Y2hFcnJvck9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIFJlcGVhdEVudW1lcmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlcGVhdEVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVwZWF0RW51bWVyYWJsZSh2LCBjKSB7XG4gICAgICB0aGlzLnYgPSB2O1xuICAgICAgdGhpcy5jID0gYyA9PSBudWxsID8gLTEgOiBjO1xuICAgIH1cblxuICAgIFJlcGVhdEVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBSZXBlYXRFbnVtZXJhdG9yKHRoaXMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBSZXBlYXRFbnVtZXJhdG9yKHApIHtcbiAgICAgIHRoaXMudiA9IHAudjtcbiAgICAgIHRoaXMubCA9IHAuYztcbiAgICB9XG5cbiAgICBSZXBlYXRFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMubCA9PT0gMCkgeyByZXR1cm4gZG9uZUVudW1lcmF0b3I7IH1cbiAgICAgIGlmICh0aGlzLmwgPiAwKSB7IHRoaXMubC0tOyB9XG4gICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHRoaXMudiB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVwZWF0RW51bWVyYWJsZTtcbiAgfShFbnVtZXJhYmxlKSk7XG5cbiAgdmFyIGVudW1lcmFibGVSZXBlYXQgPSBFbnVtZXJhYmxlLnJlcGVhdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwZWF0Q291bnQpIHtcbiAgICByZXR1cm4gbmV3IFJlcGVhdEVudW1lcmFibGUodmFsdWUsIHJlcGVhdENvdW50KTtcbiAgfTtcblxuICB2YXIgT2ZFbnVtZXJhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9mRW51bWVyYWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBPZkVudW1lcmFibGUocywgZm4sIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMucyA9IHM7XG4gICAgICB0aGlzLmZuID0gZm4gPyBiaW5kQ2FsbGJhY2soZm4sIHRoaXNBcmcsIDMpIDogbnVsbDtcbiAgICB9XG4gICAgT2ZFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgT2ZFbnVtZXJhdG9yKHRoaXMpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBPZkVudW1lcmF0b3IocCkge1xuICAgICAgdGhpcy5pID0gLTE7XG4gICAgICB0aGlzLnMgPSBwLnM7XG4gICAgICB0aGlzLmwgPSB0aGlzLnMubGVuZ3RoO1xuICAgICAgdGhpcy5mbiA9IHAuZm47XG4gICAgfVxuXG4gICAgT2ZFbnVtZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICByZXR1cm4gKyt0aGlzLmkgPCB0aGlzLmwgP1xuICAgICAgIHsgZG9uZTogZmFsc2UsIHZhbHVlOiAhdGhpcy5mbiA/IHRoaXMuc1t0aGlzLmldIDogdGhpcy5mbih0aGlzLnNbdGhpcy5pXSwgdGhpcy5pLCB0aGlzLnMpIH0gOlxuICAgICAgIGRvbmVFbnVtZXJhdG9yO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2ZFbnVtZXJhYmxlO1xuICB9KEVudW1lcmFibGUpKTtcblxuICB2YXIgZW51bWVyYWJsZU9mID0gRW51bWVyYWJsZS5vZiA9IGZ1bmN0aW9uIChzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBPZkVudW1lcmFibGUoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZyk7XG4gIH07XG5cbnZhciBPYnNlcnZlT25PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgaW5oZXJpdHMoT2JzZXJ2ZU9uT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgZnVuY3Rpb24gT2JzZXJ2ZU9uT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLl9zID0gcztcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIE9ic2VydmVPbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE9ic2VydmVPbk9ic2VydmVyKHRoaXMuX3MsIG8pKTtcbiAgfTtcblxuICByZXR1cm4gT2JzZXJ2ZU9uT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAgLyoqXG4gICAqICBXcmFwcyB0aGUgc291cmNlIHNlcXVlbmNlIGluIG9yZGVyIHRvIHJ1biBpdHMgb2JzZXJ2ZXIgY2FsbGJhY2tzIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKlxuICAgKiAgVGhpcyBvbmx5IGludm9rZXMgb2JzZXJ2ZXIgY2FsbGJhY2tzIG9uIGEgc2NoZWR1bGVyLiBJbiBjYXNlIHRoZSBzdWJzY3JpcHRpb24gYW5kL29yIHVuc3Vic2NyaXB0aW9uIGFjdGlvbnMgaGF2ZSBzaWRlLWVmZmVjdHNcbiAgICogIHRoYXQgcmVxdWlyZSB0byBiZSBydW4gb24gYSBzY2hlZHVsZXIsIHVzZSBzdWJzY3JpYmVPbi5cbiAgICpcbiAgICogIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIG5vdGlmeSBvYnNlcnZlcnMgb24uXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZhdGlvbnMgaGFwcGVuIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm9ic2VydmVPbiA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmVPbk9ic2VydmFibGUodGhpcywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU3Vic2NyaWJlT25PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdWJzY3JpYmVPbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlT25PYnNlcnZhYmxlKHNvdXJjZSwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHNjaGVkdWxlciwgc3RhdGUpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZVswXSwgZCA9IHN0YXRlWzFdLCBvID0gc3RhdGVbMl07XG4gICAgICBkLnNldERpc3Bvc2FibGUobmV3IFNjaGVkdWxlZERpc3Bvc2FibGUoc2NoZWR1bGVyLCBzb3VyY2Uuc3Vic2NyaWJlKG8pKSk7XG4gICAgfVxuXG4gICAgU3Vic2NyaWJlT25PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIGQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuX3Muc2NoZWR1bGUoW3RoaXMuc291cmNlLCBkLCBvXSwgc2NoZWR1bGVNZXRob2QpKTtcbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3Vic2NyaWJlT25PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgIC8qKlxuICAgKiAgV3JhcHMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbiBvcmRlciB0byBydW4gaXRzIHN1YnNjcmlwdGlvbiBhbmQgdW5zdWJzY3JpcHRpb24gbG9naWMgb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuIFRoaXMgb3BlcmF0aW9uIGlzIG5vdCBjb21tb25seSB1c2VkO1xuICAgKiAgc2VlIHRoZSByZW1hcmtzIHNlY3Rpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlIGRpc3RpbmN0aW9uIGJldHdlZW4gc3Vic2NyaWJlT24gYW5kIG9ic2VydmVPbi5cblxuICAgKiAgVGhpcyBvbmx5IHBlcmZvcm1zIHRoZSBzaWRlLWVmZmVjdHMgb2Ygc3Vic2NyaXB0aW9uIGFuZCB1bnN1YnNjcmlwdGlvbiBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci4gSW4gb3JkZXIgdG8gaW52b2tlIG9ic2VydmVyXG4gICAqICBjYWxsYmFja3Mgb24gYSBzY2hlZHVsZXIsIHVzZSBvYnNlcnZlT24uXG5cbiAgICogIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHBlcmZvcm0gc3Vic2NyaXB0aW9uIGFuZCB1bnN1YnNjcmlwdGlvbiBhY3Rpb25zIG9uLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2hvc2Ugc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zIGhhcHBlbiBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbiA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZU9uT2JzZXJ2YWJsZSh0aGlzLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBGcm9tUHJvbWlzZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRnJvbVByb21pc2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21Qcm9taXNlT2JzZXJ2YWJsZShwLCBzKSB7XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVOZXh0KHMsIHN0YXRlKSB7XG4gICAgICB2YXIgbyA9IHN0YXRlWzBdLCBkYXRhID0gc3RhdGVbMV07XG4gICAgICBvLm9uTmV4dChkYXRhKTtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUVycm9yKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgbyA9IHN0YXRlWzBdLCBlcnIgPSBzdGF0ZVsxXTtcbiAgICAgIG8ub25FcnJvcihlcnIpO1xuICAgIH1cblxuICAgIEZyb21Qcm9taXNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc2VsZiA9IHRoaXMsIHAgPSB0aGlzLl9wO1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbihwKSkge1xuICAgICAgICBwID0gdHJ5Q2F0Y2gocCkoKTtcbiAgICAgICAgaWYgKHAgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgby5vbkVycm9yKHAuZSk7XG4gICAgICAgICAgcmV0dXJuIHNhZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc2VsZi5fcy5zY2hlZHVsZShbbywgZGF0YV0sIHNjaGVkdWxlTmV4dCkpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc2VsZi5fcy5zY2hlZHVsZShbbywgZXJyXSwgc2NoZWR1bGVFcnJvcikpO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNhZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21Qcm9taXNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIENvbnZlcnRzIGEgUHJvbWlzZSB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlXG4gICogQHBhcmFtIHtQcm9taXNlfSBBbiBFUzYgQ29tcGxpYW50IHByb21pc2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggd3JhcHMgdGhlIGV4aXN0aW5nIHByb21pc2Ugc3VjY2VzcyBhbmQgZmFpbHVyZS5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tUHJvbWlzZSA9IE9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSwgc2NoZWR1bGVyKSB7XG4gICAgc2NoZWR1bGVyIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21Qcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qXG4gICAqIENvbnZlcnRzIGFuIGV4aXN0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gRVM2IENvbXBhdGlibGUgUHJvbWlzZVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcHJvbWlzZSA9IFJ4Lk9ic2VydmFibGUucmV0dXJuKDQyKS50b1Byb21pc2UoUlNWUC5Qcm9taXNlKTtcbiAgICpcbiAgICogLy8gV2l0aCBjb25maWdcbiAgICogUnguY29uZmlnLlByb21pc2UgPSBSU1ZQLlByb21pc2U7XG4gICAqIHZhciBwcm9taXNlID0gUnguT2JzZXJ2YWJsZS5yZXR1cm4oNDIpLnRvUHJvbWlzZSgpO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvbWlzZUN0b3JdIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgcHJvbWlzZS4gSWYgbm90IHByb3ZpZGVkLCBpdCBsb29rcyBmb3IgaXQgaW4gUnguY29uZmlnLlByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBbiBFUzYgY29tcGF0aWJsZSBwcm9taXNlIHdpdGggdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICBwcm9taXNlQ3RvciB8fCAocHJvbWlzZUN0b3IgPSBSeC5jb25maWcuUHJvbWlzZSk7XG4gICAgaWYgKCFwcm9taXNlQ3RvcikgeyB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoJ1Byb21pc2UgdHlwZSBub3QgcHJvdmlkZWQgbm9yIGluIFJ4LmNvbmZpZy5Qcm9taXNlJyk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIC8vIE5vIGNhbmNlbGxhdGlvbiBjYW4gYmUgZG9uZVxuICAgICAgdmFyIHZhbHVlO1xuICAgICAgc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICB2YWx1ZSA9IHY7XG4gICAgICB9LCByZWplY3QsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgVG9BcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9BcnJheU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9BcnJheU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvQXJyYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuYSA9IFtdO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5hLnB1c2goeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLm8ub25FcnJvcihlKTsgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLm8ub25OZXh0KHRoaXMuYSk7IHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRvQXJyYXlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogQ3JlYXRlcyBhbiBhcnJheSBmcm9tIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggYSBsaXN0IGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFRvQXJyYXlPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gYSBzcGVjaWZpZWQgc3Vic2NyaWJlIG1ldGhvZCBpbXBsZW1lbnRhdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgfSApO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gUnguRGlzcG9zYWJsZS5lbXB0eTsgfSApO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyB9ICk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1YnNjcmliZSBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UncyBzdWJzY3JpYmUgbWV0aG9kLCByZXR1cm5pbmcgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhIERpc3Bvc2FibGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBTdWJzY3JpYmUgbWV0aG9kLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoc3Vic2NyaWJlLCBwYXJlbnQpO1xuICB9O1xuXG4gIHZhciBEZWZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWZlcihmYWN0b3J5KSB7XG4gICAgICB0aGlzLl9mID0gZmFjdG9yeTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlZmVyLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mKSgpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG9ic2VydmFibGVUaHJvdyhyZXN1bHQuZSkuc3Vic2NyaWJlKG8pO31cbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmVyO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgZmFjdG9yeSBmdW5jdGlvbiB3aGVuZXZlciBhIG5ldyBvYnNlcnZlciBzdWJzY3JpYmVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5mcm9tQXJyYXkoWzEsMiwzXSk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYnNlcnZhYmxlRmFjdG9yeSBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIG9ic2VydmVyIHRoYXQgc3Vic2NyaWJlcyB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIG9yIFByb21pc2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIG9ic2VydmVycyB0cmlnZ2VyIGFuIGludm9jYXRpb24gb2YgdGhlIGdpdmVuIG9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlRGVmZXIgPSBPYnNlcnZhYmxlLmRlZmVyID0gZnVuY3Rpb24gKG9ic2VydmFibGVGYWN0b3J5KSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcihvYnNlcnZhYmxlRmFjdG9yeSk7XG4gIH07XG5cbiAgdmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFbXB0eU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzaW5rID0gbmV3IEVtcHR5U2luayhvYnNlcnZlciwgdGhpcy5zY2hlZHVsZXIpO1xuICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEVtcHR5U2luayhvYnNlcnZlciwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcbiAgICAgIHN0YXRlLm9uQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIEVtcHR5U2luay5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0YXRlID0gdGhpcy5vYnNlcnZlcjtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gRW1wdHlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEVNUFRZX09CU0VSVkFCTEUgPSBuZXcgRW1wdHlPYnNlcnZhYmxlKGltbWVkaWF0ZVNjaGVkdWxlcik7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIGVtcHR5IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBzaW5nbGUgT25Db21wbGV0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCk7XG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eShSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgdGVybWluYXRpb24gY2FsbCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBubyBlbGVtZW50cy5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlRW1wdHkgPSBPYnNlcnZhYmxlLmVtcHR5ID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIHNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID8gRU1QVFlfT0JTRVJWQUJMRSA6IG5ldyBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRnJvbU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXRlcmFibGUsIGZuLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2l0ZXJhYmxlID0gaXRlcmFibGU7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICAgIHZhciBuZXh0ID0gdHJ5Q2F0Y2goaXQubmV4dCkuY2FsbChpdCk7XG4gICAgICAgIGlmIChuZXh0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKG5leHQuZSk7IH1cbiAgICAgICAgaWYgKG5leHQuZG9uZSkgeyByZXR1cm4gby5vbkNvbXBsZXRlZCgpOyB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IG5leHQudmFsdWU7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKHJlc3VsdCwgaSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGlzdCA9IE9iamVjdCh0aGlzLl9pdGVyYWJsZSksXG4gICAgICAgICAgaXQgPSBnZXRJdGVyYWJsZShsaXN0KTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBjcmVhdGVTY2hlZHVsZU1ldGhvZChvLCBpdCwgdGhpcy5fZm4pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblxuICBmdW5jdGlvbiBTdHJpbmdJdGVyYWJsZShzKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gIH1cblxuICBTdHJpbmdJdGVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcih0aGlzLl9zKTtcbiAgfTtcblxuICBmdW5jdGlvbiBTdHJpbmdJdGVyYXRvcihzKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgdGhpcy5fbCA9IHMubGVuZ3RoO1xuICAgIHRoaXMuX2kgPSAwO1xuICB9XG5cbiAgU3RyaW5nSXRlcmF0b3IucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pIDwgdGhpcy5fbCA/IHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLl9zLmNoYXJBdCh0aGlzLl9pKyspIH0gOiBkb25lRW51bWVyYXRvcjtcbiAgfTtcblxuICBmdW5jdGlvbiBBcnJheUl0ZXJhYmxlKGEpIHtcbiAgICB0aGlzLl9hID0gYTtcbiAgfVxuXG4gIEFycmF5SXRlcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcih0aGlzLl9hKTtcbiAgfTtcblxuICBmdW5jdGlvbiBBcnJheUl0ZXJhdG9yKGEpIHtcbiAgICB0aGlzLl9hID0gYTtcbiAgICB0aGlzLl9sID0gdG9MZW5ndGgoYSk7XG4gICAgdGhpcy5faSA9IDA7XG4gIH1cblxuICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pIDwgdGhpcy5fbCA/IHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLl9hW3RoaXMuX2krK10gfSA6IGRvbmVFbnVtZXJhdG9yO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdC5pc0Zpbml0ZSh2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc05hbihuKSB7XG4gICAgcmV0dXJuIG4gIT09IG47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJdGVyYWJsZShvKSB7XG4gICAgdmFyIGkgPSBvWyRpdGVyYXRvciRdLCBpdDtcbiAgICBpZiAoIWkgJiYgdHlwZW9mIG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICBpdCA9IG5ldyBTdHJpbmdJdGVyYWJsZShvKTtcbiAgICAgIHJldHVybiBpdFskaXRlcmF0b3IkXSgpO1xuICAgIH1cbiAgICBpZiAoIWkgJiYgby5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgaXQgPSBuZXcgQXJyYXlJdGVyYWJsZShvKTtcbiAgICAgIHJldHVybiBpdFskaXRlcmF0b3IkXSgpO1xuICAgIH1cbiAgICBpZiAoIWkpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpOyB9XG4gICAgcmV0dXJuIG9bJGl0ZXJhdG9yJF0oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpZ24odmFsdWUpIHtcbiAgICB2YXIgbnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmIChudW1iZXIgPT09IDApIHsgcmV0dXJuIG51bWJlcjsgfVxuICAgIGlmIChpc05hTihudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICByZXR1cm4gbnVtYmVyIDwgMCA/IC0xIDogMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvTGVuZ3RoKG8pIHtcbiAgICB2YXIgbGVuID0gK28ubGVuZ3RoO1xuICAgIGlmIChpc05hTihsZW4pKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkgeyByZXR1cm4gbGVuOyB9XG4gICAgbGVuID0gc2lnbihsZW4pICogTWF0aC5mbG9vcihNYXRoLmFicyhsZW4pKTtcbiAgICBpZiAobGVuIDw9IDApIHsgcmV0dXJuIDA7IH1cbiAgICBpZiAobGVuID4gbWF4U2FmZUludGVnZXIpIHsgcmV0dXJuIG1heFNhZmVJbnRlZ2VyOyB9XG4gICAgcmV0dXJuIGxlbjtcbiAgfVxuXG4gIC8qKlxuICAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0LlxuICAqIEBwYXJhbSB7QW55fSBhcnJheUxpa2UgQW4gYXJyYXktbGlrZSBvciBpdGVyYWJsZSBvYmplY3QgdG8gY29udmVydCB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFttYXBGbl0gTWFwIGZ1bmN0aW9uIHRvIGNhbGwgb24gZXZlcnkgZWxlbWVudCBvZiB0aGUgYXJyYXkuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBUaGUgY29udGV4dCB0byB1c2UgY2FsbGluZyB0aGUgbWFwRm4gaWYgcHJvdmlkZWQuXG4gICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIE9wdGlvbmFsIHNjaGVkdWxlciB0byB1c2UgZm9yIHNjaGVkdWxpbmcuICBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAqL1xuICB2YXIgb2JzZXJ2YWJsZUZyb20gPSBPYnNlcnZhYmxlLmZyb20gPSBmdW5jdGlvbiAoaXRlcmFibGUsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoaXRlcmFibGUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVyYWJsZSBjYW5ub3QgYmUgbnVsbC4nKVxuICAgIH1cbiAgICBpZiAobWFwRm4gJiYgIWlzRnVuY3Rpb24obWFwRm4pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hcEZuIHdoZW4gcHJvdmlkZWQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIGlmIChtYXBGbikge1xuICAgICAgdmFyIG1hcHBlciA9IGJpbmRDYWxsYmFjayhtYXBGbiwgdGhpc0FyZywgMik7XG4gICAgfVxuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXRlcmFibGUsIG1hcHBlciwgc2NoZWR1bGVyKTtcbiAgfVxuXG4gIHZhciBGcm9tQXJyYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21BcnJheU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRnJvbUFycmF5T2JzZXJ2YWJsZShhcmdzLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2QobywgYXJncykge1xuICAgICAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUgKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBsZW4pIHtcbiAgICAgICAgICBvLm9uTmV4dChhcmdzW2ldKTtcbiAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgRnJvbUFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIHNjaGVkdWxlTWV0aG9kKG8sIHRoaXMuX2FyZ3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21BcnJheU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiAgQ29udmVydHMgYW4gYXJyYXkgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNpbmcgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHRvIGVudW1lcmF0ZSB0aGUgYXJyYXkuXG4gICogQGRlcHJlY2F0ZWQgdXNlIE9ic2VydmFibGUuZnJvbSBvciBPYnNlcnZhYmxlLm9mXG4gICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGVudW1lcmF0aW9uIG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHB1bGxlZCBmcm9tIHRoZSBnaXZlbiBlbnVtZXJhYmxlIHNlcXVlbmNlLlxuICAqL1xuICB2YXIgb2JzZXJ2YWJsZUZyb21BcnJheSA9IE9ic2VydmFibGUuZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcilcbiAgfTtcblxuICB2YXIgR2VuZXJhdGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHZW5lcmF0ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR2VuZXJhdGVPYnNlcnZhYmxlKHN0YXRlLCBjbmRGbiwgaXRyRm4sIHJlc0ZuLCBzKSB7XG4gICAgICB0aGlzLl9pbml0aWFsU3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX2NuZEZuID0gY25kRm47XG4gICAgICB0aGlzLl9pdHJGbiA9IGl0ckZuO1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5maXJzdCkge1xuICAgICAgICBzdGF0ZS5maXJzdCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUubmV3U3RhdGUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9pdHJGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUubmV3U3RhdGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubmV3U3RhdGUuZSk7IH1cbiAgICAgIH1cbiAgICAgIHZhciBoYXNSZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9jbmRGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgaWYgKGhhc1Jlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihoYXNSZXN1bHQuZSk7IH1cbiAgICAgIGlmIChoYXNSZXN1bHQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIHN0YXRlLm8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHJlY3Vyc2Uoc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEdlbmVyYXRlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIHNlbGY6IHRoaXMsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5faW5pdGlhbFN0YXRlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdlbmVyYXRlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgcnVubmluZyBhIHN0YXRlLWRyaXZlbiBsb29wIHByb2R1Y2luZyB0aGUgc2VxdWVuY2UncyBlbGVtZW50cywgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5nZW5lcmF0ZSgwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA8IDEwOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmdlbmVyYXRlKDAsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IDwgMTA7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICsgMTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sIFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBDb25kaXRpb24gdG8gdGVybWluYXRlIGdlbmVyYXRpb24gKHVwb24gcmV0dXJuaW5nIGZhbHNlKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3AuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlT2YgKHNjaGVkdWxlciwgYXJyYXkpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gIH1cblxuICAvKipcbiAgKiAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlIGluc3RhbmNlIHdpdGggYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzLCByZWdhcmRsZXNzIG9mIG51bWJlciBvciB0eXBlIG9mIHRoZSBhcmd1bWVudHMuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAqL1xuICBPYnNlcnZhYmxlLm9mID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJncywgY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICogIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBpbnN0YW5jZSB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZiBudW1iZXIgb3IgdHlwZSBvZiB0aGUgYXJndW1lbnRzLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgQSBzY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nIHRoZSBhcmd1bWVudHMuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAqL1xuICBPYnNlcnZhYmxlLm9mV2l0aFNjaGVkdWxlciA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJncywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gY2hhbmdlcyB0byBhbiBhcnJheSB1c2luZyBBcnJheS5vYnNlcnZlLlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBBbiBhcnJheSB0byBvYnNlcnZlIGNoYW5nZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgY2hhbmdlcyB0byBhbiBhcnJheSBmcm9tIEFycmF5Lm9ic2VydmUuXG4gICAqL1xuICBPYnNlcnZhYmxlLm9mQXJyYXlDaGFuZ2VzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5Lm9ic2VydmUgb25seSBhY2NlcHRzIGFycmF5cy4nKTsgfVxuICAgIGlmICh0eXBlb2YgQXJyYXkub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgQXJyYXkudW5vYnNlcnZlICE9PSAnZnVuY3Rpb24nKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5Lm9ic2VydmUgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIHBsYXRmb3JtJykgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgZnVuY3Rpb24gb2JzZXJ2ZXJGbihjaGFuZ2VzKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGNoYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoY2hhbmdlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgQXJyYXkub2JzZXJ2ZShhcnJheSwgb2JzZXJ2ZXJGbik7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFycmF5LnVub2JzZXJ2ZShhcnJheSwgb2JzZXJ2ZXJGbik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBjaGFuZ2VzIHRvIGFuIG9iamVjdCB1c2luZyBPYmplY3Qub2JzZXJ2ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBBbiBvYmplY3QgdG8gb2JzZXJ2ZSBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGNoYW5nZXMgdG8gYW4gb2JqZWN0IGZyb20gT2JqZWN0Lm9ic2VydmUuXG4gICAqL1xuICBPYnNlcnZhYmxlLm9mT2JqZWN0Q2hhbmdlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdvYmplY3QgbXVzdCBub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuJyk7IH1cbiAgICBpZiAodHlwZW9mIE9iamVjdC5vYnNlcnZlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBPYmplY3QudW5vYnNlcnZlICE9PSAnZnVuY3Rpb24nKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5vYnNlcnZlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBwbGF0Zm9ybScpIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIGZ1bmN0aW9uIG9ic2VydmVyRm4oY2hhbmdlcykge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBjaGFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNoYW5nZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5vYnNlcnZlKG9iaiwgb2JzZXJ2ZXJGbik7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIE9iamVjdC51bm9ic2VydmUob2JqLCBvYnNlcnZlckZuKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIE5ldmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhOZXZlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTmV2ZXJPYnNlcnZhYmxlKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTmV2ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE5FVkVSX09CU0VSVkFCTEUgPSBuZXcgTmV2ZXJPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub24tdGVybWluYXRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGVub3RlIGFuIGluZmluaXRlIGR1cmF0aW9uIChlLmcuIHdoZW4gdXNpbmcgcmVhY3RpdmUgam9pbnMpLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgd2lsbCBuZXZlciBnZXQgY2FsbGVkLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVOZXZlciA9IE9ic2VydmFibGUubmV2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE5FVkVSX09CU0VSVkFCTEU7XG4gIH07XG5cbiAgdmFyIFBhaXJzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyc09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcnNPYnNlcnZhYmxlKG8sIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rZXlzID0gT2JqZWN0LmtleXMobyk7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChvLCBvYmosIGtleXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIG8ub25OZXh0KFtrZXksIG9ialtrZXldXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIFBhaXJzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIHNjaGVkdWxlTWV0aG9kKG8sIHRoaXMuX28sIHRoaXMuX2tleXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhaXJzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGVudW1lcmF0aW9uIG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzIGZyb20gdGhlIG9iamVjdC5cbiAgICovXG4gIE9ic2VydmFibGUucGFpcnMgPSBmdW5jdGlvbiAob2JqLCBzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUGFpcnNPYnNlcnZhYmxlKG9iaiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAgIHZhciBSYW5nZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmFuZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5yYW5nZUNvdW50ID0gY291bnQ7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoc3RhcnQsIGNvdW50LCBvKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcCAoaSwgcmVjdXJzZSkge1xuICAgICAgICBpZiAoaSA8IGNvdW50KSB7XG4gICAgICAgICAgby5vbk5leHQoc3RhcnQgKyBpKTtcbiAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgUmFuZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShcbiAgICAgICAgMCxcbiAgICAgICAgbG9vcFJlY3Vyc2l2ZSh0aGlzLnN0YXJ0LCB0aGlzLnJhbmdlQ291bnQsIG8pXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmFuZ2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGludGVncmFsIG51bWJlcnMgd2l0aGluIGEgc3BlY2lmaWVkIHJhbmdlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCBvYnNlcnZlciBtZXNzYWdlcy5cbiAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBhIHJhbmdlIG9mIHNlcXVlbnRpYWwgaW50ZWdyYWwgbnVtYmVycy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5yYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgUmVwZWF0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZXBlYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlcGVhdE9ic2VydmFibGUodmFsdWUsIHJlcGVhdENvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMucmVwZWF0Q291bnQgPSByZXBlYXRDb3VudCA9PSBudWxsID8gLTEgOiByZXBlYXRDb3VudDtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVwZWF0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHNpbmsgPSBuZXcgUmVwZWF0U2luayhvYnNlcnZlciwgdGhpcyk7XG4gICAgICByZXR1cm4gc2luay5ydW4oKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBmdW5jdGlvbiBSZXBlYXRTaW5rKG9ic2VydmVyLCBwYXJlbnQpIHtcbiAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gIH1cblxuICBSZXBlYXRTaW5rLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9ic2VydmVyID0gdGhpcy5vYnNlcnZlciwgdmFsdWUgPSB0aGlzLnBhcmVudC52YWx1ZTtcbiAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChpID09PSAtMSB8fCBpID4gMCkge1xuICAgICAgICBvYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICBpID4gMCAmJiBpLS07XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTsgfVxuICAgICAgcmVjdXJzZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMucGFyZW50LnJlcGVhdENvdW50LCBsb29wUmVjdXJzaXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcywgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIEVsZW1lbnQgdG8gcmVwZWF0LlxuICAgKiBAcGFyYW0ge051bWJlcn0gcmVwZWF0Q291bnQgW09wdGlvbmFdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHByb2R1Y2VyIGxvb3Agb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAgICovXG4gIE9ic2VydmFibGUucmVwZWF0ID0gZnVuY3Rpb24gKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgSnVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSnVzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSnVzdE9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEp1c3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IFt0aGlzLl92YWx1ZSwgb107XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyID09PSBpbW1lZGlhdGVTY2hlZHVsZXIgP1xuICAgICAgICBzY2hlZHVsZUl0ZW0obnVsbCwgc3RhdGUpIDpcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0YXRlWzBdLCBvYnNlcnZlciA9IHN0YXRlWzFdO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBKdXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSBzaW5nbGUgZWxlbWVudCwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqICBUaGVyZSBpcyBhbiBhbGlhcyBjYWxsZWQgJ2p1c3QnIG9yIGJyb3dzZXJzIDxJRTkuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFNpbmdsZSBlbGVtZW50IGluIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgc2luZ2xlIGVsZW1lbnQgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlUmV0dXJuID0gT2JzZXJ2YWJsZVsncmV0dXJuJ10gPSBPYnNlcnZhYmxlLmp1c3QgPSBmdW5jdGlvbiAodmFsdWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBKdXN0T2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVGhyb3dPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRocm93T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRocm93T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSBbdGhpcy5fZXJyb3IsIG9dO1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgZSA9IHN0YXRlWzBdLCBvID0gc3RhdGVbMV07XG4gICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBUaHJvd09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHRlcm1pbmF0ZXMgd2l0aCBhbiBleGNlcHRpb24sIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBzaW5nbGUgb25FcnJvciBtZXNzYWdlLlxuICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgdG8gdGhpcyBtZXRob2QgY2FsbGVkICd0aHJvd0Vycm9yJyBmb3IgYnJvd3NlcnMgPElFOS5cbiAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgQW4gb2JqZWN0IHVzZWQgZm9yIHRoZSBzZXF1ZW5jZSdzIHRlcm1pbmF0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBzZW5kIHRoZSBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBjYWxsIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkgd2l0aCB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBvYmplY3QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRocm93ID0gT2JzZXJ2YWJsZVsndGhyb3cnXSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRocm93T2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVXNpbmdPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhVc2luZ09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVXNpbmdPYnNlcnZhYmxlKHJlc0ZuLCBvYnNGbikge1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX29ic0ZuID0gb2JzRm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBVc2luZ09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB2YXIgcmVzb3VyY2UgPSB0cnlDYXRjaCh0aGlzLl9yZXNGbikoKTtcbiAgICAgIGlmIChyZXNvdXJjZSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKG9ic2VydmFibGVUaHJvdyhyZXNvdXJjZS5lKS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgICAgfVxuICAgICAgcmVzb3VyY2UgJiYgKGRpc3Bvc2FibGUgPSByZXNvdXJjZSk7XG4gICAgICB2YXIgc291cmNlID0gdHJ5Q2F0Y2godGhpcy5fb2JzRm4pKHJlc291cmNlKTtcbiAgICAgIGlmIChzb3VyY2UgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShvYnNlcnZhYmxlVGhyb3coc291cmNlLmUpLnN1YnNjcmliZShvKSwgZGlzcG9zYWJsZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShvKSwgZGlzcG9zYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBVc2luZ09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgZGVwZW5kcyBvbiBhIHJlc291cmNlIG9iamVjdCwgd2hvc2UgbGlmZXRpbWUgaXMgdGllZCB0byB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UncyBsaWZldGltZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb3VyY2VGYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gdG8gb2J0YWluIGEgcmVzb3VyY2Ugb2JqZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYnNlcnZhYmxlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIHRvIG9idGFpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgZGVwZW5kcyBvbiB0aGUgb2J0YWluZWQgcmVzb3VyY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGxpZmV0aW1lIGNvbnRyb2xzIHRoZSBsaWZldGltZSBvZiB0aGUgZGVwZW5kZW50IHJlc291cmNlIG9iamVjdC5cbiAgICovXG4gIE9ic2VydmFibGUudXNpbmcgPSBmdW5jdGlvbiAocmVzb3VyY2VGYWN0b3J5LCBvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgVXNpbmdPYnNlcnZhYmxlKHJlc291cmNlRmFjdG9yeSwgb2JzZXJ2YWJsZUZhY3RvcnkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm9wYWdhdGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCByZWFjdHMgZmlyc3QuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcmlnaHRTb3VyY2UgU2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgZWl0aGVyIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZXMsIHdoaWNoZXZlciByZWFjdGVkIGZpcnN0LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmFtYiA9IGZ1bmN0aW9uIChyaWdodFNvdXJjZSkge1xuICAgIHZhciBsZWZ0U291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgY2hvaWNlLFxuICAgICAgICBsZWZ0Q2hvaWNlID0gJ0wnLCByaWdodENob2ljZSA9ICdSJyxcbiAgICAgICAgbGVmdFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICByaWdodFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICBpc1Byb21pc2UocmlnaHRTb3VyY2UpICYmIChyaWdodFNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyaWdodFNvdXJjZSkpO1xuXG4gICAgICBmdW5jdGlvbiBjaG9pY2VMKCkge1xuICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgIGNob2ljZSA9IGxlZnRDaG9pY2U7XG4gICAgICAgICAgcmlnaHRTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNob2ljZVIoKSB7XG4gICAgICAgIGlmICghY2hvaWNlKSB7XG4gICAgICAgICAgY2hvaWNlID0gcmlnaHRDaG9pY2U7XG4gICAgICAgICAgbGVmdFN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGxlZnRTdWJzY3JpYmUgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKGxlZnQpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uTmV4dChsZWZ0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB2YXIgcmlnaHRTdWJzY3JpYmUgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKHJpZ2h0KSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25OZXh0KHJpZ2h0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjaG9pY2VSKCk7XG4gICAgICAgICAgY2hvaWNlID09PSByaWdodENob2ljZSAmJiBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgbGVmdFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGxlZnRTb3VyY2Uuc3Vic2NyaWJlKGxlZnRTdWJzY3JpYmUpKTtcbiAgICAgIHJpZ2h0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUocmlnaHRTb3VyY2Uuc3Vic2NyaWJlKHJpZ2h0U3Vic2NyaWJlKSk7XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShsZWZ0U3Vic2NyaXB0aW9uLCByaWdodFN1YnNjcmlwdGlvbik7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYW1iKHAsIGMpIHsgcmV0dXJuIHAuYW1iKGMpOyB9XG5cbiAgLyoqXG4gICAqIFByb3BhZ2F0ZXMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHJlYWN0cyBmaXJzdC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzdXJmYWNlcyBhbnkgb2YgdGhlIGdpdmVuIHNlcXVlbmNlcywgd2hpY2hldmVyIHJlYWN0ZWQgZmlyc3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLmFtYiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWNjID0gb2JzZXJ2YWJsZU5ldmVyKCksIGl0ZW1zO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGl0ZW1zID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGl0ZW1zID0gbmV3IEFycmF5KGl0ZW1zKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBpdGVtc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFjYyA9IGFtYihhY2MsIGl0ZW1zW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfTtcblxuICB2YXIgQ2F0Y2hPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDYXRjaE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZDEgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQxKTtcbiAgICAgIGQxLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDYXRjaE9ic2VydmVyKG8sIHN1YnNjcmlwdGlvbiwgdGhpcy5fZm4pKSk7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENhdGNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDYXRjaE9ic2VydmVyKG8sIHMsIGZuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBDYXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG4gICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKShlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fcy5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHJlc3VsdC5zdWJzY3JpYmUodGhpcy5fbykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge01peGVkfSBoYW5kbGVyT3JTZWNvbmQgRXhjZXB0aW9uIGhhbmRsZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZ2l2ZW4gdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLCBvciBhIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIHdoZW4gYW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBmaXJzdCBzZXF1ZW5jZSdzIGVsZW1lbnRzLCBmb2xsb3dlZCBieSB0aGUgZWxlbWVudHMgb2YgdGhlIGhhbmRsZXIgc2VxdWVuY2UgaW4gY2FzZSBhbiBleGNlcHRpb24gb2NjdXJyZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2NhdGNoJ10gPSBmdW5jdGlvbiAoaGFuZGxlck9yU2Vjb25kKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oaGFuZGxlck9yU2Vjb25kKSA/IG5ldyBDYXRjaE9ic2VydmFibGUodGhpcywgaGFuZGxlck9yU2Vjb25kKSA6IG9ic2VydmFibGVDYXRjaChbdGhpcywgaGFuZGxlck9yU2Vjb25kXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byB1c2UgYXMgdGhlIG5leHQgc2VxdWVuY2UgaWYgYW4gZXJyb3Igb2NjdXJzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gY29uc2VjdXRpdmUgc291cmNlIHNlcXVlbmNlcyB1bnRpbCBhIHNvdXJjZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlQ2F0Y2ggPSBPYnNlcnZhYmxlWydjYXRjaCddID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpdGVtcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGl0ZW1zW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHJldHVybiBlbnVtZXJhYmxlT2YoaXRlbXMpLmNhdGNoRXJyb3IoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYW55IG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBQcm9taXNlcyBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBUaGlzIGNhbiBiZSBpbiB0aGUgZm9ybSBvZiBhbiBhcmd1bWVudCBsaXN0IG9mIG9ic2VydmFibGVzIG9yIGFuIGFycmF5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAxIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KG9iczEsIG9iczIsIG9iczMsIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAgKiAyIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3NbMF0udW5zaGlmdCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZUxhdGVzdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZShwYXJhbXMsIGNiKSB7XG4gICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXM7XG4gICAgICB0aGlzLl9jYiA9IGNiO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGxlbiA9IHRoaXMuX3BhcmFtcy5sZW5ndGgsXG4gICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGhhc1ZhbHVlOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICBoYXNWYWx1ZUFsbDogZmFsc2UsXG4gICAgICAgIGlzRG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fcGFyYW1zW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgQ29tYmluZUxhdGVzdE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLl9jYiwgc3RhdGUpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbWJpbmVMYXRlc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIobywgaSwgY2IsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLnZhbHVlc1t0aGlzLl9pXSA9IHg7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICBpZiAodGhpcy5fc3RhdGUuaGFzVmFsdWVBbGwgfHwgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fY2IpLmFwcGx5KG51bGwsIHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlLmlzRG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc3RhdGUuaXNEb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZS5ldmVyeShpZGVudGl0eSkgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbnkgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9yIFByb21pc2VzIHByb2R1Y2VzIGFuIGVsZW1lbnQuXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIDEgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qob2JzMSwgb2JzMiwgb2JzMywgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICogMiAtIG9icyA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICovXG4gIHZhciBjb21iaW5lTGF0ZXN0ID0gT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuICAgIHJldHVybiBuZXcgQ29tYmluZUxhdGVzdE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy4gIFRoaXMgdGFrZXMgaW4gZWl0aGVyIGFuIGFycmF5IG9yIHZhcmlhYmxlIGFyZ3VtZW50cyB0byBjb25jYXRlbmF0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBnaXZlbiBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQuYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgdmFyIENvbmNhdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbmNhdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmVyKHMsIGZuKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3Muby5vbk5leHQoeCk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcy5pKys7IHRoaXMuX2ZuKHRoaXMuX3MpOyB9O1xuXG4gICAgcmV0dXJuIENvbmNhdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgQ29uY2F0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZSAoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5kaXNwb3NhYmxlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoc3RhdGUuaSA9PT0gc3RhdGUuc291cmNlcy5sZW5ndGgpIHsgcmV0dXJuIHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gc3RhdGUuc291cmNlc1tzdGF0ZS5pXTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBDb25jYXRPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVDcmVhdGUobm9vcCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIGk6IDAsXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBkaXNwb3NhYmxlOiBkaXNwb3NhYmxlLFxuICAgICAgICBzb3VyY2VzOiB0aGlzLl9zb3VyY2VzXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBkaXNwb3NhYmxlLCBjYW5jZWxhYmxlXSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb25jYXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBjb25jYXQgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ2l2ZW4gc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUNvbmNhdCA9IE9ic2VydmFibGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IENvbmNhdE9ic2VydmFibGUoYXJncyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBlYWNoIG9ic2VydmVkIGlubmVyIHNlcXVlbmNlLCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbmNhdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSgxKTtcbiAgfTtcblxuICB2YXIgTWVyZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNZXJnZU9ic2VydmFibGUoc291cmNlLCBtYXhDb25jdXJyZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMubWF4Q29uY3VycmVudCA9IG1heENvbmN1cnJlbnQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZy5hZGQodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU9ic2VydmVyKG9ic2VydmVyLCB0aGlzLm1heENvbmN1cnJlbnQsIGcpKSk7XG4gICAgICByZXR1cm4gZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIE1lcmdlT2JzZXJ2ZXIobywgbWF4LCBnKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICB0aGlzLmcgPSBnO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMuYWN0aXZlQ291bnQgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmhhbmRsZVN1YnNjcmliZSA9IGZ1bmN0aW9uICh4cykge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5nLmFkZChzYWQpO1xuICAgICAgaXNQcm9taXNlKHhzKSAmJiAoeHMgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeHMpKTtcbiAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHhzLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIGlmKHRoaXMuYWN0aXZlQ291bnQgPCB0aGlzLm1heCkge1xuICAgICAgICB0aGlzLmFjdGl2ZUNvdW50Kys7XG4gICAgICAgIHRoaXMuaGFuZGxlU3Vic2NyaWJlKGlubmVyU291cmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucS5wdXNoKGlubmVyU291cmNlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgTWVyZ2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLmRvbmUgPSB0cnVlOyB0aGlzLmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLnNhZCA9IHNhZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuICAgICAgaWYgKHRoaXMucGFyZW50LnEubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYW5kbGVTdWJzY3JpYmUodGhpcy5wYXJlbnQucS5zaGlmdCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50LS07XG4gICAgICAgIHRoaXMucGFyZW50LmRvbmUgJiYgdGhpcy5wYXJlbnQuYWN0aXZlQ291bnQgPT09IDAgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCBsaW1pdGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgc3Vic2NyaXB0aW9ucyB0byBpbm5lciBzZXF1ZW5jZXMuXG4gICogT3IgbWVyZ2VzIHR3byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtNaXhlZH0gW21heENvbmN1cnJlbnRPck90aGVyXSBNYXhpbXVtIG51bWJlciBvZiBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseSBvciB0aGUgc2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWVyZ2UgPSBmdW5jdGlvbiAobWF4Q29uY3VycmVudE9yT3RoZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1heENvbmN1cnJlbnRPck90aGVyICE9PSAnbnVtYmVyJyA/XG4gICAgICBvYnNlcnZhYmxlTWVyZ2UodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpIDpcbiAgICAgIG5ldyBNZXJnZU9ic2VydmFibGUodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIFRoZSBzY2hlZHVsZXIgaXMgb3B0aW9uYWwgYW5kIGlmIG5vdCBzcGVjaWZpZWQsIHRoZSBpbW1lZGlhdGUgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVNZXJnZSA9IE9ic2VydmFibGUubWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjaGVkdWxlciwgc291cmNlcyA9IFtdLCBpLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG4gICAgICBzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXI7XG4gICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykgeyBzb3VyY2VzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIoYXJndW1lbnRzWzBdKSkge1xuICAgICAgc2NoZWR1bGVyID0gYXJndW1lbnRzWzBdO1xuICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZU9mKHNjaGVkdWxlciwgc291cmNlcykubWVyZ2VBbGwoKTtcbiAgfTtcblxuICB2YXIgTWVyZ2VBbGxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZUFsbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNZXJnZUFsbE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1lcmdlQWxsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIGcuYWRkKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VBbGxPYnNlcnZlcihvLCBnKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZUFsbE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTWVyZ2VBbGxPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPYnNlcnZlcihvLCBnKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5nID0gZztcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihpbm5lclNvdXJjZSkge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5nLmFkZChzYWQpO1xuICAgICAgaXNQcm9taXNlKGlubmVyU291cmNlKSAmJiAoaW5uZXJTb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoaW5uZXJTb3VyY2UpKTtcbiAgICAgIHNhZC5zZXREaXNwb3NhYmxlKGlubmVyU291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgdGhpcy5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLnNhZCA9IHNhZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucGFyZW50Lm8ub25OZXh0KHgpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5wYXJlbnQuby5vbkVycm9yKGUpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuICAgICAgdGhpcy5wYXJlbnQuZG9uZSAmJiB0aGlzLnBhcmVudC5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZUFsbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBNZXJnZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWVyZ2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNZXJnZUFsbE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIENvbXBvc2l0ZUVycm9yID0gUnguQ29tcG9zaXRlRXJyb3IgPSBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICB0aGlzLmlubmVyRXJyb3JzID0gZXJyb3JzO1xuICAgIHRoaXMubWVzc2FnZSA9ICdUaGlzIGNvbnRhaW5zIG11bHRpcGxlIGVycm9ycy4gQ2hlY2sgdGhlIGlubmVyRXJyb3JzJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBDb21wb3NpdGVFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIENvbXBvc2l0ZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0NvbXBvc2l0ZUVycm9yJztcblxuICB2YXIgTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBzdGF0ZSA9IHsgaXNTdG9wcGVkOiBmYWxzZSwgZXJyb3JzOiBbXSwgbzogbyB9O1xuXG4gICAgICBncm91cC5hZGQobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZURlbGF5RXJyb3JPYnNlcnZlcihncm91cCwgc3RhdGUpKSk7XG5cbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9ncm91cCA9IGdyb3VwO1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldENvbXBsZXRpb24obywgZXJyb3JzKSB7XG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgby5vbkVycm9yKGVycm9yc1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uRXJyb3IobmV3IENvbXBvc2l0ZUVycm9yKGVycm9ycykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fZ3JvdXAuYWRkKGlubmVyKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIHByb21pc2VzIHN1cHBvcnRcbiAgICAgIGlzUHJvbWlzZSh4KSAmJiAoeCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh4KSk7XG4gICAgICBpbm5lci5zZXREaXNwb3NhYmxlKHguc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKGlubmVyLCB0aGlzLl9ncm91cCwgdGhpcy5fc3RhdGUpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zdGF0ZS5lcnJvcnMucHVzaChlKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihpbm5lciwgZ3JvdXAsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xuICAgICAgdGhpcy5fZ3JvdXAgPSBncm91cDtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fc3RhdGUuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fc3RhdGUuZXJyb3JzLnB1c2goZSk7XG4gICAgICB0aGlzLl9ncm91cC5yZW1vdmUodGhpcy5faW5uZXIpO1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkICYmIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9ncm91cC5yZW1vdmUodGhpcy5faW5uZXIpO1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkICYmIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZURlbGF5RXJyb3JPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogRmxhdHRlbnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzIGludG8gb25lIE9ic2VydmFibGUsIGluIGEgd2F5IHRoYXQgYWxsb3dzIGFuIE9ic2VydmVyIHRvXG4gICogcmVjZWl2ZSBhbGwgc3VjY2Vzc2Z1bGx5IGVtaXR0ZWQgaXRlbXMgZnJvbSBhbGwgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlcyB3aXRob3V0IGJlaW5nIGludGVycnVwdGVkIGJ5XG4gICogYW4gZXJyb3Igbm90aWZpY2F0aW9uIGZyb20gb25lIG9mIHRoZW0uXG4gICpcbiAgKiBUaGlzIGJlaGF2ZXMgbGlrZSBPYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZUFsbCBleGNlcHQgdGhhdCBpZiBhbnkgb2YgdGhlIG1lcmdlZCBPYnNlcnZhYmxlcyBub3RpZnkgb2YgYW5cbiAgKiBlcnJvciB2aWEgdGhlIE9ic2VydmVyJ3Mgb25FcnJvciwgbWVyZ2VEZWxheUVycm9yIHdpbGwgcmVmcmFpbiBmcm9tIHByb3BhZ2F0aW5nIHRoYXRcbiAgKiBlcnJvciBub3RpZmljYXRpb24gdW50aWwgYWxsIG9mIHRoZSBtZXJnZWQgT2JzZXJ2YWJsZXMgaGF2ZSBmaW5pc2hlZCBlbWl0dGluZyBpdGVtcy5cbiAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBtZXJnZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFsbCBvZiB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGUgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgT2JzZXJ2YWJsZVxuICAqL1xuICBPYnNlcnZhYmxlLm1lcmdlRGVsYXlFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IG9ic2VydmFibGVPZihudWxsLCBhcmdzKTtcbiAgICByZXR1cm4gbmV3IE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUoc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udGludWVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0ZXJtaW5hdGVkIG5vcm1hbGx5IG9yIGJ5IGFuIGV4Y2VwdGlvbiB3aXRoIHRoZSBuZXh0IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2Vjb25kIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIGFmdGVyIHRoZSBmaXJzdCBzZXF1ZW5jZSB0ZXJtaW5hdGVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbmNhdGVuYXRlcyB0aGUgZmlyc3QgYW5kIHNlY29uZCBzZXF1ZW5jZSwgZXZlbiBpZiB0aGUgZmlyc3Qgc2VxdWVuY2UgdGVybWluYXRlcyBleGNlcHRpb25hbGx5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm9uRXJyb3JSZXN1bWVOZXh0ID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIGlmICghc2Vjb25kKSB7IHRocm93IG5ldyBFcnJvcignU2Vjb25kIG9ic2VydmFibGUgaXMgcmVxdWlyZWQnKTsgfVxuICAgIHJldHVybiBvbkVycm9yUmVzdW1lTmV4dChbdGhpcywgc2Vjb25kXSk7XG4gIH07XG5cbiAgdmFyIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgaWYgKHN0YXRlLnBvcyA8IHN0YXRlLnNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gc3RhdGUuc291cmNlc1tzdGF0ZS5wb3MrK107XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50KSAmJiAoY3VycmVudCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50KSk7XG4gICAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudC5zdWJzY3JpYmUobmV3IE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICAgIHN0YXRlID0ge3BvczogMCwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sIG86IG8sIHNvdXJjZXM6IHRoaXMuc291cmNlcyB9LFxuICAgICAgICAgIGNhbmNlbGxhYmxlID0gaW1tZWRpYXRlU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGNhbmNlbGxhYmxlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvclJlc3VtZU5leHRPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcbiAgICBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgbm9ybWFsbHkgb3IgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb25jYXRlbmF0ZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZXMsIGV2ZW4gaWYgYSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkuXG4gICAqL1xuICB2YXIgb25FcnJvclJlc3VtZU5leHQgPSBPYnNlcnZhYmxlLm9uRXJyb3JSZXN1bWVOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgc291cmNlcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBzb3VyY2VzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgc291cmNlc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZShzb3VyY2VzKTtcbiAgfTtcblxuICB2YXIgU2tpcFVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fbyA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGxlZnRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIGxlZnRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnN1YnNjcmliZShuZXcgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgdGhpcykpKTtcblxuICAgICAgaXNQcm9taXNlKHRoaXMuX28pICYmICh0aGlzLl9vID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRoaXMuX28pKTtcblxuICAgICAgdmFyIHJpZ2h0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICByaWdodFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuX28uc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxPdGhlck9ic2VydmVyKG8sIHRoaXMsIHJpZ2h0U3Vic2NyaXB0aW9uKSkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwVW50aWxTb3VyY2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxTb3VyY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxTb3VyY2VPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBTa2lwVW50aWxPdGhlck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT3RoZXJPYnNlcnZlcihvLCBwLCByKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fciA9IHI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiA9IHRydWU7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBhZnRlciB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGUgfCBQcm9taXNlfSBvdGhlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgdHJpZ2dlcnMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBzdGFydGluZyBmcm9tIHRoZSBwb2ludCB0aGUgb3RoZXIgc2VxdWVuY2UgdHJpZ2dlcmVkIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBVbnRpbCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgU2tpcFVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG4gIH07XG5cbiAgdmFyIFN3aXRjaE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3dpdGNoT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2hPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBpbm5lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksIHMgPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaE9ic2VydmVyKG8sIGlubmVyKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUocywgaW5uZXIpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhTd2l0Y2hPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2ZXIobywgaW5uZXIpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGF0ZXN0ID0gMDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gZmFsc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIGlkID0gKyt0aGlzLmxhdGVzdDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5uZXIuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoaW5uZXJTb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIGlkKSkpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFN3aXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgIXRoaXMuaGFzTGF0ZXN0ICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHBhcmVudCwgaWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5wYXJlbnQubGF0ZXN0ID09PSB0aGlzLmlkICYmIHRoaXMucGFyZW50Lm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYXNMYXRlc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJlbnQuc3RvcHBlZCAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogVHJhbnNmb3JtcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBhdCBhbnkgcG9pbnQgaW4gdGltZSBwcm9kdWNlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG1vc3QgcmVjZW50IGlubmVyIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydzd2l0Y2gnXSA9IG9ic2VydmFibGVQcm90by5zd2l0Y2hMYXRlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2l0Y2hPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBUYWtlVW50aWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZhYmxlKHNvdXJjZSwgb3RoZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5vdGhlciA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyksXG4gICAgICAgIHRoaXMub3RoZXIuc3Vic2NyaWJlKG5ldyBUYWtlVW50aWxPYnNlcnZlcihvKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRha2VVbnRpbE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVVudGlsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIFRha2VVbnRpbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuICAgIH07XG5cbiAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFRha2VVbnRpbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVudGlsIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZSB8IFByb21pc2V9IG90aGVyIE9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRlcm1pbmF0ZXMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSB1cCB0byB0aGUgcG9pbnQgdGhlIG90aGVyIHNlcXVlbmNlIGludGVycnVwdGVkIGZ1cnRoZXIgcHJvcGFnYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVVudGlsID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBUYWtlVW50aWxPYnNlcnZhYmxlKHRoaXMsIG90aGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZShzb3VyY2UsIHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fc3MgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGVuID0gdGhpcy5fc3MubGVuZ3RoO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuICAgICAgICB2YWx1ZXM6IG5ldyBBcnJheShsZW4pXG4gICAgICB9O1xuXG4gICAgICB2YXIgbiA9IHRoaXMuX3NzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShuICsgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgb3RoZXIgPSB0aGlzLl9zc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIGlzUHJvbWlzZShvdGhlcikgJiYgKG90aGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShuZXcgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyKG8sIGksIHN0YXRlKSkpO1xuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3V0ZXJTYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIG91dGVyU2FkLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIobywgdGhpcy5fY2IsIHN0YXRlKSkpO1xuICAgICAgc3Vic2NyaXB0aW9uc1tuXSA9IG91dGVyU2FkO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcihvLCBpLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fc3RhdGUudmFsdWVzW3RoaXMuX2ldID0geDtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpO1xuICAgIH07XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcihvLCBjYiwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBhbGxWYWx1ZXMgPSBbeF0uY29uY2F0KHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICBpZiAoIXRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsKSB7IHJldHVybjsgfVxuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCBhbGxWYWx1ZXMpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIG9ubHkgd2hlbiB0aGUgKGZpcnN0KSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpdGhMYXRlc3RGcm9tID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcbiAgICBBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIChhcmdzID0gYXJnc1swXSk7XG5cbiAgICByZXR1cm4gbmV3IFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSh0aGlzLCBhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gZW1wdHlBcnJheUZhY3RvcnkoKSB7IHJldHVybiBbXTsgfVxuXG4gIHZhciBaaXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFppcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZXM7XG4gICAgICB0aGlzLl9jYiA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbiA9IHRoaXMuX3MubGVuZ3RoLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAgZG9uZSA9IGFycmF5SW5pdGlhbGl6ZShuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICAgIHEgPSBhcnJheUluaXRpYWxpemUobiwgZW1wdHlBcnJheUZhY3RvcnkpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLCBxLCBkb25lKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWmlwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBaaXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoWmlwT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2ZXIobywgaSwgcCwgcSwgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcSA9IHE7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuICAgIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcVt0aGlzLl9pXS5wdXNoKHgpO1xuICAgICAgaWYgKHRoaXMuX3EuZXZlcnkobm90RW1wdHkpKSB7XG4gICAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9xLm1hcChzaGlmdEVhY2gpO1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2QuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9kW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2QuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFppcE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICAgKiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcmd1bWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBzZXJpZXMgb2YgZWxlbWVudHMgYXQgY29ycmVzcG9uZGluZyBpbmRleGVzIGluIHRoZSBhcmdzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnppcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG5cbiAgICByZXR1cm4gbmV3IFppcE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbGwgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgcHJvZHVjZWQgYW4gZWxlbWVudCBhdCBhIGNvcnJlc3BvbmRpbmcgaW5kZXguXG4gICAqIEBwYXJhbSBhcmd1bWVudHMgT2JzZXJ2YWJsZSBzb3VyY2VzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgc291cmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIE9ic2VydmFibGUuemlwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgYXJncyA9IGlzRnVuY3Rpb24oYXJnc1sxXSkgPyBhcmdzWzBdLmNvbmNhdChhcmdzWzFdKSA6IGFyZ3NbMF07XG4gICAgfVxuICAgIHZhciBmaXJzdCA9IGFyZ3Muc2hpZnQoKTtcbiAgICByZXR1cm4gZmlyc3QuemlwLmFwcGx5KGZpcnN0LCBhcmdzKTtcbiAgfTtcblxuZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGVtcHR5QXJyYXlGYWN0b3J5KCkgeyByZXR1cm4gW107IH1cbmZ1bmN0aW9uIGFyZ3VtZW50c1RvQXJyYXkoKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gIHJldHVybiBhcmdzO1xufVxuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZShzb3VyY2VzLCBjYikge1xuICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgdGhpcy5fY2IgPSBjYjtcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLnNvdXJjZXMsIGxlbiA9IHNvdXJjZXMubGVuZ3RoLCBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KGxlbik7XG5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICBxOiBhcnJheUluaXRpYWxpemUobGVuLCBlbXB0eUFycmF5RmFjdG9yeSksXG4gICAgICBkb25lOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgY2I6IHRoaXMuX2NiLFxuICAgICAgbzogb1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAoaXNBcnJheUxpa2Uoc291cmNlKSB8fCBpc0l0ZXJhYmxlKHNvdXJjZSkpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbShzb3VyY2UpKTtcblxuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG5ldyBaaXBJdGVyYWJsZU9ic2VydmVyKHN0YXRlLCBpKSkpO1xuICAgICAgfShpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlQmFzZSkpO1xuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gIGluaGVyaXRzKFppcEl0ZXJhYmxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2ZXIocywgaSkge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2kgPSBpO1xuICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbm90RW1wdHkoeCkgeyByZXR1cm4geC5sZW5ndGggPiAwOyB9XG4gIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBqKSB7XG4gICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICB9O1xuICB9XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgdGhpcy5fcy5xW3RoaXMuX2ldLnB1c2goeCk7XG4gICAgaWYgKHRoaXMuX3MucS5ldmVyeShub3RFbXB0eSkpIHtcbiAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9zLnEubWFwKHNoaWZ0RWFjaCksXG4gICAgICAgICAgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcy5jYikuYXBwbHkobnVsbCwgcXVldWVkVmFsdWVzKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX3Muby5vbk5leHQocmVzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3MuZG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm8ub25FcnJvcihlKTsgfTtcblxuICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcy5kb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICB0aGlzLl9zLmRvbmUuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICB9O1xuXG4gIHJldHVybiBaaXBJdGVyYWJsZU9ic2VydmVyO1xufShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICogVGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJndW1lbnRzIG11c3QgYmUgYSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgYXJncy5cbiAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIGFyZ3MgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gKi9cbm9ic2VydmFibGVQcm90by56aXBJdGVyYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cycpOyB9XG5cbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuICBhcmdzLnVuc2hpZnQocGFyZW50KTtcbiAgcmV0dXJuIG5ldyBaaXBJdGVyYWJsZU9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xufTtcblxuICBmdW5jdGlvbiBhc09ic2VydmFibGUoc291cmNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN1YnNjcmliZShvKSB7IHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG8pOyB9O1xuICB9XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoaWRlcyB0aGUgaWRlbnRpdHkgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGFzT2JzZXJ2YWJsZSh0aGlzKSwgdGhpcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuICBmdW5jdGlvbiBub3RFbXB0eSh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH1cblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIGJ1ZmZlcnMgd2hpY2ggYXJlIHByb2R1Y2VkIGJhc2VkIG9uIGVsZW1lbnQgY291bnQgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBMZW5ndGggb2YgZWFjaCBidWZmZXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbc2tpcF0gTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYmV0d2VlbiBjcmVhdGlvbiBvZiBjb25zZWN1dGl2ZSBidWZmZXJzLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIHRoZSBjb3VudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgYnVmZmVycy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5idWZmZXJXaXRoQ291bnQgPSBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyQ291bnQgPSBmdW5jdGlvbiAoY291bnQsIHNraXApIHtcbiAgICB0eXBlb2Ygc2tpcCAhPT0gJ251bWJlcicgJiYgKHNraXAgPSBjb3VudCk7XG4gICAgcmV0dXJuIHRoaXMud2luZG93V2l0aENvdW50KGNvdW50LCBza2lwKVxuICAgICAgLmZsYXRNYXAodG9BcnJheSlcbiAgICAgIC5maWx0ZXIobm90RW1wdHkpO1xuICB9O1xuXG4gIHZhciBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERlbWF0ZXJpYWxpemVPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlbWF0ZXJpYWxpemVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIERlbWF0ZXJpYWxpemVPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHguYWNjZXB0KHRoaXMuX28pOyB9O1xuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRGVtYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBEZW1hdGVyaWFsaXplT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZW1hdGVyaWFsaXplcyB0aGUgZXhwbGljaXQgbm90aWZpY2F0aW9uIHZhbHVlcyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGltcGxpY2l0IG5vdGlmaWNhdGlvbnMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4aGliaXRpbmcgdGhlIGJlaGF2aW9yIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZSdzIG5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGVtYXRlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZShzb3VyY2UsIGtleUZuLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmtleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcihvLCB0aGlzLmtleUZuLCB0aGlzLmNvbXBhcmVyKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIobywga2V5Rm4sIGNvbXBhcmVyKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgICAgdGhpcy5oYXNDdXJyZW50S2V5ID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRLZXkgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0geCwgY29tcGFyZXJFcXVhbHM7XG4gICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLmtleUZuKSkge1xuICAgICAgICBrZXkgPSB0cnlDYXRjaCh0aGlzLmtleUZuKSh4KTtcbiAgICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ3VycmVudEtleSkge1xuICAgICAgICBjb21wYXJlckVxdWFscyA9IHRyeUNhdGNoKHRoaXMuY29tcGFyZXIpKHRoaXMuY3VycmVudEtleSwga2V5KTtcbiAgICAgICAgaWYgKGNvbXBhcmVyRXF1YWxzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IoY29tcGFyZXJFcXVhbHMuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5oYXNDdXJyZW50S2V5IHx8ICFjb21wYXJlckVxdWFscykge1xuICAgICAgICB0aGlzLmhhc0N1cnJlbnRLZXkgPSB0cnVlO1xuICAgICAgICB0aGlzLmN1cnJlbnRLZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuby5vbk5leHQoeCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgb25seSBkaXN0aW5jdCBjb250aWd1b3VzIGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUga2V5Rm4gYW5kIHRoZSBjb21wYXJlci5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBba2V5Rm5dIEEgZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGUgY29tcGFyaXNvbiBrZXkgZm9yIGVhY2ggZWxlbWVudC4gSWYgbm90IHByb3ZpZGVkLCBpdCBwcm9qZWN0cyB0aGUgdmFsdWUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBFcXVhbGl0eSBjb21wYXJlciBmb3IgY29tcHV0ZWQga2V5IHZhbHVlcy4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBhbiBlcXVhbGl0eSBjb21wYXJlciBmdW5jdGlvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvbmx5IGNvbnRhaW5pbmcgdGhlIGRpc3RpbmN0IGNvbnRpZ3VvdXMgZWxlbWVudHMsIGJhc2VkIG9uIGEgY29tcHV0ZWQga2V5IHZhbHVlLCBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5kaXN0aW5jdFVudGlsQ2hhbmdlZCA9IGZ1bmN0aW9uIChrZXlGbiwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlKHRoaXMsIGtleUZuLCBjb21wYXJlcik7XG4gIH07XG5cbiAgdmFyIFRhcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFwT2JzZXJ2YWJsZSxfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRhcE9ic2VydmFibGUoc291cmNlLCBvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9vTiA9IG9ic2VydmVyT3JPbk5leHQ7XG4gICAgICB0aGlzLl9vRSA9IG9uRXJyb3I7XG4gICAgICB0aGlzLl9vQyA9IG9uQ29tcGxldGVkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnQgPSAhcC5fb04gfHwgaXNGdW5jdGlvbihwLl9vTikgP1xuICAgICAgICBvYnNlcnZlckNyZWF0ZShwLl9vTiB8fCBub29wLCBwLl9vRSB8fCBub29wLCBwLl9vQyB8fCBub29wKSA6XG4gICAgICAgIHAuX29OO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25OZXh0KS5jYWxsKHRoaXMudCwgeCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbk5leHQoeCk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbkVycm9yKS5jYWxsKHRoaXMudCwgZXJyKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbkVycm9yKGVycik7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25Db21wbGV0ZWQpLmNhbGwodGhpcy50KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBpbnZva2VzIGFuIGFjdGlvbiB1cG9uIGdyYWNlZnVsIG9yIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbiB8IE9ic2VydmVyfSBvYnNlcnZlck9yT25OZXh0IEFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBhbiBvLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAgQWN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLiBVc2VkIGlmIG9ubHkgdGhlIG9ic2VydmVyT3JPbk5leHQgcGFyYW1ldGVyIGlzIGFsc28gYSBmdW5jdGlvbi5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZWRdICBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuIFVzZWQgaWYgb25seSB0aGUgb2JzZXJ2ZXJPck9uTmV4dCBwYXJhbWV0ZXIgaXMgYWxzbyBhIGZ1bmN0aW9uLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90b1snZG8nXSA9IG9ic2VydmFibGVQcm90by50YXAgPSBvYnNlcnZhYmxlUHJvdG8uZG9BY3Rpb24gPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICByZXR1cm4gbmV3IFRhcE9ic2VydmFibGUodGhpcywgb2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IEFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9Pbk5leHQgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25OZXh0ID0gZnVuY3Rpb24gKG9uTmV4dCwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcCh0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCk7XG4gIH07XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9PbkVycm9yID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uRXJyb3IgPSBmdW5jdGlvbiAob25FcnJvciwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcChub29wLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoZSkgeyBvbkVycm9yLmNhbGwodGhpc0FyZywgZSk7IH0gOiBvbkVycm9yKTtcbiAgfTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEFjdGlvbiB0byBpbnZva2UgdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9PbkNvbXBsZXRlZCA9IG9ic2VydmFibGVQcm90by50YXBPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uIChvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcChub29wLCBudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoKSB7IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7IH0gOiBvbkNvbXBsZXRlZCk7XG4gIH07XG5cbiAgdmFyIEZpbmFsbHlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaW5hbGx5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaW5hbGx5T2JzZXJ2YWJsZShzb3VyY2UsIGZuLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gYmluZENhbGxiYWNrKGZuLCB0aGlzQXJnLCAwKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpbmFsbHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkID0gdHJ5Q2F0Y2godGhpcy5zb3VyY2Uuc3Vic2NyaWJlKS5jYWxsKHRoaXMuc291cmNlLCBvKTtcbiAgICAgIGlmIChkID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9mbigpO1xuICAgICAgICB0aHJvd2VyKGQuZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgRmluYWxseURpc3Bvc2FibGUoZCwgdGhpcy5fZm4pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBGaW5hbGx5RGlzcG9zYWJsZShzLCBmbikge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgfVxuICAgIEZpbmFsbHlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3MuZGlzcG9zZSkuY2FsbCh0aGlzLl9zKTtcbiAgICAgICAgdGhpcy5fZm4oKTtcbiAgICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpbmFsbHlPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEludm9rZXMgYSBzcGVjaWZpZWQgYWN0aW9uIGFmdGVyIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIGdyYWNlZnVsbHkgb3IgZXhjZXB0aW9uYWxseS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmluYWxseUFjdGlvbiBBY3Rpb24gdG8gaW52b2tlIGFmdGVyIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU291cmNlIHNlcXVlbmNlIHdpdGggdGhlIGFjdGlvbi1pbnZva2luZyB0ZXJtaW5hdGlvbiBiZWhhdmlvciBhcHBsaWVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydmaW5hbGx5J10gPSBmdW5jdGlvbiAoYWN0aW9uLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGaW5hbGx5T2JzZXJ2YWJsZSh0aGlzLCBhY3Rpb24sIHRoaXNBcmcpO1xuICB9O1xuXG4gIHZhciBJZ25vcmVFbGVtZW50c09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJZ25vcmVFbGVtZW50c09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uTmV4dCA9IG5vb3A7XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuby5vbkVycm9yKGVycik7XG4gICAgICB9XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0aGlzLmlzU3RvcHBlZCA9IHRydWU7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBJZ25vcmVzIGFsbCBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGxlYXZpbmcgb25seSB0aGUgdGVybWluYXRpb24gbWVzc2FnZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2lnbmFscyB0ZXJtaW5hdGlvbiwgc3VjY2Vzc2Z1bCBvciBleGNlcHRpb25hbCwgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5pZ25vcmVFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgTWF0ZXJpYWxpemVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXRlcmlhbGl6ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWF0ZXJpYWxpemVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWF0ZXJpYWxpemVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1hdGVyaWFsaXplT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX28ub25OZXh0KG5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCh4KSkgfTtcbiAgICBNYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25OZXh0KG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IoZSkpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCgpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIE1hdGVyaWFsaXplT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgTWF0ZXJpYWxpemVzIHRoZSBpbXBsaWNpdCBub3RpZmljYXRpb25zIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgZXhwbGljaXQgbm90aWZpY2F0aW9uIHZhbHVlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgbWF0ZXJpYWxpemVkIG5vdGlmaWNhdGlvbiB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hdGVyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgTWF0ZXJpYWxpemVPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmVwZWF0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuIElmIHRoZSByZXBlYXQgY291bnQgaXMgbm90IHNwZWNpZmllZCwgdGhlIHNlcXVlbmNlIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuICAgKiBAcGFyYW0ge051bWJlcn0gW3JlcGVhdENvdW50XSAgTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmVwZWF0cyB0aGUgc2VxdWVuY2UgaW5kZWZpbml0ZWx5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2UgcmVwZWF0ZWRseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXBlYXQgPSBmdW5jdGlvbiAocmVwZWF0Q291bnQpIHtcbiAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzLCByZXBlYXRDb3VudCkuY29uY2F0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXBlYXRzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcyBvciB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgdGVybWluYXRlcy4gSWYgdGhlIHJldHJ5IGNvdW50IGlzIG5vdCBzcGVjaWZpZWQsIGl0IHJldHJpZXMgaW5kZWZpbml0ZWx5LlxuICAgKiAgTm90ZSBpZiB5b3UgZW5jb3VudGVyIGFuIGVycm9yIGFuZCB3YW50IGl0IHRvIHJldHJ5IG9uY2UsIHRoZW4geW91IG11c3QgdXNlIC5yZXRyeSgyKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSByZXRyaWVkID0gcmV0cnkucmVwZWF0KCk7XG4gICAqICB2YXIgcmVzID0gcmV0cmllZCA9IHJldHJ5LnJlcGVhdCgyKTtcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtyZXRyeUNvdW50XSAgTnVtYmVyIG9mIHRpbWVzIHRvIHJldHJ5IHRoZSBzZXF1ZW5jZS4gSWYgbm90IHByb3ZpZGVkLCByZXRyeSB0aGUgc2VxdWVuY2UgaW5kZWZpbml0ZWx5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSByZXBlYXRlZGx5IHVudGlsIGl0IHRlcm1pbmF0ZXMgc3VjY2Vzc2Z1bGx5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJldHJ5ID0gZnVuY3Rpb24gKHJldHJ5Q291bnQpIHtcbiAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzLCByZXRyeUNvdW50KS5jYXRjaEVycm9yKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVwZWF0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdAQGl0ZXJhdG9yJzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBSZXRyeVdoZW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZURpc3Bvc2FibGUoc3RhdGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUmV0cnlXaGVuT2JzZXJ2YWJsZShzb3VyY2UsIG5vdGlmaWVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX25vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhSZXRyeVdoZW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgUmV0cnlXaGVuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZXhjZXB0aW9ucyA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIG5vdGlmaWVyID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgaGFuZGxlZCA9IHRoaXMuX25vdGlmaWVyKGV4Y2VwdGlvbnMpLFxuICAgICAgICBub3RpZmljYXRpb25EaXNwb3NhYmxlID0gaGFuZGxlZC5zdWJzY3JpYmUobm90aWZpZXIpO1xuXG4gICAgICB2YXIgZSA9IHRoaXMuc291cmNlWydAQGl0ZXJhdG9yJ10oKTtcblxuICAgICAgdmFyIHN0YXRlID0geyBpc0Rpc3Bvc2VkOiBmYWxzZSB9LFxuICAgICAgICBsYXN0RXJyb3IsXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUobnVsbCwgZnVuY3Rpb24gKF8sIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGUubmV4dCgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7XG4gICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgICAgdmFyIG91dGVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShuZXcgQmluYXJ5RGlzcG9zYWJsZShpbm5lciwgb3V0ZXIpKTtcbiAgICAgICAgb3V0ZXIuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGV4bikge1xuICAgICAgICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZShub3RpZmllci5zdWJzY3JpYmUocmVjdXJzZSwgZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGV4KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGV4Y2VwdGlvbnMub25OZXh0KGV4bik7XG4gICAgICAgICAgICBvdXRlci5kaXNwb3NlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbigpIHsgby5vbkNvbXBsZXRlZCgpOyB9KSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbbm90aWZpY2F0aW9uRGlzcG9zYWJsZSwgc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKV0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmV0cnlXaGVuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIG9ic2VydmFibGVQcm90by5yZXRyeVdoZW4gPSBmdW5jdGlvbiAobm90aWZpZXIpIHtcbiAgICByZXR1cm4gbmV3IFJldHJ5V2hlbk9ic2VydmFibGUocmVwZWF0KHRoaXMpLCBub3RpZmllcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVwZWF0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdAQGl0ZXJhdG9yJzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBSZXBlYXRXaGVuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFJlcGVhdFdoZW5PYnNlcnZhYmxlKHNvdXJjZSwgbm90aWZpZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fbm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFJlcGVhdFdoZW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgUmVwZWF0V2hlbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbXBsZXRpb25zID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgbm90aWZpZXIgPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBoYW5kbGVkID0gdGhpcy5fbm90aWZpZXIoY29tcGxldGlvbnMpLFxuICAgICAgICBub3RpZmljYXRpb25EaXNwb3NhYmxlID0gaGFuZGxlZC5zdWJzY3JpYmUobm90aWZpZXIpO1xuXG4gICAgICB2YXIgZSA9IHRoaXMuc291cmNlWydAQGl0ZXJhdG9yJ10oKTtcblxuICAgICAgdmFyIHN0YXRlID0geyBpc0Rpc3Bvc2VkOiBmYWxzZSB9LFxuICAgICAgICBsYXN0RXJyb3IsXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUobnVsbCwgZnVuY3Rpb24gKF8sIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGUubmV4dCgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7XG4gICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgICAgdmFyIG91dGVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShuZXcgQmluYXJ5RGlzcG9zYWJsZShpbm5lciwgb3V0ZXIpKTtcbiAgICAgICAgb3V0ZXIuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGV4bikgeyBvLm9uRXJyb3IoZXhuKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUobm90aWZpZXIuc3Vic2NyaWJlKHJlY3Vyc2UsIGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihleCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBjb21wbGV0aW9ucy5vbk5leHQobnVsbCk7XG4gICAgICAgICAgICBvdXRlci5kaXNwb3NlKCk7XG4gICAgICAgICAgfSkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW25vdGlmaWNhdGlvbkRpc3Bvc2FibGUsIHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdFdoZW5PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgb2JzZXJ2YWJsZVByb3RvLnJlcGVhdFdoZW4gPSBmdW5jdGlvbiAobm90aWZpZXIpIHtcbiAgICByZXR1cm4gbmV3IFJlcGVhdFdoZW5PYnNlcnZhYmxlKHJlcGVhdCh0aGlzKSwgbm90aWZpZXIpO1xuICB9O1xuXG4gIHZhciBTY2FuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2FuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTY2FuT2JzZXJ2YWJsZShzb3VyY2UsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuaGFzU2VlZCA9IGhhc1NlZWQ7XG4gICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2Nhbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTY2FuT2JzZXJ2ZXIobyx0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2FuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTY2FuT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNjYW5PYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTY2FuT2JzZXJ2ZXIobywgcGFyZW50KSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9mbiA9IHBhcmVudC5hY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuX2hzID0gcGFyZW50Lmhhc1NlZWQ7XG4gICAgICB0aGlzLl9zID0gcGFyZW50LnNlZWQ7XG4gICAgICB0aGlzLl9oYSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYSA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTY2FuT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgIXRoaXMuX2h2ICYmICh0aGlzLl9odiA9IHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2hhKSB7XG4gICAgICAgIHRoaXMuX2EgPSB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fYSwgeCwgdGhpcy5faSwgdGhpcy5fcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hID0gdGhpcy5faHMgPyB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fcywgeCwgdGhpcy5faSwgdGhpcy5fcCkgOiB4O1xuICAgICAgICB0aGlzLl9oYSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fYSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcih0aGlzLl9hLmUpOyB9XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9hKTtcbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuXG4gICAgU2Nhbk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgIXRoaXMuX2h2ICYmIHRoaXMuX2hzICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2Nhbk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiAgQXBwbGllcyBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIHJldHVybnMgZWFjaCBpbnRlcm1lZGlhdGUgcmVzdWx0LiBUaGUgb3B0aW9uYWwgc2VlZCB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqICBGb3IgYWdncmVnYXRpb24gYmVoYXZpb3Igd2l0aCBubyBpbnRlcm1lZGlhdGUgcmVzdWx0cywgc2VlIE9ic2VydmFibGUuYWdncmVnYXRlLlxuICAqIEBwYXJhbSB7TWl4ZWR9IFtzZWVkXSBUaGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY2N1bXVsYXRvciBBbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggZWxlbWVudC5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZXMuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5zY2FuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNTZWVkID0gZmFsc2UsIHNlZWQsIGFjY3VtdWxhdG9yID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBoYXNTZWVkID0gdHJ1ZTtcbiAgICAgIHNlZWQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2Nhbk9ic2VydmFibGUodGhpcywgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpO1xuICB9O1xuXG4gIHZhciBTa2lwTGFzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwTGFzdE9ic2VydmFibGUoc291cmNlLCBjKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBMYXN0T2JzZXJ2ZXIobywgdGhpcy5fYykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTtcbiAgICB9O1xuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTa2lwTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwTGFzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIEJ5cGFzc2VzIGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzLiBBcyBtb3JlIGVsZW1lbnRzIGFyZVxuICAgKiAgcmVjZWl2ZWQsIGVsZW1lbnRzIGFyZSB0YWtlbiBmcm9tIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZSByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQuXG4gICAqIEBwYXJhbSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gYnlwYXNzIGF0IHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgc291cmNlIHNlcXVlbmNlIGVsZW1lbnRzIGV4Y2VwdCBmb3IgdGhlIGJ5cGFzc2VkIG9uZXMgYXQgdGhlIGVuZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwTGFzdCA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFNraXBMYXN0T2JzZXJ2YWJsZSh0aGlzLCBjb3VudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcmVwZW5kcyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgc2NoZWR1bGVyIGFuZCBhbiBhcmd1bWVudCBsaXN0IG9mIHZhbHVlcyB0byBwcmVwZW5kLlxuICAgKiAgQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc3RhcnRXaXRoKDEsIDIsIDMpO1xuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5zdGFydFdpdGgoUnguU2NoZWR1bGVyLnRpbWVvdXQsIDEsIDIsIDMpO1xuICAgKiBAcGFyYW0ge0FyZ3VtZW50c30gYXJncyBUaGUgc3BlY2lmaWVkIHZhbHVlcyB0byBwcmVwZW5kIHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHByZXBlbmRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnN0YXJ0V2l0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdmFsdWVzLCBzY2hlZHVsZXIsIHN0YXJ0ID0gMDtcbiAgICBpZiAoISFhcmd1bWVudHMubGVuZ3RoICYmIGlzU2NoZWR1bGVyKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNjaGVkdWxlciA9IGFyZ3VtZW50c1swXTtcbiAgICAgIHN0YXJ0ID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgIH1cbiAgICBmb3IodmFyIGFyZ3MgPSBbXSwgaSA9IHN0YXJ0LCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZUNvbmNhdC5hcHBseShudWxsLCBbb2JzZXJ2YWJsZUZyb21BcnJheShhcmdzLCBzY2hlZHVsZXIpLCB0aGlzXSk7XG4gIH07XG5cbiAgdmFyIFRha2VMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fcS5zaGlmdCgpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDApIHsgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTsgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGEgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBidWZmZXIgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgY291bnQgZWxlbWVudHMuIFVwb24gY29tcGxldGlvbiBvZlxuICAgKiAgdGhlIHNvdXJjZSBzZXF1ZW5jZSwgdGhpcyBidWZmZXIgaXMgZHJhaW5lZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyB0aGUgZWxlbWVudHMgdG8gYmUgZGVsYXllZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0ID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VMYXN0T2JzZXJ2ZXIobywgY291bnQpKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX3Euc2hpZnQoKTtcbiAgICB9O1xuXG4gICAgVGFrZUxhc3RCdWZmZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGNvbnRpZ3VvdXMgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIGJ1ZmZlciB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBjb3VudCBlbGVtZW50cy4gVXBvbiBjb21wbGV0aW9uIG9mIHRoZVxuICAgKiAgc291cmNlIHNlcXVlbmNlLCB0aGlzIGJ1ZmZlciBpcyBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgYXJyYXkgd2l0aCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdEJ1ZmZlciA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyKG8sIGNvdW50KSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIHdpbmRvd3Mgd2hpY2ggYXJlIHByb2R1Y2VkIGJhc2VkIG9uIGVsZW1lbnQgY291bnQgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBMZW5ndGggb2YgZWFjaCB3aW5kb3cuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbc2tpcF0gTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYmV0d2VlbiBjcmVhdGlvbiBvZiBjb25zZWN1dGl2ZSB3aW5kb3dzLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB0aGUgY291bnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93V2l0aENvdW50ID0gb2JzZXJ2YWJsZVByb3RvLndpbmRvd0NvdW50ID0gZnVuY3Rpb24gKGNvdW50LCBza2lwKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgK2NvdW50IHx8IChjb3VudCA9IDApO1xuICAgIE1hdGguYWJzKGNvdW50KSA9PT0gSW5maW5pdHkgJiYgKGNvdW50ID0gMCk7XG4gICAgaWYgKGNvdW50IDw9IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICBza2lwID09IG51bGwgJiYgKHNraXAgPSBjb3VudCk7XG4gICAgK3NraXAgfHwgKHNraXAgPSAwKTtcbiAgICBNYXRoLmFicyhza2lwKSA9PT0gSW5maW5pdHkgJiYgKHNraXAgPSAwKTtcblxuICAgIGlmIChza2lwIDw9IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKG0pLFxuICAgICAgICBuID0gMCxcbiAgICAgICAgcSA9IFtdO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVXaW5kb3cgKCkge1xuICAgICAgICB2YXIgcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHEucHVzaChzKTtcbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlV2luZG93KCk7XG5cbiAgICAgIG0uc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBxLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHFbaV0ub25OZXh0KHgpOyB9XG4gICAgICAgICAgdmFyIGMgPSBuIC0gY291bnQgKyAxO1xuICAgICAgICAgIGMgPj0gMCAmJiBjICUgc2tpcCA9PT0gMCAmJiBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICArK24gJSBza2lwID09PSAwICYmIGNyZWF0ZVdpbmRvdygpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHsgcS5zaGlmdCgpLm9uRXJyb3IoZSk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkgeyBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTsgfVxuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICkpO1xuICAgICAgcmV0dXJuIHJlZkNvdW50RGlzcG9zYWJsZTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGNvbmNhdE1hcChzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNlbGVjdG9yRnVuYyA9IGJpbmRDYWxsYmFjayhzZWxlY3RvciwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIHNvdXJjZS5tYXAoZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgIHZhciByZXN1bHQgPSBzZWxlY3RvckZ1bmMoeCwgaSwgc291cmNlKTtcbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAoaXNBcnJheUxpa2UocmVzdWx0KSB8fCBpc0l0ZXJhYmxlKHJlc3VsdCkpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbShyZXN1bHQpKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSkuY29uY2F0QWxsKCk7XG4gIH1cblxuICAvKipcbiAgICogIE9uZSBvZiB0aGUgRm9sbG93aW5nOlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgbWVyZ2VzIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBzb3VyY2UuY29uY2F0TWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLnJhbmdlKDAsIHgpOyB9KTtcbiAgICogIE9yOlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgaW52b2tlcyB0aGUgcmVzdWx0IHNlbGVjdG9yIGZvciB0aGUgc291cmNlIGVsZW1lbnQgYW5kIGVhY2ggb2YgdGhlIGNvcnJlc3BvbmRpbmcgaW5uZXIgc2VxdWVuY2UncyBlbGVtZW50cywgYW5kIG1lcmdlcyB0aGUgcmVzdWx0cyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5jb25jYXRNYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUucmFuZ2UoMCwgeCk7IH0sIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ICsgeTsgfSk7XG4gICAqICBPcjpcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gdGhlIG90aGVyIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIG1lcmdlcyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqICB2YXIgcmVzID0gc291cmNlLmNvbmNhdE1hcChSeC5PYnNlcnZhYmxlLmZyb21BcnJheShbMSwyLDNdKSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudCBvciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIHByb2plY3QgZWFjaCBlbGVtZW50IGZyb20gdGhlXG4gICAqIHNvdXJjZSBzZXF1ZW5jZSBvbnRvIHdoaWNoIGNvdWxkIGJlIGVpdGhlciBhbiBvYnNlcnZhYmxlIG9yIFByb21pc2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXN1bHRTZWxlY3Rvcl0gIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudCBvZiB0aGUgaW50ZXJtZWRpYXRlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgb25lLXRvLW1hbnkgdHJhbnNmb3JtIGZ1bmN0aW9uIGNvbGxlY3Rpb25TZWxlY3RvciBvbiBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlIGFuZCB0aGVuIG1hcHBpbmcgZWFjaCBvZiB0aG9zZSBzZXF1ZW5jZSBlbGVtZW50cyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBzb3VyY2UgZWxlbWVudCB0byBhIHJlc3VsdCBlbGVtZW50LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNlbGVjdENvbmNhdCA9IG9ic2VydmFibGVQcm90by5jb25jYXRNYXAgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpICYmIGlzRnVuY3Rpb24ocmVzdWx0U2VsZWN0b3IpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25jYXRNYXAoZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgICAgdmFyIHNlbGVjdG9yUmVzdWx0ID0gc2VsZWN0b3IoeCwgaSk7XG4gICAgICAgIGlzUHJvbWlzZShzZWxlY3RvclJlc3VsdCkgJiYgKHNlbGVjdG9yUmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNlbGVjdG9yUmVzdWx0KSk7XG4gICAgICAgIChpc0FycmF5TGlrZShzZWxlY3RvclJlc3VsdCkgfHwgaXNJdGVyYWJsZShzZWxlY3RvclJlc3VsdCkpICYmIChzZWxlY3RvclJlc3VsdCA9IG9ic2VydmFibGVGcm9tKHNlbGVjdG9yUmVzdWx0KSk7XG5cbiAgICAgICAgcmV0dXJuIHNlbGVjdG9yUmVzdWx0Lm1hcChmdW5jdGlvbiAoeSwgaTIpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0U2VsZWN0b3IoeCwgeSwgaSwgaTIpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgY29uY2F0TWFwKHRoaXMsIHNlbGVjdG9yLCB0aGlzQXJnKSA6XG4gICAgICBjb25jYXRNYXAodGhpcywgZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0b3I7IH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm9qZWN0cyBlYWNoIG5vdGlmaWNhdGlvbiBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIGNvbmNhdHMgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50OyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gYW4gZXJyb3Igb2NjdXJzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlIGlzIHJlYWNoZWQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgXCJ0aGlzXCIgdG8gdXNlIHRvIGludm9rZSBlYWNoIHRyYW5zZm9ybS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIG9uZS10by1tYW55IHRyYW5zZm9ybSBmdW5jdGlvbiBjb3JyZXNwb25kaW5nIHRvIGVhY2ggbm90aWZpY2F0aW9uIGluIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXRNYXBPYnNlcnZlciA9IG9ic2VydmFibGVQcm90by5zZWxlY3RDb25jYXRPYnNlcnZlciA9IGZ1bmN0aW9uKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcyxcbiAgICAgICAgb25OZXh0RnVuYyA9IGJpbmRDYWxsYmFjayhvbk5leHQsIHRoaXNBcmcsIDIpLFxuICAgICAgICBvbkVycm9yRnVuYyA9IGJpbmRDYWxsYmFjayhvbkVycm9yLCB0aGlzQXJnLCAxKSxcbiAgICAgICAgb25Db21wbGV0ZWRGdW5jID0gYmluZENhbGxiYWNrKG9uQ29tcGxldGVkLCB0aGlzQXJnLCAwKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25OZXh0RnVuYyh4LCBpbmRleCsrKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25FcnJvckZ1bmMoZXJyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkNvbXBsZXRlZEZ1bmMoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH0sIHRoaXMpLmNvbmNhdEFsbCgpO1xuICB9O1xuXG4gIHZhciBEZWZhdWx0SWZFbXB0eU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWZhdWx0SWZFbXB0eU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIobywgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX2YgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fZiA9IHRydWU7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgRGVmYXVsdElmRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBEZWZhdWx0SWZFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAhdGhpcy5fZiAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9kKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyB0aGUgZWxlbWVudHMgb2YgdGhlIHNwZWNpZmllZCBzZXF1ZW5jZSBvciB0aGUgc3BlY2lmaWVkIHZhbHVlIGluIGEgc2luZ2xldG9uIHNlcXVlbmNlIGlmIHRoZSBzZXF1ZW5jZSBpcyBlbXB0eS5cbiAgICpcbiAgICogIHZhciByZXMgPSBvYnMgPSB4cy5kZWZhdWx0SWZFbXB0eSgpO1xuICAgKiAgMiAtIG9icyA9IHhzLmRlZmF1bHRJZkVtcHR5KGZhbHNlKTtcbiAgICpcbiAgICogQG1lbWJlck9mIE9ic2VydmFibGUjXG4gICAqIEBwYXJhbSBkZWZhdWx0VmFsdWUgVGhlIHZhbHVlIHRvIHJldHVybiBpZiB0aGUgc2VxdWVuY2UgaXMgZW1wdHkuIElmIG5vdCBwcm92aWRlZCwgdGhpcyBkZWZhdWx0cyB0byBudWxsLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZGVmYXVsdCB2YWx1ZSBpZiB0aGUgc291cmNlIGlzIGVtcHR5OyBvdGhlcndpc2UsIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIGl0c2VsZi5cbiAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLmRlZmF1bHRJZkVtcHR5ID0gZnVuY3Rpb24gKGRlZmF1bHRWYWx1ZSkge1xuICAgICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgICBkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCAmJiAoZGVmYXVsdFZhbHVlID0gbnVsbCk7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIobywgZGVmYXVsdFZhbHVlKSk7XG4gICAgICB9LCBzb3VyY2UpO1xuICAgIH07XG5cbiAgLy8gU3dhcCBvdXQgZm9yIEFycmF5LmZpbmRJbmRleFxuICBmdW5jdGlvbiBhcnJheUluZGV4T2ZDb21wYXJlcihhcnJheSwgaXRlbSwgY29tcGFyZXIpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmIChjb21wYXJlcihhcnJheVtpXSwgaXRlbSkpIHsgcmV0dXJuIGk7IH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgZnVuY3Rpb24gSGFzaFNldChjb21wYXJlcikge1xuICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICB0aGlzLnNldCA9IFtdO1xuICB9XG4gIEhhc2hTZXQucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXRWYWx1ZSA9IGFycmF5SW5kZXhPZkNvbXBhcmVyKHRoaXMuc2V0LCB2YWx1ZSwgdGhpcy5jb21wYXJlcikgPT09IC0xO1xuICAgIHJldFZhbHVlICYmIHRoaXMuc2V0LnB1c2godmFsdWUpO1xuICAgIHJldHVybiByZXRWYWx1ZTtcbiAgfTtcblxuICB2YXIgRGlzdGluY3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RPYnNlcnZhYmxlKHNvdXJjZSwga2V5Rm4sIGNtcEZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2tleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLl9jbXBGbiA9IGNtcEZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERpc3RpbmN0T2JzZXJ2ZXIobywgdGhpcy5fa2V5Rm4sIHRoaXMuX2NtcEZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGlzdGluY3RPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdE9ic2VydmVyKG8sIGtleUZuLCBjbXBGbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5faCA9IG5ldyBIYXNoU2V0KGNtcEZuKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHg7XG4gICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLl9rZXlGbikpIHtcbiAgICAgICAga2V5ID0gdHJ5Q2F0Y2godGhpcy5fa2V5Rm4pKHgpO1xuICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgfVxuICAgICAgdGhpcy5faC5wdXNoKGtleSkgJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIERpc3RpbmN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIERpc3RpbmN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgb25seSBkaXN0aW5jdCBlbGVtZW50cyBhY2NvcmRpbmcgdG8gdGhlIGtleVNlbGVjdG9yIGFuZCB0aGUgY29tcGFyZXIuXG4gICAqICBVc2FnZSBvZiB0aGlzIG9wZXJhdG9yIHNob3VsZCBiZSBjb25zaWRlcmVkIGNhcmVmdWxseSBkdWUgdG8gdGhlIG1haW50ZW5hbmNlIG9mIGFuIGludGVybmFsIGxvb2t1cCBzdHJ1Y3R1cmUgd2hpY2ggY2FuIGdyb3cgbGFyZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gb2JzID0geHMuZGlzdGluY3QoKTtcbiAgICogIDIgLSBvYnMgPSB4cy5kaXN0aW5jdChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSk7XG4gICAqICAyIC0gb2JzID0geHMuZGlzdGluY3QoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0sIGZ1bmN0aW9uIChhLGIpIHsgcmV0dXJuIGEgPT09IGI7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBba2V5U2VsZWN0b3JdICBBIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbXBhcmlzb24ga2V5IGZvciBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gIFVzZWQgdG8gY29tcGFyZSBpdGVtcyBpbiB0aGUgY29sbGVjdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBjb250YWluaW5nIHRoZSBkaXN0aW5jdCBlbGVtZW50cywgYmFzZWQgb24gYSBjb21wdXRlZCBrZXkgdmFsdWUsIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kaXN0aW5jdCA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRGlzdGluY3RPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBjb21wYXJlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBHcm91cHMgdGhlIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYWNjb3JkaW5nIHRvIGEgc3BlY2lmaWVkIGtleSBzZWxlY3RvciBmdW5jdGlvbiBhbmQgY29tcGFyZXIgYW5kIHNlbGVjdHMgdGhlIHJlc3VsdGluZyBlbGVtZW50cyBieSB1c2luZyBhIHNwZWNpZmllZCBmdW5jdGlvbi5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pO1xuICAgKiAgMiAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0pO1xuICAgKiAgMyAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHRvIGV4dHJhY3QgdGhlIGtleSBmb3IgZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZWxlbWVudFNlbGVjdG9yXSAgQSBmdW5jdGlvbiB0byBtYXAgZWFjaCBzb3VyY2UgZWxlbWVudCB0byBhbiBlbGVtZW50IGluIGFuIG9ic2VydmFibGUgZ3JvdXAuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgZ3JvdXBzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSwgY29udGFpbmluZyBhbGwgZWxlbWVudHMgdGhhdCBzaGFyZSB0aGF0IHNhbWUga2V5IHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmdyb3VwQnkgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvcikge1xuICAgIHJldHVybiB0aGlzLmdyb3VwQnlVbnRpbChrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBvYnNlcnZhYmxlTmV2ZXIpO1xuICB9O1xuXG4gICAgLyoqXG4gICAgICogIEdyb3VwcyB0aGUgZWxlbWVudHMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gYSBzcGVjaWZpZWQga2V5IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgICAqICBBIGR1cmF0aW9uIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY29udHJvbCB0aGUgbGlmZXRpbWUgb2YgZ3JvdXBzLiBXaGVuIGEgZ3JvdXAgZXhwaXJlcywgaXQgcmVjZWl2ZXMgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLiBXaGVuIGEgbmV3IGVsZW1lbnQgd2l0aCB0aGUgc2FtZVxuICAgICAqICBrZXkgdmFsdWUgYXMgYSByZWNsYWltZWQgZ3JvdXAgb2NjdXJzLCB0aGUgZ3JvdXAgd2lsbCBiZSByZWJvcm4gd2l0aCBhIG5ldyBsaWZldGltZSByZXF1ZXN0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgdmFyIHJlcyA9IG9ic2VydmFibGUuZ3JvdXBCeVVudGlsKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9LCBudWxsLCAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5uZXZlcigpOyB9KTtcbiAgICAgKiAgMiAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0sICBmdW5jdGlvbiAoKSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLm5ldmVyKCk7IH0pO1xuICAgICAqICAzIC0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZTsgfSwgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUubmV2ZXIoKTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudG9TdHJpbmcoKTsgfSk7XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgQSBmdW5jdGlvbiB0byBleHRyYWN0IHRoZSBrZXkgZm9yIGVhY2ggZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2lnbmFsIHRoZSBleHBpcmF0aW9uIG9mIGEgZ3JvdXAuXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9XG4gICAgICogIEEgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBncm91cHMsIGVhY2ggb2Ygd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB1bmlxdWUga2V5IHZhbHVlLCBjb250YWluaW5nIGFsbCBlbGVtZW50cyB0aGF0IHNoYXJlIHRoYXQgc2FtZSBrZXkgdmFsdWUuXG4gICAgICogIElmIGEgZ3JvdXAncyBsaWZldGltZSBleHBpcmVzLCBhIG5ldyBncm91cCB3aXRoIHRoZSBzYW1lIGtleSB2YWx1ZSBjYW4gYmUgY3JlYXRlZCBvbmNlIGFuIGVsZW1lbnQgd2l0aCBzdWNoIGEga2V5IHZhbHVlIGlzIGVuY291dGVyZWQuXG4gICAgICpcbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uZ3JvdXBCeVVudGlsID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBtYXAgPSBuZXcgTWFwKCksXG4gICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSksXG4gICAgICAgICAgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKGl0ZW0pIHsgaXRlbS5vbkVycm9yKGUpOyB9OyB9O1xuXG4gICAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQoXG4gICAgICAgICAgc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHRyeUNhdGNoKGtleVNlbGVjdG9yKSh4KTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGtleS5lKSk7XG4gICAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3Ioa2V5LmUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZmlyZU5ld01hcEVudHJ5ID0gZmFsc2UsIHdyaXRlciA9IG1hcC5nZXQoa2V5KTtcbiAgICAgICAgICAgIGlmICh3cml0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB3cml0ZXIgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgICBtYXAuc2V0KGtleSwgd3JpdGVyKTtcbiAgICAgICAgICAgICAgZmlyZU5ld01hcEVudHJ5ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZpcmVOZXdNYXBFbnRyeSkge1xuICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCB3cml0ZXIsIHJlZkNvdW50RGlzcG9zYWJsZSksXG4gICAgICAgICAgICAgICAgZHVyYXRpb25Hcm91cCA9IG5ldyBHcm91cGVkT2JzZXJ2YWJsZShrZXksIHdyaXRlcik7XG4gICAgICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKGR1cmF0aW9uU2VsZWN0b3IpKGR1cmF0aW9uR3JvdXApO1xuICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZHVyYXRpb24uZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvLm9uTmV4dChncm91cCk7XG5cbiAgICAgICAgICAgICAgdmFyIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQobWQpO1xuXG4gICAgICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgaWYgKG1hcFsnZGVsZXRlJ10oa2V5KSkgeyB3cml0ZXIub25Db21wbGV0ZWQoKTsgfVxuICAgICAgICAgICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlLnJlbW92ZShtZCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IHg7XG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihlbGVtZW50U2VsZWN0b3IpKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQgPSB0cnlDYXRjaChlbGVtZW50U2VsZWN0b3IpKHgpO1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlbGVtZW50LmUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGVsZW1lbnQuZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd3JpdGVyLm9uTmV4dChlbGVtZW50KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbWFwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsgaXRlbS5vbkNvbXBsZXRlZCgpOyB9KTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHJlZkNvdW50RGlzcG9zYWJsZTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBNYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWFwT2JzZXJ2YWJsZShzb3VyY2UsIHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuc2VsZWN0b3IgPSBiaW5kQ2FsbGJhY2soc2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5uZXJNYXAoc2VsZWN0b3IsIHNlbGYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaSwgbykgeyByZXR1cm4gc2VsZWN0b3IuY2FsbCh0aGlzLCBzZWxmLnNlbGVjdG9yKHgsIGksIG8pLCBpLCBvKTsgfTtcbiAgICB9XG5cbiAgICBNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnRlcm5hbE1hcCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIG5ldyBNYXBPYnNlcnZhYmxlKHRoaXMuc291cmNlLCBpbm5lck1hcChzZWxlY3RvciwgdGhpcyksIHRoaXNBcmcpO1xuICAgIH07XG5cbiAgICBNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5zZWxlY3RvciwgdGhpcykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8sIHNlbGVjdG9yLCBzb3VyY2UpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuaSA9IDA7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLnNlbGVjdG9yKSh4LCB0aGlzLmkrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgdGhpcy5vLm9uTmV4dChyZXN1bHQpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBNYXBPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgbmV3IGZvcm0gYnkgaW5jb3Jwb3JhdGluZyB0aGUgZWxlbWVudCdzIGluZGV4LlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggc291cmNlIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2Ygc291cmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWFwID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHZhciBzZWxlY3RvckZuID0gdHlwZW9mIHNlbGVjdG9yID09PSAnZnVuY3Rpb24nID8gc2VsZWN0b3IgOiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxlY3RvcjsgfTtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIE1hcE9ic2VydmFibGUgP1xuICAgICAgdGhpcy5pbnRlcm5hbE1hcChzZWxlY3RvckZuLCB0aGlzQXJnKSA6XG4gICAgICBuZXcgTWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvckZuLCB0aGlzQXJnKTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbHVja2VyKGFyZ3MsIGxlbikge1xuICAgIHJldHVybiBmdW5jdGlvbiBtYXBwZXIoeCkge1xuICAgICAgdmFyIGN1cnJlbnRQcm9wID0geDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHAgPSBjdXJyZW50UHJvcFthcmdzW2ldXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGN1cnJlbnRQcm9wID0gcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudFByb3A7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgdGhlIHZhbHVlIG9mIGEgc3BlY2lmaWVkIG5lc3RlZCBwcm9wZXJ0eSBmcm9tIGFsbCBlbGVtZW50cyBpblxuICAgKiB0aGUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3VtZW50cyBUaGUgbmVzdGVkIHByb3BlcnRpZXMgdG8gcGx1Y2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBSZXR1cm5zIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2Ugb2YgcHJvcGVydHkgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBsdWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgaWYgKGxlbiA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ0xpc3Qgb2YgcHJvcGVydGllcyBjYW5ub3QgYmUgZW1wdHkuJyk7IH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiB0aGlzLm1hcChwbHVja2VyKGFyZ3MsIGxlbikpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcCA9IG9ic2VydmFibGVQcm90by5zZWxlY3RNYW55ID0gb2JzZXJ2YWJsZVByb3RvLm1lcmdlTWFwID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLm1lcmdlQWxsKCk7XG59O1xuXG4gIC8qKlxuICAgKiBQcm9qZWN0cyBlYWNoIG5vdGlmaWNhdGlvbiBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIG1lcmdlcyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiBhbiBlcnJvciBvY2N1cnMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaXMgcmVhY2hlZC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBcInRoaXNcIiB0byB1c2UgdG8gaW52b2tlIGVhY2ggdHJhbnNmb3JtLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgb25lLXRvLW1hbnkgdHJhbnNmb3JtIGZ1bmN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gZWFjaCBub3RpZmljYXRpb24gaW4gdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBPYnNlcnZlciA9IG9ic2VydmFibGVQcm90by5zZWxlY3RNYW55T2JzZXJ2ZXIgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IDA7XG5cbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uTmV4dC5jYWxsKHRoaXNBcmcsIHgsIGluZGV4KyspO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkVycm9yLmNhbGwodGhpc0FyZywgZXJyKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkNvbXBsZXRlZC5jYWxsKHRoaXNBcmcpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfSwgc291cmNlKS5tZXJnZUFsbCgpO1xuICB9O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcExhdGVzdCA9IG9ic2VydmFibGVQcm90by5zd2l0Y2hNYXAgPSBmdW5jdGlvbihzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykuc3dpdGNoTGF0ZXN0KCk7XG59O1xuXG4gIHZhciBTa2lwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwT2JzZXJ2YWJsZShzb3VyY2UsIGNvdW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NvdW50ID0gY291bnQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwT2JzZXJ2ZXIobywgdGhpcy5fY291bnQpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU2tpcE9ic2VydmVyKG8sIGMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fciA9IGM7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoU2tpcE9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIFNraXBPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fciA8PSAwKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fci0tO1xuICAgICAgfVxuICAgIH07XG4gICAgU2tpcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNraXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTa2lwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBCeXBhc3NlcyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgdGhlbiByZXR1cm5zIHRoZSByZW1haW5pbmcgZWxlbWVudHMuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYmVmb3JlIHJldHVybmluZyB0aGUgcmVtYWluaW5nIGVsZW1lbnRzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyB0aGF0IG9jY3VyIGFmdGVyIHRoZSBzcGVjaWZpZWQgaW5kZXggaW4gdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXAgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBTa2lwT2JzZXJ2YWJsZSh0aGlzLCBjb3VudCk7XG4gIH07XG5cbiAgdmFyIFNraXBXaGlsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBXaGlsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFdoaWxlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwV2hpbGVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBXaGlsZU9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBXaGlsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFdoaWxlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBXaGlsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFdoaWxlT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fciA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKCF0aGlzLl9yKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9wLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9wKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgdGhpcy5fciA9ICFyZXM7XG4gICAgICB9XG4gICAgICB0aGlzLl9yICYmIHRoaXMuX28ub25OZXh0KHgpO1xuICAgIH07XG4gICAgU2tpcFdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTa2lwV2hpbGVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBCeXBhc3NlcyBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGlzIHRydWUgYW5kIHRoZW4gcmV0dXJucyB0aGUgcmVtYWluaW5nIGVsZW1lbnRzLlxuICAgKiAgVGhlIGVsZW1lbnQncyBpbmRleCBpcyB1c2VkIGluIHRoZSBsb2dpYyBvZiB0aGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5za2lwV2hpbGUoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA8IDEwOyB9KTtcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc2tpcFdoaWxlKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHsgcmV0dXJuIHZhbHVlIDwgMTAgfHwgaW5kZXggPCAxMDsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbjsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIGZyb20gdGhlIGlucHV0IHNlcXVlbmNlIHN0YXJ0aW5nIGF0IHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBsaW5lYXIgc2VyaWVzIHRoYXQgZG9lcyBub3QgcGFzcyB0aGUgdGVzdCBzcGVjaWZpZWQgYnkgcHJlZGljYXRlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBXaGlsZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IFNraXBXaGlsZU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBUYWtlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlT2JzZXJ2YWJsZShzb3VyY2UsIGNvdW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NvdW50ID0gY291bnQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlT2JzZXJ2ZXIobywgdGhpcy5fY291bnQpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gVGFrZU9ic2VydmVyKG8sIGMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICB0aGlzLl9yID0gYztcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhUYWtlT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuXG4gICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9yLS0gPiAwKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICB0aGlzLl9yIDw9IDAgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gVGFrZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGNvbnRpZ3VvdXMgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgZm9yIHRoZSBlZGdlIGNhc2Ugb2YgdGFrZSgwKS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHVzZWQgdG8gcHJvZHVjZSBhbiBPbkNvbXBsZXRlZCBtZXNzYWdlIGluIGNhc2UgPHBhcmFtcmVmIG5hbWU9XCJjb3VudCBjb3VudDwvcGFyYW1yZWY+IGlzIHNldCB0byAwLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlID0gZnVuY3Rpb24gKGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgaWYgKGNvdW50ID09PSAwKSB7IHJldHVybiBvYnNlcnZhYmxlRW1wdHkoc2NoZWR1bGVyKTsgfVxuICAgIHJldHVybiBuZXcgVGFrZU9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIHZhciBUYWtlV2hpbGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlV2hpbGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVdoaWxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlV2hpbGVPYnNlcnZlcihvLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlV2hpbGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRha2VXaGlsZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlV2hpbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFRha2VXaGlsZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX3IgPSB0cnVlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX3IpIHtcbiAgICAgICAgdGhpcy5fciA9IHRyeUNhdGNoKHRoaXMuX3AuX2ZuKSh4LCB0aGlzLl9pKyssIHRoaXMuX3ApO1xuICAgICAgICBpZiAodGhpcy5fciA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcih0aGlzLl9yLmUpOyB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fcikge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUYWtlV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gVGFrZVdoaWxlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBlbGVtZW50cyBmcm9tIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgbG9uZyBhcyBhIHNwZWNpZmllZCBjb25kaXRpb24gaXMgdHJ1ZS5cbiAgICogIFRoZSBlbGVtZW50J3MgaW5kZXggaXMgdXNlZCBpbiB0aGUgbG9naWMgb2YgdGhlIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uOyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgZnJvbSB0aGUgaW5wdXQgc2VxdWVuY2UgdGhhdCBvY2N1ciBiZWZvcmUgdGhlIGVsZW1lbnQgYXQgd2hpY2ggdGhlIHRlc3Qgbm8gbG9uZ2VyIHBhc3Nlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlV2hpbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBUYWtlV2hpbGVPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgRmlsdGVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmlsdGVyT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEZpbHRlck9ic2VydmFibGUoc291cmNlLCBwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpbHRlck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzLnByZWRpY2F0ZSwgdGhpcykpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpbm5lclByZWRpY2F0ZShwcmVkaWNhdGUsIHNlbGYpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih4LCBpLCBvKSB7IHJldHVybiBzZWxmLnByZWRpY2F0ZSh4LCBpLCBvKSAmJiBwcmVkaWNhdGUuY2FsbCh0aGlzLCB4LCBpLCBvKTsgfVxuICAgIH1cblxuICAgIEZpbHRlck9ic2VydmFibGUucHJvdG90eXBlLmludGVybmFsRmlsdGVyID0gZnVuY3Rpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gbmV3IEZpbHRlck9ic2VydmFibGUodGhpcy5zb3VyY2UsIGlubmVyUHJlZGljYXRlKHByZWRpY2F0ZSwgdGhpcyksIHRoaXNBcmcpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8sIHByZWRpY2F0ZSwgc291cmNlKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuaSA9IDA7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciBzaG91bGRZaWVsZCA9IHRyeUNhdGNoKHRoaXMucHJlZGljYXRlKSh4LCB0aGlzLmkrKywgdGhpcy5zb3VyY2UpO1xuICAgICAgaWYgKHNob3VsZFlpZWxkID09PSBlcnJvck9iaikge1xuICAgICAgICByZXR1cm4gdGhpcy5vLm9uRXJyb3Ioc2hvdWxkWWllbGQuZSk7XG4gICAgICB9XG4gICAgICBzaG91bGRZaWVsZCAmJiB0aGlzLm8ub25OZXh0KHgpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBGaWx0ZXJPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiAgRmlsdGVycyB0aGUgZWxlbWVudHMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBiYXNlZCBvbiBhIHByZWRpY2F0ZSBieSBpbmNvcnBvcmF0aW5nIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIHNvdXJjZSBlbGVtZW50IGZvciBhIGNvbmRpdGlvbjsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIGVsZW1lbnRzIGZyb20gdGhlIGlucHV0IHNlcXVlbmNlIHRoYXQgc2F0aXNmeSB0aGUgY29uZGl0aW9uLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZmlsdGVyID0gb2JzZXJ2YWJsZVByb3RvLndoZXJlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgRmlsdGVyT2JzZXJ2YWJsZSA/IHRoaXMuaW50ZXJuYWxGaWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSA6XG4gICAgICBuZXcgRmlsdGVyT2JzZXJ2YWJsZSh0aGlzLCBwcmVkaWNhdGUsIHRoaXNBcmcpO1xuICB9O1xuXG4gIHZhciBFeHRyZW1hQnlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHRyZW1hQnlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV4dHJlbWFCeU9ic2VydmFibGUoc291cmNlLCBrLCBjKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHRyZW1hQnlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEV4dHJlbWFCeU9ic2VydmVyKG8sIHRoaXMuX2ssIHRoaXMuX2MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4dHJlbWFCeU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRXh0cmVtYUJ5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV4dHJlbWFCeU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV4dHJlbWFCeU9ic2VydmVyKG8sIGssIGMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fayA9IGs7XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3YgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2wgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV4dHJlbWFCeU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBrZXkgPSB0cnlDYXRjaCh0aGlzLl9rKSh4KTtcbiAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioa2V5LmUpOyB9XG4gICAgICB2YXIgY29tcGFyaXNvbiA9IDA7XG4gICAgICBpZiAoIXRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdiA9IGtleTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbXBhcmlzb24gPSB0cnlDYXRjaCh0aGlzLl9jKShrZXksIHRoaXMuX3YpO1xuICAgICAgICBpZiAoY29tcGFyaXNvbiA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihjb21wYXJpc29uLmUpOyB9XG4gICAgICB9XG4gICAgICBpZiAoY29tcGFyaXNvbiA+IDApIHtcbiAgICAgICAgdGhpcy5fdiA9IGtleTtcbiAgICAgICAgdGhpcy5fbCA9IFtdO1xuICAgICAgfVxuICAgICAgaWYgKGNvbXBhcmlzb24gPj0gMCkgeyB0aGlzLl9sLnB1c2goeCk7IH1cbiAgICB9O1xuXG4gICAgRXh0cmVtYUJ5T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRXh0cmVtYUJ5T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2wpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXh0cmVtYUJ5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGZpcnN0T25seSh4KSB7XG4gICAgaWYgKHgubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFbXB0eUVycm9yKCk7IH1cbiAgICByZXR1cm4geFswXTtcbiAgfVxuXG4gIHZhciBSZWR1Y2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlZHVjZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVkdWNlT2JzZXJ2YWJsZShzb3VyY2UsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuaGFzU2VlZCA9IGhhc1NlZWQ7XG4gICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVkdWNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBSZWR1Y2VPYnNlcnZlcihvYnNlcnZlcix0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZWR1Y2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFJlZHVjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZWR1Y2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZWR1Y2VPYnNlcnZlcihvLCBwYXJlbnQpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHBhcmVudDtcbiAgICAgIHRoaXMuX2ZuID0gcGFyZW50LmFjY3VtdWxhdG9yO1xuICAgICAgdGhpcy5faHMgPSBwYXJlbnQuaGFzU2VlZDtcbiAgICAgIHRoaXMuX3MgPSBwYXJlbnQuc2VlZDtcbiAgICAgIHRoaXMuX2hhID0gZmFsc2U7XG4gICAgICB0aGlzLl9hID0gbnVsbDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZHVjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICF0aGlzLl9odiAmJiAodGhpcy5faHYgPSB0cnVlKTtcbiAgICAgIGlmICh0aGlzLl9oYSkge1xuICAgICAgICB0aGlzLl9hID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX2EsIHgsIHRoaXMuX2ksIHRoaXMuX3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYSA9IHRoaXMuX2hzID8gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX3MsIHgsIHRoaXMuX2ksIHRoaXMuX3ApIDogeDtcbiAgICAgICAgdGhpcy5faGEgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2EgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fYS5lKTsgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG5cbiAgICBSZWR1Y2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBSZWR1Y2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5faHYgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fYSk7XG4gICAgICAhdGhpcy5faHYgJiYgdGhpcy5faHMgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fcyk7XG4gICAgICAhdGhpcy5faHYgJiYgIXRoaXMuX2hzICYmIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZHVjZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBBcHBsaWVzIGFuIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIG92ZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgcmV0dXJuaW5nIHRoZSByZXN1bHQgb2YgdGhlIGFnZ3JlZ2F0aW9uIGFzIGEgc2luZ2xlIGVsZW1lbnQgaW4gdGhlIHJlc3VsdCBzZXF1ZW5jZS4gVGhlIHNwZWNpZmllZCBzZWVkIHZhbHVlIGlzIHVzZWQgYXMgdGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogRm9yIGFnZ3JlZ2F0aW9uIGJlaGF2aW9yIHdpdGggaW5jcmVtZW50YWwgaW50ZXJtZWRpYXRlIHJlc3VsdHMsIHNlZSBPYnNlcnZhYmxlLnNjYW4uXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gYWNjdW11bGF0b3IgQW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBvbiBlYWNoIGVsZW1lbnQuXG4gICogQHBhcmFtIHtBbnl9IFtzZWVkXSBUaGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgZmluYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5yZWR1Y2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc1NlZWQgPSBmYWxzZSwgc2VlZCwgYWNjdW11bGF0b3IgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcbiAgICAgIGhhc1NlZWQgPSB0cnVlO1xuICAgICAgc2VlZCA9IGFyZ3VtZW50c1sxXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWR1Y2VPYnNlcnZhYmxlKHRoaXMsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKTtcbiAgfTtcblxuICB2YXIgU29tZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNvbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNvbWVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNvbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNvbWVPYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNvbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNvbWVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU29tZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU29tZU9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU29tZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBpZiAoQm9vbGVhbihyZXN1bHQpKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRydWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBTb21lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNvbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQoZmFsc2UpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU29tZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFueSBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugc2F0aXNmaWVzIGEgY29uZGl0aW9uIGlmIHByZXNlbnQsIGVsc2UgaWYgYW55IGl0ZW1zIGFyZSBpbiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGVdIEEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciBhbnkgZWxlbWVudHMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZSBwYXNzIHRoZSB0ZXN0IGluIHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlIGlmIGdpdmVuLCBlbHNlIGlmIGFueSBpdGVtcyBhcmUgaW4gdGhlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNvbWUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBTb21lT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIElzRW1wdHlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJc0VtcHR5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJc0VtcHR5T2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSXNFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSXNFbXB0eU9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElzRW1wdHlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIElzRW1wdHlPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJc0VtcHR5T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSXNFbXB0eU9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSXNFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQoZmFsc2UpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG4gICAgSXNFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBJc0VtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRydWUpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSXNFbXB0eU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaXMgZW1wdHkuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaXMgZW1wdHkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IElzRW1wdHlPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBFdmVyeU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZXJ5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFdmVyeU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXZlcnlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEV2ZXJ5T2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVyeU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRXZlcnlPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlcnlPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEV2ZXJ5T2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFdmVyeU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBpZiAoIUJvb2xlYW4ocmVzdWx0KSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dChmYWxzZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIEV2ZXJ5T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEV2ZXJ5T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRydWUpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXZlcnlPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbGwgZWxlbWVudHMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBzYXRpc2Z5IGEgY29uZGl0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlXSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbi5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCBkZXRlcm1pbmluZyB3aGV0aGVyIGFsbCBlbGVtZW50cyBpbiB0aGUgc291cmNlIHNlcXVlbmNlIHBhc3MgdGhlIHRlc3QgaW4gdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZXZlcnkgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBFdmVyeU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBJbmNsdWRlc09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEluY2x1ZGVzT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbmNsdWRlc09ic2VydmFibGUoc291cmNlLCBlbGVtLCBpZHgpIHtcbiAgICAgIHZhciBuID0gK2lkeCB8fCAwO1xuICAgICAgTWF0aC5hYnMobikgPT09IEluZmluaXR5ICYmIChuID0gMCk7XG5cbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZWxlbSA9IGVsZW07XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEluY2x1ZGVzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodGhpcy5fbiA8IDApIHtcbiAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEluY2x1ZGVzT2JzZXJ2ZXIobywgdGhpcy5fZWxlbSwgdGhpcy5fbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW5jbHVkZXNPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEluY2x1ZGVzT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEluY2x1ZGVzT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5jbHVkZXNPYnNlcnZlcihvLCBlbGVtLCBuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2VsZW0gPSBlbGVtO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBhcmVyKGEsIGIpIHtcbiAgICAgIHJldHVybiAoYSA9PT0gMCAmJiBiID09PSAwKSB8fCAoYSA9PT0gYiB8fCAoaXNOYU4oYSkgJiYgaXNOYU4oYikpKTtcbiAgICB9XG5cbiAgICBJbmNsdWRlc09ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pKysgPj0gdGhpcy5fbiAmJiBjb21wYXJlcih4LCB0aGlzLl9lbGVtKSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgSW5jbHVkZXNPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5jbHVkZXNPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uTmV4dChmYWxzZSk7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBJbmNsdWRlc09ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW5jbHVkZXMgYSBzcGVjaWZpZWQgZWxlbWVudCB3aXRoIGFuIG9wdGlvbmFsIGVxdWFsaXR5IGNvbXBhcmVyLlxuICAgKiBAcGFyYW0gc2VhcmNoRWxlbWVudCBUaGUgdmFsdWUgdG8gbG9jYXRlIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbZnJvbUluZGV4XSBBbiBlcXVhbGl0eSBjb21wYXJlciB0byBjb21wYXJlIGVsZW1lbnRzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgc291cmNlIHNlcXVlbmNlIGluY2x1ZGVzIGFuIGVsZW1lbnQgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBpbmRleC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5pbmNsdWRlcyA9IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICByZXR1cm4gbmV3IEluY2x1ZGVzT2JzZXJ2YWJsZSh0aGlzLCBzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpO1xuICB9O1xuXG4gIHZhciBDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvdW50T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb3VudE9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IENvdW50T2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb3VudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ291bnRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ291bnRPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIENvdW50T2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9jID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvdW50T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2ZuKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgQm9vbGVhbihyZXN1bHQpICYmICh0aGlzLl9jKyspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYysrO1xuICAgICAgfVxuICAgIH07XG4gICAgQ291bnRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgQ291bnRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fYyk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb3VudE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSB2YWx1ZSB0aGF0IHJlcHJlc2VudHMgaG93IG1hbnkgZWxlbWVudHMgaW4gdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHNhdGlzZnkgYSBjb25kaXRpb24gaWYgcHJvdmlkZWQsIGVsc2UgdGhlIGNvdW50IG9mIGl0ZW1zLlxuICAgKiBAZXhhbXBsZVxuICAgKiByZXMgPSBzb3VyY2UuY291bnQoKTtcbiAgICogcmVzID0gc291cmNlLmNvdW50KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ID4gMzsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkaWNhdGVdQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb24uXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCBhIG51bWJlciB0aGF0IHJlcHJlc2VudHMgaG93IG1hbnkgZWxlbWVudHMgaW4gdGhlIGlucHV0IHNlcXVlbmNlIHNhdGlzZnkgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlIGZ1bmN0aW9uIGlmIHByb3ZpZGVkLCBlbHNlIHRoZSBjb3VudCBvZiBpdGVtcyBpbiB0aGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY291bnQgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBDb3VudE9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBJbmRleE9mT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW5kZXhPZk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5kZXhPZk9ic2VydmFibGUoc291cmNlLCBlLCBuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbmRleE9mT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodGhpcy5fbiA8IDApIHtcbiAgICAgICAgby5vbk5leHQoLTEpO1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEluZGV4T2ZPYnNlcnZlcihvLCB0aGlzLl9lLCB0aGlzLl9uKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJbmRleE9mT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBJbmRleE9mT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEluZGV4T2ZPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBJbmRleE9mT2JzZXJ2ZXIobywgZSwgbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2kgPj0gdGhpcy5fbiAmJiB4ID09PSB0aGlzLl9lKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2kpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcbiAgICBJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uTmV4dCgtMSk7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBJbmRleE9mT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBpbmRleCBhdCB3aGljaCBhIGdpdmVuIGVsZW1lbnQgY2FuIGJlIGZvdW5kIGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLCBvciAtMSBpZiBpdCBpcyBub3QgcHJlc2VudC5cbiAgICogQHBhcmFtIHtBbnl9IHNlYXJjaEVsZW1lbnQgRWxlbWVudCB0byBsb2NhdGUgaW4gdGhlIGFycmF5LlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2Zyb21JbmRleF0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2guICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byAwLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW5kIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZmlyc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaW5kZXhPZiA9IGZ1bmN0aW9uKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuICAgIHZhciBuID0gK2Zyb21JbmRleCB8fCAwO1xuICAgIE1hdGguYWJzKG4pID09PSBJbmZpbml0eSAmJiAobiA9IDApO1xuICAgIHJldHVybiBuZXcgSW5kZXhPZk9ic2VydmFibGUodGhpcywgc2VhcmNoRWxlbWVudCwgbik7XG4gIH07XG5cbiAgdmFyIFN1bU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1bU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3VtT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTdW1PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN1bU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3VtT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTdW1PYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3VtT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTdW1PYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX2MgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3VtT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2ZuKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgdGhpcy5fYyArPSByZXN1bHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jICs9IHg7XG4gICAgICB9XG4gICAgfTtcbiAgICBTdW1PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU3VtT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3VtT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb21wdXRlcyB0aGUgc3VtIG9mIGEgc2VxdWVuY2Ugb2YgdmFsdWVzIHRoYXQgYXJlIG9idGFpbmVkIGJ5IGludm9raW5nIGFuIG9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlLCBlbHNlIGlmIG5vdCBzcGVjaWZpZWQgY29tcHV0ZXMgdGhlIHN1bSBvbiBlYWNoIGl0ZW0gaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBzdW0gb2YgdGhlIHZhbHVlcyBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnN1bSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhrZXlTZWxlY3RvciwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBTdW1PYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBtaW5pbXVtIGtleSB2YWx1ZSBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb21wYXJlci5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5taW5CeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC52YWx1ZTsgfSk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0sIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4IC0geTsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleVNlbGVjdG9yIEtleSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUga2V5IHZhbHVlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIGxpc3Qgb2YgemVybyBvciBtb3JlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1pbmltdW0ga2V5IHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1pbkJ5ID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBjb21wYXJlcikge1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRTdWJDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBFeHRyZW1hQnlPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gY29tcGFyZXIoeCwgeSkgKiAtMTsgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1pbmltdW0gZWxlbWVudCBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFjY29yZGluZyB0byB0aGUgb3B0aW9uYWwgY29tcGFyZXIgZWxzZSBhIGRlZmF1bHQgZ3JlYXRlciB0aGFuIGxlc3MgdGhhbiBjaGVjay5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5taW4oKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5taW4oZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgLSB5LnZhbHVlOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBtaW5pbXVtIGVsZW1lbnQgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5taW4gPSBmdW5jdGlvbiAoY29tcGFyZXIpIHtcbiAgICByZXR1cm4gdGhpcy5taW5CeShpZGVudGl0eSwgY29tcGFyZXIpLm1hcChmaXJzdE9ubHkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIG1heGltdW0gIGtleSB2YWx1ZSBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb21wYXJlci5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXhCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC52YWx1ZTsgfSk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UubWF4QnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0sIGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4IC0geTs7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBLZXkgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBrZXkgdmFsdWVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgbGlzdCBvZiB6ZXJvIG9yIG1vcmUgZWxlbWVudHMgdGhhdCBoYXZlIGEgbWF4aW11bSBrZXkgdmFsdWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWF4QnkgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGNvbXBhcmVyKSB7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdFN1YkNvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IEV4dHJlbWFCeU9ic2VydmFibGUodGhpcywga2V5U2VsZWN0b3IsIGNvbXBhcmVyKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbWF4aW11bSB2YWx1ZSBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGNvbXBhcmVyLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLm1heCgpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1heChmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geC52YWx1ZSAtIHkudmFsdWU7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIG1heGltdW0gZWxlbWVudCBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1heCA9IGZ1bmN0aW9uIChjb21wYXJlcikge1xuICAgIHJldHVybiB0aGlzLm1heEJ5KGlkZW50aXR5LCBjb21wYXJlcikubWFwKGZpcnN0T25seSk7XG4gIH07XG5cbiAgdmFyIEF2ZXJhZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBdmVyYWdlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBBdmVyYWdlT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBdmVyYWdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBBdmVyYWdlT2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBBdmVyYWdlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBBdmVyYWdlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXZlcmFnZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEF2ZXJhZ2VPYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9jID0gMDtcbiAgICAgIHRoaXMuX3QgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQXZlcmFnZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmKHRoaXMuX2ZuKSB7XG4gICAgICAgIHZhciByID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2MrKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHIuZSk7IH1cbiAgICAgICAgdGhpcy5fdCArPSByO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYysrO1xuICAgICAgICB0aGlzLl90ICs9IHg7XG4gICAgICB9XG4gICAgfTtcbiAgICBBdmVyYWdlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEF2ZXJhZ2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2MgPT09IDApIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTsgfVxuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fdCAvIHRoaXMuX2MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXZlcmFnZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGF2ZXJhZ2Ugb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdGhhdCBhcmUgaW4gdGhlIHNlcXVlbmNlIG9yIG9idGFpbmVkIGJ5IGludm9raW5nIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIG9uIGVhY2ggZWxlbWVudCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UgaWYgcHJlc2VudC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgYXZlcmFnZSBvZiB0aGUgc2VxdWVuY2Ugb2YgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmF2ZXJhZ2UgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcywgZm47XG4gICAgaWYgKGlzRnVuY3Rpb24oa2V5U2VsZWN0b3IpKSB7XG4gICAgICBmbiA9IGJpbmRDYWxsYmFjayhrZXlTZWxlY3RvciwgdGhpc0FyZywgMyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQXZlcmFnZU9ic2VydmFibGUoc291cmNlLCBmbik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBEZXRlcm1pbmVzIHdoZXRoZXIgdHdvIHNlcXVlbmNlcyBhcmUgZXF1YWwgYnkgY29tcGFyaW5nIHRoZSBlbGVtZW50cyBwYWlyd2lzZSB1c2luZyBhIHNwZWNpZmllZCBlcXVhbGl0eSBjb21wYXJlci5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHJlcyA9IHNvdXJjZS5zZXF1ZW5jZUVxdWFsKFsxLDIsM10pO1xuICAgKiB2YXIgcmVzID0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoW3sgdmFsdWU6IDQyIH1dLCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geC52YWx1ZSA9PT0geS52YWx1ZTsgfSk7XG4gICAqIDMgLSByZXMgPSBzb3VyY2Uuc2VxdWVuY2VFcXVhbChSeC5PYnNlcnZhYmxlLnJldHVyblZhbHVlKDQyKSk7XG4gICAqIDQgLSByZXMgPSBzb3VyY2Uuc2VxdWVuY2VFcXVhbChSeC5PYnNlcnZhYmxlLnJldHVyblZhbHVlKHsgdmFsdWU6IDQyIH0pLCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geC52YWx1ZSA9PT0geS52YWx1ZTsgfSk7XG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2Vjb25kIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIGFycmF5IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGVsZW1lbnRzIG9mIGJvdGggc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIGEgc2luZ2xlIGVsZW1lbnQgd2hpY2ggaW5kaWNhdGVzIHdoZXRoZXIgYm90aCBzZXF1ZW5jZXMgYXJlIG9mIGVxdWFsIGxlbmd0aCBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBlbGVtZW50cyBhcmUgZXF1YWwgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZXF1YWxpdHkgY29tcGFyZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2VxdWVuY2VFcXVhbCA9IGZ1bmN0aW9uIChzZWNvbmQsIGNvbXBhcmVyKSB7XG4gICAgdmFyIGZpcnN0ID0gdGhpcztcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGRvbmVsID0gZmFsc2UsIGRvbmVyID0gZmFsc2UsIHFsID0gW10sIHFyID0gW107XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uMSA9IGZpcnN0LnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAocXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciB2ID0gcXIuc2hpZnQoKTtcbiAgICAgICAgICB2YXIgZXF1YWwgPSB0cnlDYXRjaChjb21wYXJlcikodiwgeCk7XG4gICAgICAgICAgaWYgKGVxdWFsID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGVxdWFsLmUpOyB9XG4gICAgICAgICAgaWYgKCFlcXVhbCkge1xuICAgICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkb25lcikge1xuICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcWwucHVzaCh4KTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24oZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZG9uZWwgPSB0cnVlO1xuICAgICAgICBpZiAocWwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgaWYgKHFyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGRvbmVyKSB7XG4gICAgICAgICAgICBvLm9uTmV4dCh0cnVlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAoaXNBcnJheUxpa2Uoc2Vjb25kKSB8fCBpc0l0ZXJhYmxlKHNlY29uZCkpICYmIChzZWNvbmQgPSBvYnNlcnZhYmxlRnJvbShzZWNvbmQpKTtcbiAgICAgIGlzUHJvbWlzZShzZWNvbmQpICYmIChzZWNvbmQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc2Vjb25kKSk7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uMiA9IHNlY29uZC5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHFsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgdiA9IHFsLnNoaWZ0KCk7XG4gICAgICAgICAgdmFyIGVxdWFsID0gdHJ5Q2F0Y2goY29tcGFyZXIpKHYsIHgpO1xuICAgICAgICAgIGlmIChlcXVhbCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihlcXVhbC5lKTsgfVxuICAgICAgICAgIGlmICghZXF1YWwpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZG9uZWwpIHtcbiAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHFyLnB1c2goeCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uKGUpIHsgby5vbkVycm9yKGUpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmVyID0gdHJ1ZTtcbiAgICAgICAgaWYgKHFyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmIChxbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkb25lbCkge1xuICAgICAgICAgICAgby5vbk5leHQodHJ1ZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24xLCBzdWJzY3JpcHRpb24yKTtcbiAgICB9LCBmaXJzdCk7XG4gIH07XG5cbiAgdmFyIEVsZW1lbnRBdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEVsZW1lbnRBdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRWxlbWVudEF0T2JzZXJ2YWJsZShzb3VyY2UsIGksIGQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEVsZW1lbnRBdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRWxlbWVudEF0T2JzZXJ2ZXIobywgdGhpcy5faSwgdGhpcy5fZCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRWxlbWVudEF0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFbGVtZW50QXRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRWxlbWVudEF0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBFbGVtZW50QXRPYnNlcnZlcihvLCBpLCBkKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFbGVtZW50QXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faS0tID09PSAwKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBFbGVtZW50QXRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRWxlbWVudEF0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2QpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBFbGVtZW50QXRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVsZW1lbnQgYXQgYSBzcGVjaWZpZWQgaW5kZXggaW4gYSBzZXF1ZW5jZSBvciBkZWZhdWx0IHZhbHVlIGlmIG5vdCBmb3VuZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJldHJpZXZlLlxuICAgKiBAcGFyYW0ge0FueX0gW2RlZmF1bHRWYWx1ZV0gVGhlIGRlZmF1bHQgdmFsdWUgdG8gdXNlIGlmIGVsZW1lbnRBdCBkb2VzIG5vdCBmaW5kIGEgdmFsdWUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgdGhlIGVsZW1lbnQgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbiBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmVsZW1lbnRBdCA9ICBmdW5jdGlvbiAoaW5kZXgsIGRlZmF1bHRWYWx1ZSkge1xuICAgIGlmIChpbmRleCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IEVsZW1lbnRBdE9ic2VydmFibGUodGhpcywgaW5kZXgsIGRlZmF1bHRWYWx1ZSk7XG4gIH07XG5cbiAgdmFyIFNpbmdsZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNpbmdsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNpbmdsZU9ic2VydmVyKG8sIG9iaiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3YgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2luZ2xlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHNob3VsZFlpZWxkID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JqLnByZWRpY2F0ZSkoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgQm9vbGVhbihyZXMpICYmIChzaG91bGRZaWVsZCA9IHRydWUpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICBzaG91bGRZaWVsZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkWWllbGQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX28ub25FcnJvcihuZXcgRXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG1vcmUgdGhhbiBvbmUgbWF0Y2hpbmcgZWxlbWVudCcpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgU2luZ2xlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNpbmdsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5faHYpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuX29iai5kZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9vYmouZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gU2luZ2xlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBvbmx5IGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBvcHRpb25hbCBwcmVkaWNhdGUsIGFuZCByZXBvcnRzIGFuIGV4Y2VwdGlvbiBpZiB0aGVyZSBpcyBub3QgZXhhY3RseSBvbmUgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU2VxdWVuY2UgY29udGFpbmluZyB0aGUgc2luZ2xlIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zaW5nbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB2YXIgb2JqID0ge30sIHNvdXJjZSA9IHRoaXM7XG4gICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgb2JqID0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqID0ge1xuICAgICAgICAgIHByZWRpY2F0ZTogYXJndW1lbnRzWzBdLFxuICAgICAgICAgIHRoaXNBcmc6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IGFyZ3VtZW50c1syXVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgaWYgKGlzRnVuY3Rpb24gKG9iai5wcmVkaWNhdGUpKSB7XG4gICAgICAgIHZhciBmbiA9IG9iai5wcmVkaWNhdGU7XG4gICAgICAgIG9iai5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2soZm4sIG9iai50aGlzQXJnLCAzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgU2luZ2xlT2JzZXJ2ZXIobywgb2JqLCBzb3VyY2UpKTtcbiAgICAgIH0sIHNvdXJjZSk7XG4gICAgfTtcblxuICB2YXIgRmlyc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaXJzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRmlyc3RPYnNlcnZhYmxlKHNvdXJjZSwgb2JqKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpcnN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBGaXJzdE9ic2VydmVyKG8sIHRoaXMuX29iaiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpcnN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBGaXJzdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpcnN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRmlyc3RPYnNlcnZlcihvLCBvYmosIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29iai5wcmVkaWNhdGUpKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIGlmIChCb29sZWFuKHJlcykpIHtcbiAgICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9vYmouZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpcnN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlIGlmIHByZXNlbnQgZWxzZSB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTZXF1ZW5jZSBjb250YWluaW5nIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBpZiBwcm92aWRlZCwgZWxzZSB0aGUgZmlyc3QgaXRlbSBpbiB0aGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZmlyc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9iaiA9IHt9LCBzb3VyY2UgPSB0aGlzO1xuICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnb2JqZWN0Jykge1xuICAgICAgb2JqID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmogPSB7XG4gICAgICAgIHByZWRpY2F0ZTogYXJndW1lbnRzWzBdLFxuICAgICAgICB0aGlzQXJnOiBhcmd1bWVudHNbMV0sXG4gICAgICAgIGRlZmF1bHRWYWx1ZTogYXJndW1lbnRzWzJdXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoaXNGdW5jdGlvbiAob2JqLnByZWRpY2F0ZSkpIHtcbiAgICAgIHZhciBmbiA9IG9iai5wcmVkaWNhdGU7XG4gICAgICBvYmoucHJlZGljYXRlID0gYmluZENhbGxiYWNrKGZuLCBvYmoudGhpc0FyZywgMyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRmlyc3RPYnNlcnZhYmxlKHRoaXMsIG9iaik7XG4gIH07XG5cbiAgdmFyIExhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBMYXN0T2JzZXJ2YWJsZShzb3VyY2UsIG9iaikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBMYXN0T2JzZXJ2ZXIobywgdGhpcy5fb2JqLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGFzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKExhc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBMYXN0T2JzZXJ2ZXIobywgb2JqLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5fdiA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHNob3VsZFlpZWxkID0gZmFsc2U7XG4gICAgICBpZiAodGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JqLnByZWRpY2F0ZSkoeCwgdGhpcy5faSsrLCB0aGlzLl9zKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgQm9vbGVhbihyZXMpICYmIChzaG91bGRZaWVsZCA9IHRydWUpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5fb2JqLnByZWRpY2F0ZSkge1xuICAgICAgICBzaG91bGRZaWVsZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoc2hvdWxkWWllbGQpIHtcbiAgICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgICB0aGlzLl92ID0geDtcbiAgICAgIH1cbiAgICB9O1xuICAgIExhc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5faHYpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHRoaXMuX29iai5kZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9vYmouZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTGFzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgcHJlZGljYXRlIGlmIHNwZWNpZmllZCwgZWxzZSB0aGUgbGFzdCBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU2VxdWVuY2UgY29udGFpbmluZyB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5sYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB7fSwgc291cmNlID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9iaiA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqID0ge1xuICAgICAgICBwcmVkaWNhdGU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgdGhpc0FyZzogYXJndW1lbnRzWzFdLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGFyZ3VtZW50c1syXVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24gKG9iai5wcmVkaWNhdGUpKSB7XG4gICAgICB2YXIgZm4gPSBvYmoucHJlZGljYXRlO1xuICAgICAgb2JqLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhmbiwgb2JqLnRoaXNBcmcsIDMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IExhc3RPYnNlcnZhYmxlKHRoaXMsIG9iaik7XG4gIH07XG5cbiAgdmFyIEZpbmRWYWx1ZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpbmRWYWx1ZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpbmRWYWx1ZU9ic2VydmVyKG9ic2VydmVyLCBzb3VyY2UsIGNhbGxiYWNrLCB5aWVsZEluZGV4KSB7XG4gICAgICB0aGlzLl9vID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fY2IgPSBjYWxsYmFjaztcbiAgICAgIHRoaXMuX3kgPSB5aWVsZEluZGV4O1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaW5kVmFsdWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgc2hvdWxkUnVuID0gdHJ5Q2F0Y2godGhpcy5fY2IpKHgsIHRoaXMuX2ksIHRoaXMuX3MpO1xuICAgICAgaWYgKHNob3VsZFJ1biA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihzaG91bGRSdW4uZSk7IH1cbiAgICAgIGlmIChzaG91bGRSdW4pIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5feSA/IHRoaXMuX2kgOiB4KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faSsrO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBGaW5kVmFsdWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBGaW5kVmFsdWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5feSAmJiB0aGlzLl9vLm9uTmV4dCgtMSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBGaW5kVmFsdWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gZmluZFZhbHVlIChzb3VyY2UsIHByZWRpY2F0ZSwgdGhpc0FyZywgeWllbGRJbmRleCkge1xuICAgIHZhciBjYWxsYmFjayA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IEZpbmRWYWx1ZU9ic2VydmVyKG8sIHNvdXJjZSwgY2FsbGJhY2ssIHlpZWxkSW5kZXgpKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlYXJjaGVzIGZvciBhbiBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgY29uZGl0aW9ucyBkZWZpbmVkIGJ5IHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlLCBhbmQgcmV0dXJucyB0aGUgZmlyc3Qgb2NjdXJyZW5jZSB3aXRoaW4gdGhlIGVudGlyZSBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0aGF0IGRlZmluZXMgdGhlIGNvbmRpdGlvbnMgb2YgdGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyB0aGUgcHJlZGljYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgbWF0Y2hlcyB0aGUgY29uZGl0aW9ucyBkZWZpbmVkIGJ5IHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlLCBpZiBmb3VuZDsgb3RoZXJ3aXNlLCB1bmRlZmluZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZmluZCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gZmluZFZhbHVlKHRoaXMsIHByZWRpY2F0ZSwgdGhpc0FyZywgZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyBmb3IgYW4gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSwgYW5kIHJldHVybnNcbiAgICogYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIHdpdGhpbiB0aGUgZW50aXJlIE9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgcHJlZGljYXRlIHRoYXQgZGVmaW5lcyB0aGUgY29uZGl0aW9ucyBvZiB0aGUgZWxlbWVudCB0byBzZWFyY2ggZm9yLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIHRoZSBwcmVkaWNhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIHplcm8tYmFzZWQgaW5kZXggb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSBtYXRjaCwgaWYgZm91bmQ7IG90aGVyd2lzZSwg4oCTMS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpbmRJbmRleCA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gZmluZFZhbHVlKHRoaXMsIHByZWRpY2F0ZSwgdGhpc0FyZywgdHJ1ZSk7XG4gIH07XG5cbiAgdmFyIFRvU2V0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9TZXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvU2V0T2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVG9TZXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRvU2V0T2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9TZXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRvU2V0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvU2V0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9TZXRPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBuZXcgcm9vdC5TZXQoKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvU2V0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcy5hZGQoeCk7XG4gICAgfTtcblxuICAgIFRvU2V0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgVG9TZXRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fcyk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUb1NldE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29udmVydHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYSBTZXQgaWYgaXQgZXhpc3RzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIHZhbHVlIG9mIGEgU2V0IGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBmcm9tIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvU2V0ID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0eXBlb2Ygcm9vdC5TZXQgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgVG9TZXRPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBUb01hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvTWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUb01hcE9ic2VydmFibGUoc291cmNlLCBrLCBlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb01hcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVG9NYXBPYnNlcnZlcihvLCB0aGlzLl9rLCB0aGlzLl9lKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUb01hcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVG9NYXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9NYXBPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUb01hcE9ic2VydmVyKG8sIGssIGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fayA9IGs7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX20gPSBuZXcgcm9vdC5NYXAoKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvTWFwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHRyeUNhdGNoKHRoaXMuX2spKHgpO1xuICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihrZXkuZSk7IH1cbiAgICAgIHZhciBlbGVtID0geDtcbiAgICAgIGlmICh0aGlzLl9lKSB7XG4gICAgICAgIGVsZW0gPSB0cnlDYXRjaCh0aGlzLl9lKSh4KTtcbiAgICAgICAgaWYgKGVsZW0gPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IoZWxlbS5lKTsgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9tLnNldChrZXksIGVsZW0pO1xuICAgIH07XG5cbiAgICBUb01hcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRvTWFwT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX20pO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9NYXBPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogQ29udmVydHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYSBNYXAgaWYgaXQgZXhpc3RzLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleVNlbGVjdG9yIEEgZnVuY3Rpb24gd2hpY2ggcHJvZHVjZXMgdGhlIGtleSBmb3IgdGhlIE1hcC5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZWxlbWVudFNlbGVjdG9yXSBBbiBvcHRpb25hbCBmdW5jdGlvbiB3aGljaCBwcm9kdWNlcyB0aGUgZWxlbWVudCBmb3IgdGhlIE1hcC4gSWYgbm90IHByZXNlbnQsIGRlZmF1bHRzIHRvIHRoZSB2YWx1ZSBmcm9tIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgdmFsdWUgb2YgYSBNYXAgY29udGFpbmluZyB0aGUgdmFsdWVzIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICovXG4gIG9ic2VydmFibGVQcm90by50b01hcCA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yKSB7XG4gICAgaWYgKHR5cGVvZiByb290Lk1hcCA9PT0gJ3VuZGVmaW5lZCcpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBUb01hcE9ic2VydmFibGUodGhpcywga2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvcik7XG4gIH07XG5cbiAgdmFyIFNsaWNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2xpY2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNsaWNlT2JzZXJ2YWJsZShzb3VyY2UsIGIsIGUpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fYiA9IGI7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNsaWNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTbGljZU9ic2VydmVyKG8sIHRoaXMuX2IsIHRoaXMuX2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNsaWNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTbGljZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTbGljZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2xpY2VPYnNlcnZlcihvLCBiLCBlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2IgPSBiO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNsaWNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2kgPj0gdGhpcy5fYikge1xuICAgICAgICBpZiAodGhpcy5fZSA9PT0gdGhpcy5faSkge1xuICAgICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG4gICAgU2xpY2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2xpY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2xpY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLypcbiAgKiBUaGUgc2xpY2UoKSBtZXRob2QgcmV0dXJucyBhIHNoYWxsb3cgY29weSBvZiBhIHBvcnRpb24gb2YgYW4gT2JzZXJ2YWJsZSBpbnRvIGEgbmV3IE9ic2VydmFibGUgb2JqZWN0LlxuICAqIFVubGlrZSB0aGUgYXJyYXkgdmVyc2lvbiwgdGhpcyBkb2VzIG5vdCBzdXBwb3J0IG5lZ2F0aXZlIG51bWJlcnMgZm9yIGJlaW5nIG9yIGVuZC5cbiAgKiBAcGFyYW0ge051bWJlcn0gW2JlZ2luXSBaZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIGJlZ2luIGV4dHJhY3Rpb24uIElmIG9taXR0ZWQsIHRoaXMgd2lsbCBkZWZhdWx0IHRvIHplcm8uXG4gICogQHBhcmFtIHtOdW1iZXJ9IFtlbmRdIFplcm8tYmFzZWQgaW5kZXggYXQgd2hpY2ggdG8gZW5kIGV4dHJhY3Rpb24uIHNsaWNlIGV4dHJhY3RzIHVwIHRvIGJ1dCBub3QgaW5jbHVkaW5nIGVuZC5cbiAgKiBJZiBvbWl0dGVkLCB0aGlzIHdpbGwgZW1pdCB0aGUgcmVzdCBvZiB0aGUgT2JzZXJ2YWJsZSBvYmplY3QuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEEgc2hhbGxvdyBjb3B5IG9mIGEgcG9ydGlvbiBvZiBhbiBPYnNlcnZhYmxlIGludG8gYSBuZXcgT2JzZXJ2YWJsZSBvYmplY3QuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5zbGljZSA9IGZ1bmN0aW9uIChiZWdpbiwgZW5kKSB7XG4gICAgdmFyIHN0YXJ0ID0gYmVnaW4gfHwgMDtcbiAgICBpZiAoc3RhcnQgPCAwKSB7IHRocm93IG5ldyBSeC5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICdudW1iZXInICYmIGVuZCA8IHN0YXJ0KSB7XG4gICAgICB0aHJvdyBuZXcgUnguQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTbGljZU9ic2VydmFibGUodGhpcywgc3RhcnQsIGVuZCk7XG4gIH07XG5cbiAgdmFyIExhc3RJbmRleE9mT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTGFzdEluZGV4T2ZPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIExhc3RJbmRleE9mT2JzZXJ2YWJsZShzb3VyY2UsIGUsIG4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIExhc3RJbmRleE9mT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodGhpcy5fbiA8IDApIHtcbiAgICAgICAgby5vbk5leHQoLTEpO1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IExhc3RJbmRleE9mT2JzZXJ2ZXIobywgdGhpcy5fZSwgdGhpcy5fbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGFzdEluZGV4T2ZPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIExhc3RJbmRleE9mT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKExhc3RJbmRleE9mT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdEluZGV4T2ZPYnNlcnZlcihvLCBlLCBuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICB0aGlzLl92ID0gMDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIExhc3RJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2kgPj0gdGhpcy5fbiAmJiB4ID09PSB0aGlzLl9lKSB7XG4gICAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdiA9IHRoaXMuX2k7XG4gICAgICB9XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcbiAgICBMYXN0SW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBMYXN0SW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5faHYpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCgtMSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBMYXN0SW5kZXhPZk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGFzdCBpbmRleCBhdCB3aGljaCBhIGdpdmVuIGVsZW1lbnQgY2FuIGJlIGZvdW5kIGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLCBvciAtMSBpZiBpdCBpcyBub3QgcHJlc2VudC5cbiAgICogQHBhcmFtIHtBbnl9IHNlYXJjaEVsZW1lbnQgRWxlbWVudCB0byBsb2NhdGUgaW4gdGhlIGFycmF5LlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2Zyb21JbmRleF0gVGhlIGluZGV4IHRvIHN0YXJ0IHRoZSBzZWFyY2guICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byAwLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW5kIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgbGFzdCBpbmRleCBhdCB3aGljaCBhIGdpdmVuIGVsZW1lbnQgY2FuIGJlIGZvdW5kIGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLCBvciAtMSBpZiBpdCBpcyBub3QgcHJlc2VudC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5sYXN0SW5kZXhPZiA9IGZ1bmN0aW9uKHNlYXJjaEVsZW1lbnQsIGZyb21JbmRleCkge1xuICAgIHZhciBuID0gK2Zyb21JbmRleCB8fCAwO1xuICAgIE1hdGguYWJzKG4pID09PSBJbmZpbml0eSAmJiAobiA9IDApO1xuICAgIHJldHVybiBuZXcgTGFzdEluZGV4T2ZPYnNlcnZhYmxlKHRoaXMsIHNlYXJjaEVsZW1lbnQsIG4pO1xuICB9O1xuXG4gIE9ic2VydmFibGUud3JhcCA9IGZ1bmN0aW9uIChmbikge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZU9ic2VydmFibGUoKSB7XG4gICAgICByZXR1cm4gT2JzZXJ2YWJsZS5zcGF3bi5jYWxsKHRoaXMsIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICAgIH1cblxuICAgIGNyZWF0ZU9ic2VydmFibGUuX19nZW5lcmF0b3JGdW5jdGlvbl9fID0gZm47XG4gICAgcmV0dXJuIGNyZWF0ZU9ic2VydmFibGU7XG4gIH07XG5cbiAgdmFyIHNwYXduID0gT2JzZXJ2YWJsZS5zcGF3biA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZ2VuID0gYXJndW1lbnRzWzBdLCBzZWxmID0gdGhpcywgYXJncyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cblxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuXG4gICAgICBpZiAoaXNGdW5jdGlvbihnZW4pKSB7IGdlbiA9IGdlbi5hcHBseShzZWxmLCBhcmdzKTsgfVxuICAgICAgaWYgKCFnZW4gfHwgIWlzRnVuY3Rpb24oZ2VuLm5leHQpKSB7XG4gICAgICAgIG8ub25OZXh0KGdlbik7XG4gICAgICAgIHJldHVybiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHByb2Nlc3NHZW5lcmF0b3IocmVzKSB7XG4gICAgICAgIHZhciByZXQgPSB0cnlDYXRjaChnZW4ubmV4dCkuY2FsbChnZW4sIHJlcyk7XG4gICAgICAgIGlmIChyZXQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmV0LmUpOyB9XG4gICAgICAgIG5leHQocmV0KTtcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzc0dlbmVyYXRvcigpO1xuXG4gICAgICBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2goZ2VuLm5leHQpLmNhbGwoZ2VuLCBlcnIpO1xuICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJldC5lKTsgfVxuICAgICAgICBuZXh0KHJldCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG5leHQocmV0KSB7XG4gICAgICAgIGlmIChyZXQuZG9uZSkge1xuICAgICAgICAgIG8ub25OZXh0KHJldC52YWx1ZSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb2JzID0gdG9PYnNlcnZhYmxlLmNhbGwoc2VsZiwgcmV0LnZhbHVlKTtcbiAgICAgICAgdmFyIHZhbHVlID0gbnVsbDtcbiAgICAgICAgdmFyIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvYnMpKSB7XG4gICAgICAgICAgZy5hZGQob2JzLnN1YnNjcmliZShmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsO1xuICAgICAgICAgIH0sIG9uRXJyb3IsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGFzVmFsdWUgJiYgcHJvY2Vzc0dlbmVyYXRvcih2YWx1ZSk7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uRXJyb3IobmV3IFR5cGVFcnJvcigndHlwZSBub3Qgc3VwcG9ydGVkJykpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBnO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRvT2JzZXJ2YWJsZShvYmopIHtcbiAgICBpZiAoIW9iaikgeyByZXR1cm4gb2JqOyB9XG4gICAgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG9iaikpIHsgcmV0dXJuIG9iajsgfVxuICAgIGlmIChpc1Byb21pc2Uob2JqKSkgeyByZXR1cm4gT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZShvYmopOyB9XG4gICAgaWYgKGlzR2VuZXJhdG9yRnVuY3Rpb24ob2JqKSB8fCBpc0dlbmVyYXRvcihvYmopKSB7IHJldHVybiBzcGF3bi5jYWxsKHRoaXMsIG9iaik7IH1cbiAgICBpZiAoaXNGdW5jdGlvbihvYmopKSB7IHJldHVybiB0aHVua1RvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9iaik7IH1cbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSB8fCBpc0l0ZXJhYmxlKG9iaikpIHsgcmV0dXJuIGFycmF5VG9PYnNlcnZhYmxlLmNhbGwodGhpcywgb2JqKTsgfVxuICAgIGlmIChpc09iamVjdChvYmopKSB7cmV0dXJuIG9iamVjdFRvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9iaik7fVxuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICBmdW5jdGlvbiBhcnJheVRvT2JzZXJ2YWJsZSAob2JqKSB7XG4gICAgcmV0dXJuIE9ic2VydmFibGUuZnJvbShvYmopLmNvbmNhdE1hcChmdW5jdGlvbihvKSB7XG4gICAgICBpZihPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvKSB8fCBpc09iamVjdChvKSkge1xuICAgICAgICByZXR1cm4gdG9PYnNlcnZhYmxlLmNhbGwobnVsbCwgbyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUnguT2JzZXJ2YWJsZS5qdXN0KG8pO1xuICAgICAgfVxuICAgIH0pLnRvQXJyYXkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9iamVjdFRvT2JzZXJ2YWJsZSAob2JqKSB7XG4gICAgdmFyIHJlc3VsdHMgPSBuZXcgb2JqLmNvbnN0cnVjdG9yKCksIGtleXMgPSBPYmplY3Qua2V5cyhvYmopLCBvYnNlcnZhYmxlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciBvYnNlcnZhYmxlID0gdG9PYnNlcnZhYmxlLmNhbGwodGhpcywgb2JqW2tleV0pO1xuXG4gICAgICBpZihvYnNlcnZhYmxlICYmIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG9ic2VydmFibGUpKSB7XG4gICAgICAgIGRlZmVyKG9ic2VydmFibGUsIGtleSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzW2tleV0gPSBvYmpba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5mb3JrSm9pbi5hcHBseShPYnNlcnZhYmxlLCBvYnNlcnZhYmxlcykubWFwKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSk7XG5cblxuICAgIGZ1bmN0aW9uIGRlZmVyIChvYnNlcnZhYmxlLCBrZXkpIHtcbiAgICAgIHJlc3VsdHNba2V5XSA9IHVuZGVmaW5lZDtcbiAgICAgIG9ic2VydmFibGVzLnB1c2gob2JzZXJ2YWJsZS5tYXAoZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgICAgcmVzdWx0c1trZXldID0gbmV4dDtcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0aHVua1RvT2JzZXJ2YWJsZShmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIGZuLmNhbGwoc2VsZiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXJyID0gYXJndW1lbnRzWzBdLCByZXMgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlmIChlcnIpIHsgcmV0dXJuIG8ub25FcnJvcihlcnIpOyB9XG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuICAgICAgICAgIHJlcyA9IGFyZ3M7XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0dlbmVyYXRvcihvYmopIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbiAob2JqLm5leHQpICYmIGlzRnVuY3Rpb24gKG9ialsndGhyb3cnXSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc0dlbmVyYXRvckZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuICAgIGlmICghY3RvcikgeyByZXR1cm4gZmFsc2U7IH1cbiAgICBpZiAoY3Rvci5uYW1lID09PSAnR2VuZXJhdG9yRnVuY3Rpb24nIHx8IGN0b3IuZGlzcGxheU5hbWUgPT09ICdHZW5lcmF0b3JGdW5jdGlvbicpIHsgcmV0dXJuIHRydWU7IH1cbiAgICByZXR1cm4gaXNHZW5lcmF0b3IoY3Rvci5wcm90b3R5cGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdCA9PSB2YWwuY29uc3RydWN0b3I7XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlcyB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5IG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLCBzdXJmYWNpbmcgdGhlIHJlc3VsdCB0aHJvdWdoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLnN0YXJ0KGZ1bmN0aW9uICgpIHsgY29uc29sZS5sb2coJ2hlbGxvJyk7IH0pO1xuICAgKiB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5zdGFydChmdW5jdGlvbiAoKSB7IGNvbnNvbGUubG9nKCdoZWxsbycpOyB9LCBSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLnN0YXJ0KGZ1bmN0aW9uICgpIHsgdGhpcy5sb2coJ2hlbGxvJyk7IH0sIFJ4LlNjaGVkdWxlci50aW1lb3V0LCBjb25zb2xlKTtcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBGdW5jdGlvbiB0byBydW4gYXN5bmNocm9ub3VzbHkuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgZnVuY3Rpb24gb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcGFyYW0gW2NvbnRleHRdICBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleHBvc2luZyB0aGUgZnVuY3Rpb24ncyByZXN1bHQgdmFsdWUsIG9yIGFuIGV4Y2VwdGlvbi5cbiAgICpcbiAgICogUmVtYXJrc1xuICAgKiAqIFRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksIG5vdCBkdXJpbmcgdGhlIHN1YnNjcmlwdGlvbiBvZiB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlLlxuICAgKiAqIE11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBjYW4gb2JzZXJ2ZSB0aGUgZnVuY3Rpb24ncyByZXN1bHQuXG4gICAqL1xuICBPYnNlcnZhYmxlLnN0YXJ0ID0gZnVuY3Rpb24gKGZ1bmMsIGNvbnRleHQsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlVG9Bc3luYyhmdW5jLCBjb250ZXh0LCBzY2hlZHVsZXIpKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBmdW5jdGlvbiBpbnRvIGFuIGFzeW5jaHJvbm91cyBmdW5jdGlvbi4gRWFjaCBpbnZvY2F0aW9uIG9mIHRoZSByZXN1bHRpbmcgYXN5bmNocm9ub3VzIGZ1bmN0aW9uIGNhdXNlcyBhbiBpbnZvY2F0aW9uIG9mIHRoZSBvcmlnaW5hbCBzeW5jaHJvbm91cyBmdW5jdGlvbiBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY3Rpb24gRnVuY3Rpb24gdG8gY29udmVydCB0byBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBmdW5jdGlvbiBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFtjb250ZXh0XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEFzeW5jaHJvbm91cyBmdW5jdGlvbi5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlVG9Bc3luYyA9IE9ic2VydmFibGUudG9Bc3luYyA9IGZ1bmN0aW9uIChmdW5jLCBjb250ZXh0LCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIHN1YmplY3QgPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG5cbiAgICAgIHNjaGVkdWxlci5zY2hlZHVsZShudWxsLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHN1YmplY3Qub25FcnJvcihlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc3ViamVjdC5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgc3ViamVjdC5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViamVjdC5hc09ic2VydmFibGUoKTtcbiAgICB9O1xuICB9O1xuXG5mdW5jdGlvbiBjcmVhdGVDYk9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpIHtcbiAgdmFyIG8gPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG5cbiAgYXJncy5wdXNoKGNyZWF0ZUNiSGFuZGxlcihvLCBjdHgsIHNlbGVjdG9yKSk7XG4gIGZuLmFwcGx5KGN0eCwgYXJncyk7XG5cbiAgcmV0dXJuIG8uYXNPYnNlcnZhYmxlKCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNiSGFuZGxlcihvLCBjdHgsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdWx0cyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyByZXN1bHRzW2ldID0gYXJndW1lbnRzW2ldOyB9XG5cbiAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikpIHtcbiAgICAgIHJlc3VsdHMgPSB0cnlDYXRjaChzZWxlY3RvcikuYXBwbHkoY3R4LCByZXN1bHRzKTtcbiAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cbiAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gd2l0aCBhIGNhbGxiYWNrIGFzIHRoZSBsYXN0IHBhcmFtZXRlciB0byBjb252ZXJ0IHRvIGFuIE9ic2VydmFibGUgc2VxdWVuY2UuXG4gKiBAcGFyYW0ge01peGVkfSBbY3R4XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgY2FsbGJhY2sgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24sIHdoZW4gZXhlY3V0ZWQgd2l0aCB0aGUgcmVxdWlyZWQgcGFyYW1ldGVycyBtaW51cyB0aGUgY2FsbGJhY2ssIHByb2R1Y2VzIGFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSB2YWx1ZSBvZiB0aGUgYXJndW1lbnRzIHRvIHRoZSBjYWxsYmFjayBhcyBhbiBhcnJheS5cbiAqL1xuT2JzZXJ2YWJsZS5mcm9tQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZm4sIGN0eCwgc2VsZWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB0eXBlb2YgY3R4ID09PSAndW5kZWZpbmVkJyAmJiAoY3R4ID0gdGhpcyk7IFxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGNyZWF0ZUNiT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncyk7XG4gIH07XG59O1xuXG5mdW5jdGlvbiBjcmVhdGVOb2RlT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncykge1xuICB2YXIgbyA9IG5ldyBBc3luY1N1YmplY3QoKTtcblxuICBhcmdzLnB1c2goY3JlYXRlTm9kZUhhbmRsZXIobywgY3R4LCBzZWxlY3RvcikpO1xuICBmbi5hcHBseShjdHgsIGFyZ3MpO1xuXG4gIHJldHVybiBvLmFzT2JzZXJ2YWJsZSgpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb2RlSGFuZGxlcihvLCBjdHgsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICB2YXIgZXJyID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChlcnIpIHsgcmV0dXJuIG8ub25FcnJvcihlcnIpOyB9XG5cbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcmVzdWx0cyA9IFtdO1xuICAgIGZvcih2YXIgaSA9IDE7IGkgPCBsZW47IGkrKykgeyByZXN1bHRzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTsgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IHRyeUNhdGNoKHNlbGVjdG9yKS5hcHBseShjdHgsIHJlc3VsdHMpO1xuICAgICAgaWYgKHJlc3VsdHMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0cy5lKTsgfVxuICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgby5vbkNvbXBsZXRlZCgpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgTm9kZS5qcyBjYWxsYmFjayBzdHlsZSBmdW5jdGlvbiB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLiAgVGhpcyBtdXN0IGJlIGluIGZ1bmN0aW9uIChlcnIsIC4uLikgZm9ybWF0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAqIEBwYXJhbSB7TWl4ZWR9IFtjdHhdIFRoZSBjb250ZXh0IGZvciB0aGUgZnVuYyBwYXJhbWV0ZXIgdG8gYmUgZXhlY3V0ZWQuICBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB1bmRlZmluZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBjYWxsYmFjayBtaW51cyB0aGUgZXJyb3IgdG8gcHJvZHVjZSBhIHNpbmdsZSBpdGVtIHRvIHlpZWxkIG9uIG5leHQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEFuIGFzeW5jIGZ1bmN0aW9uIHdoaWNoIHdoZW4gYXBwbGllZCwgcmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGNhbGxiYWNrIGFyZ3VtZW50cyBhcyBhbiBhcnJheS5cbiAqL1xuT2JzZXJ2YWJsZS5mcm9tTm9kZUNhbGxiYWNrID0gZnVuY3Rpb24gKGZuLCBjdHgsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdHlwZW9mIGN0eCA9PT0gJ3VuZGVmaW5lZCcgJiYgKGN0eCA9IHRoaXMpOyBcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGNyZWF0ZU5vZGVPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKTtcbiAgfTtcbn07XG5cbiAgZnVuY3Rpb24gaXNOb2RlTGlzdChlbCkge1xuICAgIGlmIChyb290LlN0YXRpY05vZGVMaXN0KSB7XG4gICAgICAvLyBJRTggU3BlY2lmaWNcbiAgICAgIC8vIGluc3RhbmNlb2YgaXMgc2xvd2VyIHRoYW4gT2JqZWN0I3RvU3RyaW5nLCBidXQgT2JqZWN0I3RvU3RyaW5nIHdpbGwgbm90IHdvcmsgYXMgaW50ZW5kZWQgaW4gSUU4XG4gICAgICByZXR1cm4gZWwgaW5zdGFuY2VvZiByb290LlN0YXRpY05vZGVMaXN0IHx8IGVsIGluc3RhbmNlb2Ygcm9vdC5Ob2RlTGlzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbCkgPT09ICdbb2JqZWN0IE5vZGVMaXN0XSc7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gTGlzdGVuRGlzcG9zYWJsZShlLCBuLCBmbikge1xuICAgIHRoaXMuX2UgPSBlO1xuICAgIHRoaXMuX24gPSBuO1xuICAgIHRoaXMuX2ZuID0gZm47XG4gICAgdGhpcy5fZS5hZGRFdmVudExpc3RlbmVyKHRoaXMuX24sIHRoaXMuX2ZuLCBmYWxzZSk7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH1cbiAgTGlzdGVuRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5fZS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX24sIHRoaXMuX2ZuLCBmYWxzZSk7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBjcmVhdGVFdmVudExpc3RlbmVyIChlbCwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgdmFyIGRpc3Bvc2FibGVzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblxuICAgIC8vIEFzdW1lIE5vZGVMaXN0IG9yIEhUTUxDb2xsZWN0aW9uXG4gICAgdmFyIGVsZW1Ub1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlbCk7XG4gICAgaWYgKGlzTm9kZUxpc3QoZWwpIHx8IGVsZW1Ub1N0cmluZyA9PT0gJ1tvYmplY3QgSFRNTENvbGxlY3Rpb25dJykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGVsLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGRpc3Bvc2FibGVzLmFkZChjcmVhdGVFdmVudExpc3RlbmVyKGVsLml0ZW0oaSksIGV2ZW50TmFtZSwgaGFuZGxlcikpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZWwpIHtcbiAgICAgIGRpc3Bvc2FibGVzLmFkZChuZXcgTGlzdGVuRGlzcG9zYWJsZShlbCwgZXZlbnROYW1lLCBoYW5kbGVyKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpc3Bvc2FibGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbmZpZ3VyYXRpb24gb3B0aW9uIHRvIGRldGVybWluZSB3aGV0aGVyIHRvIHVzZSBuYXRpdmUgZXZlbnRzIG9ubHlcbiAgICovXG4gIFJ4LmNvbmZpZy51c2VOYXRpdmVFdmVudHMgPSBmYWxzZTtcblxuICB2YXIgRXZlbnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZW50T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFdmVudE9ic2VydmFibGUoZWwsIG5hbWUsIGZuKSB7XG4gICAgICB0aGlzLl9lbCA9IGVsO1xuICAgICAgdGhpcy5fbiA9IG5hbWU7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlSGFuZGxlcihvLCBmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgcmVzdWx0cyA9IHRyeUNhdGNoKGZuKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cbiAgICAgICAgfVxuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRXZlbnRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBjcmVhdGVFdmVudExpc3RlbmVyKFxuICAgICAgICB0aGlzLl9lbCxcbiAgICAgICAgdGhpcy5fbixcbiAgICAgICAgY3JlYXRlSGFuZGxlcihvLCB0aGlzLl9mbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXZlbnRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBhZGRpbmcgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhlIG1hdGNoaW5nIERPTUVsZW1lbnQgb3IgZWFjaCBpdGVtIGluIHRoZSBOb2RlTGlzdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnQgVGhlIERPTUVsZW1lbnQgb3IgTm9kZUxpc3QgdG8gYXR0YWNoIGEgbGlzdGVuZXIuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWUgVGhlIGV2ZW50IG5hbWUgdG8gYXR0YWNoIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBldmVudCBoYW5kbGVyIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBldmVudHMgZnJvbSB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgYW5kIHRoZSBzcGVjaWZpZWQgZXZlbnQuXG4gICAqL1xuICBPYnNlcnZhYmxlLmZyb21FdmVudCA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIHNlbGVjdG9yKSB7XG4gICAgLy8gTm9kZS5qcyBzcGVjaWZpY1xuICAgIGlmIChlbGVtZW50LmFkZExpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybihcbiAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5hZGRMaXN0ZW5lcihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50LnJlbW92ZUxpc3RlbmVyKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgIHNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICAvLyBVc2Ugb25seSBpZiBub24tbmF0aXZlIGV2ZW50cyBhcmUgYWxsb3dlZFxuICAgIGlmICghUnguY29uZmlnLnVzZU5hdGl2ZUV2ZW50cykge1xuICAgICAgLy8gSGFuZGxlcyBqcSwgQW5ndWxhci5qcywgWmVwdG8sIE1hcmlvbmV0dGUsIEVtYmVyLmpzXG4gICAgICBpZiAodHlwZW9mIGVsZW1lbnQub24gPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVsZW1lbnQub2ZmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuKFxuICAgICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQub24oZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50Lm9mZihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICAgIHNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEV2ZW50T2JzZXJ2YWJsZShlbGVtZW50LCBldmVudE5hbWUsIHNlbGVjdG9yKS5wdWJsaXNoKCkucmVmQ291bnQoKTtcbiAgfTtcblxuICB2YXIgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVudFBhdHRlcm5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV2ZW50UGF0dGVybk9ic2VydmFibGUoYWRkLCBkZWwsIGZuKSB7XG4gICAgICB0aGlzLl9hZGQgPSBhZGQ7XG4gICAgICB0aGlzLl9kZWwgPSBkZWw7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlSGFuZGxlcihvLCBmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhhbmRsZXIgKCkge1xuICAgICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgcmVzdWx0cyA9IHRyeUNhdGNoKGZuKS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cbiAgICAgICAgfVxuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZm4gPSBjcmVhdGVIYW5kbGVyKG8sIHRoaXMuX2ZuKTtcbiAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHRoaXMuX2FkZChmbik7XG4gICAgICByZXR1cm4gbmV3IEV2ZW50UGF0dGVybkRpc3Bvc2FibGUodGhpcy5fZGVsLCBmbiwgcmV0dXJuVmFsdWUpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBFdmVudFBhdHRlcm5EaXNwb3NhYmxlKGRlbCwgZm4sIHJldCkge1xuICAgICAgdGhpcy5fZGVsID0gZGVsO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3JldCA9IHJldDtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIEV2ZW50UGF0dGVybkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZighdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIGlzRnVuY3Rpb24odGhpcy5fZGVsKSAmJiB0aGlzLl9kZWwodGhpcy5fZm4sIHRoaXMuX3JldCk7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVudFBhdHRlcm5PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGFuIGV2ZW50IGVtaXR0ZXIgdmlhIGFuIGFkZEhhbmRsZXIvcmVtb3ZlSGFuZGxlciBwYWlyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhZGRIYW5kbGVyIFRoZSBmdW5jdGlvbiB0byBhZGQgYSBoYW5kbGVyIHRvIHRoZSBlbWl0dGVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVtb3ZlSGFuZGxlcl0gVGhlIG9wdGlvbmFsIGZ1bmN0aW9uIHRvIHJlbW92ZSBhIGhhbmRsZXIgZnJvbSBhbiBlbWl0dGVyLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIEEgc2VsZWN0b3Igd2hpY2ggdGFrZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBldmVudCBoYW5kbGVyIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB3cmFwcyBhbiBldmVudCBmcm9tIGFuIGV2ZW50IGVtaXR0ZXJcbiAgICovXG4gIHZhciBmcm9tRXZlbnRQYXR0ZXJuID0gT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuID0gZnVuY3Rpb24gKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBFdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZEhhbmRsZXIsIHJlbW92ZUhhbmRsZXIsIHNlbGVjdG9yKS5wdWJsaXNoKCkucmVmQ291bnQoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW52b2tlcyB0aGUgYXN5bmNocm9ub3VzIGZ1bmN0aW9uLCBzdXJmYWNpbmcgdGhlIHJlc3VsdCB0aHJvdWdoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uQXN5bmMgQXN5bmNocm9ub3VzIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYSBQcm9taXNlIHRvIHJ1bi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgZXhwb3NpbmcgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0IHZhbHVlLCBvciBhbiBleGNlcHRpb24uXG4gICAqL1xuICBPYnNlcnZhYmxlLnN0YXJ0QXN5bmMgPSBmdW5jdGlvbiAoZnVuY3Rpb25Bc3luYykge1xuICAgIHZhciBwcm9taXNlID0gdHJ5Q2F0Y2goZnVuY3Rpb25Bc3luYykoKTtcbiAgICBpZiAocHJvbWlzZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG9ic2VydmFibGVUaHJvdyhwcm9taXNlLmUpOyB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVGcm9tUHJvbWlzZShwcm9taXNlKTtcbiAgfTtcblxuICB2YXIgUGF1c2FibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYXVzYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2FibGVPYnNlcnZhYmxlKHNvdXJjZSwgcGF1c2VyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG5cbiAgICAgIGlmIChwYXVzZXIgJiYgcGF1c2VyLnN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlci5tZXJnZShwYXVzZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXI7XG4gICAgICB9XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgY29ubiA9IHRoaXMuc291cmNlLnB1Ymxpc2goKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gY29ubi5zdWJzY3JpYmUobyksXG4gICAgICAgIGNvbm5lY3Rpb24gPSBkaXNwb3NhYmxlRW1wdHk7XG5cbiAgICAgIHZhciBwYXVzYWJsZSA9IHRoaXMucGF1c2VyLnN0YXJ0V2l0aCghdGhpcy5wYXVzZWQpLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCkuc3Vic2NyaWJlKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIGlmIChiKSB7XG4gICAgICAgICAgY29ubmVjdGlvbiA9IGNvbm4uY29ubmVjdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbm5lY3Rpb24uZGlzcG9zZSgpO1xuICAgICAgICAgIGNvbm5lY3Rpb24gPSBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtzdWJzY3JpcHRpb24sIGNvbm5lY3Rpb24sIHBhdXNhYmxlXSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25OZXh0KGZhbHNlKTtcbiAgICB9O1xuXG4gICAgUGF1c2FibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dCh0cnVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhdXNhYmxlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhdXNlciA9IG5ldyBSeC5TdWJqZWN0KCk7XG4gICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkucGF1c2FibGUocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGUgPSBmdW5jdGlvbiAocGF1c2VyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXVzYWJsZU9ic2VydmFibGUodGhpcywgcGF1c2VyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb21iaW5lTGF0ZXN0U291cmNlKHNvdXJjZSwgc3ViamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBoYXNWYWx1ZSA9IFtmYWxzZSwgZmFsc2VdLFxuICAgICAgICBoYXNWYWx1ZUFsbCA9IGZhbHNlLFxuICAgICAgICBpc0RvbmUgPSBmYWxzZSxcbiAgICAgICAgdmFsdWVzID0gbmV3IEFycmF5KDIpLFxuICAgICAgICBlcnI7XG5cbiAgICAgIGZ1bmN0aW9uIG5leHQoeCwgaSkge1xuICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICBoYXNWYWx1ZVtpXSA9IHRydWU7XG4gICAgICAgIGlmIChoYXNWYWx1ZUFsbCB8fCAoaGFzVmFsdWVBbGwgPSBoYXNWYWx1ZS5ldmVyeShpZGVudGl0eSkpKSB7XG4gICAgICAgICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cbiAgICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpLmFwcGx5KG51bGwsIHZhbHVlcyk7XG4gICAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgICBvLm9uTmV4dChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlzRG9uZSAmJiB2YWx1ZXNbMV0gJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIG5leHQoeCwgMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSkge1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhbHVlc1sxXSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSksXG4gICAgICAgIHN1YmplY3Quc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBuZXh0KHgsIDEpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgICBuZXh0KHRydWUsIDEpO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIHZhciBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUoc291cmNlLCBwYXVzZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcblxuICAgICAgaWYgKHBhdXNlciAmJiBwYXVzZXIuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyLm1lcmdlKHBhdXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICAgIH1cblxuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHEgPSBbXSwgcHJldmlvdXNTaG91bGRGaXJlO1xuXG4gICAgICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgeyB3aGlsZSAocS5sZW5ndGggPiAwKSB7IG8ub25OZXh0KHEuc2hpZnQoKSk7IH0gfVxuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID1cbiAgICAgICAgY29tYmluZUxhdGVzdFNvdXJjZShcbiAgICAgICAgICB0aGlzLnNvdXJjZSxcbiAgICAgICAgICB0aGlzLnBhdXNlci5zdGFydFdpdGgoIXRoaXMucGF1c2VkKS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLFxuICAgICAgICAgIGZ1bmN0aW9uIChkYXRhLCBzaG91bGRGaXJlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkYXRhOiBkYXRhLCBzaG91bGRGaXJlOiBzaG91bGRGaXJlIH07XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgaWYgKHByZXZpb3VzU2hvdWxkRmlyZSAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdHMuc2hvdWxkRmlyZSAhPT0gcHJldmlvdXNTaG91bGRGaXJlKSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNTaG91bGRGaXJlID0gcmVzdWx0cy5zaG91bGRGaXJlO1xuICAgICAgICAgICAgICAgIC8vIGNoYW5nZSBpbiBzaG91bGRGaXJlXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuc2hvdWxkRmlyZSkgeyBkcmFpblF1ZXVlKCk7IH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3VsZEZpcmUgPSByZXN1bHRzLnNob3VsZEZpcmU7XG4gICAgICAgICAgICAgICAgLy8gbmV3IGRhdGFcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5zaG91bGRGaXJlKSB7XG4gICAgICAgICAgICAgICAgICBvLm9uTmV4dChyZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBxLnB1c2gocmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGVycik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjsgICAgICBcbiAgICB9O1xuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dCh0cnVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBQYXVzZXMgdGhlIHVuZGVybHlpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBiYXNlZCB1cG9uIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHlpZWxkcyB0cnVlL2ZhbHNlLFxuICAgKiBhbmQgeWllbGRzIHRoZSB2YWx1ZXMgdGhhdCB3ZXJlIGJ1ZmZlcmVkIHdoaWxlIHBhdXNlZC5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhdXNlciA9IG5ldyBSeC5TdWJqZWN0KCk7XG4gICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkucGF1c2FibGVCdWZmZXJlZChwYXVzZXIpO1xuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHBhdXNlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHBhdXNlIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgcGF1c2VkIGJhc2VkIHVwb24gdGhlIHBhdXNlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wYXVzYWJsZUJ1ZmZlcmVkID0gZnVuY3Rpb24gKHBhdXNlcikge1xuICAgIHJldHVybiBuZXcgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUodGhpcywgcGF1c2VyKTtcbiAgfTtcblxuICB2YXIgQ29udHJvbGxlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbnRyb2xsZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRPYnNlcnZhYmxlIChzb3VyY2UsIGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zdWJqZWN0ID0gbmV3IENvbnRyb2xsZWRTdWJqZWN0KGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2UubXVsdGljYXN0KHRoaXMuc3ViamVjdCkucmVmQ291bnQoKTtcbiAgICB9XG5cbiAgICBDb250cm9sbGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pO1xuICAgIH07XG5cbiAgICBDb250cm9sbGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIChudW1iZXJPZkl0ZW1zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdWJqZWN0LnJlcXVlc3QobnVtYmVyT2ZJdGVtcyA9PSBudWxsID8gLTEgOiBudW1iZXJPZkl0ZW1zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbnRyb2xsZWRPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBDb250cm9sbGVkU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29udHJvbGxlZFN1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29udHJvbGxlZFN1YmplY3QoZW5hYmxlUXVldWUsIHNjaGVkdWxlcikge1xuICAgICAgZW5hYmxlUXVldWUgPT0gbnVsbCAmJiAoZW5hYmxlUXVldWUgPSB0cnVlKTtcblxuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnN1YmplY3QgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgdGhpcy5lbmFibGVRdWV1ZSA9IGVuYWJsZVF1ZXVlO1xuICAgICAgdGhpcy5xdWV1ZSA9IGVuYWJsZVF1ZXVlID8gW10gOiBudWxsO1xuICAgICAgdGhpcy5yZXF1ZXN0ZWRDb3VudCA9IDA7XG4gICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICB0aGlzLmhhc0ZhaWxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyIHx8IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXI7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhDb250cm9sbGVkU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gdGhpcy5zdWJqZWN0LnN1YnNjcmliZShvKTtcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhhc0NvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVRdWV1ZSB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLmhhc0ZhaWxlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZVF1ZXVlIHx8IHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yKGVycm9yKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0ZWRDb3VudCA8PSAwKSB7XG4gICAgICAgICAgdGhpcy5lbmFibGVRdWV1ZSAmJiB0aGlzLnF1ZXVlLnB1c2goTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICh0aGlzLnJlcXVlc3RlZENvdW50LS0gPT09IDApICYmIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgICAgdGhpcy5zdWJqZWN0Lm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBfcHJvY2Vzc1JlcXVlc3Q6IGZ1bmN0aW9uIChudW1iZXJPZkl0ZW1zKSB7XG4gICAgICAgIGlmICh0aGlzLmVuYWJsZVF1ZXVlKSB7XG4gICAgICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoID4gMCAmJiAobnVtYmVyT2ZJdGVtcyA+IDAgfHwgdGhpcy5xdWV1ZVswXS5raW5kICE9PSAnTicpKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBmaXJzdC5hY2NlcHQodGhpcy5zdWJqZWN0KTtcbiAgICAgICAgICAgIGlmIChmaXJzdC5raW5kID09PSAnTicpIHtcbiAgICAgICAgICAgICAgbnVtYmVyT2ZJdGVtcy0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudW1iZXJPZkl0ZW1zO1xuICAgICAgfSxcbiAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlQ3VycmVudFJlcXVlc3QoKTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZSA9IHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKG51bWJlcixcbiAgICAgICAgZnVuY3Rpb24ocywgaSkge1xuICAgICAgICAgIHZhciByZW1haW5pbmcgPSBzZWxmLl9wcm9jZXNzUmVxdWVzdChpKTtcbiAgICAgICAgICB2YXIgc3RvcHBlZCA9IHNlbGYuaGFzQ29tcGxldGVkIHx8IHNlbGYuaGFzRmFpbGVkO1xuICAgICAgICAgIGlmICghc3RvcHBlZCAmJiByZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICBzZWxmLnJlcXVlc3RlZENvdW50ID0gcmVtYWluaW5nO1xuXG4gICAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHNlbGYucmVxdWVzdGVkQ291bnQgPSAwO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIC8vIFNjaGVkdWxlZCBpdGVtIGlzIHN0aWxsIGluIHByb2dyZXNzLiBSZXR1cm4gYSBuZXdcbiAgICAgICAgICAgICAgLy8gZGlzcG9zYWJsZSB0byBhbGxvdyB0aGUgcmVxdWVzdCB0byBiZSBpbnRlcnJ1cHRlZFxuICAgICAgICAgICAgICAvLyB2aWEgZGlzcG9zZS5cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGU7XG4gICAgICB9LFxuICAgICAgZGlzcG9zZUN1cnJlbnRSZXF1ZXN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUpIHtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMucmVxdWVzdGVkRGlzcG9zYWJsZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBDb250cm9sbGVkU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGEgY29udHJvbGxlciB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBhYmlsaXR5IHRvIHF1ZXVlLlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLmNvbnRyb2xsZWQoKTtcbiAgICogc291cmNlLnJlcXVlc3QoMyk7IC8vIFJlYWRzIDMgdmFsdWVzXG4gICAqIEBwYXJhbSB7Ym9vbH0gZW5hYmxlUXVldWUgdHJ1dGh5IHZhbHVlIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgc2hvdWxkIGJlIHF1ZXVlZCBwZW5kaW5nIHRoZSBuZXh0IHJlcXVlc3RcbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBkZXRlcm1pbmVzIGhvdyB0aGUgcmVxdWVzdHMgd2lsbCBiZSBzY2hlZHVsZWRcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIG9ubHkgcHJvcGFnYXRlcyB2YWx1ZXMgb24gcmVxdWVzdC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb250cm9sbGVkID0gZnVuY3Rpb24gKGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcblxuICAgIGlmIChlbmFibGVRdWV1ZSAmJiBpc1NjaGVkdWxlcihlbmFibGVRdWV1ZSkpIHtcbiAgICAgIHNjaGVkdWxlciA9IGVuYWJsZVF1ZXVlO1xuICAgICAgZW5hYmxlUXVldWUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmIChlbmFibGVRdWV1ZSA9PSBudWxsKSB7ICBlbmFibGVRdWV1ZSA9IHRydWU7IH1cbiAgICByZXR1cm4gbmV3IENvbnRyb2xsZWRPYnNlcnZhYmxlKHRoaXMsIGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTdG9wQW5kV2FpdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN0b3BBbmRXYWl0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTdG9wQW5kV2FpdE9ic2VydmFibGUgKHNvdXJjZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5zb3VyY2UucmVxdWVzdCgxKTtcbiAgICB9XG5cbiAgICBTdG9wQW5kV2FpdE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN0b3BBbmRXYWl0T2JzZXJ2ZXIobywgdGhpcywgdGhpcy5zdWJzY3JpcHRpb24pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24sXG4gICAgICAgIGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgc2NoZWR1bGVNZXRob2QpXG4gICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgU3RvcEFuZFdhaXRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdWJfXykge1xuICAgICAgaW5oZXJpdHMoU3RvcEFuZFdhaXRPYnNlcnZlciwgX19zdWJfXyk7XG4gICAgICBmdW5jdGlvbiBTdG9wQW5kV2FpdE9ic2VydmVyIChvYnNlcnZlciwgb2JzZXJ2YWJsZSwgY2FuY2VsKSB7XG4gICAgICAgIF9fc3ViX18uY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyU2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgICByZXR1cm4gc2VsZi5vYnNlcnZhYmxlLnNvdXJjZS5yZXF1ZXN0KDEpO1xuICAgICAgfVxuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBkZWZhdWx0U2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIGlubmVyU2NoZWR1bGVNZXRob2QpO1xuICAgICAgfTtcblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgICAgICAgdGhpcy5jYW5jZWwuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY2hlZHVsZURpc3Bvc2FibGUpIHtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF9fc3ViX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBTdG9wQW5kV2FpdE9ic2VydmVyO1xuICAgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gICAgcmV0dXJuIFN0b3BBbmRXYWl0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cblxuICAvKipcbiAgICogQXR0YWNoZXMgYSBzdG9wIGFuZCB3YWl0IG9ic2VydmFibGUgdG8gdGhlIGN1cnJlbnQgb2JzZXJ2YWJsZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEEgc3RvcCBhbmQgd2FpdCBvYnNlcnZhYmxlLlxuICAgKi9cbiAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLnN0b3BBbmRXYWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3RvcEFuZFdhaXRPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBXaW5kb3dlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpbmRvd2VkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaW5kb3dlZE9ic2VydmFibGUoc291cmNlLCB3aW5kb3dTaXplKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5zb3VyY2UucmVxdWVzdChzZWxmLndpbmRvd1NpemUpO1xuICAgIH1cblxuICAgIFdpbmRvd2VkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93ZWRPYnNlcnZlcihvLCB0aGlzLCB0aGlzLnN1YnNjcmlwdGlvbikpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbixcbiAgICAgICAgZGVmYXVsdFNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBzY2hlZHVsZU1ldGhvZClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBXaW5kb3dlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1Yl9fKSB7XG4gICAgICBpbmhlcml0cyhXaW5kb3dlZE9ic2VydmVyLCBfX3N1Yl9fKTtcbiAgICAgIGZ1bmN0aW9uIFdpbmRvd2VkT2JzZXJ2ZXIob2JzZXJ2ZXIsIG9ic2VydmFibGUsIGNhbmNlbCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuY2FuY2VsID0gY2FuY2VsO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICBfX3N1Yl9fLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gaW5uZXJTY2hlZHVsZU1ldGhvZChzLCBzZWxmKSB7XG4gICAgICAgIHJldHVybiBzZWxmLm9ic2VydmFibGUuc291cmNlLnJlcXVlc3Qoc2VsZi5vYnNlcnZhYmxlLndpbmRvd1NpemUpO1xuICAgICAgfVxuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgdGhpcy5yZWNlaXZlZCA9ICsrdGhpcy5yZWNlaXZlZCAlIHRoaXMub2JzZXJ2YWJsZS53aW5kb3dTaXplO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID09PSAwICYmICh0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSA9IGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgaW5uZXJTY2hlZHVsZU1ldGhvZCkpO1xuICAgICAgfTtcblxuICAgICAgV2luZG93ZWRPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfX3N1Yl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gV2luZG93ZWRPYnNlcnZlcjtcbiAgICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgIHJldHVybiBXaW5kb3dlZE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgc2xpZGluZyB3aW5kb3dlZCBvYnNlcnZhYmxlIGJhc2VkIHVwb24gdGhlIHdpbmRvdyBzaXplLlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2luZG93U2l6ZSBUaGUgbnVtYmVyIG9mIGl0ZW1zIGluIHRoZSB3aW5kb3dcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEEgd2luZG93ZWQgb2JzZXJ2YWJsZSBiYXNlZCB1cG9uIHRoZSB3aW5kb3cgc2l6ZS5cbiAgICovXG4gIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dlZCA9IGZ1bmN0aW9uICh3aW5kb3dTaXplKSB7XG4gICAgcmV0dXJuIG5ldyBXaW5kb3dlZE9ic2VydmFibGUodGhpcywgd2luZG93U2l6ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBpcGVzIHRoZSBleGlzdGluZyBPYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSBOb2RlLmpzIFN0cmVhbS5cbiAgICogQHBhcmFtIHtTdHJlYW19IGRlc3QgVGhlIGRlc3RpbmF0aW9uIE5vZGUuanMgc3RyZWFtLlxuICAgKiBAcmV0dXJucyB7U3RyZWFtfSBUaGUgZGVzdGluYXRpb24gc3RyZWFtLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLnBhdXNhYmxlQnVmZmVyZWQoKTtcblxuICAgIGZ1bmN0aW9uIG9uRHJhaW4oKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuXG4gICAgZGVzdC5hZGRMaXN0ZW5lcignZHJhaW4nLCBvbkRyYWluKTtcblxuICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAhZGVzdC53cml0ZSh4KSAmJiBzb3VyY2UucGF1c2UoKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGRlc3QuZW1pdCgnZXJyb3InLCBlcnIpO1xuICAgICAgfSxcbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSGFjayBjaGVjayBiZWNhdXNlIFNURElPIGlzIG5vdCBjbG9zYWJsZVxuICAgICAgICAhZGVzdC5faXNTdGRpbyAmJiBkZXN0LmVuZCgpO1xuICAgICAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uRHJhaW4pO1xuICAgICAgfSk7XG5cbiAgICBzb3VyY2UucmVzdW1lKCk7XG5cbiAgICByZXR1cm4gZGVzdDtcbiAgfTtcblxuICB2YXIgTXVsdGljYXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTXVsdGljYXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBNdWx0aWNhc3RPYnNlcnZhYmxlKHNvdXJjZSwgZm4xLCBmbjIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4xID0gZm4xO1xuICAgICAgdGhpcy5fZm4yID0gZm4yO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTXVsdGljYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgY29ubmVjdGFibGUgPSB0aGlzLnNvdXJjZS5tdWx0aWNhc3QodGhpcy5fZm4xKCkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHRoaXMuX2ZuMihjb25uZWN0YWJsZSkuc3Vic2NyaWJlKG8pLCBjb25uZWN0YWJsZS5jb25uZWN0KCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTXVsdGljYXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBNdWx0aWNhc3RzIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugbm90aWZpY2F0aW9ucyB0aHJvdWdoIGFuIGluc3RhbnRpYXRlZCBzdWJqZWN0IGludG8gYWxsIHVzZXMgb2YgdGhlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLiBFYWNoXG4gICAqIHN1YnNjcmlwdGlvbiB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIGNhdXNlcyBhIHNlcGFyYXRlIG11bHRpY2FzdCBpbnZvY2F0aW9uLCBleHBvc2luZyB0aGUgc2VxdWVuY2UgcmVzdWx0aW5nIGZyb20gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uJ3NcbiAgICogaW52b2NhdGlvbi4gRm9yIHNwZWNpYWxpemF0aW9ucyB3aXRoIGZpeGVkIHN1YmplY3QgdHlwZXMsIHNlZSBQdWJsaXNoLCBQdWJsaXNoTGFzdCwgYW5kIFJlcGxheS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogMSAtIHJlcyA9IHNvdXJjZS5tdWx0aWNhc3Qob2JzZXJ2YWJsZSk7XG4gICAqIDIgLSByZXMgPSBzb3VyY2UubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdWJqZWN0fSBzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3JcbiAgICogRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgYW4gaW50ZXJtZWRpYXRlIHN1YmplY3QgdGhyb3VnaCB3aGljaCB0aGUgc291cmNlIHNlcXVlbmNlJ3MgZWxlbWVudHMgd2lsbCBiZSBtdWx0aWNhc3QgdG8gdGhlIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKiBPcjpcbiAgICogU3ViamVjdCB0byBwdXNoIHNvdXJjZSBlbGVtZW50cyBpbnRvLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIE9wdGlvbmFsIHNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBzdWJqZWN0IHRvIHRoZSBwb2xpY2llcyBlbmZvcmNlZCBieSB0aGUgY3JlYXRlZCBzdWJqZWN0LiBTcGVjaWZpZWQgb25seSBpZiA8cGFyYW1yZWYgbmFtZT1cInN1YmplY3RPclN1YmplY3RTZWxlY3RvclwiIGlzIGEgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tdWx0aWNhc3QgPSBmdW5jdGlvbiAoc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yLCBzZWxlY3Rvcikge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKHN1YmplY3RPclN1YmplY3RTZWxlY3RvcikgP1xuICAgICAgbmV3IE11bHRpY2FzdE9ic2VydmFibGUodGhpcywgc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yLCBzZWxlY3RvcikgOlxuICAgICAgbmV3IENvbm5lY3RhYmxlT2JzZXJ2YWJsZSh0aGlzLCBzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgcmVndWxhciBTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzcmVzID0gc291cmNlLnB1Ymxpc2goKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2UgZnJvbSB0aGUgdGltZSBvZiB0aGUgc3Vic2NyaXB0aW9uIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnB1Ymxpc2ggPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IgJiYgaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFN1YmplY3QoKTsgfSwgc2VsZWN0b3IpIDpcbiAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBTdWJqZWN0KCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgcHVibGlzaCB3aGljaCBjcmVhdGVzIGEgc3Vic2NyaXB0aW9uIHdoZW4gdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgZ29lcyBmcm9tIHplcm8gdG8gb25lLCB0aGVuIHNoYXJlcyB0aGF0IHN1YnNjcmlwdGlvbiB3aXRoIGFsbCBzdWJzZXF1ZW50IG9ic2VydmVycyB1bnRpbCB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyByZXR1cm5zIHRvIHplcm8sIGF0IHdoaWNoIHBvaW50IHRoZSBzdWJzY3JpcHRpb24gaXMgZGlzcG9zZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2hhcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgY29udGFpbmluZyBvbmx5IHRoZSBsYXN0IG5vdGlmaWNhdGlvbi5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIEFzeW5jU3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoTGFzdCgpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hMYXN0KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHNlbGVjdG9yIFtPcHRpb25hbF0gU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgb25seSByZWNlaXZlIHRoZSBsYXN0IG5vdGlmaWNhdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnB1Ymxpc2hMYXN0ID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBBc3luY1N1YmplY3QoKTsgfSwgc2VsZWN0b3IpIDpcbiAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBBc3luY1N1YmplY3QoKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgYW5kIHN0YXJ0cyB3aXRoIGluaXRpYWxWYWx1ZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIEJlaGF2aW9yU3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoVmFsdWUoNDIpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnB1Ymxpc2hWYWx1ZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5zZWxlY3QoZnVuY3Rpb24gKHkpIHsgcmV0dXJuIHkgKiB5OyB9KSB9LCA0Mik7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gT3B0aW9uYWwgc2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBpbW1lZGlhdGVseSByZWNlaXZlIHRoZSBpbml0aWFsIHZhbHVlLCBmb2xsb3dlZCBieSBhbGwgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIGZyb20gdGhlIHRpbWUgb2YgdGhlIHN1YnNjcmlwdGlvbiBvbi5cbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFZhbHVlIEluaXRpYWwgdmFsdWUgcmVjZWl2ZWQgYnkgb2JzZXJ2ZXJzIHVwb24gc3Vic2NyaXB0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnB1Ymxpc2hWYWx1ZSA9IGZ1bmN0aW9uIChpbml0aWFsVmFsdWVPclNlbGVjdG9yLCBpbml0aWFsVmFsdWUpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMiA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmVoYXZpb3JTdWJqZWN0KGluaXRpYWxWYWx1ZSk7XG4gICAgICB9LCBpbml0aWFsVmFsdWVPclNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgQmVoYXZpb3JTdWJqZWN0KGluaXRpYWxWYWx1ZU9yU2VsZWN0b3IpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSBhbmQgc3RhcnRzIHdpdGggYW4gaW5pdGlhbFZhbHVlLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgcHVibGlzaFZhbHVlIHdoaWNoIGNyZWF0ZXMgYSBzdWJzY3JpcHRpb24gd2hlbiB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyBnb2VzIGZyb20gemVybyB0byBvbmUsIHRoZW4gc2hhcmVzIHRoYXQgc3Vic2NyaXB0aW9uIHdpdGggYWxsIHN1YnNlcXVlbnQgb2JzZXJ2ZXJzIHVudGlsIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIHJldHVybnMgdG8gemVybywgYXQgd2hpY2ggcG9pbnQgdGhlIHN1YnNjcmlwdGlvbiBpcyBkaXNwb3NlZC5cbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFZhbHVlIEluaXRpYWwgdmFsdWUgcmVjZWl2ZWQgYnkgb2JzZXJ2ZXJzIHVwb24gc3Vic2NyaXB0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlVmFsdWUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMucHVibGlzaFZhbHVlKGluaXRpYWxWYWx1ZSkucmVmQ291bnQoKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSByZXBsYXlpbmcgbm90aWZpY2F0aW9ucyBzdWJqZWN0IHRvIGEgbWF4aW11bSB0aW1lIGxlbmd0aCBmb3IgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBSZXBsYXlTdWJqZWN0LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShudWxsLCAzKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkobnVsbCwgMywgNTAwKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkobnVsbCwgMywgNTAwLCBzY2hlZHVsZXIpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnJlcGxheShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50YWtlKDYpLnJlcGVhdCgpOyB9LCAzLCA1MDAsIHNjaGVkdWxlcik7XG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciBbT3B0aW9uYWxdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgYWxsIHRoZSBub3RpZmljYXRpb25zIG9mIHRoZSBzb3VyY2Ugc3ViamVjdCB0byB0aGUgc3BlY2lmaWVkIHJlcGxheSBidWZmZXIgdHJpbW1pbmcgcG9saWN5LlxuICAgKiBAcGFyYW0gYnVmZmVyU2l6ZSBbT3B0aW9uYWxdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHdpbmRvd1NpemUgW09wdGlvbmFsXSBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gc2NoZWR1bGVyIFtPcHRpb25hbF0gU2NoZWR1bGVyIHdoZXJlIGNvbm5lY3RlZCBvYnNlcnZlcnMgd2l0aGluIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmVwbGF5ID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gc2VsZWN0b3IgJiYgaXNGdW5jdGlvbihzZWxlY3RvcikgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkgeyByZXR1cm4gbmV3IFJlcGxheVN1YmplY3QoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKTsgfSwgc2VsZWN0b3IpIDpcbiAgICAgIHRoaXMubXVsdGljYXN0KG5ldyBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIHJlcGxheWluZyBub3RpZmljYXRpb25zIHN1YmplY3QgdG8gYSBtYXhpbXVtIHRpbWUgbGVuZ3RoIGZvciB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHJlcGxheSB3aGljaCBjcmVhdGVzIGEgc3Vic2NyaXB0aW9uIHdoZW4gdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgZ29lcyBmcm9tIHplcm8gdG8gb25lLCB0aGVuIHNoYXJlcyB0aGF0IHN1YnNjcmlwdGlvbiB3aXRoIGFsbCBzdWJzZXF1ZW50IG9ic2VydmVycyB1bnRpbCB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyByZXR1cm5zIHRvIHplcm8sIGF0IHdoaWNoIHBvaW50IHRoZSBzdWJzY3JpcHRpb24gaXMgZGlzcG9zZWQuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2Uuc2hhcmVSZXBsYXkoMyk7XG4gICAqIHZhciByZXMgPSBzb3VyY2Uuc2hhcmVSZXBsYXkoMywgNTAwKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5zaGFyZVJlcGxheSgzLCA1MDAsIHNjaGVkdWxlcik7XG4gICAqXG5cbiAgICogQHBhcmFtIGJ1ZmZlclNpemUgW09wdGlvbmFsXSBNYXhpbXVtIGVsZW1lbnQgY291bnQgb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSB3aW5kb3cgW09wdGlvbmFsXSBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gc2NoZWR1bGVyIFtPcHRpb25hbF0gU2NoZWR1bGVyIHdoZXJlIGNvbm5lY3RlZCBvYnNlcnZlcnMgd2l0aGluIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2hhcmVSZXBsYXkgPSBmdW5jdGlvbiAoYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHRoaXMucmVwbGF5KG51bGwsIGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikucmVmQ291bnQoKTtcbiAgfTtcblxuICB2YXIgSW5uZXJTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAocywgbykge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX28gPSBvO1xuICB9O1xuXG4gIElubmVyU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fcy5pc0Rpc3Bvc2VkICYmIHRoaXMuX28gIT09IG51bGwpIHtcbiAgICAgIHZhciBpZHggPSB0aGlzLl9zLm9ic2VydmVycy5pbmRleE9mKHRoaXMuX28pO1xuICAgICAgdGhpcy5fcy5vYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICB0aGlzLl9vID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgdmFyIFJlZkNvdW50T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVmQ291bnRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlZkNvdW50T2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fY291bnQgPSAwO1xuICAgICAgdGhpcy5fY29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVmQ291bnRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyk7XG4gICAgICArK3RoaXMuX2NvdW50ID09PSAxICYmICh0aGlzLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbiA9IHRoaXMuc291cmNlLmNvbm5lY3QoKSk7XG4gICAgICByZXR1cm4gbmV3IFJlZkNvdW50RGlzcG9zYWJsZSh0aGlzLCBzdWJzY3JpcHRpb24pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBSZWZDb3VudERpc3Bvc2FibGUocCwgcykge1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIFJlZkNvdW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3MuZGlzcG9zZSgpO1xuICAgICAgICAtLXRoaXMuX3AuX2NvdW50ID09PSAwICYmIHRoaXMuX3AuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZkNvdW50T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDb25uZWN0YWJsZU9ic2VydmFibGUgPSBSeC5Db25uZWN0YWJsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbm5lY3RhYmxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25uZWN0YWJsZU9ic2VydmFibGUoc291cmNlLCBzdWJqZWN0KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgdGhpcy5fc291cmNlID0gc291cmNlLmFzT2JzZXJ2YWJsZSgpO1xuICAgICAgdGhpcy5fc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDb25uZWN0RGlzcG9zYWJsZShwYXJlbnQsIHN1YnNjcmlwdGlvbikge1xuICAgICAgdGhpcy5fcCA9IHBhcmVudDtcbiAgICAgIHRoaXMuX3MgPSBzdWJzY3JpcHRpb247XG4gICAgfVxuXG4gICAgQ29ubmVjdERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fcykge1xuICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5fcyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3AuX2Nvbm5lY3Rpb24gPSBudWxsO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuX2Nvbm5lY3Rpb24pIHtcbiAgICAgICAgaWYgKHRoaXMuX3N1YmplY3QuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5fc291cmNlLnN1YnNjcmliZSh0aGlzLl9zdWJqZWN0KTtcbiAgICAgICAgdGhpcy5fY29ubmVjdGlvbiA9IG5ldyBDb25uZWN0RGlzcG9zYWJsZSh0aGlzLCBzdWJzY3JpcHRpb24pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb247XG4gICAgfTtcblxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3ViamVjdC5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIENvbm5lY3RhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVmQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZkNvdW50T2JzZXJ2YWJsZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbm5lY3RhYmxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuIFRoaXMgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBjYW4gYmUgcmVzdWJzY3JpYmVkIHRvLCBldmVuIGlmIGFsbCBwcmlvciBzdWJzY3JpcHRpb25zIGhhdmUgZW5kZWQuICh1bmxpa2UgYC5wdWJsaXNoKCkucmVmQ291bnQoKWApXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2luZ2xlSW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcywgaGFzT2JzZXJ2YWJsZSA9IGZhbHNlLCBvYnNlcnZhYmxlO1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JzZXJ2YWJsZSgpIHtcbiAgICAgIGlmICghaGFzT2JzZXJ2YWJsZSkge1xuICAgICAgICBoYXNPYnNlcnZhYmxlID0gdHJ1ZTtcbiAgICAgICAgb2JzZXJ2YWJsZSA9IHNvdXJjZVsnZmluYWxseSddKGZ1bmN0aW9uKCkgeyBoYXNPYnNlcnZhYmxlID0gZmFsc2U7IH0pLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBnZXRPYnNlcnZhYmxlKCkuc3Vic2NyaWJlKG8pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ29ycmVsYXRlcyB0aGUgZWxlbWVudHMgb2YgdHdvIHNlcXVlbmNlcyBiYXNlZCBvbiBvdmVybGFwcGluZyBkdXJhdGlvbnMuXG4gICAqXG4gICAqICBAcGFyYW0ge09ic2VydmFibGV9IHJpZ2h0IFRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGpvaW4gZWxlbWVudHMgZm9yLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gbGVmdER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSBsZWZ0IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzZWQgdG8gZGV0ZXJtaW5lIG92ZXJsYXAuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSByaWdodER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgQSBmdW5jdGlvbiBpbnZva2VkIHRvIGNvbXB1dGUgYSByZXN1bHQgZWxlbWVudCBmb3IgYW55IHR3byBvdmVybGFwcGluZyBlbGVtZW50cyBvZiB0aGUgbGVmdCBhbmQgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuIFRoZSBwYXJhbWV0ZXJzIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gY29ycmVzcG9uZCB3aXRoIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBsZWZ0IGFuZCByaWdodCBzb3VyY2Ugc2VxdWVuY2VzIGZvciB3aGljaCBvdmVybGFwIG9jY3Vycy5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgcmVzdWx0IGVsZW1lbnRzIGNvbXB1dGVkIGZyb20gc291cmNlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhbiBvdmVybGFwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5qb2luID0gZnVuY3Rpb24gKHJpZ2h0LCBsZWZ0RHVyYXRpb25TZWxlY3RvciwgcmlnaHREdXJhdGlvblNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHZhciBsZWZ0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgbGVmdERvbmUgPSBmYWxzZSwgcmlnaHREb25lID0gZmFsc2U7XG4gICAgICB2YXIgbGVmdElkID0gMCwgcmlnaHRJZCA9IDA7XG4gICAgICB2YXIgbGVmdE1hcCA9IG5ldyBNYXAoKSwgcmlnaHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH07XG5cbiAgICAgIGdyb3VwLmFkZChsZWZ0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGlkID0gbGVmdElkKyssIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgICAgICBsZWZ0TWFwLnNldChpZCwgdmFsdWUpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChsZWZ0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTsgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcFsnZGVsZXRlJ10oaWQpICYmIGxlZnRNYXAuc2l6ZSA9PT0gMCAmJiBsZWZ0RG9uZSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICByaWdodE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpKHZhbHVlLCB2KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxlZnREb25lID0gdHJ1ZTtcbiAgICAgICAgICAocmlnaHREb25lIHx8IGxlZnRNYXAuc2l6ZSA9PT0gMCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgZ3JvdXAuYWRkKHJpZ2h0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmlnaHRJZCsrLCBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICAgICAgcmlnaHRNYXAuc2V0KGlkLCB2YWx1ZSk7XG4gICAgICAgICAgZ3JvdXAuYWRkKG1kKTtcblxuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKHJpZ2h0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTsgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmlnaHRNYXBbJ2RlbGV0ZSddKGlkKSAmJiByaWdodE1hcC5zaXplID09PSAwICYmIHJpZ2h0RG9uZSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChyZXN1bHRTZWxlY3RvcikodiwgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUVycm9yLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmlnaHREb25lID0gdHJ1ZTtcbiAgICAgICAgICAobGVmdERvbmUgfHwgcmlnaHRNYXAuc2l6ZSA9PT0gMCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9LCBsZWZ0KTtcbiAgfTtcblxuICAvKipcbiAgICogIENvcnJlbGF0ZXMgdGhlIGVsZW1lbnRzIG9mIHR3byBzZXF1ZW5jZXMgYmFzZWQgb24gb3ZlcmxhcHBpbmcgZHVyYXRpb25zLCBhbmQgZ3JvdXBzIHRoZSByZXN1bHRzLlxuICAgKlxuICAgKiAgQHBhcmFtIHtPYnNlcnZhYmxlfSByaWdodCBUaGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBqb2luIGVsZW1lbnRzIGZvci5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IGxlZnREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgbGVmdCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmlnaHREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNlZCB0byBkZXRlcm1pbmUgb3ZlcmxhcC5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIEEgZnVuY3Rpb24gaW52b2tlZCB0byBjb21wdXRlIGEgcmVzdWx0IGVsZW1lbnQgZm9yIGFueSBlbGVtZW50IG9mIHRoZSBsZWZ0IHNlcXVlbmNlIHdpdGggb3ZlcmxhcHBpbmcgZWxlbWVudHMgZnJvbSB0aGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVGhlIGZpcnN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGlzIGFuIGVsZW1lbnQgb2YgdGhlIGxlZnQgc2VxdWVuY2UuIFRoZSBzZWNvbmQgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gaXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGVsZW1lbnRzIGZyb20gdGhlIHJpZ2h0IHNlcXVlbmNlIHRoYXQgb3ZlcmxhcCB3aXRoIHRoZSBsZWZ0IHNlcXVlbmNlJ3MgZWxlbWVudC5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgcmVzdWx0IGVsZW1lbnRzIGNvbXB1dGVkIGZyb20gc291cmNlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhbiBvdmVybGFwcGluZyBkdXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5ncm91cEpvaW4gPSBmdW5jdGlvbiAocmlnaHQsIGxlZnREdXJhdGlvblNlbGVjdG9yLCByaWdodER1cmF0aW9uU2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIHZhciByID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShncm91cCk7XG4gICAgICB2YXIgbGVmdE1hcCA9IG5ldyBNYXAoKSwgcmlnaHRNYXAgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgbGVmdElkID0gMCwgcmlnaHRJZCA9IDA7XG4gICAgICB2YXIgaGFuZGxlRXJyb3IgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgdi5vbkVycm9yKGUpOyB9OyB9O1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVFcnJvcihlKSB7IH07XG5cbiAgICAgIGdyb3VwLmFkZChsZWZ0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgIHZhciBpZCA9IGxlZnRJZCsrO1xuICAgICAgICAgIGxlZnRNYXAuc2V0KGlkLCBzKTtcblxuICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChyZXN1bHRTZWxlY3RvcikodmFsdWUsIGFkZFJlZihzLCByKSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihyZXN1bHQuZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG5cbiAgICAgICAgICByaWdodE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHMub25OZXh0KHYpOyB9KTtcblxuICAgICAgICAgIHZhciBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChsZWZ0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihkdXJhdGlvbi5lKSk7XG4gICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcFsnZGVsZXRlJ10oaWQpICYmIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkgeyBvLm9uQ29tcGxldGVkKCk7IH0pXG4gICAgICApO1xuXG4gICAgICBncm91cC5hZGQocmlnaHQuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgaWQgPSByaWdodElkKys7XG4gICAgICAgICAgcmlnaHRNYXAuc2V0KGlkLCB2YWx1ZSk7XG5cbiAgICAgICAgICB2YXIgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICBncm91cC5hZGQobWQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2gocmlnaHREdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGR1cmF0aW9uLmUpKTtcbiAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByaWdodE1hcFsnZGVsZXRlJ10oaWQpO1xuICAgICAgICAgICAgICBncm91cC5yZW1vdmUobWQpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHYub25OZXh0KHZhbHVlKTsgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBsZWZ0KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzLlxuICAgKiAgQHBhcmFtIHtNaXhlZH0gYnVmZmVyT3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciBPYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGRlbm90ZSB0aGUgY3JlYXRpb24gb2YgbmV3IHdpbmRvd3MsIG9yLCBhIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBib3VuZGFyaWVzIG9mIHRoZSBwcm9kdWNlZCB3aW5kb3dzIChhIG5ldyB3aW5kb3cgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvbmUgaXMgY2xvc2VkLCByZXN1bHRpbmcgaW4gbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MpLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW2J1ZmZlckNsb3NpbmdTZWxlY3Rvcl0gQSBmdW5jdGlvbiBpbnZva2VkIHRvIGRlZmluZSB0aGUgY2xvc2luZyBvZiBlYWNoIHByb2R1Y2VkIHdpbmRvdy4gSWYgYSBjbG9zaW5nIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIHNwZWNpZmllZCBmb3IgdGhlIGZpcnN0IHBhcmFtZXRlciwgdGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZC5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLndpbmRvdy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gICAgICAuZmxhdE1hcCh0b0FycmF5KTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIHdpbmRvd3MuXG4gICAqXG4gICAqICBAcGFyYW0ge01peGVkfSB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yIE9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgZGVub3RlIHRoZSBjcmVhdGlvbiBvZiBuZXcgd2luZG93cywgb3IsIGEgZnVuY3Rpb24gaW52b2tlZCB0byBkZWZpbmUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHByb2R1Y2VkIHdpbmRvd3MgKGEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIHdoZW4gdGhlIHByZXZpb3VzIG9uZSBpcyBjbG9zZWQsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgd2luZG93cykuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbd2luZG93Q2xvc2luZ1NlbGVjdG9yXSBBIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBjbG9zaW5nIG9mIGVhY2ggcHJvZHVjZWQgd2luZG93LiBJZiBhIGNsb3Npbmcgc2VsZWN0b3IgZnVuY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygd2luZG93cy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aW5kb3cgPSBmdW5jdGlvbiAod2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3Rvciwgd2luZG93Q2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGFyZ3VtZW50c1swXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIG9ic2VydmFibGVXaW5kb3dXaXRoQm91bmRhcmllcy5jYWxsKHRoaXMsIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IgPT09ICdmdW5jdGlvbicgP1xuICAgICAgb2JzZXJ2YWJsZVdpbmRvd1dpdGhDbG9zaW5nU2VsZWN0b3IuY2FsbCh0aGlzLCB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yKSA6XG4gICAgICBvYnNlcnZhYmxlV2luZG93V2l0aE9wZW5pbmdzLmNhbGwodGhpcywgd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3Rvciwgd2luZG93Q2xvc2luZ1NlbGVjdG9yKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlV2luZG93V2l0aE9wZW5pbmdzKHdpbmRvd09wZW5pbmdzLCB3aW5kb3dDbG9zaW5nU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gd2luZG93T3BlbmluZ3MuZ3JvdXBKb2luKHRoaXMsIHdpbmRvd0Nsb3NpbmdTZWxlY3Rvciwgb2JzZXJ2YWJsZUVtcHR5LCBmdW5jdGlvbiAoXywgd2luKSB7XG4gICAgICByZXR1cm4gd2luO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVdpbmRvd1dpdGhCb3VuZGFyaWVzKHdpbmRvd0JvdW5kYXJpZXMpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgd2luID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgIHIgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGQpO1xuXG4gICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuXG4gICAgICBkLmFkZChzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHdpbi5vbk5leHQoeCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG5cbiAgICAgIGlzUHJvbWlzZSh3aW5kb3dCb3VuZGFyaWVzKSAmJiAod2luZG93Qm91bmRhcmllcyA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh3aW5kb3dCb3VuZGFyaWVzKSk7XG5cbiAgICAgIGQuYWRkKHdpbmRvd0JvdW5kYXJpZXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh3KSB7XG4gICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB3aW4gPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICB3aW4ub25FcnJvcihlcnIpO1xuICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycik7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVdpbmRvd1dpdGhDbG9zaW5nU2VsZWN0b3Iod2luZG93Q2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIG0gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBkID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUobSksXG4gICAgICAgIHIgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGQpLFxuICAgICAgICB3aW4gPSBuZXcgU3ViamVjdCgpO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZih3aW4sIHIpKTtcbiAgICAgIGQuYWRkKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB3aW4ub25OZXh0KHgpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdpbmRvd0Nsb3NlICgpIHtcbiAgICAgICAgdmFyIHdpbmRvd0Nsb3NlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHdpbmRvd0Nsb3NlID0gd2luZG93Q2xvc2luZ1NlbGVjdG9yKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzUHJvbWlzZSh3aW5kb3dDbG9zZSkgJiYgKHdpbmRvd0Nsb3NlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHdpbmRvd0Nsb3NlKSk7XG5cbiAgICAgICAgdmFyIG0xID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShtMSk7XG4gICAgICAgIG0xLnNldERpc3Bvc2FibGUod2luZG93Q2xvc2UudGFrZSgxKS5zdWJzY3JpYmUobm9vcCwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgd2luID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuICAgICAgICAgIGNyZWF0ZVdpbmRvd0Nsb3NlKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlV2luZG93Q2xvc2UoKTtcbiAgICAgIHJldHVybiByO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICB2YXIgUGFpcndpc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyd2lzZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcndpc2VPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYWlyd2lzZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgUGFpcndpc2VPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYWlyd2lzZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgUGFpcndpc2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyd2lzZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhaXJ3aXNlT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gbnVsbDtcbiAgICAgIHRoaXMuX2hwID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYWlyd2lzZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9ocCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dChbdGhpcy5fcCwgeF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faHAgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5fcCA9IHg7XG4gICAgfTtcbiAgICBQYWlyd2lzZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHsgdGhpcy5fby5vbkVycm9yKGVycik7IH07XG4gICAgUGFpcndpc2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gUGFpcndpc2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgb2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIG9uIHRoZSBzZWNvbmQgYW5kIHN1YnNlcXVlbnQgdHJpZ2dlcmluZ3Mgb2YgdGhlIGlucHV0IG9ic2VydmFibGUuXG4gICAqIFRoZSBOdGggdHJpZ2dlcmluZyBvZiB0aGUgaW5wdXQgb2JzZXJ2YWJsZSBwYXNzZXMgdGhlIGFyZ3VtZW50cyBmcm9tIHRoZSBOLTF0aCBhbmQgTnRoIHRyaWdnZXJpbmcgYXMgYSBwYWlyLlxuICAgKiBUaGUgYXJndW1lbnQgcGFzc2VkIHRvIHRoZSBOLTF0aCB0cmlnZ2VyaW5nIGlzIGhlbGQgaW4gaGlkZGVuIGludGVybmFsIHN0YXRlIHVudGlsIHRoZSBOdGggdHJpZ2dlcmluZyBvY2N1cnMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgb24gc3VjY2Vzc2l2ZSBwYWlycyBvZiBvYnNlcnZhdGlvbnMgZnJvbSB0aGUgaW5wdXQgb2JzZXJ2YWJsZSBhcyBhbiBhcnJheS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wYWlyd2lzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFBhaXJ3aXNlT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0d28gb2JzZXJ2YWJsZXMgd2hpY2ggcGFydGl0aW9uIHRoZSBvYnNlcnZhdGlvbnMgb2YgdGhlIHNvdXJjZSBieSB0aGUgZ2l2ZW4gZnVuY3Rpb24uXG4gICAqIFRoZSBmaXJzdCB3aWxsIHRyaWdnZXIgb2JzZXJ2YXRpb25zIGZvciB0aG9zZSB2YWx1ZXMgZm9yIHdoaWNoIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLlxuICAgKiBUaGUgc2Vjb25kIHdpbGwgdHJpZ2dlciBvYnNlcnZhdGlvbnMgZm9yIHRob3NlIHZhbHVlcyB3aGVyZSB0aGUgcHJlZGljYXRlIHJldHVybnMgZmFsc2UuXG4gICAqIFRoZSBwcmVkaWNhdGUgaXMgZXhlY3V0ZWQgb25jZSBmb3IgZWFjaCBzdWJzY3JpYmVkIG9ic2VydmVyLlxuICAgKiBCb3RoIGFsc28gcHJvcGFnYXRlIGFsbCBlcnJvciBvYnNlcnZhdGlvbnMgYXJpc2luZyBmcm9tIHRoZSBzb3VyY2UgYW5kIGVhY2ggY29tcGxldGVzXG4gICAqIHdoZW4gdGhlIHNvdXJjZSBjb21wbGV0ZXMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZVxuICAgKiAgICBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoaWNoIG91dHB1dCBPYnNlcnZhYmxlIHdpbGwgdHJpZ2dlciBhIHBhcnRpY3VsYXIgb2JzZXJ2YXRpb24uXG4gICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICogICAgQW4gYXJyYXkgb2Ygb2JzZXJ2YWJsZXMuIFRoZSBmaXJzdCB0cmlnZ2VycyB3aGVuIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLFxuICAgKiAgICBhbmQgdGhlIHNlY29uZCB0cmlnZ2VycyB3aGVuIHRoZSBwcmVkaWNhdGUgcmV0dXJucyBmYWxzZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhcnRpdGlvbiA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLmZpbHRlcihwcmVkaWNhdGUsIHRoaXNBcmcpLFxuICAgICAgdGhpcy5maWx0ZXIoZnVuY3Rpb24gKHgsIGksIG8pIHsgcmV0dXJuICFmbih4LCBpLCBvKTsgfSlcbiAgICBdO1xuICB9O1xuXG4gIHZhciBXaGlsZUVudW1lcmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2hpbGVFbnVtZXJhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdoaWxlRW51bWVyYWJsZShjLCBzKSB7XG4gICAgICB0aGlzLmMgPSBjO1xuICAgICAgdGhpcy5zID0gcztcbiAgICB9XG4gICAgV2hpbGVFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5jKCkgP1xuICAgICAgICAgICB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogc2VsZi5zIH0gOlxuICAgICAgICAgICB7IGRvbmU6IHRydWUsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBXaGlsZUVudW1lcmFibGU7XG4gIH0oRW51bWVyYWJsZSkpO1xuICBcbiAgZnVuY3Rpb24gZW51bWVyYWJsZVdoaWxlKGNvbmRpdGlvbiwgc291cmNlKSB7XG4gICAgcmV0dXJuIG5ldyBXaGlsZUVudW1lcmFibGUoY29uZGl0aW9uLCBzb3VyY2UpO1xuICB9ICBcblxuICAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiB0aGUgc291cmNlIHNlcXVlbmNlLCB3aXRob3V0IHNoYXJpbmcgc3Vic2NyaXB0aW9ucy5cbiAgICogIFRoaXMgb3BlcmF0b3IgYWxsb3dzIGZvciBhIGZsdWVudCBzdHlsZSBvZiB3cml0aW5nIHF1ZXJpZXMgdGhhdCB1c2UgdGhlIHNhbWUgc2VxdWVuY2UgbXVsdGlwbGUgdGltZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBzaGFyaW5nIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5sZXRCaW5kID0gb2JzZXJ2YWJsZVByb3RvWydsZXQnXSA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmModGhpcyk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9ic2VydmFibGUgY29sbGVjdGlvbiBjb250YWlucyB2YWx1ZXMuIFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaWYoY29uZGl0aW9uLCBvYnMxKTtcbiAgICogIDIgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmlmKGNvbmRpdGlvbiwgb2JzMSwgb2JzMik7XG4gICAqICAzIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pZihjb25kaXRpb24sIG9iczEsIHNjaGVkdWxlcik7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHRoZW5Tb3VyY2Ugb3IgZWxzZVNvdXJjZSB3aWxsIGJlIHJ1bi5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSB0aGVuU291cmNlIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBbZWxzZVNvdXJjZV0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyBmYWxzZS4gSWYgdGhpcyBpcyBub3QgcHJvdmlkZWQsIGl0IGRlZmF1bHRzIHRvIFJ4Lk9ic2VydmFiZS5FbXB0eSB3aXRoIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBlaXRoZXIgdGhlIHRoZW5Tb3VyY2Ugb3IgZWxzZVNvdXJjZS5cbiAgICovXG4gIE9ic2VydmFibGVbJ2lmJ10gPSBmdW5jdGlvbiAoY29uZGl0aW9uLCB0aGVuU291cmNlLCBlbHNlU291cmNlT3JTY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsc2VTb3VyY2VPclNjaGVkdWxlciB8fCAoZWxzZVNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KCkpO1xuXG4gICAgICBpc1Byb21pc2UodGhlblNvdXJjZSkgJiYgKHRoZW5Tb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UodGhlblNvdXJjZSkpO1xuICAgICAgaXNQcm9taXNlKGVsc2VTb3VyY2VPclNjaGVkdWxlcikgJiYgKGVsc2VTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShlbHNlU291cmNlT3JTY2hlZHVsZXIpKTtcblxuICAgICAgLy8gQXNzdW1lIGEgc2NoZWR1bGVyIGZvciBlbXB0eSBvbmx5XG4gICAgICB0eXBlb2YgZWxzZVNvdXJjZU9yU2NoZWR1bGVyLm5vdyA9PT0gJ2Z1bmN0aW9uJyAmJiAoZWxzZVNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KGVsc2VTb3VyY2VPclNjaGVkdWxlcikpO1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbigpID8gdGhlblNvdXJjZSA6IGVsc2VTb3VyY2VPclNjaGVkdWxlcjtcbiAgICB9KTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBDb25jYXRlbmF0ZXMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9idGFpbmVkIGJ5IHJ1bm5pbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZm9yIGVhY2ggZWxlbWVudCBpbiBzb3VyY2UuXG4gICAqIFRoZXJlIGlzIGFuIGFsaWFzIGZvciB0aGlzIG1ldGhvZCBjYWxsZWQgJ2ZvckluJyBmb3IgYnJvd3NlcnMgPElFOVxuICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2VzIEFuIGFycmF5IG9mIHZhbHVlcyB0byB0dXJuIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgQSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGl0ZW0gaW4gdGhlIHNvdXJjZXMgYXJyYXkgdG8gdHVybiBpdCBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gdGhlIGNvbmNhdGVuYXRlZCBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICovXG4gIE9ic2VydmFibGVbJ2ZvciddID0gT2JzZXJ2YWJsZS5mb3JJbiA9IGZ1bmN0aW9uIChzb3VyY2VzLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBlbnVtZXJhYmxlT2Yoc291cmNlcywgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLmNvbmNhdCgpO1xuICB9O1xuXG4gICAvKipcbiAgICogIFJlcGVhdHMgc291cmNlIGFzIGxvbmcgYXMgY29uZGl0aW9uIGhvbGRzIGVtdWxhdGluZyBhIHdoaWxlIGxvb3AuXG4gICAqIFRoZXJlIGlzIGFuIGFsaWFzIGZvciB0aGlzIG1ldGhvZCBjYWxsZWQgJ3doaWxlRG8nIGZvciBicm93c2VycyA8SUU5XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHNvdXJjZSB3aWxsIGJlIHJlcGVhdGVkLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNvdXJjZSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyB0cnVlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyByZXBlYXRlZCBhcyBsb25nIGFzIHRoZSBjb25kaXRpb24gaG9sZHMuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVdoaWxlRG8gPSBPYnNlcnZhYmxlWyd3aGlsZSddID0gT2JzZXJ2YWJsZS53aGlsZURvID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgc291cmNlKSB7XG4gICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICByZXR1cm4gZW51bWVyYWJsZVdoaWxlKGNvbmRpdGlvbiwgc291cmNlKS5jb25jYXQoKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBSZXBlYXRzIHNvdXJjZSBhcyBsb25nIGFzIGNvbmRpdGlvbiBob2xkcyBlbXVsYXRpbmcgYSBkbyB3aGlsZSBsb29wLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gVGhlIGNvbmRpdGlvbiB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSBzb3VyY2Ugd2lsbCBiZSByZXBlYXRlZC5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzb3VyY2UgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgcmVwZWF0ZWQgYXMgbG9uZyBhcyB0aGUgY29uZGl0aW9uIGhvbGRzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvV2hpbGUgPSBmdW5jdGlvbiAoY29uZGl0aW9uKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQoW3RoaXMsIG9ic2VydmFibGVXaGlsZURvKGNvbmRpdGlvbiwgdGhpcyldKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBVc2VzIHNlbGVjdG9yIHRvIGRldGVybWluZSB3aGljaCBzb3VyY2UgaW4gc291cmNlcyB0byB1c2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFRoZSBmdW5jdGlvbiB3aGljaCBleHRyYWN0cyB0aGUgdmFsdWUgZm9yIHRvIHRlc3QgaW4gYSBjYXNlIHN0YXRlbWVudC5cbiAgICogQHBhcmFtIHtBcnJheX0gc291cmNlcyBBIG9iamVjdCB3aGljaCBoYXMga2V5cyB3aGljaCBjb3JyZXNwb25kIHRvIHRoZSBjYXNlIHN0YXRlbWVudCBsYWJlbHMuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gW2Vsc2VTb3VyY2VdIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgc291cmNlcyBhcmUgbm90IG1hdGNoZWQuIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCBpdCBkZWZhdWx0cyB0byBSeC5PYnNlcnZhYmUuZW1wdHkgd2l0aCB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICpcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgZGV0ZXJtaW5lZCBieSBhIGNhc2Ugc3RhdGVtZW50LlxuICAgKi9cbiAgT2JzZXJ2YWJsZVsnY2FzZSddID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBzb3VyY2VzLCBkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzUHJvbWlzZShkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpICYmIChkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSk7XG4gICAgICBkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgfHwgKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVFbXB0eSgpKTtcblxuICAgICAgaXNTY2hlZHVsZXIoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSAmJiAoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikpO1xuXG4gICAgICB2YXIgcmVzdWx0ID0gc291cmNlc1tzZWxlY3RvcigpXTtcbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG5cbiAgICAgIHJldHVybiByZXN1bHQgfHwgZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBFeHBhbmRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV4cGFuZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXhwYW5kT2JzZXJ2YWJsZShzb3VyY2UsIGZuLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKGFyZ3MsIHJlY3Vyc2UpIHtcbiAgICAgIHZhciBzdGF0ZSA9IGFyZ3NbMF0sIHNlbGYgPSBhcmdzWzFdO1xuICAgICAgdmFyIHdvcms7XG4gICAgICBpZiAoc3RhdGUucS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdvcmsgPSBzdGF0ZS5xLnNoaWZ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5pc0FjcXVpcmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBtMSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuZC5hZGQobTEpO1xuICAgICAgbTEuc2V0RGlzcG9zYWJsZSh3b3JrLnN1YnNjcmliZShuZXcgRXhwYW5kT2JzZXJ2ZXIoc3RhdGUsIHNlbGYsIG0xKSkpO1xuICAgICAgcmVjdXJzZShbc3RhdGUsIHNlbGZdKTtcbiAgICB9XG5cbiAgICBFeHBhbmRPYnNlcnZhYmxlLnByb3RvdHlwZS5fZW5zdXJlQWN0aXZlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICB2YXIgaXNPd25lciA9IGZhbHNlO1xuICAgICAgaWYgKHN0YXRlLnEubGVuZ3RoID4gMCkge1xuICAgICAgICBpc093bmVyID0gIXN0YXRlLmlzQWNxdWlyZWQ7XG4gICAgICAgIHN0YXRlLmlzQWNxdWlyZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaXNPd25lciAmJiBzdGF0ZS5tLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKFtzdGF0ZSwgdGhpc10sIHNjaGVkdWxlUmVjdXJzaXZlKSk7XG4gICAgfTtcblxuICAgIEV4cGFuZE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIG0gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBkID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUobSksXG4gICAgICAgIHN0YXRlID0ge1xuICAgICAgICAgIHE6IFtdLFxuICAgICAgICAgIG06IG0sXG4gICAgICAgICAgZDogZCxcbiAgICAgICAgICBhY3RpdmVDb3VudDogMCxcbiAgICAgICAgICBpc0FjcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICBvOiBvXG4gICAgICAgIH07XG5cbiAgICAgIHN0YXRlLnEucHVzaCh0aGlzLnNvdXJjZSk7XG4gICAgICBzdGF0ZS5hY3RpdmVDb3VudCsrO1xuICAgICAgdGhpcy5fZW5zdXJlQWN0aXZlKHN0YXRlKTtcbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXhwYW5kT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFeHBhbmRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHBhbmRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHBhbmRPYnNlcnZlcihzdGF0ZSwgcGFyZW50LCBtMSkge1xuICAgICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgICAgdGhpcy5fcCA9IHBhcmVudDtcbiAgICAgIHRoaXMuX20xID0gbTE7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHBhbmRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zLm8ub25OZXh0KHgpO1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX3AuX2ZuKSh4KTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIHRoaXMuX3MucS5wdXNoKHJlc3VsdCk7XG4gICAgICB0aGlzLl9zLmFjdGl2ZUNvdW50Kys7XG4gICAgICB0aGlzLl9wLl9lbnN1cmVBY3RpdmUodGhpcy5fcyk7XG4gICAgfTtcblxuICAgIEV4cGFuZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRXhwYW5kT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuZC5yZW1vdmUodGhpcy5fbTEpO1xuICAgICAgdGhpcy5fcy5hY3RpdmVDb3VudC0tO1xuICAgICAgdGhpcy5fcy5hY3RpdmVDb3VudCA9PT0gMCAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4cGFuZE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgLyoqXG4gICAqICBFeHBhbmRzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgcmVjdXJzaXZlbHkgaW52b2tpbmcgc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBwcm9kdWNlZCBlbGVtZW50LCByZXN1bHRpbmcgaW4gYW5vdGhlciBzZXF1ZW5jZSB0byB3aGljaCB0aGUgc2VsZWN0b3Igd2lsbCBiZSBpbnZva2VkIHJlY3Vyc2l2ZWx5IGFnYWluLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHBlcmZvcm0gdGhlIGV4cGFuc2lvbi4gSWYgbm90IHByb3ZpZGVkLCB0aGlzIGRlZmF1bHRzIHRvIHRoZSBjdXJyZW50IHRocmVhZCBzY2hlZHVsZXIuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBwcm9kdWNlZCBieSB0aGUgcmVjdXJzaXZlIGV4cGFuc2lvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5leHBhbmQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRXhwYW5kT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBGb3JrSm9pbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZvcmtKb2luT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGb3JrSm9pbk9ic2VydmFibGUoc291cmNlcywgY2IpIHtcbiAgICAgIHRoaXMuX3NvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZvcmtKb2luT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICBpZiAodGhpcy5fc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICB2YXIgY291bnQgPSB0aGlzLl9zb3VyY2VzLmxlbmd0aDtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgZmluaXNoZWQ6IGZhbHNlLFxuICAgICAgICBoYXNSZXN1bHRzOiBuZXcgQXJyYXkoY291bnQpLFxuICAgICAgICBoYXNDb21wbGV0ZWQ6IG5ldyBBcnJheShjb3VudCksXG4gICAgICAgIHJlc3VsdHM6IG5ldyBBcnJheShjb3VudClcbiAgICAgIH07XG5cbiAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLl9zb3VyY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLl9zb3VyY2VzW2ldO1xuICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuICAgICAgICBzdWJzY3JpcHRpb25zLmFkZChzb3VyY2Uuc3Vic2NyaWJlKG5ldyBGb3JrSm9pbk9ic2VydmVyKG8sIHN0YXRlLCBpLCB0aGlzLl9jYiwgc3Vic2NyaXB0aW9ucykpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbnM7XG4gICAgfTtcblxuICAgIHJldHVybiBGb3JrSm9pbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRm9ya0pvaW5PYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGb3JrSm9pbk9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZvcmtKb2luT2JzZXJ2ZXIobywgcywgaSwgY2IsIHN1YnMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdWJzID0gc3VicztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKCF0aGlzLl9zLmZpbmlzaGVkKSB7XG4gICAgICAgIHRoaXMuX3MuaGFzUmVzdWx0c1t0aGlzLl9pXSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3MucmVzdWx0c1t0aGlzLl9pXSA9IHg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3MuZmluaXNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgICAgdGhpcy5fc3Vicy5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIEZvcmtKb2luT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5fcy5maW5pc2hlZCkge1xuICAgICAgICBpZiAoIXRoaXMuX3MuaGFzUmVzdWx0c1t0aGlzLl9pXSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcy5oYXNDb21wbGV0ZWRbdGhpcy5faV0gPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3MucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmICghdGhpcy5fcy5oYXNDb21wbGV0ZWRbaV0pIHsgcmV0dXJuOyB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcy5maW5pc2hlZCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCB0aGlzLl9zLnJlc3VsdHMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuXG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZvcmtKb2luT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gICAvKipcbiAgICogIFJ1bnMgYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHBhcmFsbGVsIGFuZCBjb2xsZWN0IHRoZWlyIGxhc3QgZWxlbWVudHMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5mb3JrSm9pbihbb2JzMSwgb2JzMl0pO1xuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuZm9ya0pvaW4ob2JzMSwgb2JzMiwgLi4uKTtcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhbiBhcnJheSBjb2xsZWN0aW5nIHRoZSBsYXN0IGVsZW1lbnRzIG9mIGFsbCB0aGUgaW5wdXQgc2VxdWVuY2VzLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5mb3JrSm9pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IEZvcmtKb2luT2JzZXJ2YWJsZShhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgUnVucyB0d28gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gcGFyYWxsZWwgYW5kIGNvbWJpbmVzIHRoZWlyIGxhc3QgZWxlbWVuZXRzLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgUmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uIHRvIGludm9rZSB3aXRoIHRoZSBsYXN0IGVsZW1lbnRzIG9mIGJvdGggc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSByZXN1bHQgb2YgY2FsbGluZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2l0aCB0aGUgbGFzdCBlbGVtZW50cyBvZiBib3RoIGlucHV0IHNlcXVlbmNlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5mb3JrSm9pbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3NbMF0udW5zaGlmdCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gT2JzZXJ2YWJsZS5mb3JrSm9pbi5hcHBseShudWxsLCBhcmdzKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29tb25hZGljIGJpbmQgb3BlcmF0b3IuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNjaGVkdWxlciBTY2hlZHVsZXIgdXNlZCB0byBleGVjdXRlIHRoZSBvcGVyYXRpb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHRoZSBJbW1lZGlhdGVTY2hlZHVsZXIuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHJlc3VsdHMgZnJvbSB0aGUgY29tb25hZGljIGJpbmQgb3BlcmF0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hbnlTZWxlY3QgPSBvYnNlcnZhYmxlUHJvdG8uZXh0ZW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBSeC5TY2hlZHVsZXIuaW1tZWRpYXRlKTtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjaGFpbjtcblxuICAgICAgcmV0dXJuIHNvdXJjZVxuICAgICAgICAubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIGN1cnIgPSBuZXcgQ2hhaW5PYnNlcnZhYmxlKHgpO1xuXG4gICAgICAgICAgY2hhaW4gJiYgY2hhaW4ub25OZXh0KHgpO1xuICAgICAgICAgIGNoYWluID0gY3VycjtcblxuICAgICAgICAgIHJldHVybiBjdXJyO1xuICAgICAgICB9KVxuICAgICAgICAudGFwKFxuICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgY2hhaW4gJiYgY2hhaW4ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7IGNoYWluICYmIGNoYWluLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgKVxuICAgICAgICAub2JzZXJ2ZU9uKHNjaGVkdWxlcilcbiAgICAgICAgLm1hcChzZWxlY3Rvcik7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgQ2hhaW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDaGFpbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2hhaW5PYnNlcnZhYmxlKGhlYWQpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICAgIHRoaXMudGFpbCA9IG5ldyBBc3luY1N1YmplY3QoKTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKENoYWluT2JzZXJ2YWJsZS5wcm90b3R5cGUsIE9ic2VydmVyLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICAgIGcuYWRkKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgZnVuY3Rpb24gKF8sIHNlbGYpIHtcbiAgICAgICAgICBvLm9uTmV4dChzZWxmLmhlYWQpO1xuICAgICAgICAgIGcuYWRkKHNlbGYudGFpbC5tZXJnZUFsbCgpLnN1YnNjcmliZShvKSk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICByZXR1cm4gZztcbiAgICAgIH0sXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9uTmV4dChPYnNlcnZhYmxlLmVtcHR5KCkpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHRoaXMub25OZXh0KE9ic2VydmFibGVbJ3Rocm93J10oZSkpO1xuICAgICAgfSxcbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdGhpcy50YWlsLm9uTmV4dCh2KTtcbiAgICAgICAgdGhpcy50YWlsLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ2hhaW5PYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBNYXAgPSByb290Lk1hcCB8fCAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE1hcCgpIHtcbiAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgICAgIHRoaXMuX2tleXMgPSBbXTtcbiAgICB9XG5cbiAgICBNYXAucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSA9PT0gLTEpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICB0aGlzLl92YWx1ZXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLnNpemUtLTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICByZXR1cm4gaSA9PT0gLTEgPyB1bmRlZmluZWQgOiB0aGlzLl92YWx1ZXNbaV07XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIHZhciBpID0gdGhpcy5fa2V5cy5pbmRleE9mKGtleSk7XG4gICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XG4gICAgICAgIHRoaXMuX3ZhbHVlcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl92YWx1ZXNbaV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IsIHRoaXNBcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpKyspIHtcbiAgICAgICAgY2IuY2FsbCh0aGlzQXJnLCB0aGlzLl92YWx1ZXNbaV0sIHRoaXMuX2tleXNbaV0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWFwO1xuICB9KCkpO1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogUmVwcmVzZW50cyBhIGpvaW4gcGF0dGVybiBvdmVyIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgZnVuY3Rpb24gUGF0dGVybihwYXR0ZXJucykge1xuICAgIHRoaXMucGF0dGVybnMgPSBwYXR0ZXJucztcbiAgfVxuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhIHBhdHRlcm4gdGhhdCBtYXRjaGVzIHRoZSBjdXJyZW50IHBsYW4gbWF0Y2hlcyBhbmQgd2hlbiB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhcyBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqICBAcGFyYW0gb3RoZXIgT2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBtYXRjaCBpbiBhZGRpdGlvbiB0byB0aGUgY3VycmVudCBwYXR0ZXJuLlxuICAgKiAgQHJldHVybiB7UGF0dGVybn0gUGF0dGVybiBvYmplY3QgdGhhdCBtYXRjaGVzIHdoZW4gYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKi9cbiAgUGF0dGVybi5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKHRoaXMucGF0dGVybnMuY29uY2F0KG90aGVyKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBNYXRjaGVzIHdoZW4gYWxsIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuIChzcGVjaWZpZWQgdXNpbmcgYSBjaGFpbiBvZiBhbmQgb3BlcmF0b3JzKSBoYXZlIGFuIGF2YWlsYWJsZSB2YWx1ZSBhbmQgcHJvamVjdHMgdGhlIHZhbHVlcy5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIHRoYXQgd2lsbCBiZSBpbnZva2VkIHdpdGggYXZhaWxhYmxlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2VzLCBpbiB0aGUgc2FtZSBvcmRlciBvZiB0aGUgc2VxdWVuY2VzIGluIHRoZSBwYXR0ZXJuLlxuICAgKiAgQHJldHVybiB7UGxhbn0gUGxhbiB0aGF0IHByb2R1Y2VzIHRoZSBwcm9qZWN0ZWQgdmFsdWVzLCB0byBiZSBmZWQgKHdpdGggb3RoZXIgcGxhbnMpIHRvIHRoZSB3aGVuIG9wZXJhdG9yLlxuICAgKi9cbiAgUGF0dGVybi5wcm90b3R5cGUudGhlbkRvID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQbGFuKHRoaXMsIHNlbGVjdG9yKTtcbiAgfTtcblxuICBmdW5jdGlvbiBQbGFuKGV4cHJlc3Npb24sIHNlbGVjdG9yKSB7XG4gICAgdGhpcy5leHByZXNzaW9uID0gZXhwcmVzc2lvbjtcbiAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVPbkVycm9yKG8pIHsgcmV0dXJuIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfTsgfVxuICBmdW5jdGlvbiBoYW5kbGVPbk5leHQoc2VsZiwgb2JzZXJ2ZXIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gb25OZXh0ICgpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChzZWxmLnNlbGVjdG9yKS5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG9ic2VydmVyLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICB9O1xuICB9XG5cbiAgUGxhbi5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiAoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCBvYnNlcnZlciwgZGVhY3RpdmF0ZSkge1xuICAgIHZhciBqb2luT2JzZXJ2ZXJzID0gW10sIGVyckhhbmRsZXIgPSBoYW5kbGVPbkVycm9yKG9ic2VydmVyKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5leHByZXNzaW9uLnBhdHRlcm5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBqb2luT2JzZXJ2ZXJzLnB1c2gocGxhbkNyZWF0ZU9ic2VydmVyKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgdGhpcy5leHByZXNzaW9uLnBhdHRlcm5zW2ldLCBlcnJIYW5kbGVyKSk7XG4gICAgfVxuICAgIHZhciBhY3RpdmVQbGFuID0gbmV3IEFjdGl2ZVBsYW4oam9pbk9ic2VydmVycywgaGFuZGxlT25OZXh0KHRoaXMsIG9ic2VydmVyKSwgZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgaiA9IDAsIGpsZW4gPSBqb2luT2JzZXJ2ZXJzLmxlbmd0aDsgaiA8IGpsZW47IGorKykge1xuICAgICAgICBqb2luT2JzZXJ2ZXJzW2pdLnJlbW92ZUFjdGl2ZVBsYW4oYWN0aXZlUGxhbik7XG4gICAgICB9XG4gICAgICBkZWFjdGl2YXRlKGFjdGl2ZVBsYW4pO1xuICAgIH0pO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IGpvaW5PYnNlcnZlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGpvaW5PYnNlcnZlcnNbaV0uYWRkQWN0aXZlUGxhbihhY3RpdmVQbGFuKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjdGl2ZVBsYW47XG4gIH07XG5cbiAgZnVuY3Rpb24gcGxhbkNyZWF0ZU9ic2VydmVyKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgb2JzZXJ2YWJsZSwgb25FcnJvcikge1xuICAgIHZhciBlbnRyeSA9IGV4dGVybmFsU3Vic2NyaXB0aW9ucy5nZXQob2JzZXJ2YWJsZSk7XG4gICAgaWYgKCFlbnRyeSkge1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IEpvaW5PYnNlcnZlcihvYnNlcnZhYmxlLCBvbkVycm9yKTtcbiAgICAgIGV4dGVybmFsU3Vic2NyaXB0aW9ucy5zZXQob2JzZXJ2YWJsZSwgb2JzZXJ2ZXIpO1xuICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH1cbiAgICByZXR1cm4gZW50cnk7XG4gIH1cblxuICBmdW5jdGlvbiBBY3RpdmVQbGFuKGpvaW5PYnNlcnZlckFycmF5LCBvbk5leHQsIG9uQ29tcGxldGVkKSB7XG4gICAgdGhpcy5qb2luT2JzZXJ2ZXJBcnJheSA9IGpvaW5PYnNlcnZlckFycmF5O1xuICAgIHRoaXMub25OZXh0ID0gb25OZXh0O1xuICAgIHRoaXMub25Db21wbGV0ZWQgPSBvbkNvbXBsZXRlZDtcbiAgICB0aGlzLmpvaW5PYnNlcnZlcnMgPSBuZXcgTWFwKCk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBqb2luT2JzZXJ2ZXIgPSB0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldO1xuICAgICAgdGhpcy5qb2luT2JzZXJ2ZXJzLnNldChqb2luT2JzZXJ2ZXIsIGpvaW5PYnNlcnZlcik7XG4gICAgfVxuICB9XG5cbiAgQWN0aXZlUGxhbi5wcm90b3R5cGUuZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmpvaW5PYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAodikgeyB2LnF1ZXVlLnNoaWZ0KCk7IH0pO1xuICB9O1xuXG4gIEFjdGl2ZVBsYW4ucHJvdG90eXBlLm1hdGNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpLCBsZW4sIGhhc1ZhbHVlcyA9IHRydWU7XG4gICAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5qb2luT2JzZXJ2ZXJBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKHRoaXMuam9pbk9ic2VydmVyQXJyYXlbaV0ucXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGhhc1ZhbHVlcyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc1ZhbHVlcykge1xuICAgICAgdmFyIGZpcnN0VmFsdWVzID0gW10sXG4gICAgICAgICAgaXNDb21wbGV0ZWQgPSBmYWxzZTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZmlyc3RWYWx1ZXMucHVzaCh0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldLnF1ZXVlWzBdKTtcbiAgICAgICAgdGhpcy5qb2luT2JzZXJ2ZXJBcnJheVtpXS5xdWV1ZVswXS5raW5kID09PSAnQycgJiYgKGlzQ29tcGxldGVkID0gdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAoaXNDb21wbGV0ZWQpIHtcbiAgICAgICAgdGhpcy5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZmlyc3RWYWx1ZXMubGVuZ3RoOyBpIDwgZmlyc3RWYWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChmaXJzdFZhbHVlc1tpXS52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbk5leHQuYXBwbHkodGhpcywgdmFsdWVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdmFyIEpvaW5PYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSm9pbk9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gSm9pbk9ic2VydmVyKHNvdXJjZSwgb25FcnJvcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMub25FcnJvciA9IG9uRXJyb3I7XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zID0gW107XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIEpvaW5PYnNlcnZlclByb3RvdHlwZSA9IEpvaW5PYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIGlmIChub3RpZmljYXRpb24ua2luZCA9PT0gJ0UnKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMub25FcnJvcihub3RpZmljYXRpb24uZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucXVldWUucHVzaChub3RpZmljYXRpb24pO1xuICAgICAgICB2YXIgYWN0aXZlUGxhbnMgPSB0aGlzLmFjdGl2ZVBsYW5zLnNsaWNlKDApO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYWN0aXZlUGxhbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBhY3RpdmVQbGFuc1tpXS5tYXRjaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5lcnJvciA9IG5vb3A7XG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLmNvbXBsZXRlZCA9IG5vb3A7XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuYWRkQWN0aXZlUGxhbiA9IGZ1bmN0aW9uIChhY3RpdmVQbGFuKSB7XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zLnB1c2goYWN0aXZlUGxhbik7XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLm1hdGVyaWFsaXplKCkuc3Vic2NyaWJlKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLnJlbW92ZUFjdGl2ZVBsYW4gPSBmdW5jdGlvbiAoYWN0aXZlUGxhbikge1xuICAgICAgdGhpcy5hY3RpdmVQbGFucy5zcGxpY2UodGhpcy5hY3RpdmVQbGFucy5pbmRleE9mKGFjdGl2ZVBsYW4pLCAxKTtcbiAgICAgIHRoaXMuYWN0aXZlUGxhbnMubGVuZ3RoID09PSAwICYmIHRoaXMuZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gSm9pbk9ic2VydmVyO1xuICB9IChBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGEgcGF0dGVybiB0aGF0IG1hdGNoZXMgd2hlbiBib3RoIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKlxuICAgKiAgQHBhcmFtIHJpZ2h0IE9ic2VydmFibGUgc2VxdWVuY2UgdG8gbWF0Y2ggd2l0aCB0aGUgY3VycmVudCBzZXF1ZW5jZS5cbiAgICogIEByZXR1cm4ge1BhdHRlcm59IFBhdHRlcm4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB3aGVuIGJvdGggb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaGF2ZSBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYW5kID0gZnVuY3Rpb24gKHJpZ2h0KSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKFt0aGlzLCByaWdodF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgTWF0Y2hlcyB3aGVuIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGhhcyBhbiBhdmFpbGFibGUgdmFsdWUgYW5kIHByb2plY3RzIHRoZSB2YWx1ZS5cbiAgICpcbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHNlbGVjdG9yIFNlbGVjdG9yIHRoYXQgd2lsbCBiZSBpbnZva2VkIGZvciB2YWx1ZXMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogIEByZXR1cm5zIHtQbGFufSBQbGFuIHRoYXQgcHJvZHVjZXMgdGhlIHByb2plY3RlZCB2YWx1ZXMsIHRvIGJlIGZlZCAod2l0aCBvdGhlciBwbGFucykgdG8gdGhlIHdoZW4gb3BlcmF0b3IuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGhlbkRvID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBQYXR0ZXJuKFt0aGlzXSkudGhlbkRvKHNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogIEpvaW5zIHRvZ2V0aGVyIHRoZSByZXN1bHRzIGZyb20gc2V2ZXJhbCBwYXR0ZXJucy5cbiAgICpcbiAgICogIEBwYXJhbSBwbGFucyBBIHNlcmllcyBvZiBwbGFucyAoc3BlY2lmaWVkIGFzIGFuIEFycmF5IG9mIGFzIGEgc2VyaWVzIG9mIGFyZ3VtZW50cykgY3JlYXRlZCBieSB1c2Ugb2YgdGhlIFRoZW4gb3BlcmF0b3Igb24gcGF0dGVybnMuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSByZXN1bHRzIGZvcm0gbWF0Y2hpbmcgc2V2ZXJhbCBwYXR0ZXJucy5cbiAgICovXG4gIE9ic2VydmFibGUud2hlbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcGxhbnM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgcGxhbnMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHBsYW5zID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcGxhbnNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWN0aXZlUGxhbnMgPSBbXSxcbiAgICAgICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICB2YXIgb3V0T2JzZXJ2ZXIgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAodikgeyB2Lm9uRXJyb3IoZXJyKTsgfSk7XG4gICAgICAgICAgby5vbkVycm9yKGVycik7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7IG8ub25Db21wbGV0ZWQoKTsgfVxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwbGFucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGFjdGl2ZVBsYW5zLnB1c2gocGxhbnNbaV0uYWN0aXZhdGUoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCBvdXRPYnNlcnZlciwgZnVuY3Rpb24gKGFjdGl2ZVBsYW4pIHtcbiAgICAgICAgICAgIHZhciBpZHggPSBhY3RpdmVQbGFucy5pbmRleE9mKGFjdGl2ZVBsYW4pO1xuICAgICAgICAgICAgYWN0aXZlUGxhbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICBhY3RpdmVQbGFucy5sZW5ndGggPT09IDAgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZVRocm93KGUpLnN1YnNjcmliZShvKTtcbiAgICAgIH1cbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoam9pbk9ic2VydmVyKSB7XG4gICAgICAgIGpvaW5PYnNlcnZlci5zdWJzY3JpYmUoKTtcbiAgICAgICAgZ3JvdXAuYWRkKGpvaW5PYnNlcnZlcik7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBUaW1lck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVyT2JzZXJ2YWJsZShkdCwgcykge1xuICAgICAgdGhpcy5fZHQgPSBkdDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKG8sIHRoaXMuX2R0LCBzY2hlZHVsZU1ldGhvZCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIG8pIHtcbiAgICAgIG8ub25OZXh0KDApO1xuICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiBUaW1lck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBmdW5jdGlvbiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgVGltZXJPYnNlcnZhYmxlKGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGQgPSBkdWVUaW1lLCBwID0gbm9ybWFsaXplVGltZShwZXJpb2QpO1xuICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSgwLCBkLCBmdW5jdGlvbiAoY291bnQsIHNlbGYpIHtcbiAgICAgICAgaWYgKHAgPiAwKSB7XG4gICAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgICBkID0gbmV3IERhdGUoZC5nZXRUaW1lKCkgKyBwKTtcbiAgICAgICAgICBkLmdldFRpbWUoKSA8PSBub3cgJiYgKGQgPSBuZXcgRGF0ZShub3cgKyBwKSk7XG4gICAgICAgIH1cbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNvdW50KTtcbiAgICAgICAgc2VsZihjb3VudCArIDEsIG5ldyBEYXRlKGQpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVRpbWVyVGltZVNwYW5BbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gZHVlVGltZSA9PT0gcGVyaW9kID9cbiAgICAgIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlUGVyaW9kaWMoMCwgcGVyaW9kLCBmdW5jdGlvbiAoY291bnQpIHtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoY291bnQpO1xuICAgICAgICAgIHJldHVybiBjb3VudCArIDE7XG4gICAgICAgIH0pO1xuICAgICAgfSkgOlxuICAgICAgb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QobmV3IERhdGUoc2NoZWR1bGVyLm5vdygpICsgZHVlVGltZSksIHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGVhY2ggcGVyaW9kLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCk7XG4gICAqICAyIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwLCBSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBwZXJpb2QgUGVyaW9kIGZvciBwcm9kdWNpbmcgdGhlIHZhbHVlcyBpbiB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIFJ4LlNjaGVkdWxlci50aW1lb3V0IGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBlYWNoIHBlcmlvZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlaW50ZXJ2YWwgPSBPYnNlcnZhYmxlLmludGVydmFsID0gZnVuY3Rpb24gKHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKHBlcmlvZCwgcGVyaW9kLCBpc1NjaGVkdWxlcihzY2hlZHVsZXIpID8gc2NoZWR1bGVyIDogZGVmYXVsdFNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGR1ZVRpbWUgaGFzIGVsYXBzZWQgYW5kIHRoZW4gYWZ0ZXIgZWFjaCBwZXJpb2QuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIEFic29sdXRlIChzcGVjaWZpZWQgYXMgYSBEYXRlIG9iamVjdCkgb3IgcmVsYXRpdmUgdGltZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSBhdCB3aGljaCB0byBwcm9kdWNlIHRoZSBmaXJzdCB2YWx1ZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gW3BlcmlvZE9yU2NoZWR1bGVyXSAgUGVyaW9kIHRvIHByb2R1Y2Ugc3Vic2VxdWVudCB2YWx1ZXMgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIHRoZSBzY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHJlc3VsdGluZyB0aW1lciBpcyBub3QgcmVjdXJyaW5nLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGR1ZSB0aW1lIGhhcyBlbGFwc2VkIGFuZCB0aGVuIGVhY2ggcGVyaW9kLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVUaW1lciA9IE9ic2VydmFibGUudGltZXIgPSBmdW5jdGlvbiAoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcikge1xuICAgIHZhciBwZXJpb2Q7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgaWYgKHBlcmlvZE9yU2NoZWR1bGVyICE9IG51bGwgJiYgdHlwZW9mIHBlcmlvZE9yU2NoZWR1bGVyID09PSAnbnVtYmVyJykge1xuICAgICAgcGVyaW9kID0gcGVyaW9kT3JTY2hlZHVsZXI7XG4gICAgfSBlbHNlIGlmIChpc1NjaGVkdWxlcihwZXJpb2RPclNjaGVkdWxlcikpIHtcbiAgICAgIHNjaGVkdWxlciA9IHBlcmlvZE9yU2NoZWR1bGVyO1xuICAgIH1cbiAgICBpZiAoKGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBkdWVUaW1lID09PSAnbnVtYmVyJykgJiYgcGVyaW9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBfb2JzZXJ2YWJsZVRpbWVyKGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gICAgfVxuICAgIGlmIChkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSAmJiBwZXJpb2QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kT3JTY2hlZHVsZXIsIHNjaGVkdWxlcik7XG4gICAgfVxuICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUoc291cmNlLCBkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhY3RpdmUgPSBmYWxzZSxcbiAgICAgICAgY2FuY2VsYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIGV4Y2VwdGlvbiA9IG51bGwsXG4gICAgICAgIHEgPSBbXSxcbiAgICAgICAgcnVubmluZyA9IGZhbHNlLFxuICAgICAgICBzdWJzY3JpcHRpb247XG4gICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2UubWF0ZXJpYWxpemUoKS50aW1lc3RhbXAoc2NoZWR1bGVyKS5zdWJzY3JpYmUoZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZCwgc2hvdWxkUnVuO1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uLnZhbHVlLmtpbmQgPT09ICdFJykge1xuICAgICAgICAgIHEgPSBbXTtcbiAgICAgICAgICBxLnB1c2gobm90aWZpY2F0aW9uKTtcbiAgICAgICAgICBleGNlcHRpb24gPSBub3RpZmljYXRpb24udmFsdWUuZXJyb3I7XG4gICAgICAgICAgc2hvdWxkUnVuID0gIXJ1bm5pbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcS5wdXNoKHsgdmFsdWU6IG5vdGlmaWNhdGlvbi52YWx1ZSwgdGltZXN0YW1wOiBub3RpZmljYXRpb24udGltZXN0YW1wICsgZHVlVGltZSB9KTtcbiAgICAgICAgICBzaG91bGRSdW4gPSAhYWN0aXZlO1xuICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3VsZFJ1bikge1xuICAgICAgICAgIGlmIChleGNlcHRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihleGNlcHRpb24pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgICBjYW5jZWxhYmxlLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICAgICAgICBkLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKG51bGwsIGR1ZVRpbWUsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgICAgICAgIHZhciBlLCByZWN1cnNlRHVlVGltZSwgcmVzdWx0LCBzaG91bGRSZWN1cnNlO1xuICAgICAgICAgICAgICBpZiAoZXhjZXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPiAwICYmIHFbMF0udGltZXN0YW1wIC0gc2NoZWR1bGVyLm5vdygpIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHEuc2hpZnQoKS52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0LmFjY2VwdChvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gd2hpbGUgKHJlc3VsdCAhPT0gbnVsbCk7XG4gICAgICAgICAgICAgIHNob3VsZFJlY3Vyc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmVjdXJzZUR1ZVRpbWUgPSAwO1xuICAgICAgICAgICAgICBpZiAocS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkUmVjdXJzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVjdXJzZUR1ZVRpbWUgPSBNYXRoLm1heCgwLCBxWzBdLnRpbWVzdGFtcCAtIHNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZSA9IGV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgcnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICBpZiAoZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRSZWN1cnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZihudWxsLCByZWN1cnNlRHVlVGltZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVEZWxheUFic29sdXRlKHNvdXJjZSwgZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUoc291cmNlLCBkdWVUaW1lIC0gc2NoZWR1bGVyLm5vdygpLCBzY2hlZHVsZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVsYXlXaXRoU2VsZWN0b3Ioc291cmNlLCBzdWJzY3JpcHRpb25EZWxheSwgZGVsYXlEdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgdmFyIHN1YkRlbGF5LCBzZWxlY3RvcjtcbiAgICBpZiAoaXNGdW5jdGlvbihzdWJzY3JpcHRpb25EZWxheSkpIHtcbiAgICAgIHNlbGVjdG9yID0gc3Vic2NyaXB0aW9uRGVsYXk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1YkRlbGF5ID0gc3Vic2NyaXB0aW9uRGVsYXk7XG4gICAgICBzZWxlY3RvciA9IGRlbGF5RHVyYXRpb25TZWxlY3RvcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZGVsYXlzID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSwgYXRFbmQgPSBmYWxzZSwgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblxuICAgICAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciBkZWxheSA9IHRyeUNhdGNoKHNlbGVjdG9yKSh4KTtcbiAgICAgICAgICAgIGlmIChkZWxheSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihkZWxheS5lKTsgfVxuICAgICAgICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICAgIGRlbGF5cy5hZGQoZCk7XG4gICAgICAgICAgICBkLnNldERpc3Bvc2FibGUoZGVsYXkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgICAgICAgZGVsYXlzLnJlbW92ZShkKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgICAgICAgIGRlbGF5cy5yZW1vdmUoZCk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhdEVuZCA9IHRydWU7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRvbmUgKCkge1xuICAgICAgICBhdEVuZCAmJiBkZWxheXMubGVuZ3RoID09PSAwICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFzdWJEZWxheSkge1xuICAgICAgICBzdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoc3ViRGVsYXkuc3Vic2NyaWJlKHN0YXJ0LCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIHN0YXJ0KSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGRlbGF5cyk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgVGltZSBzaGlmdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgZHVlVGltZS5cbiAgICogIFRoZSByZWxhdGl2ZSB0aW1lIGludGVydmFscyBiZXR3ZWVuIHRoZSB2YWx1ZXMgYXJlIHByZXNlcnZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZGVsYXkgdGltZXJzIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRpbWUtc2hpZnRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kZWxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlyc3RBcmcgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ251bWJlcicgfHwgZmlyc3RBcmcgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB2YXIgZHVlVGltZSA9IGZpcnN0QXJnLCBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSA/XG4gICAgICAgIG9ic2VydmFibGVEZWxheUFic29sdXRlKHRoaXMsIGR1ZVRpbWUsIHNjaGVkdWxlcikgOlxuICAgICAgICBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZSh0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICAgIH0gZWxzZSBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUoZmlyc3RBcmcpIHx8IGlzRnVuY3Rpb24oZmlyc3RBcmcpKSB7XG4gICAgICByZXR1cm4gZGVsYXlXaXRoU2VsZWN0b3IodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIERlYm91bmNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2YWJsZShzb3VyY2UsIGR0LCBzKSB7XG4gICAgICBpc1NjaGVkdWxlcihzKSB8fCAocyA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWJvdW5jZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERlYm91bmNlT2JzZXJ2ZXIobywgdGhpcy5fZHQsIHRoaXMuX3MsIGNhbmNlbGFibGUpKSxcbiAgICAgICAgY2FuY2VsYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWJvdW5jZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGVib3VuY2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVib3VuY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWJvdW5jZU9ic2VydmVyKG9ic2VydmVyLCBkdWVUaW1lLCBzY2hlZHVsZXIsIGNhbmNlbGFibGUpIHtcbiAgICAgIHRoaXMuX28gPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX2QgPSBkdWVUaW1lO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5fYyA9IGNhbmNlbGFibGU7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZCA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUZ1dHVyZShzLCBzdGF0ZSkge1xuICAgICAgc3RhdGUuc2VsZi5faHYgJiYgc3RhdGUuc2VsZi5faWQgPT09IHN0YXRlLmN1cnJlbnRJZCAmJiBzdGF0ZS5zZWxmLl9vLm9uTmV4dChzdGF0ZS54KTtcbiAgICAgIHN0YXRlLnNlbGYuX2h2ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICB0aGlzLl92ID0geDtcbiAgICAgIHZhciBjdXJyZW50SWQgPSArK3RoaXMuX2lkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9jLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKHRoaXMsIHRoaXMuX2QsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgIHNlbGYuX2h2ICYmIHNlbGYuX2lkID09PSBjdXJyZW50SWQgJiYgc2VsZi5fby5vbk5leHQoeCk7XG4gICAgICAgIHNlbGYuX2h2ID0gZmFsc2U7XG4gICAgICB9KSk7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lkKys7XG4gICAgfTtcblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2MuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5faHYgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fdik7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQrKztcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlYm91bmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGRlYm91bmNlV2l0aFNlbGVjdG9yKHNvdXJjZSwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHZhbHVlLCBoYXNWYWx1ZSA9IGZhbHNlLCBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSwgaWQgPSAwO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHRocm90dGxlID0gdHJ5Q2F0Y2goZHVyYXRpb25TZWxlY3RvcikoeCk7XG4gICAgICAgICAgaWYgKHRocm90dGxlID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHRocm90dGxlLmUpOyB9XG5cbiAgICAgICAgICBpc1Byb21pc2UodGhyb3R0bGUpICYmICh0aHJvdHRsZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aHJvdHRsZSkpO1xuXG4gICAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgICAgIHZhbHVlID0geDtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIHZhciBjdXJyZW50aWQgPSBpZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgICBkLnNldERpc3Bvc2FibGUodGhyb3R0bGUuc3Vic2NyaWJlKFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBoYXNWYWx1ZSAmJiBpZCA9PT0gY3VycmVudGlkICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2FuY2VsYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhbmNlbGFibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIGhhc1ZhbHVlICYmIG8ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIG9ic2VydmFibGVQcm90by5kZWJvdW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNGdW5jdGlvbiAoYXJndW1lbnRzWzBdKSkge1xuICAgICAgcmV0dXJuIGRlYm91bmNlV2l0aFNlbGVjdG9yKHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG5ldyBEZWJvdW5jZU9ic2VydmFibGUodGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgd2luZG93cyB3aGljaCBhcmUgcHJvZHVjZWQgYmFzZWQgb24gdGltaW5nIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTGVuZ3RoIG9mIGVhY2ggd2luZG93IChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge01peGVkfSBbdGltZVNoaWZ0T3JTY2hlZHVsZXJdICBJbnRlcnZhbCBiZXR3ZWVuIGNyZWF0aW9uIG9mIGNvbnNlY3V0aXZlIHdpbmRvd3MgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBwYXJhbWV0ZXIuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lIHNoaWZ0IGNvcnJlc3BvbmRzIHRvIHRoZSB0aW1lU3BhbiBwYXJhbWV0ZXIsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgYWRqYWNlbnQgd2luZG93cy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHdpbmRvd2luZyB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvd1dpdGhUaW1lID0gb2JzZXJ2YWJsZVByb3RvLndpbmRvd1RpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4sIHRpbWVTaGlmdE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcywgdGltZVNoaWZ0O1xuICAgIHRpbWVTaGlmdE9yU2NoZWR1bGVyID09IG51bGwgJiYgKHRpbWVTaGlmdCA9IHRpbWVTcGFuKTtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICBpZiAodHlwZW9mIHRpbWVTaGlmdE9yU2NoZWR1bGVyID09PSAnbnVtYmVyJykge1xuICAgICAgdGltZVNoaWZ0ID0gdGltZVNoaWZ0T3JTY2hlZHVsZXI7XG4gICAgfSBlbHNlIGlmIChpc1NjaGVkdWxlcih0aW1lU2hpZnRPclNjaGVkdWxlcikpIHtcbiAgICAgIHRpbWVTaGlmdCA9IHRpbWVTcGFuO1xuICAgICAgc2NoZWR1bGVyID0gdGltZVNoaWZ0T3JTY2hlZHVsZXI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBncm91cERpc3Bvc2FibGUsXG4gICAgICAgIG5leHRTaGlmdCA9IHRpbWVTaGlmdCxcbiAgICAgICAgbmV4dFNwYW4gPSB0aW1lU3BhbixcbiAgICAgICAgcSA9IFtdLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUsXG4gICAgICAgIHRpbWVyRCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHRvdGFsVGltZSA9IDA7XG4gICAgICAgIGdyb3VwRGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKHRpbWVyRCksXG4gICAgICAgIHJlZkNvdW50RGlzcG9zYWJsZSA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZ3JvdXBEaXNwb3NhYmxlKTtcblxuICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRpbWVyICgpIHtcbiAgICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpc1NwYW4gPSBmYWxzZSxcbiAgICAgICAgICBpc1NoaWZ0ID0gZmFsc2U7XG4gICAgICAgIHRpbWVyRC5zZXREaXNwb3NhYmxlKG0pO1xuICAgICAgICBpZiAobmV4dFNwYW4gPT09IG5leHRTaGlmdCkge1xuICAgICAgICAgIGlzU3BhbiA9IHRydWU7XG4gICAgICAgICAgaXNTaGlmdCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobmV4dFNwYW4gPCBuZXh0U2hpZnQpIHtcbiAgICAgICAgICAgIGlzU3BhbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNTaGlmdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1RvdGFsVGltZSA9IGlzU3BhbiA/IG5leHRTcGFuIDogbmV4dFNoaWZ0LFxuICAgICAgICAgIHRzID0gbmV3VG90YWxUaW1lIC0gdG90YWxUaW1lO1xuICAgICAgICB0b3RhbFRpbWUgPSBuZXdUb3RhbFRpbWU7XG4gICAgICAgIGlmIChpc1NwYW4pIHtcbiAgICAgICAgICBuZXh0U3BhbiArPSB0aW1lU2hpZnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU2hpZnQpIHtcbiAgICAgICAgICBuZXh0U2hpZnQgKz0gdGltZVNoaWZ0O1xuICAgICAgICB9XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgdHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaXNTaGlmdCkge1xuICAgICAgICAgICAgdmFyIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgcS5wdXNoKHMpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNTcGFuICYmIHEuc2hpZnQoKS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH07XG4gICAgICBxLnB1c2gobmV3IFN1YmplY3QoKSk7XG4gICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHFbMF0sIHJlZkNvdW50RGlzcG9zYWJsZSkpO1xuICAgICAgY3JlYXRlVGltZXIoKTtcbiAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQoc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uTmV4dCh4KTsgfVxuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBxLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHFbaV0ub25FcnJvcihlKTsgfVxuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApKTtcbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSB3aW5kb3cgdGhhdCBpcyBjb21wbGV0ZWQgd2hlbiBlaXRoZXIgaXQncyBmdWxsIG9yIGEgZ2l2ZW4gYW1vdW50IG9mIHRpbWUgaGFzIGVsYXBzZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIGEgd2luZG93LlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIGEgd2luZG93LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gd2luZG93aW5nIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93V2l0aFRpbWVPckNvdW50ID0gb2JzZXJ2YWJsZVByb3RvLndpbmRvd1RpbWVPckNvdW50ID0gZnVuY3Rpb24gKHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHRpbWVyRCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUodGltZXJEKSxcbiAgICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSksXG4gICAgICAgICAgbiA9IDAsXG4gICAgICAgICAgd2luZG93SWQgPSAwLFxuICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lcihpZCkge1xuICAgICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aW1lckQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgICAgbS5zZXREaXNwb3NhYmxlKHNjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZShudWxsLCB0aW1lU3BhbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChpZCAhPT0gd2luZG93SWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgdmFyIG5ld0lkID0gKyt3aW5kb3dJZDtcbiAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICBjcmVhdGVUaW1lcihuZXdJZCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIGNyZWF0ZVRpbWVyKDApO1xuXG4gICAgICBncm91cERpc3Bvc2FibGUuYWRkKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIG5ld0lkID0gMCwgbmV3V2luZG93ID0gZmFsc2U7XG4gICAgICAgICAgcy5vbk5leHQoeCk7XG4gICAgICAgICAgaWYgKCsrbiA9PT0gY291bnQpIHtcbiAgICAgICAgICAgIG5ld1dpbmRvdyA9IHRydWU7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgIG5ld0lkID0gKyt3aW5kb3dJZDtcbiAgICAgICAgICAgIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3V2luZG93ICYmIGNyZWF0ZVRpbWVyKG5ld0lkKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBzLm9uRXJyb3IoZSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApKTtcbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiB0aW1pbmcgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBMZW5ndGggb2YgZWFjaCBidWZmZXIgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFt0aW1lU2hpZnRPclNjaGVkdWxlcl0gIEludGVydmFsIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgYnVmZmVycyAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSwgb3IgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHBhcmFtZXRlci4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWUgc2hpZnQgY29ycmVzcG9uZHMgdG8gdGhlIHRpbWVTcGFuIHBhcmFtZXRlciwgcmVzdWx0aW5nIGluIG5vbi1vdmVybGFwcGluZyBhZGphY2VudCBidWZmZXJzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gYnVmZmVyIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aFRpbWUgPSBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyVGltZSA9IGZ1bmN0aW9uICh0aW1lU3BhbiwgdGltZVNoaWZ0T3JTY2hlZHVsZXIsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiB0aGlzLndpbmRvd1dpdGhUaW1lKHRpbWVTcGFuLCB0aW1lU2hpZnRPclNjaGVkdWxlciwgc2NoZWR1bGVyKS5mbGF0TWFwKHRvQXJyYXkpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoeCkgeyByZXR1cm4geC50b0FycmF5KCk7IH1cblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSBidWZmZXIgdGhhdCBpcyBjb21wbGV0ZWQgd2hlbiBlaXRoZXIgaXQncyBmdWxsIG9yIGEgZ2l2ZW4gYW1vdW50IG9mIHRpbWUgaGFzIGVsYXBzZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIGEgYnVmZmVyLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIGEgYnVmZmVyLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gYnVmZmVyaW4gdGltZXJzIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgYnVmZmVycy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5idWZmZXJXaXRoVGltZU9yQ291bnQgPSBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyVGltZU9yQ291bnQgPSBmdW5jdGlvbiAodGltZVNwYW4sIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gdGhpcy53aW5kb3dXaXRoVGltZU9yQ291bnQodGltZVNwYW4sIGNvdW50LCBzY2hlZHVsZXIpLmZsYXRNYXAodG9BcnJheSk7XG4gIH07XG5cbiAgdmFyIFRpbWVJbnRlcnZhbE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVJbnRlcnZhbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGltZUludGVydmFsT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRpbWVJbnRlcnZhbE9ic2VydmVyKG8sIHRoaXMuX3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbWVJbnRlcnZhbE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGltZUludGVydmFsT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVJbnRlcnZhbE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGltZUludGVydmFsT2JzZXJ2ZXIobywgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2wgPSBzLm5vdygpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZUludGVydmFsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCksIHNwYW4gPSBub3cgLSB0aGlzLl9sO1xuICAgICAgdGhpcy5fbCA9IG5vdztcbiAgICAgIHRoaXMuX28ub25OZXh0KHsgdmFsdWU6IHgsIGludGVydmFsOiBzcGFuIH0pO1xuICAgIH07XG4gICAgVGltZUludGVydmFsT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRpbWVJbnRlcnZhbE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUaW1lSW50ZXJ2YWxPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZWNvcmRzIHRoZSB0aW1lIGludGVydmFsIGJldHdlZW4gY29uc2VjdXRpdmUgdmFsdWVzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLnRpbWVJbnRlcnZhbCgpO1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS50aW1lSW50ZXJ2YWwoUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKlxuICAgKiBAcGFyYW0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB1c2VkIHRvIGNvbXB1dGUgdGltZSBpbnRlcnZhbHMuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRpbWUgaW50ZXJ2YWwgaW5mb3JtYXRpb24gb24gdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRpbWVJbnRlcnZhbCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRpbWVJbnRlcnZhbE9ic2VydmFibGUodGhpcywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVGltZXN0YW1wT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZXN0YW1wT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lc3RhbXBPYnNlcnZhYmxlKHNvdXJjZSwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVzdGFtcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGltZXN0YW1wT2JzZXJ2ZXIobywgdGhpcy5fcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGltZXN0YW1wT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUaW1lc3RhbXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGltZXN0YW1wT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGltZXN0YW1wT2JzZXJ2ZXIobywgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHsgdmFsdWU6IHgsIHRpbWVzdGFtcDogdGhpcy5fcy5ub3coKSB9KTtcbiAgICB9O1xuXG4gICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgVGltZXN0YW1wT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbWVzdGFtcE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJlY29yZHMgdGhlIHRpbWVzdGFtcCBmb3IgZWFjaCB2YWx1ZSBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS50aW1lc3RhbXAoKTsgLy8gcHJvZHVjZXMgeyB2YWx1ZTogeCwgdGltZXN0YW1wOiB0cyB9XG4gICAqICAyIC0gcmVzID0gc291cmNlLnRpbWVzdGFtcChSeC5TY2hlZHVsZXIuZGVmYXVsdCk7XG4gICAqXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHVzZWQgdG8gY29tcHV0ZSB0aW1lc3RhbXBzLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aW1lc3RhbXAgaW5mb3JtYXRpb24gb24gdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRpbWVzdGFtcCA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRpbWVzdGFtcE9ic2VydmFibGUodGhpcywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU2FtcGxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTYW1wbGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNhbXBsZU9ic2VydmFibGUoc291cmNlLCBzYW1wbGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3NhbXBsZXIgPSBzYW1wbGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2FtcGxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIGF0RW5kOiBmYWxzZSxcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIGhhc1ZhbHVlOiBmYWxzZSxcbiAgICAgICAgc291cmNlU3Vic2NyaXB0aW9uOiBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKVxuICAgICAgfTtcblxuICAgICAgc3RhdGUuc291cmNlU3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTYW1wbGVTb3VyY2VPYnNlcnZlcihzdGF0ZSkpKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgc3RhdGUuc291cmNlU3Vic2NyaXB0aW9uLFxuICAgICAgICB0aGlzLl9zYW1wbGVyLnN1YnNjcmliZShuZXcgU2FtcGxlck9ic2VydmVyKHN0YXRlKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBTYW1wbGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNhbXBsZXJPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTYW1wbGVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2FtcGxlck9ic2VydmVyKHMpIHtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2FtcGxlck9ic2VydmVyLnByb3RvdHlwZS5faGFuZGxlTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9zLmhhc1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3MuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcy5vLm9uTmV4dCh0aGlzLl9zLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3MuYXRFbmQgJiYgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5faGFuZGxlTWVzc2FnZSgpOyB9O1xuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm9uRXJyb3IoZSk7IH07XG4gICAgU2FtcGxlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX2hhbmRsZU1lc3NhZ2UoKTsgfTtcblxuICAgIHJldHVybiBTYW1wbGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBTYW1wbGVTb3VyY2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTYW1wbGVTb3VyY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVTb3VyY2VPYnNlcnZlcihzKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNhbXBsZVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3MuaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgdGhpcy5fcy52YWx1ZSA9IHg7XG4gICAgfTtcbiAgICBTYW1wbGVTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm8ub25FcnJvcihlKTsgfTtcbiAgICBTYW1wbGVTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcy5hdEVuZCA9IHRydWU7XG4gICAgICB0aGlzLl9zLnNvdXJjZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTYW1wbGVTb3VyY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBTYW1wbGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGF0IGVhY2ggaW50ZXJ2YWwuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLnNhbXBsZShzYW1wbGVPYnNlcnZhYmxlKTsgLy8gU2FtcGxlciB0aWNrIHNlcXVlbmNlXG4gICAqICAyIC0gcmVzID0gc291cmNlLnNhbXBsZSg1MDAwKTsgLy8gNSBzZWNvbmRzXG4gICAqICAyIC0gcmVzID0gc291cmNlLnNhbXBsZSg1MDAwLCBSeC5TY2hlZHVsZXIudGltZW91dCk7IC8vIDUgc2Vjb25kc1xuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBpbnRlcnZhbE9yU2FtcGxlciBJbnRlcnZhbCBhdCB3aGljaCB0byBzYW1wbGUgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykgb3IgU2FtcGxlciBPYnNlcnZhYmxlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHNhbXBsaW5nIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNhbXBsZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zYW1wbGUgPSBmdW5jdGlvbiAoaW50ZXJ2YWxPclNhbXBsZXIsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiB0eXBlb2YgaW50ZXJ2YWxPclNhbXBsZXIgPT09ICdudW1iZXInID9cbiAgICAgIG5ldyBTYW1wbGVPYnNlcnZhYmxlKHRoaXMsIG9ic2VydmFibGVpbnRlcnZhbChpbnRlcnZhbE9yU2FtcGxlciwgc2NoZWR1bGVyKSkgOlxuICAgICAgbmV3IFNhbXBsZU9ic2VydmFibGUodGhpcywgaW50ZXJ2YWxPclNhbXBsZXIpO1xuICB9O1xuXG4gIHZhciBUaW1lb3V0RXJyb3IgPSBSeC5UaW1lb3V0RXJyb3IgPSBmdW5jdGlvbihtZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGltZW91dCBoYXMgb2NjdXJyZWQnO1xuICAgIHRoaXMubmFtZSA9ICdUaW1lb3V0RXJyb3InO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIFRpbWVvdXRFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5cbiAgZnVuY3Rpb24gdGltZW91dFdpdGhTZWxlY3Rvcihzb3VyY2UsIGZpcnN0VGltZW91dCwgdGltZW91dER1cmF0aW9uU2VsZWN0b3IsIG90aGVyKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oZmlyc3RUaW1lb3V0KSkge1xuICAgICAgb3RoZXIgPSB0aW1lb3V0RHVyYXRpb25TZWxlY3RvcjtcbiAgICAgIHRpbWVvdXREdXJhdGlvblNlbGVjdG9yID0gZmlyc3RUaW1lb3V0O1xuICAgICAgZmlyc3RUaW1lb3V0ID0gb2JzZXJ2YWJsZU5ldmVyKCk7XG4gICAgfVxuICAgIE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKG90aGVyKSB8fCAob3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cobmV3IFRpbWVvdXRFcnJvcigpKSk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgdGltZXIgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBvcmlnaW5hbCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvcmlnaW5hbCk7XG5cbiAgICAgIHZhciBpZCA9IDAsIHN3aXRjaGVkID0gZmFsc2U7XG5cbiAgICAgIGZ1bmN0aW9uIHNldFRpbWVyKHRpbWVvdXQpIHtcbiAgICAgICAgdmFyIG15SWQgPSBpZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRpbWVyV2lucygpIHtcbiAgICAgICAgICBzd2l0Y2hlZCA9IChteUlkID09PSBpZCk7XG4gICAgICAgICAgcmV0dXJuIHN3aXRjaGVkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGltZXIuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgZC5zZXREaXNwb3NhYmxlKHRpbWVvdXQuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lcldpbnMoKSAmJiBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobykpO1xuICAgICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHRpbWVyV2lucygpICYmIG8ub25FcnJvcihlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVyV2lucygpICYmIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShvKSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH07XG5cbiAgICAgIHNldFRpbWVyKGZpcnN0VGltZW91dCk7XG5cbiAgICAgIGZ1bmN0aW9uIG9XaW5zKCkge1xuICAgICAgICB2YXIgcmVzID0gIXN3aXRjaGVkO1xuICAgICAgICBpZiAocmVzKSB7IGlkKys7IH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH1cblxuICAgICAgb3JpZ2luYWwuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmIChvV2lucygpKSB7XG4gICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgdmFyIHRpbWVvdXQgPSB0cnlDYXRjaCh0aW1lb3V0RHVyYXRpb25TZWxlY3RvcikoeCk7XG4gICAgICAgICAgaWYgKHRpbWVvdXQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IodGltZW91dC5lKTsgfVxuICAgICAgICAgIHNldFRpbWVyKGlzUHJvbWlzZSh0aW1lb3V0KSA/IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aW1lb3V0KSA6IHRpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBvV2lucygpICYmIG8ub25FcnJvcihlKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb1dpbnMoKSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCB0aW1lcik7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVvdXQoc291cmNlLCBkdWVUaW1lLCBvdGhlciwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGlzU2NoZWR1bGVyKG90aGVyKSkge1xuICAgICAgc2NoZWR1bGVyID0gb3RoZXI7XG4gICAgICBvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpO1xuICAgIH1cbiAgICBpZiAob3RoZXIgaW5zdGFuY2VvZiBFcnJvcikgeyBvdGhlciA9IG9ic2VydmFibGVUaHJvdyhvdGhlcik7IH1cbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvdGhlcikgfHwgKG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSkpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGlkID0gMCxcbiAgICAgICAgb3JpZ2luYWwgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgc3dpdGNoZWQgPSBmYWxzZSxcbiAgICAgICAgdGltZXIgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXG4gICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvcmlnaW5hbCk7XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRpbWVyKCkge1xuICAgICAgICB2YXIgbXlJZCA9IGlkO1xuICAgICAgICB0aW1lci5zZXREaXNwb3NhYmxlKHNjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZShudWxsLCBkdWVUaW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc3dpdGNoZWQgPSBpZCA9PT0gbXlJZDtcbiAgICAgICAgICBpZiAoc3dpdGNoZWQpIHtcbiAgICAgICAgICAgIGlzUHJvbWlzZShvdGhlcikgJiYgKG90aGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSk7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBjcmVhdGVUaW1lcigpO1xuXG4gICAgICBvcmlnaW5hbC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgIGlkKys7XG4gICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgY3JlYXRlVGltZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCFzd2l0Y2hlZCkge1xuICAgICAgICAgIGlkKys7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghc3dpdGNoZWQpIHtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgdGltZXIpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBvYnNlcnZhYmxlUHJvdG8udGltZW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZmlyc3RBcmcgPSBhcmd1bWVudHNbMF07XG4gICAgaWYgKGZpcnN0QXJnIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZmlyc3RBcmcgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gdGltZW91dCh0aGlzLCBmaXJzdEFyZywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgIH0gZWxzZSBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUoZmlyc3RBcmcpIHx8IGlzRnVuY3Rpb24oZmlyc3RBcmcpKSB7XG4gICAgICByZXR1cm4gdGltZW91dFdpdGhTZWxlY3Rvcih0aGlzLCBmaXJzdEFyZywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUoc3RhdGUsIGNuZEZuLCBpdHJGbiwgcmVzRm4sIHRpbWVGbiwgcykge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX2NuZEZuID0gY25kRm47XG4gICAgICB0aGlzLl9pdHJGbiA9IGl0ckZuO1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX3RpbWVGbiA9IHRpbWVGbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHN0YXRlLmhhc1Jlc3VsdCAmJiBzdGF0ZS5vLm9uTmV4dChzdGF0ZS5yZXN1bHQpO1xuXG4gICAgICBpZiAoc3RhdGUuZmlyc3QpIHtcbiAgICAgICAgc3RhdGUuZmlyc3QgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm5ld1N0YXRlID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5faXRyRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLm5ld1N0YXRlID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLm5ld1N0YXRlLmUpOyB9XG4gICAgICB9XG4gICAgICBzdGF0ZS5oYXNSZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9jbmRGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgaWYgKHN0YXRlLmhhc1Jlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5oYXNSZXN1bHQuZSk7IH1cbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQpIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fcmVzRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLnJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5yZXN1bHQuZSk7IH1cbiAgICAgICAgdmFyIHRpbWUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl90aW1lRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHRpbWUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IodGltZS5lKTsgfVxuICAgICAgICByZWN1cnNlKHN0YXRlLCB0aW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIHNlbGY6IHRoaXMsXG4gICAgICAgIG5ld1N0YXRlOiB0aGlzLl9zdGF0ZSxcbiAgICAgICAgZmlyc3Q6IHRydWUsXG4gICAgICAgIGhhc1Jlc3VsdDogZmFsc2VcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5fcy5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZShzdGF0ZSwgbmV3IERhdGUodGhpcy5fcy5ub3coKSksIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBHZW5lcmF0ZUFic29sdXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGl0ZXJhdGluZyBhIHN0YXRlIGZyb20gYW4gaW5pdGlhbCBzdGF0ZSB1bnRpbCB0aGUgY29uZGl0aW9uIGZhaWxzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgcmVzID0gc291cmNlLmdlbmVyYXRlV2l0aEFic29sdXRlVGltZSgwLFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiByZXR1cm4gdHJ1ZTsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIG5ldyBEYXRlKCk7IH1cbiAgICogIH0pO1xuICAgKlxuICAgKiBAcGFyYW0ge01peGVkfSBpbml0aWFsU3RhdGUgSW5pdGlhbCBzdGF0ZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uIENvbmRpdGlvbiB0byB0ZXJtaW5hdGUgZ2VuZXJhdGlvbiAodXBvbiByZXR1cm5pbmcgZmFsc2UpLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlIEl0ZXJhdGlvbiBzdGVwIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBTZWxlY3RvciBmdW5jdGlvbiBmb3IgcmVzdWx0cyBwcm9kdWNlZCBpbiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHRpbWVTZWxlY3RvciBUaW1lIHNlbGVjdG9yIGZ1bmN0aW9uIHRvIGNvbnRyb2wgdGhlIHNwZWVkIG9mIHZhbHVlcyBiZWluZyBwcm9kdWNlZCBlYWNoIGl0ZXJhdGlvbiwgcmV0dXJuaW5nIERhdGUgdmFsdWVzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBnZW5lcmF0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBPYnNlcnZhYmxlLmdlbmVyYXRlV2l0aEFic29sdXRlVGltZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlKHN0YXRlLCBjbmRGbiwgaXRyRm4sIHJlc0ZuLCB0aW1lRm4sIHMpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9jbmRGbiA9IGNuZEZuO1xuICAgICAgdGhpcy5faXRyRm4gPSBpdHJGbjtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl90aW1lRm4gPSB0aW1lRm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBzdGF0ZS5oYXNSZXN1bHQgJiYgc3RhdGUuby5vbk5leHQoc3RhdGUucmVzdWx0KTtcblxuICAgICAgaWYgKHN0YXRlLmZpcnN0KSB7XG4gICAgICAgIHN0YXRlLmZpcnN0ID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5uZXdTdGF0ZSA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX2l0ckZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5uZXdTdGF0ZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5uZXdTdGF0ZS5lKTsgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZS5oYXNSZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9jbmRGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgaWYgKHN0YXRlLmhhc1Jlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5oYXNSZXN1bHQuZSk7IH1cbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQpIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fcmVzRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLnJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5yZXN1bHQuZSk7IH1cbiAgICAgICAgdmFyIHRpbWUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl90aW1lRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHRpbWUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IodGltZS5lKTsgfVxuICAgICAgICByZWN1cnNlKHN0YXRlLCB0aW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIHNlbGY6IHRoaXMsXG4gICAgICAgIG5ld1N0YXRlOiB0aGlzLl9zdGF0ZSxcbiAgICAgICAgZmlyc3Q6IHRydWUsXG4gICAgICAgIGhhc1Jlc3VsdDogZmFsc2VcbiAgICAgIH07XG4gICAgICByZXR1cm4gdGhpcy5fcy5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZShzdGF0ZSwgMCwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGl0ZXJhdGluZyBhIHN0YXRlIGZyb20gYW4gaW5pdGlhbCBzdGF0ZSB1bnRpbCB0aGUgY29uZGl0aW9uIGZhaWxzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgcmVzID0gc291cmNlLmdlbmVyYXRlV2l0aFJlbGF0aXZlVGltZSgwLFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiByZXR1cm4gdHJ1ZTsgfSxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIDUwMDsgfVxuICAgKiAgKTtcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBDb25kaXRpb24gdG8gdGVybWluYXRlIGdlbmVyYXRpb24gKHVwb24gcmV0dXJuaW5nIGZhbHNlKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lU2VsZWN0b3IgVGltZSBzZWxlY3RvciBmdW5jdGlvbiB0byBjb250cm9sIHRoZSBzcGVlZCBvZiB2YWx1ZXMgYmVpbmcgcHJvZHVjZWQgZWFjaCBpdGVyYXRpb24sIHJldHVybmluZyBpbnRlZ2VyIHZhbHVlcyBkZW5vdGluZyBtaWxsaXNlY29uZHMuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3AuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIE9ic2VydmFibGUuZ2VuZXJhdGVXaXRoUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3RvciwgdGltZVNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3RvciwgdGltZVNlbGVjdG9yLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBEZWxheVN1YnNjcmlwdGlvbiA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWxheVN1YnNjcmlwdGlvbiwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWxheVN1YnNjcmlwdGlvbihzb3VyY2UsIGR0LCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2R0ID0gZHQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlbGF5U3Vic2NyaXB0aW9uLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblxuICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUoW3RoaXMuc291cmNlLCBvLCBkXSwgdGhpcy5fZHQsIHNjaGVkdWxlTWV0aG9kKSk7XG5cbiAgICAgIHJldHVybiBkO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBzdGF0ZSkge1xuICAgICAgdmFyIHNvdXJjZSA9IHN0YXRlWzBdLCBvID0gc3RhdGVbMV0sIGQgPSBzdGF0ZVsyXTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG8pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gRGVsYXlTdWJzY3JpcHRpb247XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFRpbWUgc2hpZnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGRlbGF5aW5nIHRoZSBzdWJzY3JpcHRpb24gd2l0aCB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHRpbWUgZHVyYXRpb24sIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gc291cmNlLmRlbGF5U3Vic2NyaXB0aW9uKDUwMDApOyAvLyA1c1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5kZWxheVN1YnNjcmlwdGlvbig1MDAwLCBSeC5TY2hlZHVsZXIuZGVmYXVsdCk7IC8vIDUgc2Vjb25kc1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSBvciBhYnNvbHV0ZSB0aW1lIHNoaWZ0IG9mIHRoZSBzdWJzY3JpcHRpb24uXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgc3Vic2NyaXB0aW9uIGRlbGF5IHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRpbWUtc2hpZnRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kZWxheVN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uIChkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IERlbGF5U3Vic2NyaXB0aW9uKHRoaXMsIGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIGQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlcihvLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBwLl9zO1xuICAgICAgdGhpcy5fZCA9IHAuX2Q7XG4gICAgICB0aGlzLl9xID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCk7XG4gICAgICB0aGlzLl9xLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogeCB9KTtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDAgJiYgbm93IC0gdGhpcy5fcVswXS5pbnRlcnZhbCA+PSB0aGlzLl9kKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKS52YWx1ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwICYmIG5vdyAtIHRoaXMuX3FbMF0uaW50ZXJ2YWwgPj0gdGhpcy5fZCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xLnNoaWZ0KCkudmFsdWUpO1xuICAgICAgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFNraXBzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIHJlY2VpdmVkIGR1cmluZyB0aGUgaW5pdGlhbCBkdXJhdGlvbiB3aW5kb3cuXG4gICAqICBBcyBtb3JlIGVsZW1lbnRzIGFyZSByZWNlaXZlZCwgZWxlbWVudHMgb2xkZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGFyZSB0YWtlbiBmcm9tIHRoZSBxdWV1ZSBhbmQgcHJvZHVjZWQgb24gdGhlXG4gICAqICByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQgd2l0aCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciBza2lwcGluZyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dFxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyBza2lwcGVkIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBMYXN0V2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUodGhpcywgZHVyYXRpb24sIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIGQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlcihvLCB0aGlzLl9kLCB0aGlzLl9zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlcihvLCBkLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9xID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCk7XG4gICAgICB0aGlzLl9xLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogeCB9KTtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDAgJiYgbm93IC0gdGhpcy5fcVswXS5pbnRlcnZhbCA+PSB0aGlzLl9kKSB7XG4gICAgICAgIHRoaXMuX3Euc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbm93ID0gdGhpcy5fcy5ub3coKTtcbiAgICAgIHdoaWxlICh0aGlzLl9xLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLl9xLnNoaWZ0KCk7XG4gICAgICAgIGlmIChub3cgLSBuZXh0LmludGVydmFsIDw9IHRoaXMuX2QpIHsgdGhpcy5fby5vbk5leHQobmV4dC52YWx1ZSk7IH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGVsZW1lbnRzIHdpdGhpbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVycyB0byBydW4gdGltZXJzIGFuZCB0byBkcmFpbiB0aGUgY29sbGVjdGVkIGVsZW1lbnRzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyByZWNlaXZlZCBkdXJpbmcgdGhlIGluaXRpYWwgZHVyYXRpb24gd2luZG93LlxuICAgKiAgQXMgbW9yZSBlbGVtZW50cyBhcmUgcmVjZWl2ZWQsIGVsZW1lbnRzIG9sZGVyIHRoYW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBhcmUgdGFrZW4gZnJvbSB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZVxuICAgKiAgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkIHdpdGggZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3IgdGFraW5nIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyB0YWtlbiBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdFdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRha2VMYXN0V2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIGR1cmF0aW9uLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBhcnJheSB3aXRoIHRoZSBlbGVtZW50cyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyByZWNlaXZlZCBkdXJpbmcgdGhlIGluaXRpYWwgZHVyYXRpb24gd2luZG93LlxuICAgKiAgQXMgbW9yZSBlbGVtZW50cyBhcmUgcmVjZWl2ZWQsIGVsZW1lbnRzIG9sZGVyIHRoYW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBhcmUgdGFrZW4gZnJvbSB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZVxuICAgKiAgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkIHdpdGggZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3IgdGFraW5nIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGFycmF5IHdpdGggdGhlIGVsZW1lbnRzIHRha2VuIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0QnVmZmVyV2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHEgPSBbXTtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHEucHVzaCh7IGludGVydmFsOiBub3csIHZhbHVlOiB4IH0pO1xuICAgICAgICB3aGlsZSAocS5sZW5ndGggPiAwICYmIG5vdyAtIHFbMF0uaW50ZXJ2YWwgPj0gZHVyYXRpb24pIHtcbiAgICAgICAgICBxLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpLCByZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHZhciBuZXh0ID0gcS5zaGlmdCgpO1xuICAgICAgICAgIG5vdyAtIG5leHQuaW50ZXJ2YWwgPD0gZHVyYXRpb24gJiYgcmVzLnB1c2gobmV4dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgZCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgbykge1xuICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgIH1cblxuICAgIFRha2VXaXRoVGltZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKG8sIHRoaXMuX2QsIHNjaGVkdWxlTWV0aG9kKSxcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgVGFrZXMgZWxlbWVudHMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS50YWtlV2l0aFRpbWUoNTAwMCwgIFtvcHRpb25hbCBzY2hlZHVsZXJdKTtcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyB0YWtlbiBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIGR1cmF0aW9uLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBzZWxmKSB7XG4gICAgICBzZWxmLl9vcGVuID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZSh0aGlzLCB0aGlzLl9kLCBzY2hlZHVsZU1ldGhvZCksXG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcykpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwV2l0aFRpbWVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwV2l0aFRpbWVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9wLl9vcGVuICYmIHRoaXMuX28ub25OZXh0KHgpOyB9O1xuICAgIFNraXBXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcFdpdGhUaW1lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgU2tpcHMgZWxlbWVudHMgZm9yIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFNwZWNpZnlpbmcgYSB6ZXJvIHZhbHVlIGZvciBkdXJhdGlvbiBkb2Vzbid0IGd1YXJhbnRlZSBubyBlbGVtZW50cyB3aWxsIGJlIGRyb3BwZWQgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogIFRoaXMgaXMgYSBzaWRlLWVmZmVjdCBvZiB0aGUgYXN5bmNocm9ueSBpbnRyb2R1Y2VkIGJ5IHRoZSBzY2hlZHVsZXIsIHdoZXJlIHRoZSBhY3Rpb24gdGhhdCBjYXVzZXMgY2FsbGJhY2tzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZSB0byBiZSBmb3J3YXJkZWRcbiAgICogIG1heSBub3QgZXhlY3V0ZSBpbW1lZGlhdGVseSwgZGVzcGl0ZSB0aGUgemVybyBkdWUgdGltZS5cbiAgICpcbiAgICogIEVycm9ycyBwcm9kdWNlZCBieSB0aGUgc291cmNlIHNlcXVlbmNlIGFyZSBhbHdheXMgZm9yd2FyZGVkIHRvIHRoZSByZXN1bHQgc2VxdWVuY2UsIGV2ZW4gaWYgdGhlIGVycm9yIG9jY3VycyBiZWZvcmUgdGhlIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHNraXBwaW5nIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIGVsZW1lbnRzIHNraXBwZWQgZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwV2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgc3RhcnRUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fc3QgPSBzdGFydFRpbWU7XG4gICAgICB0aGlzLl9zID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc3RhdGUpIHtcbiAgICAgIHN0YXRlLl9vcGVuID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKHRoaXMsIHRoaXMuX3N0LCBzY2hlZHVsZU1ldGhvZCksXG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlcihvLCB0aGlzKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9wLl9vcGVuICYmIHRoaXMuX28ub25OZXh0KHgpOyB9O1xuICAgIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG5cbiAgLyoqXG4gICAqICBTa2lwcyBlbGVtZW50cyBmcm9tIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSB1bnRpbCB0aGUgc3BlY2lmaWVkIHN0YXJ0IHRpbWUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqICBFcnJvcnMgcHJvZHVjZWQgYnkgdGhlIHNvdXJjZSBzZXF1ZW5jZSBhcmUgYWx3YXlzIGZvcndhcmRlZCB0byB0aGUgcmVzdWx0IHNlcXVlbmNlLCBldmVuIGlmIHRoZSBlcnJvciBvY2N1cnMgYmVmb3JlIHRoZSBzdGFydCB0aW1lLlxuICAgKlxuICAgKiBAZXhhbXBsZXNcbiAgICogIDEgLSByZXMgPSBzb3VyY2Uuc2tpcFVudGlsV2l0aFRpbWUobmV3IERhdGUoKSwgW3NjaGVkdWxlcl0pO1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5za2lwVW50aWxXaXRoVGltZSg1MDAwLCBbc2NoZWR1bGVyXSk7XG4gICAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IHN0YXJ0VGltZSBUaW1lIHRvIHN0YXJ0IHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIElmIHRoaXMgdmFsdWUgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIERhdGUoKSwgbm8gZWxlbWVudHMgd2lsbCBiZSBza2lwcGVkLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyBza2lwcGVkIHVudGlsIHRoZSBzcGVjaWZpZWQgc3RhcnQgdGltZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwVW50aWxXaXRoVGltZSA9IGZ1bmN0aW9uIChzdGFydFRpbWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIHN0YXJ0VGltZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogIFRha2VzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIHVudGlsIHRoZSBzcGVjaWZpZWQgZW5kIHRpbWUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHJ1biB0aW1lcnMuXG4gICAqIEBwYXJhbSB7TnVtYmVyIHwgRGF0ZX0gZW5kVGltZSBUaW1lIHRvIHN0b3AgdGFraW5nIGVsZW1lbnRzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gSWYgdGhpcyB2YWx1ZSBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gbmV3IERhdGUoKSwgdGhlIHJlc3VsdCBzdHJlYW0gd2lsbCBjb21wbGV0ZSBpbW1lZGlhdGVseS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyB0YWtlbiB1bnRpbCB0aGUgc3BlY2lmaWVkIGVuZCB0aW1lLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VVbnRpbFdpdGhUaW1lID0gZnVuY3Rpb24gKGVuZFRpbWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobywgZW5kVGltZSwgZnVuY3Rpb24gKF8sIG8pIHsgby5vbkNvbXBsZXRlZCgpOyB9KSxcbiAgICAgICAgc291cmNlLnN1YnNjcmliZShvKSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBPYnNlcnZhYmxlIHRoYXQgZW1pdHMgb25seSB0aGUgZmlyc3QgaXRlbSBlbWl0dGVkIGJ5IHRoZSBzb3VyY2UgT2JzZXJ2YWJsZSBkdXJpbmcgc2VxdWVudGlhbCB0aW1lIHdpbmRvd3Mgb2YgYSBzcGVjaWZpZWQgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aW5kb3dEdXJhdGlvbiB0aW1lIHRvIHdhaXQgYmVmb3JlIGVtaXR0aW5nIGFub3RoZXIgaXRlbSBhZnRlciBlbWl0dGluZyB0aGUgbGFzdCBpdGVtXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSB0aGUgU2NoZWR1bGVyIHRvIHVzZSBpbnRlcm5hbGx5IHRvIG1hbmFnZSB0aGUgdGltZXJzIHRoYXQgaGFuZGxlIHRpbWVvdXQgZm9yIGVhY2ggaXRlbS4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgdGhhdCBwZXJmb3JtcyB0aGUgdGhyb3R0bGUgb3BlcmF0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRocm90dGxlID0gZnVuY3Rpb24gKHdpbmRvd0R1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICB2YXIgZHVyYXRpb24gPSArd2luZG93RHVyYXRpb24gfHwgMDtcbiAgICBpZiAoZHVyYXRpb24gPD0gMCkgeyB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2luZG93RHVyYXRpb24gY2Fubm90IGJlIGxlc3Mgb3IgZXF1YWwgemVyby4nKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxhc3RPbk5leHQgPSAwO1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgICBpZiAobGFzdE9uTmV4dCA9PT0gMCB8fCBub3cgLSBsYXN0T25OZXh0ID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgICBsYXN0T25OZXh0ID0gbm93O1xuICAgICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkgeyBvLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgVHJhbnNkdWNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRyYW5zZHVjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRyYW5zZHVjZU9ic2VydmVyKG8sIHhmb3JtKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3hmb3JtID0geGZvcm07XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUcmFuc2R1Y2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5feGZvcm1bJ0BAdHJhbnNkdWNlci9zdGVwJ10pLmNhbGwodGhpcy5feGZvcm0sIHRoaXMuX28sIHgpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgIH07XG5cbiAgICBUcmFuc2R1Y2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG5cbiAgICBUcmFuc2R1Y2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5feGZvcm1bJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSh0aGlzLl9vKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRyYW5zZHVjZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICBmdW5jdGlvbiB0cmFuc2Zvcm1Gb3JPYnNlcnZlcihvKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdAQHRyYW5zZHVjZXIvaW5pdCc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbztcbiAgICAgIH0sXG4gICAgICAnQEB0cmFuc2R1Y2VyL3N0ZXAnOiBmdW5jdGlvbihvYnMsIGlucHV0KSB7XG4gICAgICAgIHJldHVybiBvYnMub25OZXh0KGlucHV0KTtcbiAgICAgIH0sXG4gICAgICAnQEB0cmFuc2R1Y2VyL3Jlc3VsdCc6IGZ1bmN0aW9uKG9icykge1xuICAgICAgICByZXR1cm4gb2JzLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyBhIHRyYW5zZHVjZXIgdG8gdHJhbnNmb3JtIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlXG4gICAqIEBwYXJhbSB7VHJhbnNkdWNlcn0gdHJhbnNkdWNlciBBIHRyYW5zZHVjZXIgdG8gZXhlY3V0ZVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHRzIGZyb20gdGhlIHRyYW5zZHVjZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udHJhbnNkdWNlID0gZnVuY3Rpb24odHJhbnNkdWNlcikge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgeGZvcm0gPSB0cmFuc2R1Y2VyKHRyYW5zZm9ybUZvck9ic2VydmVyKG8pKTtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUcmFuc2R1Y2VPYnNlcnZlcihvLCB4Zm9ybSkpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFN3aXRjaEZpcnN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3dpdGNoRmlyc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN3aXRjaEZpcnN0T2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoRmlyc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLFxuICAgICAgICBzdGF0ZSA9IHtcbiAgICAgICAgICBoYXNDdXJyZW50OiBmYWxzZSxcbiAgICAgICAgICBpc1N0b3BwZWQ6IGZhbHNlLFxuICAgICAgICAgIG86IG8sXG4gICAgICAgICAgZzogZ1xuICAgICAgICB9O1xuXG4gICAgICBnLmFkZChtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaEZpcnN0T2JzZXJ2ZXIoc3RhdGUpKSk7XG4gICAgICByZXR1cm4gZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN3aXRjaEZpcnN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTd2l0Y2hGaXJzdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN3aXRjaEZpcnN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3dpdGNoRmlyc3RPYnNlcnZlcihzdGF0ZSkge1xuICAgICAgdGhpcy5fcyA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoRmlyc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAoIXRoaXMuX3MuaGFzQ3VycmVudCkge1xuICAgICAgICB0aGlzLl9zLmhhc0N1cnJlbnQgPSB0cnVlO1xuICAgICAgICBpc1Byb21pc2UoeCkgJiYgKHggPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeCkpO1xuICAgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgdGhpcy5fcy5nLmFkZChpbm5lcik7XG4gICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUoeC5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIodGhpcy5fcywgaW5uZXIpKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3Muby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAhdGhpcy5fcy5oYXNDdXJyZW50ICYmIHRoaXMuX3MuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihzdGF0ZSwgaW5uZXIpIHtcbiAgICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX2kgPSBpbm5lcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcy5nLnJlbW92ZSh0aGlzLl9pKTtcbiAgICAgIHRoaXMuX3MuaGFzQ3VycmVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5fcy5pc1N0b3BwZWQgJiYgdGhpcy5fcy5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN3aXRjaEZpcnN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIGV4Y2x1c2l2ZSB3YWl0aW5nIGZvciB0aGUgZmlyc3QgdG8gZmluaXNoIGJlZm9yZSBzdWJzY3JpYmluZyB0byBhbm90aGVyIG9ic2VydmFibGUuXG4gICAqIE9ic2VydmFibGVzIHRoYXQgY29tZSBpbiBiZXR3ZWVuIHN1YnNjcmlwdGlvbnMgd2lsbCBiZSBkcm9wcGVkIG9uIHRoZSBmbG9vci5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEEgZXhjbHVzaXZlIG9ic2VydmFibGUgd2l0aCBvbmx5IHRoZSByZXN1bHRzIHRoYXQgaGFwcGVuIHdoZW4gc3Vic2NyaWJlZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zd2l0Y2hGaXJzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFN3aXRjaEZpcnN0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxub2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBGaXJzdCA9IG9ic2VydmFibGVQcm90by5leGhhdXN0TWFwID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaEZpcnN0KCk7XG59O1xuXG5vYnNlcnZhYmxlUHJvdG8uZmxhdE1hcFdpdGhNYXhDb25jdXJyZW50ID0gb2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBNYXhDb25jdXJyZW50ID0gZnVuY3Rpb24obGltaXQsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5tZXJnZShsaW1pdCk7XG59O1xuXG4gIC8qKiBQcm92aWRlcyBhIHNldCBvZiBleHRlbnNpb24gbWV0aG9kcyBmb3IgdmlydHVhbCB0aW1lIHNjaGVkdWxpbmcuICovXG4gIHZhciBWaXJ0dWFsVGltZVNjaGVkdWxlciA9IFJ4LlZpcnR1YWxUaW1lU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhWaXJ0dWFsVGltZVNjaGVkdWxlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdmlydHVhbCB0aW1lIHNjaGVkdWxlciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBjbG9jayB2YWx1ZSBhbmQgYWJzb2x1dGUgdGltZSBjb21wYXJlci5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbml0aWFsQ2xvY2sgSW5pdGlhbCB2YWx1ZSBmb3IgdGhlIGNsb2NrLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmVyIENvbXBhcmVyIHRvIGRldGVybWluZSBjYXVzYWxpdHkgb2YgZXZlbnRzIGJhc2VkIG9uIGFic29sdXRlIHRpbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlydHVhbFRpbWVTY2hlZHVsZXIoaW5pdGlhbENsb2NrLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5jbG9jayA9IGluaXRpYWxDbG9jaztcbiAgICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICAgIHRoaXMuaXNFbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoMTAyNCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICB2YXIgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUgPSBWaXJ0dWFsVGltZVNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy50b0Fic29sdXRlVGltZSh0aGlzLmNsb2NrKTtcbiAgICB9O1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShzdGF0ZSwgdGhpcy5jbG9jaywgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdmFyIGR0ID0gZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgP1xuICAgICAgICB0aGlzLnRvUmVsYXRpdmVUaW1lKGR1ZVRpbWUgLSB0aGlzLm5vdygpKSA6XG4gICAgICAgIHRoaXMudG9SZWxhdGl2ZVRpbWUoZHVlVGltZSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlUmVsYXRpdmUoc3RhdGUsIGR0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdGltZSB2YWx1ZSB0byBhbiBhYnNvbHV0ZSB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZGQgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIGFic29sdXRlIHRpbWUgdG8gYSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge0FueX0gVGhlIGFic29sdXRlIHRpbWUuXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhlIGFic29sdXRlIHRpbWUgaW4gbXNcbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS50b0Fic29sdXRlVGltZSA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBUaW1lU3BhbiB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQ29ycmVzcG9uZGluZyByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUudG9SZWxhdGl2ZVRpbWUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBlbXVsYXRlZCB1c2luZyByZWN1cnNpdmUgc2NoZWR1bGluZy5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBJbml0aWFsIHN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHVwb24gdGhlIGZpcnN0IGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcnVubmluZyB0aGUgd29yayBwZXJpb2RpY2FsbHkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCByZWN1cnJpbmcgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIHZhciBzID0gbmV3IFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUodGhpcywgc3RhdGUsIHBlcmlvZCwgYWN0aW9uKTtcbiAgICAgIHJldHVybiBzLnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZHVlVGltZS5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zY2hlZHVsZVJlbGF0aXZlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBydW5BdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIGR1ZVRpbWUpO1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShzdGF0ZSwgcnVuQXQsIGFjdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdmlydHVhbCB0aW1lIHNjaGVkdWxlci5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldE5leHQoKTtcbiAgICAgICAgICBpZiAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRoaXMuY2xvY2spID4gMCAmJiAodGhpcy5jbG9jayA9IG5leHQuZHVlVGltZSk7XG4gICAgICAgICAgICBuZXh0Lmludm9rZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodGhpcy5pc0VuYWJsZWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgdmlydHVhbCB0aW1lIHNjaGVkdWxlci5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIHRvIHRoZSBzcGVjaWZpZWQgdGltZSwgcnVubmluZyBhbGwgd29yayB0aWxsIHRoYXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgQWJzb2x1dGUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayB0by5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZHZhbmNlVG8gPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGR1ZVRvQ2xvY2sgPSB0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIHRpbWUpO1xuICAgICAgaWYgKHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgdGltZSkgPiAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgICBpZiAoZHVlVG9DbG9jayA9PT0gMCkgeyByZXR1cm47IH1cbiAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldE5leHQoKTtcbiAgICAgICAgICBpZiAobmV4dCAhPT0gbnVsbCAmJiB0aGlzLmNvbXBhcmVyKG5leHQuZHVlVGltZSwgdGltZSkgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRoaXMuY2xvY2spID4gMCAmJiAodGhpcy5jbG9jayA9IG5leHQuZHVlVGltZSk7XG4gICAgICAgICAgICBuZXh0Lmludm9rZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodGhpcy5pc0VuYWJsZWQpO1xuICAgICAgICB0aGlzLmNsb2NrID0gdGltZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgdGltZSwgcnVubmluZyBhbGwgd29yayBzY2hlZHVsZWQgZm9yIHRoYXQgdGltZXNwYW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgUmVsYXRpdmUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZHZhbmNlQnkgPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGR0ID0gdGhpcy5hZGQodGhpcy5jbG9jaywgdGltZSksXG4gICAgICAgICAgZHVlVG9DbG9jayA9IHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgZHQpO1xuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPiAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgICBpZiAoZHVlVG9DbG9jayA9PT0gMCkgeyAgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuYWR2YW5jZVRvKGR0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgdGltZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZSBSZWxhdGl2ZSB0aW1lIHRvIGFkdmFuY2UgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5LlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNsZWVwID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIHRpbWUpO1xuICAgICAgaWYgKHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgZHQpID49IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cblxuICAgICAgdGhpcy5jbG9jayA9IGR0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuZXh0IHNjaGVkdWxlZCBpdGVtIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm5zIHtTY2hlZHVsZWRJdGVtfSBUaGUgbmV4dCBzY2hlZHVsZWQgaXRlbS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbmV4dCA9IHRoaXMucXVldWUucGVlaygpO1xuICAgICAgICBpZiAobmV4dC5pc0NhbmNlbGxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGF0IGR1ZVRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgdGltZSBhdCB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVBYnNvbHV0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bihzY2hlZHVsZXIsIHN0YXRlMSkge1xuICAgICAgICBzZWxmLnF1ZXVlLnJlbW92ZShzaSk7XG4gICAgICAgIHJldHVybiBhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZTEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2kgPSBuZXcgU2NoZWR1bGVkSXRlbSh0aGlzLCBzdGF0ZSwgcnVuLCBkdWVUaW1lLCB0aGlzLmNvbXBhcmVyKTtcbiAgICAgIHRoaXMucXVldWUuZW5xdWV1ZShzaSk7XG5cbiAgICAgIHJldHVybiBzaS5kaXNwb3NhYmxlO1xuICAgIH07XG5cbiAgICByZXR1cm4gVmlydHVhbFRpbWVTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgLyoqIFByb3ZpZGVzIGEgdmlydHVhbCB0aW1lIHNjaGVkdWxlciB0aGF0IHVzZXMgRGF0ZSBmb3IgYWJzb2x1dGUgdGltZSBhbmQgbnVtYmVyIGZvciByZWxhdGl2ZSB0aW1lLiAqL1xuICBSeC5IaXN0b3JpY2FsU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhIaXN0b3JpY2FsU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBoaXN0b3JpY2FsIHNjaGVkdWxlciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBjbG9jayB2YWx1ZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5pdGlhbENsb2NrIEluaXRpYWwgdmFsdWUgZm9yIHRoZSBjbG9jay5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBDb21wYXJlciB0byBkZXRlcm1pbmUgY2F1c2FsaXR5IG9mIGV2ZW50cyBiYXNlZCBvbiBhYnNvbHV0ZSB0aW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEhpc3RvcmljYWxTY2hlZHVsZXIoaW5pdGlhbENsb2NrLCBjb21wYXJlcikge1xuICAgICAgdmFyIGNsb2NrID0gaW5pdGlhbENsb2NrID09IG51bGwgPyAwIDogaW5pdGlhbENsb2NrO1xuICAgICAgdmFyIGNtcCA9IGNvbXBhcmVyIHx8IGRlZmF1bHRTdWJDb21wYXJlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMsIGNsb2NrLCBjbXApO1xuICAgIH1cblxuICAgIHZhciBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8gPSBIaXN0b3JpY2FsU2NoZWR1bGVyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZWxhdGl2ZSB0aW1lIHZhbHVlIHRvIGFuIGFic29sdXRlIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcmVsYXRpdmUgUmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFJlc3VsdGluZyBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgc3VtIHZhbHVlLlxuICAgICAqL1xuICAgIEhpc3RvcmljYWxTY2hlZHVsZXJQcm90by5hZGQgPSBmdW5jdGlvbiAoYWJzb2x1dGUsIHJlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gYWJzb2x1dGUgKyByZWxhdGl2ZTtcbiAgICB9O1xuXG4gICAgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvLnRvQWJzb2x1dGVUaW1lID0gZnVuY3Rpb24gKGFic29sdXRlKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoYWJzb2x1dGUpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBtZW1iZXJPZiBIaXN0b3JpY2FsU2NoZWR1bGVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIFRpbWVTcGFuIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBDb3JyZXNwb25kaW5nIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8udG9SZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4pIHtcbiAgICAgIHJldHVybiB0aW1lU3BhbjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEhpc3RvcmljYWxTY2hlZHVsZXI7XG4gIH0oUnguVmlydHVhbFRpbWVTY2hlZHVsZXIpKTtcblxuZnVuY3Rpb24gT25OZXh0UHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xufVxuXG5Pbk5leHRQcmVkaWNhdGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICBpZiAob3RoZXIgPT09IHRoaXMpIHsgcmV0dXJuIHRydWU7IH1cbiAgaWYgKG90aGVyID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChvdGhlci5raW5kICE9PSAnTicpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIHJldHVybiB0aGlzLnByZWRpY2F0ZShvdGhlci52YWx1ZSk7XG59O1xuXG5mdW5jdGlvbiBPbkVycm9yUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbn1cblxuT25FcnJvclByZWRpY2F0ZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIGlmIChvdGhlciA9PT0gdGhpcykgeyByZXR1cm4gdHJ1ZTsgfVxuICBpZiAob3RoZXIgPT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgaWYgKG90aGVyLmtpbmQgIT09ICdFJykgeyByZXR1cm4gZmFsc2U7IH1cbiAgcmV0dXJuIHRoaXMucHJlZGljYXRlKG90aGVyLmVycm9yKTtcbn07XG5cbnZhciBSZWFjdGl2ZVRlc3QgPSBSeC5SZWFjdGl2ZVRlc3QgPSB7XG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIGZvciBjcmVhdGlvbiBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB1bml0IHRlc3RzLiAqL1xuICBjcmVhdGVkOiAxMDAsXG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIHRvIHN1YnNjcmliZSB0byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB1bml0IHRlc3RzLiAqL1xuICBzdWJzY3JpYmVkOiAyMDAsXG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIHRvIGRpc3Bvc2Ugc3Vic2NyaXB0aW9ucyBpbiB1bml0IHRlc3RzLiAqL1xuICBkaXNwb3NlZDogMTAwMCxcblxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGFuIE9uTmV4dCBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZSB3aXRoIGEgZ2l2ZW4gdmFsdWUgb3IgYSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIDEgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgNDIpO1xuICAgKiAyIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lmxlbmd0aCA9PSAyOyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25OZXh0IG5vdGlmaWNhdGlvbiBvY2N1cnMuXG4gICAqIEBwYXJhbSB2YWx1ZSBSZWNvcmRlZCB2YWx1ZSBzdG9yZWQgaW4gdGhlIE9uTmV4dCBub3RpZmljYXRpb24gb3IgYSBwcmVkaWNhdGUuXG4gICAqIEByZXR1cm4gUmVjb3JkZWQgT25OZXh0IG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIG9uTmV4dDogZnVuY3Rpb24gKHRpY2tzLCB2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgP1xuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBuZXcgT25OZXh0UHJlZGljYXRlKHZhbHVlKSkgOlxuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0KHZhbHVlKSk7XG4gIH0sXG4gIC8qKlxuICAgKiBGYWN0b3J5IG1ldGhvZCBmb3IgYW4gT25FcnJvciBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZSB3aXRoIGEgZ2l2ZW4gZXJyb3IuXG4gICAqXG4gICAqIDEgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgbmV3IEVycm9yKCdlcnJvcicpKTtcbiAgICogMiAtIFJlYWN0aXZlVGVzdC5vbk5leHQoMjAwLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5tZXNzYWdlID09PSAnZXJyb3InOyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25FcnJvciBub3RpZmljYXRpb24gb2NjdXJzLlxuICAgKiBAcGFyYW0gZXhjZXB0aW9uIFJlY29yZGVkIGV4Y2VwdGlvbiBzdG9yZWQgaW4gdGhlIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJuIFJlY29yZGVkIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgb25FcnJvcjogZnVuY3Rpb24gKHRpY2tzLCBlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdmdW5jdGlvbicgP1xuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBuZXcgT25FcnJvclByZWRpY2F0ZShlcnJvcikpIDpcbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZXJyb3IpKTtcbiAgfSxcbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIG9jY3Vycy5cbiAgICogQHJldHVybiBSZWNvcmRlZCBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAqL1xuICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKHRpY2tzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkKCkpO1xuICB9LFxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGEgc3Vic2NyaXB0aW9uIHJlY29yZCBiYXNlZCBvbiBhIGdpdmVuIHN1YnNjcmlwdGlvbiBhbmQgZGlzcG9zYWwgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHN0YXJ0IFZpcnR1YWwgdGltZSBpbmRpY2F0aW5nIHdoZW4gdGhlIHN1YnNjcmlwdGlvbiB3YXMgY3JlYXRlZC5cbiAgICogQHBhcmFtIGVuZCBWaXJ0dWFsIHRpbWUgaW5kaWNhdGluZyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gd2FzIGRpc3Bvc2VkLlxuICAgKiBAcmV0dXJuIFN1YnNjcmlwdGlvbiBvYmplY3QuXG4gICAqL1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpcHRpb24oc3RhcnQsIGVuZCk7XG4gIH1cbn07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHJlY29yZGluZyB0aGUgcHJvZHVjdGlvbiBvZiB0aGUgc3BlY2lmaWVkIHZhbHVlIGF0IHRoZSBnaXZlbiB2aXJ0dWFsIHRpbWUuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZSBWaXJ0dWFsIHRpbWUgdGhlIHZhbHVlIHdhcyBwcm9kdWNlZCBvbi5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVmFsdWUgdGhhdCB3YXMgcHJvZHVjZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmVyIEFuIG9wdGlvbmFsIGNvbXBhcmVyLlxuICAgKi9cbiAgdmFyIFJlY29yZGVkID0gUnguUmVjb3JkZWQgPSBmdW5jdGlvbiAodGltZSwgdmFsdWUsIGNvbXBhcmVyKSB7XG4gICAgdGhpcy50aW1lID0gdGltZTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyIHx8IGRlZmF1bHRDb21wYXJlcjtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHJlY29yZGVkIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWNvcmRlZH0gb3RoZXIgUmVjb3JkZWQgb2JqZWN0IHRvIGNoZWNrIGZvciBlcXVhbGl0eS5cbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYm90aCBvYmplY3RzIGFyZSBlcXVhbDsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgUmVjb3JkZWQucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLnRpbWUgPT09IG90aGVyLnRpbWUgJiYgdGhpcy5jb21wYXJlcih0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgUmVjb3JkZWQgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBSZWNvcmRlZCB2YWx1ZS5cbiAgICovXG4gIFJlY29yZGVkLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS50b1N0cmluZygpICsgJ0AnICsgdGhpcy50aW1lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHN1YnNjcmlwdGlvbiBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gdmlydHVhbCBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIHRpbWUuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge051bWJlcn0gc3Vic2NyaWJlIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0aGUgc3Vic2NyaXB0aW9uIG9jY3VycmVkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdW5zdWJzY3JpYmUgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRoZSB1bnN1YnNjcmlwdGlvbiBvY2N1cnJlZC5cbiAgICovXG4gIHZhciBTdWJzY3JpcHRpb24gPSBSeC5TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHRoaXMuc3Vic2NyaWJlID0gc3RhcnQ7XG4gICAgdGhpcy51bnN1YnNjcmliZSA9IGVuZCB8fCBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gc3Vic2NyaXB0aW9uIGlzIGVxdWFsIHRvIHRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAgKiBAcGFyYW0gb3RoZXIgU3Vic2NyaXB0aW9uIG9iamVjdCB0byBjaGVjayBmb3IgZXF1YWxpdHkuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGJvdGggb2JqZWN0cyBhcmUgZXF1YWw7IGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlID09PSBvdGhlci5zdWJzY3JpYmUgJiYgdGhpcy51bnN1YnNjcmliZSA9PT0gb3RoZXIudW5zdWJzY3JpYmU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uIHZhbHVlLlxuICAgKi9cbiAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJygnICsgdGhpcy5zdWJzY3JpYmUgKyAnLCAnICsgKHRoaXMudW5zdWJzY3JpYmUgPT09IE51bWJlci5NQVhfVkFMVUUgPyAnSW5maW5pdGUnIDogdGhpcy51bnN1YnNjcmliZSkgKyAnKSc7XG4gIH07XG5cbiAgdmFyIE1vY2tEaXNwb3NhYmxlID0gUnguTW9ja0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5kaXNwb3NlcyA9IFtdO1xuICAgIHRoaXMuZGlzcG9zZXMucHVzaCh0aGlzLnNjaGVkdWxlci5jbG9jayk7XG4gIH07XG5cbiAgTW9ja0Rpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXNwb3Nlcy5wdXNoKHRoaXMuc2NoZWR1bGVyLmNsb2NrKTtcbiAgfTtcblxuICB2YXIgTW9ja09ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNb2NrT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNb2NrT2JzZXJ2ZXIoc2NoZWR1bGVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIH1cblxuICAgIHZhciBNb2NrT2JzZXJ2ZXJQcm90b3R5cGUgPSBNb2NrT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpKTtcbiAgICB9O1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZSkpKTtcbiAgICB9O1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkKCkpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1vY2tPYnNlcnZlcjtcbiAgfSkoT2JzZXJ2ZXIpO1xuXG4gIGZ1bmN0aW9uIE1vY2tQcm9taXNlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5tZXNzYWdlc1tpXSxcbiAgICAgICAgICBub3RpZmljYXRpb24gPSBtZXNzYWdlLnZhbHVlO1xuICAgICAgKGZ1bmN0aW9uIChpbm5lck5vdGlmaWNhdGlvbikge1xuICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBtZXNzYWdlLnRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb2JzID0gc2VsZi5vYnNlcnZlcnMuc2xpY2UoMCk7XG5cbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgakxlbiA9IG9icy5sZW5ndGg7IGogPCBqTGVuOyBqKyspIHtcbiAgICAgICAgICAgIGlubmVyTm90aWZpY2F0aW9uLmFjY2VwdChvYnNbal0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9KTtcbiAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgTW9ja1Byb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAob25SZXNvbHZlZCwgb25SZWplY3RlZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKG5ldyBTdWJzY3JpcHRpb24odGhpcy5zY2hlZHVsZXIuY2xvY2spKTtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoIC0gMTtcblxuICAgIHZhciBuZXdQcm9taXNlO1xuXG4gICAgdmFyIG9ic2VydmVyID0gUnguT2JzZXJ2ZXIuY3JlYXRlKFxuICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIHJldFZhbHVlID0gb25SZXNvbHZlZCh4KTtcbiAgICAgICAgaWYgKHJldFZhbHVlICYmIHR5cGVvZiByZXRWYWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbmV3UHJvbWlzZSA9IHJldFZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0aWNrcyA9IHNlbGYuc2NoZWR1bGVyLmNsb2NrO1xuICAgICAgICAgIG5ld1Byb21pc2UgPSBuZXcgTW9ja1Byb21pc2Uoc2VsZi5zY2hlZHVsZXIsIFtSeC5SZWFjdGl2ZVRlc3Qub25OZXh0KHRpY2tzLCB1bmRlZmluZWQpLCBSeC5SZWFjdGl2ZVRlc3Qub25Db21wbGV0ZWQodGlja3MpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkeCA9IHNlbGYub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xuICAgICAgICBzZWxmLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24oc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIHNlbGYuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIG9uUmVqZWN0ZWQoZXJyKTtcbiAgICAgICAgdmFyIGlkeCA9IHNlbGYub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xuICAgICAgICBzZWxmLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24oc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIHNlbGYuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuXG4gICAgcmV0dXJuIG5ld1Byb21pc2UgfHwgbmV3IE1vY2tQcm9taXNlKHRoaXMuc2NoZWR1bGVyLCB0aGlzLm1lc3NhZ2VzKTtcbiAgfTtcblxuICB2YXIgSG90T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSG90T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEhvdE9ic2VydmFibGUoc2NoZWR1bGVyLCBtZXNzYWdlcykge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB2YXIgbWVzc2FnZSwgbm90aWZpY2F0aW9uLCBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV07XG4gICAgICAgIG5vdGlmaWNhdGlvbiA9IG1lc3NhZ2UudmFsdWU7XG4gICAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBtZXNzYWdlLnRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvYnMgPSBvYnNlcnZhYmxlLm9ic2VydmVycy5zbGljZSgwKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpMZW4gPSBvYnMubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XG4gICAgICAgICAgICAgIGlubmVyTm90aWZpY2F0aW9uLmFjY2VwdChvYnNbal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkobm90aWZpY2F0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBIb3RPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChuZXcgU3Vic2NyaXB0aW9uKHRoaXMuc2NoZWR1bGVyLmNsb2NrKSk7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoIC0gMTtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlkeCA9IG9ic2VydmFibGUub2JzZXJ2ZXJzLmluZGV4T2Yobyk7XG4gICAgICAgIG9ic2VydmFibGUub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmlwdGlvbnNbaW5kZXhdID0gbmV3IFN1YnNjcmlwdGlvbihvYnNlcnZhYmxlLnN1YnNjcmlwdGlvbnNbaW5kZXhdLnN1YnNjcmliZSwgb2JzZXJ2YWJsZS5zY2hlZHVsZXIuY2xvY2spO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBIb3RPYnNlcnZhYmxlO1xuICB9KShPYnNlcnZhYmxlKTtcblxuICB2YXIgQ29sZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbGRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQ29sZE9ic2VydmFibGUoc2NoZWR1bGVyLCBtZXNzYWdlcykge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIENvbGRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBtZXNzYWdlLCBub3RpZmljYXRpb24sIG9ic2VydmFibGUgPSB0aGlzO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2gobmV3IFN1YnNjcmlwdGlvbih0aGlzLnNjaGVkdWxlci5jbG9jaykpO1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5tZXNzYWdlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBtZXNzYWdlID0gdGhpcy5tZXNzYWdlc1tpXTtcbiAgICAgICAgbm90aWZpY2F0aW9uID0gbWVzc2FnZS52YWx1ZTtcbiAgICAgICAgKGZ1bmN0aW9uIChpbm5lck5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIGQuYWRkKG9ic2VydmFibGUuc2NoZWR1bGVyLnNjaGVkdWxlUmVsYXRpdmUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQobyk7XG4gICAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkobm90aWZpY2F0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24ob2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIG9ic2VydmFibGUuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbGRPYnNlcnZhYmxlO1xuICB9KShPYnNlcnZhYmxlKTtcblxuICAvKiogVmlydHVhbCB0aW1lIHNjaGVkdWxlciB1c2VkIGZvciB0ZXN0aW5nIGFwcGxpY2F0aW9ucyBhbmQgbGlicmFyaWVzIGJ1aWx0IHVzaW5nIFJlYWN0aXZlIEV4dGVuc2lvbnMuICovXG4gIFJ4LlRlc3RTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRlc3RTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBiYXNlQ29tcGFyZXIoeCwgeSkge1xuICAgICAgcmV0dXJuIHggPiB5ID8gMSA6ICh4IDwgeSA/IC0xIDogMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVGVzdFNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMsIDAsIGJhc2VDb21wYXJlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhdCB0aGUgc3BlY2lmaWVkIHZpcnR1YWwgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0gZHVlVGltZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgICAqIEBwYXJhbSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm4gRGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUFic29sdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIGR1ZVRpbWUgPD0gdGhpcy5jbG9jayAmJiAoZHVlVGltZSA9IHRoaXMuY2xvY2sgKyAxKTtcbiAgICAgIHJldHVybiBfX3N1cGVyX18ucHJvdG90eXBlLnNjaGVkdWxlQWJzb2x1dGUuY2FsbCh0aGlzLCBzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdG8gYW4gYWJzb2x1dGUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcmVsYXRpdmUgUmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIFJlc3VsdGluZyBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgc3VtIHZhbHVlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChhYnNvbHV0ZSwgcmVsYXRpdmUpIHtcbiAgICAgIHJldHVybiBhYnNvbHV0ZSArIHJlbGF0aXZlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhIERhdGVUaW1lT2Zmc2V0IHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4gQ29ycmVzcG9uZGluZyBEYXRlVGltZU9mZnNldCB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS50b0Fic29sdXRlVGltZSA9IGZ1bmN0aW9uIChhYnNvbHV0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGFic29sdXRlKS5nZXRUaW1lKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgVGltZVNwYW4gdmFsdWUgdG8gYSByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZVNwYW4gVGltZVNwYW4gdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIENvcnJlc3BvbmRpbmcgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLnRvUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRlc3Qgc2NoZWR1bGVyIGFuZCB1c2VzIHRoZSBzcGVjaWZpZWQgdmlydHVhbCB0aW1lcyB0byBpbnZva2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24sIHN1YnNjcmliZSB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlLCBhbmQgZGlzcG9zZSB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNyZWF0ZSBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gY3JlYXRlZCBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gaW52b2tlIHRoZSBmYWN0b3J5IHRvIGNyZWF0ZSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSBzdWJzY3JpYmVkIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0byBzdWJzY3JpYmUgdG8gdGhlIGNyZWF0ZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gZGlzcG9zZWQgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGRpc3Bvc2UgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKiBAcmV0dXJuIE9ic2VydmVyIHdpdGggdGltZXN0YW1wZWQgcmVjb3JkaW5ncyBvZiBub3RpZmljYXRpb24gbWVzc2FnZXMgdGhhdCB3ZXJlIHJlY2VpdmVkIGR1cmluZyB0aGUgdmlydHVhbCB0aW1lIHdpbmRvdyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZSB3YXMgYWN0aXZlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLnN0YXJ0U2NoZWR1bGVyID0gZnVuY3Rpb24gKGNyZWF0ZUZuLCBzZXR0aW5ncykge1xuICAgICAgc2V0dGluZ3MgfHwgKHNldHRpbmdzID0ge30pO1xuICAgICAgc2V0dGluZ3MuY3JlYXRlZCA9PSBudWxsICYmIChzZXR0aW5ncy5jcmVhdGVkID0gUmVhY3RpdmVUZXN0LmNyZWF0ZWQpO1xuICAgICAgc2V0dGluZ3Muc3Vic2NyaWJlZCA9PSBudWxsICYmIChzZXR0aW5ncy5zdWJzY3JpYmVkID0gUmVhY3RpdmVUZXN0LnN1YnNjcmliZWQpO1xuICAgICAgc2V0dGluZ3MuZGlzcG9zZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3MuZGlzcG9zZWQgPSBSZWFjdGl2ZVRlc3QuZGlzcG9zZWQpO1xuXG4gICAgICB2YXIgb2JzZXJ2ZXIgPSB0aGlzLmNyZWF0ZU9ic2VydmVyKCksIHNvdXJjZSwgc3Vic2NyaXB0aW9uO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3MuY3JlYXRlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzb3VyY2UgPSBjcmVhdGVGbigpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBzZXR0aW5ncy5zdWJzY3JpYmVkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBzZXR0aW5ncy5kaXNwb3NlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc3RhcnQoKTtcblxuICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgaG90IG9ic2VydmFibGUgdXNpbmcgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgTm90aWZpY2F0aW9ucyB0byBzdXJmYWNlIHRocm91Z2ggdGhlIGNyZWF0ZWQgc2VxdWVuY2UgYXQgdGhlaXIgc3BlY2lmaWVkIGFic29sdXRlIHZpcnR1YWwgdGltZXMuXG4gICAgICogQHJldHVybiBIb3Qgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGFzc2VydCB0aGUgdGltaW5nIG9mIHN1YnNjcmlwdGlvbnMgYW5kIG5vdGlmaWNhdGlvbnMuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlSG90T2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgSG90T2JzZXJ2YWJsZSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbGQgb2JzZXJ2YWJsZSB1c2luZyB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcGVkIG5vdGlmaWNhdGlvbiBtZXNzYWdlcyBlaXRoZXIgYXMgYW4gYXJyYXkgb3IgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBOb3RpZmljYXRpb25zIHRvIHN1cmZhY2UgdGhyb3VnaCB0aGUgY3JlYXRlZCBzZXF1ZW5jZSBhdCB0aGVpciBzcGVjaWZpZWQgdmlydHVhbCB0aW1lIG9mZnNldHMgZnJvbSB0aGUgc2VxdWVuY2Ugc3Vic2NyaXB0aW9uIHRpbWUuXG4gICAgICogQHJldHVybiBDb2xkIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiBzdWJzY3JpcHRpb25zIGFuZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZUNvbGRPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3M7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDb2xkT2JzZXJ2YWJsZSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVkIHByb21pc2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWUgYW5kIHRpY2tzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpY2tzIFRoZSBhYnNvbHV0ZSB0aW1lIG9mIHRoZSByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8geWllbGQgYXQgdGhlIGdpdmVuIHRpY2suXG4gICAgICogQHJldHVybnMge01vY2tQcm9taXNlfSBBIG1vY2sgUHJvbWlzZSB3aGljaCBmdWxmaWxscyB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVSZXNvbHZlZFByb21pc2UgPSBmdW5jdGlvbiAodGlja3MsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tQcm9taXNlKHRoaXMsIFtSeC5SZWFjdGl2ZVRlc3Qub25OZXh0KHRpY2tzLCB2YWx1ZSksIFJ4LlJlYWN0aXZlVGVzdC5vbkNvbXBsZXRlZCh0aWNrcyldKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgZ2l2ZW4gcmVhc29uIGFuZCB0aWNrc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aWNrcyBUaGUgYWJzb2x1dGUgdGltZSBvZiB0aGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gcmVhc29uIFRoZSByZWFzb24gZm9yIHJlamVjdGlvbiB0byB5aWVsZCBhdCB0aGUgZ2l2ZW4gdGljay5cbiAgICAgKiBAcmV0dXJucyB7TW9ja1Byb21pc2V9IEEgbW9jayBQcm9taXNlIHdoaWNoIHJlamVjdHMgd2l0aCB0aGUgZ2l2ZW4gcmVhc29uLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZVJlamVjdGVkUHJvbWlzZSA9IGZ1bmN0aW9uICh0aWNrcywgcmVhc29uKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tQcm9taXNlKHRoaXMsIFtSeC5SZWFjdGl2ZVRlc3Qub25FcnJvcih0aWNrcywgcmVhc29uKV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9ic2VydmVyIHRoYXQgcmVjb3JkcyByZWNlaXZlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgYW5kIHRpbWVzdGFtcHMgdGhvc2UuXG4gICAgICogQHJldHVybiBPYnNlcnZlciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFzc2VydCB0aGUgdGltaW5nIG9mIHJlY2VpdmVkIG5vdGlmaWNhdGlvbnMuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tPYnNlcnZlcih0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRlc3RTY2hlZHVsZXI7XG4gIH0pKFZpcnR1YWxUaW1lU2NoZWR1bGVyKTtcblxuICB2YXIgQW5vbnltb3VzT2JzZXJ2YWJsZSA9IFJ4LkFub255bW91c09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICAvLyBGaXggc3Vic2NyaWJlciB0byBjaGVjayBmb3IgdW5kZWZpbmVkIG9yIGZ1bmN0aW9uIHJldHVybmVkIHRvIGRlY29yYXRlIGFzIERpc3Bvc2FibGVcbiAgICBmdW5jdGlvbiBmaXhTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVyICYmIGlzRnVuY3Rpb24oc3Vic2NyaWJlci5kaXNwb3NlKSA/IHN1YnNjcmliZXIgOlxuICAgICAgICBpc0Z1bmN0aW9uKHN1YnNjcmliZXIpID8gZGlzcG9zYWJsZUNyZWF0ZShzdWJzY3JpYmVyKSA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREaXNwb3NhYmxlKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgYWRvID0gc3RhdGVbMF0sIHNlbGYgPSBzdGF0ZVsxXTtcbiAgICAgIHZhciBzdWIgPSB0cnlDYXRjaChzZWxmLl9fc3Vic2NyaWJlKS5jYWxsKHNlbGYsIGFkbyk7XG4gICAgICBpZiAoc3ViID09PSBlcnJvck9iaiAmJiAhYWRvLmZhaWwoZXJyb3JPYmouZSkpIHsgdGhyb3dlcihlcnJvck9iai5lKTsgfVxuICAgICAgYWRvLnNldERpc3Bvc2FibGUoZml4U3Vic2NyaWJlcihzdWIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHBhcmVudDtcbiAgICAgIHRoaXMuX19zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBbm9ueW1vdXNPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhZG8gPSBuZXcgQXV0b0RldGFjaE9ic2VydmVyKG8pLCBzdGF0ZSA9IFthZG8sIHRoaXNdO1xuXG4gICAgICBpZiAoY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2V0RGlzcG9zYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREaXNwb3NhYmxlKG51bGwsIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhZG87XG4gICAgfTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBBdXRvRGV0YWNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEF1dG9EZXRhY2hPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEF1dG9EZXRhY2hPYnNlcnZlcihvYnNlcnZlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLm0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICB9XG5cbiAgICB2YXIgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlID0gQXV0b0RldGFjaE9ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbk5leHQpLmNhbGwodGhpcy5vYnNlcnZlciwgdmFsdWUpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRocm93ZXIocmVzdWx0LmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbkVycm9yKS5jYWxsKHRoaXMub2JzZXJ2ZXIsIGVycik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIHJlc3VsdCA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXN1bHQuZSk7XG4gICAgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLm9ic2VydmVyKTtcbiAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgcmVzdWx0ID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlc3VsdC5lKTtcbiAgICB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgdGhpcy5tLnNldERpc3Bvc2FibGUodmFsdWUpOyB9O1xuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5tLmdldERpc3Bvc2FibGUoKTsgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm0uZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXV0b0RldGFjaE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgVW5kZXJseWluZ09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFVuZGVybHlpbmdPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFVuZGVybHlpbmdPYnNlcnZhYmxlKG0sIHUpIHtcbiAgICAgIHRoaXMuX20gPSBtO1xuICAgICAgdGhpcy5fdSA9IHU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBVbmRlcmx5aW5nT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUodGhpcy5fbS5nZXREaXNwb3NhYmxlKCksIHRoaXMuX3Uuc3Vic2NyaWJlKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFVuZGVybHlpbmdPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHcm91cGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIHVuZGVybHlpbmdPYnNlcnZhYmxlLCBtZXJnZWREaXNwb3NhYmxlKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgdGhpcy51bmRlcmx5aW5nT2JzZXJ2YWJsZSA9ICFtZXJnZWREaXNwb3NhYmxlID9cbiAgICAgICAgdW5kZXJseWluZ09ic2VydmFibGUgOlxuICAgICAgICBuZXcgVW5kZXJseWluZ09ic2VydmFibGUobWVyZ2VkRGlzcG9zYWJsZSwgdW5kZXJseWluZ09ic2VydmFibGUpO1xuICAgIH1cblxuICAgIEdyb3VwZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmdPYnNlcnZhYmxlLnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdyb3VwZWRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqICBFYWNoIG5vdGlmaWNhdGlvbiBpcyBicm9hZGNhc3RlZCB0byBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMuXG4gICAqL1xuICB2YXIgU3ViamVjdCA9IFJ4LlN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuICAgICAgICAgIHJldHVybiBuZXcgSW5uZXJTdWJzY3JpcHRpb24odGhpcywgbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgY2hlY2tEaXNwb3NlZCh0aGlzKTsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ9IG9ic2VydmVyIFRoZSBvYnNlcnZlciB1c2VkIHRvIHNlbmQgbWVzc2FnZXMgdG8gdGhlIHN1YmplY3QuXG4gICAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvYnNlcnZhYmxlIFRoZSBvYnNlcnZhYmxlIHVzZWQgdG8gc3Vic2NyaWJlIHRvIG1lc3NhZ2VzIHNlbnQgZnJvbSB0aGUgc3ViamVjdC5cbiAgICAgKiBAcmV0dXJucyB7U3ViamVjdH0gU3ViamVjdCBpbXBsZW1lbnRlZCB1c2luZyB0aGUgZ2l2ZW4gb2JzZXJ2ZXIgYW5kIG9ic2VydmFibGUuXG4gICAgICovXG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIG9ic2VydmFibGUpIHtcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgKiAgVGhlIGxhc3QgdmFsdWUgYmVmb3JlIHRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24sIG9yIHRoZSBlcnJvciByZWNlaXZlZCB0aHJvdWdoIE9uRXJyb3IsIGlzIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgdmFyIEFzeW5jU3ViamVjdCA9IFJ4LkFzeW5jU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXN5bmNTdWJqZWN0LCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgdGhhdCBjYW4gb25seSByZWNlaXZlIG9uZSB2YWx1ZSBhbmQgdGhhdCB2YWx1ZSBpcyBjYWNoZWQgZm9yIGFsbCBmdXR1cmUgb2JzZXJ2YXRpb25zLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEFzeW5jU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgIG8ub25OZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UsIGFsc28gY2F1c2luZyB0aGUgbGFzdCByZWNlaXZlZCB2YWx1ZSB0byBiZSBzZW50IG91dCAoaWYgYW55KS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGksIGxlbjtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoO1xuXG4gICAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICB2YXIgbyA9IG9zW2ldO1xuICAgICAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgb3NbaV0ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVycm9yLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgVGhlIEVycm9yIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBTZW5kcyBhIHZhbHVlIHRvIHRoZSBzdWJqZWN0LiBUaGUgbGFzdCB2YWx1ZSByZWNlaXZlZCBiZWZvcmUgc3VjY2Vzc2Z1bCB0ZXJtaW5hdGlvbiB3aWxsIGJlIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgYW5kIGZ1dHVyZSBvYnNlcnZlcnMuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc3RvcmUgaW4gdGhlIHN1YmplY3QuXG4gICAgICAgKi9cbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFzeW5jU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGEgdmFsdWUgdGhhdCBjaGFuZ2VzIG92ZXIgdGltZS5cbiAgICogIE9ic2VydmVycyBjYW4gc3Vic2NyaWJlIHRvIHRoZSBzdWJqZWN0IHRvIHJlY2VpdmUgdGhlIGxhc3QgKG9yIGluaXRpYWwpIHZhbHVlIGFuZCBhbGwgc3Vic2VxdWVudCBub3RpZmljYXRpb25zLlxuICAgKi9cbiAgdmFyIEJlaGF2aW9yU3ViamVjdCA9IFJ4LkJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQmVoYXZpb3JTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEJlaGF2aW9yU3ViamVjdCh2YWx1ZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICogVmFsdWUgaXMgZnJvemVuIGFmdGVyIG9uQ29tcGxldGVkIGlzIGNhbGxlZC5cbiAgICAgICAqIEFmdGVyIG9uRXJyb3IgaXMgY2FsbGVkIGFsd2F5cyB0aHJvd3MgdGhlIHNwZWNpZmllZCBleGNlcHRpb24uXG4gICAgICAgKiBBbiBleGNlcHRpb24gaXMgYWx3YXlzIHRocm93biBhZnRlciBkaXNwb3NlIGlzIGNhbGxlZC5cbiAgICAgICAqIEByZXR1cm5zIHtNaXhlZH0gVGhlIGluaXRpYWwgdmFsdWUgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciB1bnRpbCBvbk5leHQgaXMgY2FsbGVkOyBhZnRlciB3aGljaCwgdGhlIGxhc3QgdmFsdWUgcGFzc2VkIHRvIG9uTmV4dC5cbiAgICAgICAqL1xuICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHsgdGhyb3dlcih0aGlzLmVycm9yKTsgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICovXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQmVoYXZpb3JTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhbiBvYmplY3QgdGhhdCBpcyBib3RoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgd2VsbCBhcyBhbiBvYnNlcnZlci5cbiAgICogRWFjaCBub3RpZmljYXRpb24gaXMgYnJvYWRjYXN0ZWQgdG8gYWxsIHN1YnNjcmliZWQgYW5kIGZ1dHVyZSBvYnNlcnZlcnMsIHN1YmplY3QgdG8gYnVmZmVyIHRyaW1taW5nIHBvbGljaWVzLlxuICAgKi9cbiAgdmFyIFJlcGxheVN1YmplY3QgPSBSeC5SZXBsYXlTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblxuICAgIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSZW1vdmFibGVEaXNwb3NhYmxlKHN1YmplY3QsIG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgIXN1YmplY3QuaXNEaXNwb3NlZCAmJiBzdWJqZWN0Lm9ic2VydmVycy5zcGxpY2Uoc3ViamVjdC5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlciksIDEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoUmVwbGF5U3ViamVjdCwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqICBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUmVwbGF5U3ViamVjdCBjbGFzcyB3aXRoIHRoZSBzcGVjaWZpZWQgYnVmZmVyIHNpemUsIHdpbmRvdyBzaXplIGFuZCBzY2hlZHVsZXIuXG4gICAgICogIEBwYXJhbSB7TnVtYmVyfSBbYnVmZmVyU2l6ZV0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgICAqICBAcGFyYW0ge051bWJlcn0gW3dpbmRvd1NpemVdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAgICogIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdGhlIG9ic2VydmVycyBhcmUgaW52b2tlZCBvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA9PSBudWxsID8gbWF4U2FmZUludGVnZXIgOiBidWZmZXJTaXplO1xuICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZSA9PSBudWxsID8gbWF4U2FmZUludGVnZXIgOiB3aW5kb3dTaXplO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXIgfHwgY3VycmVudFRocmVhZFNjaGVkdWxlcjtcbiAgICAgIHRoaXMucSA9IFtdO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhSZXBsYXlTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICB2YXIgc28gPSBuZXcgU2NoZWR1bGVkT2JzZXJ2ZXIodGhpcy5zY2hlZHVsZXIsIG8pLCBzdWJzY3JpcHRpb24gPSBjcmVhdGVSZW1vdmFibGVEaXNwb3NhYmxlKHRoaXMsIHNvKTtcblxuICAgICAgICB0aGlzLl90cmltKHRoaXMuc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzbyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHNvLm9uTmV4dCh0aGlzLnFbaV0udmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBzby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgc28ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgX3RyaW06IGZ1bmN0aW9uIChub3cpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMucS5sZW5ndGggPiB0aGlzLmJ1ZmZlclNpemUpIHtcbiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5xLmxlbmd0aCA+IDAgJiYgKG5vdyAtIHRoaXMucVswXS5pbnRlcnZhbCkgPiB0aGlzLndpbmRvd1NpemUpIHtcbiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5xLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgIHRoaXMuX3RyaW0obm93KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICovXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICB0aGlzLl90cmltKG5vdyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgb2JzZXJ2ZXIuZW5zdXJlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBSZXBsYXlTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQW5vbnltb3VzU3ViamVjdCA9IFJ4LkFub255bW91c1N1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c1N1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSkge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZS5zdWJzY3JpYmUobyk7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgfSxcbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgKiBVc2VkIHRvIHBhdXNlIGFuZCByZXN1bWUgc3RyZWFtcy5cbiAgKi9cbiAgUnguUGF1c2VyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYXVzZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2VyKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIFBhdXNlci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7IHRoaXMub25OZXh0KGZhbHNlKTsgfTtcblxuICAgIC8qKlxuICAgICogUmVzdW1lcyB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICAqL1xuICAgIFBhdXNlci5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkgeyB0aGlzLm9uTmV4dCh0cnVlKTsgfTtcblxuICAgIHJldHVybiBQYXVzZXI7XG4gIH0oU3ViamVjdCkpO1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgIHJvb3QuUnggPSBSeDtcblxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSeDtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG4gICAgLy8gaW4gTm9kZS5qcyBvciBSaW5nb0pTXG4gICAgaWYgKG1vZHVsZUV4cG9ydHMpIHtcbiAgICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBSeCkuUnggPSBSeDtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJlZUV4cG9ydHMuUnggPSBSeDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gaW4gYSBicm93c2VyIG9yIFJoaW5vXG4gICAgcm9vdC5SeCA9IFJ4O1xuICB9XG5cbiAgLy8gQWxsIGNvZGUgYmVmb3JlIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcy5cbiAgdmFyIHJFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblxufS5jYWxsKHRoaXMpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdGlmICghbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJpbXBvcnQgeyBGaWxlTG9hZGVyIH0gZnJvbSBcIi4vVmlld0xvYWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXcge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSB2aWV3RmlsZTogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2FkZXI6IEZpbGVMb2FkZXI7XHJcbiAgICBwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnQgfCBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3Iodmlld0ZpbGU6IHN0cmluZywgbG9hZGVyOiBGaWxlTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy52aWV3RmlsZSA9IHZpZXdGaWxlO1xyXG4gICAgICAgIHRoaXMubG9hZGVyID0gbG9hZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHZpZXdGaWxlOiBzdHJpbmcsIGxvYWRlcjogRmlsZUxvYWRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmlldyh2aWV3RmlsZSwgbG9hZGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkKCkge1xyXG5cclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc3RyaW5ndmFsID0gYXdhaXQgdGhpcy5sb2FkZXIubG9hZCh0aGlzLnZpZXdGaWxlKTtcclxuICAgICAgICBsZXQgdmlldyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoc3RyaW5ndmFsLCBcInRleHQvaHRtbFwiKS5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBpZiAoIXZpZXcpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGxvYWQgdmlldyBmcm9tIFwiICsgdGhpcy52aWV3RmlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgYm9keSA9IHZpZXcuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBib2R5ICYmIGJvZHlbMF0uZmlyc3RFbGVtZW50Q2hpbGQgPyBib2R5WzBdLmZpcnN0RWxlbWVudENoaWxkIDogdmlldztcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi4vVmlldy9WaWV3XCJcclxuaW1wb3J0IHsgRmlsZUxvYWRlciB9IGZyb20gXCIuLi9WaWV3L1ZpZXdMb2FkZXJcIlxyXG5pbXBvcnQgeyBFZGl0RW50cnlWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9FZGl0RW50cnlWaWV3TW9kZWxcIlxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRFbnRyeUNvbnRyb2xsZXIge1xyXG5cclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVmlld0ZpbGUgPSBcIkVkaXRFbnRyeUNhcmRWaWV3Lmh0bWxcIlxyXG4gICAgcHJpdmF0ZSByZWFkb25seSB2aWV3OiBWaWV3XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHZpZXdNb2RlbDogRWRpdEVudHJ5Vmlld01vZGVsXHJcblxyXG4gICAgY29uc3RydWN0b3IobG9hZGVyOiBGaWxlTG9hZGVyLCB2aWV3TW9kZWw6IEVkaXRFbnRyeVZpZXdNb2RlbCkge1xyXG4gICAgICAgIHRoaXMudmlldyA9IFZpZXcuY3JlYXRlKHRoaXMuVmlld0ZpbGUsIGxvYWRlcilcclxuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IHZpZXdNb2RlbFxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRJbnRvUGFyZW50KHBhcmVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGF3YWl0IHRoaXMudmlldy5sb2FkKClcclxuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudClcclxuXHJcbiAgICAgICAgbGV0IGFuc3dlclZpZXcgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtpZD0nYW5zd2VySW5wdXQnXVwiKSBhcyBIVE1MSW5wdXRFbGVtZW50XHJcbiAgICAgICAgYW5zd2VyVmlldy52YWx1ZSA9IHRoaXMudmlld01vZGVsLmFuc3dlclxyXG4gICAgICAgIC8vYW5zd2VyVmlldy5vbmNoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgIC8vICAgIGFuc3dlclZpZXcudmFsdWUgPSB0aGlzLnZpZXdNb2RlbC5hbnN3ZXJcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgbGV0IHF1ZXN0aW9uVmlldyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0W2lkPSdxdWVzdGlvbklucHV0J11cIikgYXMgSFRNTElucHV0RWxlbWVudFxyXG4gICAgICAgIHF1ZXN0aW9uVmlldy52YWx1ZSA9IHRoaXMudmlld01vZGVsLnF1ZXN0aW9uXHJcbiAgICAgICAgLy9xdWVzdGlvblZpZXcub25jaGFuZ2UgPSBlID0+IHtcclxuICAgICAgICAvLyAgICBxdWVzdGlvblZpZXcudmFsdWUgPSB0aGlzLnZpZXdNb2RlbC5xdWVzdGlvblxyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBsZXQgYnV0dG9uID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uW2lkPSdzYXZlRW50cnknXVwiKSBhcyBIVE1MQnV0dG9uRWxlbWVudFxyXG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuU2F2ZSgpXHJcbiAgICAgICAgICAgIGFuc3dlclZpZXcudmFsdWUgPSB0aGlzLnZpZXdNb2RlbC5hbnN3ZXJcclxuICAgICAgICAgICAgcXVlc3Rpb25WaWV3LnZhbHVlID0gdGhpcy52aWV3TW9kZWwucXVlc3Rpb25cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIExhenk8VD4ge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBmYWN0b3J5OiAoKSA9PiBUOyBcclxuICAgIHByaXZhdGUgdmFsdWU6IFQgfCBudWxsO1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IoZmFjdG9yeTogKCkgPT4gVCkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IFZhbHVlKCk6IFQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlIHx8ICh0aGlzLnZhbHVlID0gdGhpcy5mYWN0b3J5KCkpOyBcclxuICAgIH1cclxuXHJcbiAgICBnZXQgSXNDcmVhdGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAhIXRoaXMudmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBDcmVhdGU8VD4oZmFjdG9yeTogKCkgPT4gVCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTGF6eTxUPihmYWN0b3J5KTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi4vVmlldy9WaWV3XCI7XHJcbmltcG9ydCB7IEZpbGVMb2FkZXIgfSBmcm9tIFwiLi4vVmlldy9WaWV3TG9hZGVyXCI7XHJcbmltcG9ydCB7IEZsYXNoQ2FyZFZpZXdNb2RlbCB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL0ZsYXNoQ2FyZFZpZXdNb2RlbFwiO1xyXG5pbXBvcnQgeyBMYXp5IH0gZnJvbSBcIi4uL0NvcmUvTGF6eS9MYXp5XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZFZpZXdDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVmlld0ZpbGUgPSBcIkNhcmRWaWV3Lmh0bWxcIjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmlldzogVmlldztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogTGF6eTxQcm9taXNlPEVsZW1lbnQ+PjsgXHJcbiAgICBwcml2YXRlIF92aWV3TW9kZWw6IEZsYXNoQ2FyZFZpZXdNb2RlbCB8IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobG9hZGVyOiBGaWxlTG9hZGVyKSB7XHJcbiAgICAgICAgdGhpcy52aWV3ID0gVmlldy5jcmVhdGUodGhpcy5WaWV3RmlsZSwgbG9hZGVyKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBMYXp5LkNyZWF0ZShhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnZpZXcubG9hZCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHZpZXdNb2RlbCh2aWV3TW9kZWw6IEZsYXNoQ2FyZFZpZXdNb2RlbCB8IG51bGwpIHtcclxuICAgICAgICAvLyBUT0RPOiBEbyBiaW5kaW5nIGhlcmUuXHJcbiAgICAgICAgdGhpcy5fdmlld01vZGVsID0gdmlld01vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdmlld01vZGVsKCk6IEZsYXNoQ2FyZFZpZXdNb2RlbCB8IG51bGx7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZXdNb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZGV0YWNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuSXNDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgIChhd2FpdCB0aGlzLmVsZW1lbnQuVmFsdWUpLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkSW50b1BhcmVudChwYXJlbnQ6IEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBhd2FpdCB0aGlzLmRldGFjaCgpO1xyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChhd2FpdCB0aGlzLmVsZW1lbnQuVmFsdWUpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi4vVmlldy9WaWV3XCI7XHJcbmltcG9ydCB7IEZpbGVMb2FkZXIgfSBmcm9tIFwiLi4vVmlldy9WaWV3TG9hZGVyXCI7XHJcbmltcG9ydCB7IEVkaXRFbnRyeUNvbnRyb2xsZXIgfSBmcm9tIFwiLi9FZGl0RW50cnlDb250cm9sbGVyXCI7XHJcbmltcG9ydCB7IEVkaXRvclBhZ2VWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9FZGl0b3JQYWdlVmlld01vZGVsXCI7XHJcbmltcG9ydCB7IENhcmRWaWV3Q29udHJvbGxlciB9IGZyb20gXCIuL0NhcmRWaWV3Q29udHJvbGxlclwiO1xyXG5pbXBvcnQgeyBGbGFzaENhcmRWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9GbGFzaENhcmRWaWV3TW9kZWxcIjtcclxuaW1wb3J0IHsgTGF6eSB9IGZyb20gXCIuLi9Db3JlL0xhenkvTGF6eVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRvclBhZ2VDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVmlld0ZpbGUgPSBcIkVkaXRvclBhZ2UuaHRtbFwiO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBsb2FkZXI6IEZpbGVMb2FkZXI7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHZpZXdNb2RlbDogRWRpdG9yUGFnZVZpZXdNb2RlbDtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogTGF6eTxQcm9taXNlPEVsZW1lbnQ+PjtcclxuICAgIHByaXZhdGUgY2FyZFZpZXdzOiBDYXJkVmlld0NvbnRyb2xsZXJbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxvYWRlcjogRmlsZUxvYWRlciwgdmlld01vZGVsOiBFZGl0b3JQYWdlVmlld01vZGVsKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkZXIgPSBsb2FkZXI7XHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwgPSB2aWV3TW9kZWw7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gTGF6eS5DcmVhdGUoYXN5bmMgKCkgPT4gYXdhaXQgVmlldy5jcmVhdGUodGhpcy5WaWV3RmlsZSwgbG9hZGVyKS5sb2FkKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRJbnRvUGFyZW50KHBhcmVudDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGF3YWl0IHRoaXMuZWxlbWVudC5WYWx1ZTtcclxuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIGxldCBlZGl0b3JDb250YWluZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXZbaWQ9J2VkaXRvckNvbnRhaW5lciddXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IGNhcmRzQ29udGFpbmVyID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2W2lkPSdjYXJkc0NvbnRhaW5lciddXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGlmICghZWRpdG9yQ29udGFpbmVyIHx8ICFjYXJkc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGFsbCB2aWV3cyBpbiBsYXlvdXQuXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3TW9kZWwubG9hZCgpO1xyXG5cclxuICAgICAgICBhd2FpdCBuZXcgRWRpdEVudHJ5Q29udHJvbGxlcih0aGlzLmxvYWRlciwgdGhpcy52aWV3TW9kZWwuRWRpdEVudHJ5Vmlld01vZGVsKS5sb2FkSW50b1BhcmVudChlZGl0b3JDb250YWluZXIpOyBcclxuXHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWwuZmxhc2hDYXJkcy5zdWJzY3JpYmUoY2FyZHMgPT4gdGhpcy5vbkZsYXNoQ2FyZHNDaGFuZ2VkKGNhcmRzLCBjYXJkc0NvbnRhaW5lcikpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgb25GbGFzaENhcmRzQ2hhbmdlZChjYXJkczogRmxhc2hDYXJkVmlld01vZGVsW10sIHBhZ2VDb250YWluZXI6IEVsZW1lbnQpIHtcclxuICAgICAgICBsZXQgY2hhbmdlcyA9IGNhcmRzLmxlbmd0aCAtIHRoaXMuY2FyZFZpZXdzLmxlbmd0aDtcclxuICAgICAgICBpZiAoY2hhbmdlcyA8IDApIHtcclxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCBjYXJkcy5cclxuICAgICAgICAgICAgdmFyIGkgPSBjaGFuZ2VzO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aWV3ID0gdGhpcy5jYXJkVmlld3MucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sbGVyIHVuZGVmaW5lZCB3aGVuIGF0dGVtcHRpbmcgdG8gcmVtb3ZlLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2aWV3LmRldGFjaCgpO1xyXG4gICAgICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2VzID4gMCkge1xyXG4gICAgICAgICAgICAvLyBXZSBhZGRlZCBjYXJkcy5cclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGNoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjYXJkVmlldyA9IG5ldyBDYXJkVmlld0NvbnRyb2xsZXIodGhpcy5sb2FkZXIpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgY2FyZFZpZXcubG9hZEludG9QYXJlbnQocGFnZUNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRWaWV3cy5wdXNoKGNhcmRWaWV3KTtcclxuICAgICAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2FyZHMuZm9yRWFjaChjYXJkID0+IHtcclxuICAgICAgICAgICAgLy8gVE9ETzogQmluZCB2aWV3IG1vZGVscy5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59ICIsImltcG9ydCB7IEVudHJ5IH0gZnJvbSBcIi4uL01vZGVscy9FbnRyeVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVudHJ5U2VydmljZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRhdGFiYXNlVmVyc2lvbjogbnVtYmVyID0gMTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGJQcm92aWRlcjogSURCRmFjdG9yeTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZGJQcm92aWRlcjogSURCRmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMuZGJQcm92aWRlciA9IGRiUHJvdmlkZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmUoZW50cnk6IEVudHJ5KSB7XHJcbiAgICAgICAgbGV0IGRiID0gYXdhaXQgdGhpcy5vcGVuKCk7XHJcbiAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oXCJFbnRyaWVzXCIsIFwicmVhZHdyaXRlXCIpO1xyXG4gICAgICAgIGxldCBlbnRyaWVzU3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShcIkVudHJpZXNcIik7XHJcblxyXG4gICAgICAgIGVudHJpZXNTdG9yZS5hZGQoZW50cnkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRBbGwoKTogUHJvbWlzZTxFbnRyeVtdPiB7XHJcbiAgICAgICAgbGV0IGRiID0gYXdhaXQgdGhpcy5vcGVuKCk7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSBkYi50cmFuc2FjdGlvbihcIkVudHJpZXNcIikub2JqZWN0U3RvcmUoXCJFbnRyaWVzXCIpLmdldEFsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8RW50cnlbXT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IHggPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdFNldDogRW50cnlbXSA9IHJlcXVlc3QucmVzdWx0IGFzIEVudHJ5W10gfHwgW107XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdFNldCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuKCk6IFByb21pc2U8SURCRGF0YWJhc2U+IHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IHRoaXMuZGJQcm92aWRlci5vcGVuKFwiRmxhc2hDYXJkc1wiLCB0aGlzLmRhdGFiYXNlVmVyc2lvbilcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmIChkYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFwiRW50cmllc1wiLCB7IGF1dG9JbmNyZW1lbnQ6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJDb3VsZCBub3Qgb3BlbiBGbGFzaENhcmRzIGRhdGFiYXNlLlwiKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBVdGY4UGFyc2VyIHtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIFV0ZjhBcnJheVRvU3RyKGFycmF5OiBVaW50OEFycmF5KTogc3RyaW5nIHtcclxuICAgICAgICB2YXIgb3V0LCBpLCBsZW4sIGM7XHJcbiAgICAgICAgdmFyIGNoYXIyLCBjaGFyMztcclxuXHJcbiAgICAgICAgb3V0ID0gXCJcIjtcclxuICAgICAgICBsZW4gPSBhcnJheS5sZW5ndGg7XHJcbiAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcclxuICAgICAgICAgICAgYyA9IGFycmF5W2krK107XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYyA+PiA0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogY2FzZSAyOiBjYXNlIDM6IGNhc2UgNDogY2FzZSA1OiBjYXNlIDY6IGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAvLyAweHh4eHh4eFxyXG4gICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxMjogY2FzZSAxMzpcclxuICAgICAgICAgICAgICAgICAgICAvLyAxMTB4IHh4eHggICAxMHh4IHh4eHhcclxuICAgICAgICAgICAgICAgICAgICBjaGFyMiA9IGFycmF5W2krK107XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgxRikgPDwgNikgfCAoY2hhcjIgJiAweDNGKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE0OlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDExMTAgeHh4eCAgMTB4eCB4eHh4ICAxMHh4IHh4eHhcclxuICAgICAgICAgICAgICAgICAgICBjaGFyMiA9IGFycmF5W2krK107XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcjMgPSBhcnJheVtpKytdO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDB4MEYpIDw8IDEyKSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgoY2hhcjIgJiAweDNGKSA8PCA2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgoY2hhcjMgJiAweDNGKSA8PCAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvdXQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBVdGY4UGFyc2VyIH0gZnJvbSBcIi4uL1RleHRVdGlscy9VdGY4UGFyc2VyXCI7IFxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGaWxlTG9hZGVyIHtcclxuICAgIGxvYWQoZmlsZTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZUxvYWRlckZhY3Rvcnkge1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVGZXRjaEh0bWxMb2FkZXIoZ2xvYmFsRmV0Y2g6IEdsb2JhbEZldGNoKTogRmlsZUxvYWRlciB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGZXRjaEh0bWxMb2FkZXIoZ2xvYmFsRmV0Y2gsIFwiLi9odG1sL1wiKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRmV0Y2hIdG1sTG9hZGVyIGltcGxlbWVudHMgRmlsZUxvYWRlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHJvb3Q6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZ2xvYmFsRmV0Y2g6IEdsb2JhbEZldGNoO1xyXG4gXHJcbiAgICBjb25zdHJ1Y3RvcihnbG9iYWxGZXRjaDogR2xvYmFsRmV0Y2gsIHJvb3Q6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucm9vdCA9IHJvb3Q7XHJcbiAgICAgICAgdGhpcy5nbG9iYWxGZXRjaCA9IGdsb2JhbEZldGNoO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWQoZmlsZU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBmaWxlUGF0aCA9IHRoaXMucm9vdCArIGZpbGVOYW1lO1xyXG4gICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2xvYmFsRmV0Y2guZmV0Y2goZmlsZVBhdGgpO1xyXG4gICAgICAgIC8vbGV0IHJlc3BvbnNlID0gYXdhaXQgd2luZG93LmZldGNoKGZpbGVQYXRoKTsgLy8gV29ya3NcclxuICAgICAgICAvL2xldCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZmV0Y2hGaWxlKGZpbGVQYXRoKTsgLy8gRG9lc24ndCB3b3JrXHJcblxyXG4gICAgICAgIGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmJvZHkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN0cmVhbSA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgbGV0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHN0cmVhbS5yZWFkKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBVdGY4UGFyc2VyLlV0ZjhBcnJheVRvU3RyKHZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIEVudHJ5IHtcclxuICAgIHB1YmxpYyByZWFkb25seSBxdWVzdGlvbjogc3RyaW5nO1xyXG4gICAgcHVibGljIHJlYWRvbmx5IGFuc3dlcjogc3RyaW5nO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICB0aGlzLmFuc3dlciA9IGFuc3dlcjtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFN1YmplY3QsIE9ic2VydmFibGUgfSBmcm9tIFwicnhcIjtcclxuaW1wb3J0IHsgRW50cnlTZXJ2aWNlIH0gZnJvbSBcIi4uL1NlcnZpY2VzL0VudHJ5U2VydmljZVwiO1xyXG5pbXBvcnQgeyBFbnRyeSB9IGZyb20gXCIuLi9Nb2RlbHMvRW50cnlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0RW50cnlWaWV3TW9kZWwge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBlbnRyeVNlcnZpY2U6IEVudHJ5U2VydmljZTtcclxuICAgIHByaXZhdGUgX3F1ZXN0aW9uOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgcHJpdmF0ZSBfYW5zd2VyOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgcHJpdmF0ZSBzYXZlZFN1YmplY3Q6IFN1YmplY3Q8RW50cnk+ID0gbmV3IFN1YmplY3QoKTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZW50cnlTZXJ2aWNlOiBFbnRyeVNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLmVudHJ5U2VydmljZSA9IGVudHJ5U2VydmljZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFuc3dlcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbnN3ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBhbnN3ZXIodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2Fuc3dlciA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcXVlc3Rpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVlc3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBxdWVzdGlvbih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fcXVlc3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzYXZlZCgpOiBPYnNlcnZhYmxlPEVudHJ5PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZWRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBTYXZlKCkge1xyXG4gICAgICAgIGxldCBlbnRyeSA9IG5ldyBFbnRyeSh0aGlzLnF1ZXN0aW9uLCB0aGlzLmFuc3dlcik7XHJcbiAgICAgICAgdGhpcy5lbnRyeVNlcnZpY2Uuc2F2ZShlbnRyeSk7XHJcbiAgICAgICAgdGhpcy5zYXZlZFN1YmplY3Qub25OZXh0KGVudHJ5KTtcclxuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gXCJcIlxyXG4gICAgICAgIHRoaXMuYW5zd2VyID0gXCJcIlxyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGbGFzaENhcmRWaWV3TW9kZWwge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBxdWVzdGlvbjogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBhbnN3ZXI6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihxdWVzdGlvbjogc3RyaW5nLCBhbnN3ZXI6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSBxdWVzdGlvbjtcclxuICAgICAgICB0aGlzLmFuc3dlciA9IGFuc3dlcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgUXVlc3Rpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgQW5zd2VyKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5zd2VyO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEVkaXRFbnRyeVZpZXdNb2RlbCB9IGZyb20gXCIuL0VkaXRFbnRyeVZpZXdNb2RlbFwiO1xyXG5pbXBvcnQgeyBGbGFzaENhcmRWaWV3TW9kZWwgfSBmcm9tIFwiLi9GbGFzaENhcmRWaWV3TW9kZWxcIjtcclxuaW1wb3J0IHsgRW50cnlTZXJ2aWNlIH0gZnJvbSBcIi4uL1NlcnZpY2VzL0VudHJ5U2VydmljZVwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBCZWhhdmlvclN1YmplY3QgfSBmcm9tIFwicnhcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0b3JQYWdlVmlld01vZGVsIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWRpdEVudHJ5Vmlld01vZGVsOiBFZGl0RW50cnlWaWV3TW9kZWw7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVudHJ5U2VydmljZTogRW50cnlTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBmbGFzaENhcmRzU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PEZsYXNoQ2FyZFZpZXdNb2RlbFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Rmxhc2hDYXJkVmlld01vZGVsW10+KFtdKTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbnRyeVNlcnZpY2U6IEVudHJ5U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuZW50cnlTZXJ2aWNlID0gZW50cnlTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuZWRpdEVudHJ5Vmlld01vZGVsID0gbmV3IEVkaXRFbnRyeVZpZXdNb2RlbChlbnRyeVNlcnZpY2UpO1xyXG5cclxuICAgICAgICB0aGlzLmVkaXRFbnRyeVZpZXdNb2RlbC5zYXZlZC5zdWJzY3JpYmUoZW50cnkgPT4ge1xyXG4gICAgICAgICAgICAvLyBBZGQgYSBjYXJkLlxyXG4gICAgICAgICAgICBsZXQgY3VycmVudENhcmRzID0gdGhpcy5mbGFzaENhcmRzU3ViamVjdC5nZXRWYWx1ZSgpO1xyXG4gICAgICAgICAgICBjdXJyZW50Q2FyZHMucHVzaChuZXcgRmxhc2hDYXJkVmlld01vZGVsKGVudHJ5LnF1ZXN0aW9uLCBlbnRyeS5hbnN3ZXIpKTtcclxuICAgICAgICAgICAgdGhpcy5mbGFzaENhcmRzU3ViamVjdC5vbk5leHQoY3VycmVudENhcmRzKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgRWRpdEVudHJ5Vmlld01vZGVsKCk6IEVkaXRFbnRyeVZpZXdNb2RlbCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdEVudHJ5Vmlld01vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBmbGFzaENhcmRzKCk6IE9ic2VydmFibGU8Rmxhc2hDYXJkVmlld01vZGVsW10+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mbGFzaENhcmRzU3ViamVjdC5hc09ic2VydmFibGUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgbG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICBsZXQgZW50cmllcyA9IGF3YWl0IHRoaXMuZW50cnlTZXJ2aWNlLmdldEFsbCgpO1xyXG4gICAgICAgIHRoaXMuZmxhc2hDYXJkc1N1YmplY3Qub25OZXh0KGVudHJpZXMubWFwKGVudHJ5ID0+IG5ldyBGbGFzaENhcmRWaWV3TW9kZWwoZW50cnkucXVlc3Rpb24sIGVudHJ5LmFuc3dlcikpKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEVkaXRvclBhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlcnMvRWRpdG9yUGFnZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSW5zdGFsbENob2ljZSB9IGZyb20gXCIuL0luc3RhbGxDaG9pY2VcIjtcclxuaW1wb3J0IHsgSW5zdGFsbFByb21wdCB9IGZyb20gXCIuL0luc3RhbGxQcm9tcHRcIjtcclxuaW1wb3J0IHsgUHdhSW5zdGFsbGVyIH0gZnJvbSBcIi4vUHdhSW5zdGFsbGVyXCI7XHJcbmltcG9ydCB7IEVudHJ5U2VydmljZSB9IGZyb20gXCIuL1NlcnZpY2VzL0VudHJ5U2VydmljZVwiO1xyXG5pbXBvcnQgeyBGaWxlTG9hZGVyRmFjdG9yeSB9IGZyb20gXCIuL1ZpZXcvVmlld0xvYWRlclwiO1xyXG5pbXBvcnQgeyBFZGl0b3JQYWdlVmlld01vZGVsIH0gZnJvbSBcIi4vVmlld01vZGVscy9FZGl0b3JQYWdlVmlld01vZGVsXCI7XHJcblxyXG5jbGFzcyBBcHBsaWNhdGlvbiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVudHJ5U2VydmljZTogRW50cnlTZXJ2aWNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdzogV2luZG93LCBpbnN0YWxsZXI6IFB3YUluc3RhbGxlcikge1xyXG4gICAgICAgIHRoaXMuZW50cnlTZXJ2aWNlID0gbmV3IEVudHJ5U2VydmljZSh3aW5kb3cuaW5kZXhlZERCKTtcclxuXHJcbiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5vbldpbmRvd0xvYWRlZCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTZXJ2aWNlV29ya2VyKG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2hvdyB0aGUgaW5zdGFsbCBwcm9tcHQuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmVpbnN0YWxscHJvbXB0XCIsIChlOiBCZWZvcmVJbnN0YWxsUHJvbXB0RXZlbnQpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpbnN0YWxsZXIucHJvbXB0SW5zdGFsbGF0aW9uKHtcclxuICAgICAgICAgICAgICAgIHBsYXRmb3JtczogZS5wbGF0Zm9ybXMsXHJcbiAgICAgICAgICAgICAgICB1c2VyQ2hvaWNlOiBlLnVzZXJDaG9pY2UsXHJcbiAgICAgICAgICAgICAgICBwcm9tcHQ6ICgpID0+IGUucHJvbXB0LmNhbGwoZSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbnRyeSBwb2ludCBmb3IgbG9hZGluZyB0aGUgVUkuIENhbGxlZCBhZnRlciB0aGUgd2luZG93IGlzIGxvYWRlZCBhbmQgcmVhZHkuIFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIG9uV2luZG93TG9hZGVkKCkge1xyXG4gICAgICAgIGxldCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICBsZXQgc2VydmljZVdvcmtlciA9IHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICAgICAgaWYgKCFzZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2aWV3TG9hZGVyID0gRmlsZUxvYWRlckZhY3RvcnkuY3JlYXRlRmV0Y2hIdG1sTG9hZGVyKHdpbmRvdyBhcyBHbG9iYWxGZXRjaCk7XHJcbiAgICAgICAgbGV0IG1haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpO1xyXG4gICAgICAgIGlmICghbWFpbikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdmlld01vZGVsID0gbmV3IEVkaXRvclBhZ2VWaWV3TW9kZWwodGhpcy5lbnRyeVNlcnZpY2UpO1xyXG4gICAgICAgIGxldCBlZGl0b3JQYWdlID0gbmV3IEVkaXRvclBhZ2VDb250cm9sbGVyKHZpZXdMb2FkZXIsIHZpZXdNb2RlbCk7XHJcbiAgICAgICAgZWRpdG9yUGFnZS5sb2FkSW50b1BhcmVudChtYWluKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCB3aGVuIGEgbmV3IFNlcnZpY2VXb3JrZXIgaXMgaW5zdGFsbGVkLlxyXG4gICAgICogVGhpcyBpbmRpY2F0ZXMgdGhhdCB0aGUgYXBwIG5lZWRzIHRvIGJlIHJlZnJlc2hlZCB0byByZWZsZWN0IHRoZSBjaGFuZ2VzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbmV3V29ya2VyIFRoZSBuZXdseSBpbnN0YWxsZWQgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgb25TZXJ2aWNlV29ya2VyQ2hhbmdlZChuZXdXb3JrZXI6IFNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICBsZXQgcmVmcmVzaEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXRSZWZyZXNoJyk7XHJcbiAgICAgICAgaWYgKCFyZWZyZXNoQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIG5ld1dvcmtlci5wb3N0TWVzc2FnZSh7IGFjdGlvbjogJ3NraXBXYWl0aW5nJyB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTmV3IHNlcnZpY2Ugd29ya2VyIGluc3RhbGxlZCwgc2hvdyB0aGUgcmVmcmVzaCBidXR0b24gYW5kIGFsbG93IHRoZSB1cGRhdGUuXHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5oaWRkZW4gPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyU2VydmljZVdvcmtlcihzZXJ2aWNlV29ya2VyOiBTZXJ2aWNlV29ya2VyQ29udGFpbmVyKSB7XHJcbiAgICAgICAgc2VydmljZVdvcmtlclxyXG4gICAgICAgICAgICAucmVnaXN0ZXIoJy9zZXJ2aWNlLXdvcmtlci5qcycpXHJcbiAgICAgICAgICAgIC50aGVuKHJlZyA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWcuYWRkRXZlbnRMaXN0ZW5lcigndXBkYXRlZm91bmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlZCBzZXJ2aWNlIHdvcmtlciBmb3VuZC4gXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWcuaW5zdGFsbGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3V29ya2VyID0gcmVnLmluc3RhbGxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3V29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5ld1dvcmtlci5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2VydmljZVdvcmtlckNoYW5nZWQobmV3V29ya2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHJlZnJlc2hpbmc6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIHNlcnZpY2Ugd29ya2VyIHVwZGF0ZXNcclxuICAgICAgICAvLyBIZXJlIHdlIHJlbG9hZCB0aGUgcGFnZVxyXG4gICAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJlZnJlc2hpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICByZWZyZXNoaW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUHdhSW5zdGFsbGVyRGVmIGltcGxlbWVudHMgUHdhSW5zdGFsbGVyIHtcclxuICAgIHByb21wdEluc3RhbGxhdGlvbihwcm9tcHQ6IEluc3RhbGxQcm9tcHQpIHtcclxuICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dEFkZCcpO1xyXG4gICAgICAgIGlmIChidXR0b24pIHtcclxuICAgICAgICAgICAgYnV0dG9uLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBidXR0b24ub25jbGljayA9IHByb21wdC5wcm9tcHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50IGV4dGVuZHMgRXZlbnQge1xyXG4gICAgdXNlckNob2ljZTogUHJvbWlzZTxJbnN0YWxsQ2hvaWNlPjtcclxuICAgIHByb21wdCgpOiB2b2lkO1xyXG4gICAgcGxhdGZvcm1zOiBzdHJpbmcsXHJcbn1cclxuXHJcbm5ldyBBcHBsaWNhdGlvbih3aW5kb3csIG5ldyBQd2FJbnN0YWxsZXJEZWYoKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==