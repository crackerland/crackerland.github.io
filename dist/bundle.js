!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){(function(t,r,i){var o;(function(s){var u={function:!0,object:!0};function c(t){return t&&t.Object===Object?t:null}var h,a=u[typeof e]&&e&&!e.nodeType?e:null,l=u[typeof t]&&t&&!t.nodeType?t:null,f=c(a&&l&&"object"==typeof r&&r),p=c(u[typeof self]&&self),d=c(u[typeof window]&&window),b=l&&l.exports===a?a:null,v=c(u[typeof this]&&this),_=f||d!==(v&&v.window)&&d||p||v||Function("return this")(),y={internals:{},config:{Promise:_.Promise},helpers:{}},w=y.helpers.noop=function(){},m=y.helpers.identity=function(t){return t},g=y.helpers.defaultNow=Date.now,E=y.helpers.defaultComparer=function(t,e){return mt(t,e)},C=y.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},x=(y.helpers.defaultKeySerializer=function(t){return t.toString()},y.helpers.defaultError=function(t){throw t}),S=y.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},N=y.helpers.isFunction=((h=function(t){return"function"==typeof t||!1})(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),h);function D(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(t[n]);return e}var j={e:{}};var A=y.internals.tryCatch=function(t){if(!N(t))throw new TypeError("fn must be a function");return e=t,function(){try{return e.apply(this,arguments)}catch(t){return j.e=t,j}};var e};function k(t){throw t}y.config.longStackSupport=!1;var O=!1,q=A(function(){throw new Error})();O=!!q.e&&!!q.e.stack;var T,F=V(),P="From previous event:";function M(t,e){if(O&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(P)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+P+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];!R(o)&&(-1===(s=o).indexOf("(module.js:")&&-1===s.indexOf("(node.js:"))&&o&&n.push(o)}var s;return n.join("\n")}(i)}}function R(t){var e=L(t);if(!e)return!1;var n=e[0],r=e[1];return n===T&&r>=F&&r<=Bo}function V(){if(O)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=L(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return T=e[0],e[1]}}function L(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}var W=y.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};W.prototype=Object.create(Error.prototype),W.prototype.name="EmptyError";var I=y.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};I.prototype=Object.create(Error.prototype),I.prototype.name="ObjectDisposedError";var B=y.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};B.prototype=Object.create(Error.prototype),B.prototype.name="ArgumentOutOfRangeError";var z=y.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};z.prototype=Object.create(Error.prototype),z.prototype.name="NotSupportedError";var U=y.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};U.prototype=Object.create(Error.prototype),U.prototype.name="NotImplementedError";var G=y.helpers.notImplemented=function(){throw new U},H=(y.helpers.notSupported=function(){throw new z},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");_.Set&&"function"==typeof(new _.Set)["@@iterator"]&&(H="@@iterator");var Q=y.doneEnumerator={done:!0,value:s},K=y.helpers.isIterable=function(t){return t&&t[H]!==s},J=y.helpers.isArrayLike=function(t){return t&&t.length!==s};y.helpers.iterator=H;var $=y.internals.bindCallback=function(t,e,n){if(void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},X="[object Arguments]",Y="[object Array]",Z="[object Boolean]",tt="[object Date]",et="[object Error]",nt="[object Number]",rt="[object Object]",it="[object RegExp]",ot="[object String]",st={};st["[object Float32Array]"]=st["[object Float64Array]"]=st["[object Int8Array]"]=st["[object Int16Array]"]=st["[object Int32Array]"]=st["[object Uint8Array]"]=st["[object Uint8ClampedArray]"]=st["[object Uint16Array]"]=st["[object Uint32Array]"]=!0,st[X]=st[Y]=st["[object ArrayBuffer]"]=st[Z]=st[tt]=st[et]=st["[object Function]"]=st["[object Map]"]=st[nt]=st[rt]=st[it]=st["[object Set]"]=st[ot]=st["[object WeakMap]"]=!1;var ut=Object.prototype,ct=ut.hasOwnProperty,ht=ut.toString,at=Math.pow(2,53)-1,lt=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(s=0;s<r;s++)t.call(i,n[s])&&u.push(n[s]);return u}}();var ft=y.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)};function pt(t){return!!t&&"object"==typeof t}function dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=at}var bt=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}();var vt=Array.isArray||function(t){return pt(t)&&dt(t.length)&&ht.call(t)===Y};function _t(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function yt(t,e,n,r,i,o){var u,c=vt(t),h=vt(e),a=Y,l=Y;c||((a=ht.call(t))===X?a=rt:a!==rt&&(c=pt(u=t)&&dt(u.length)&&!!st[ht.call(u)])),h||(l=ht.call(e))===X&&(l=rt);var f=a===rt&&!bt(t),p=l===rt&&!bt(e),d=a===l;if(d&&!c&&!f)return function(t,e,n){switch(n){case Z:case tt:return+t==+e;case et:return t.name===e.name&&t.message===e.message;case nt:return t!==+t?e!==+e:t===+e;case it:case ot:return t===e+""}return!1}(t,e,a);if(!r){var b=f&&ct.call(t,"__wrapped__"),v=p&&ct.call(e,"__wrapped__");if(b||v)return n(b?t.value():t,v?e.value():e,r,i,o)}if(!d)return!1;i||(i=[]),o||(o=[]);for(var _=i.length;_--;)if(i[_]===t)return o[_]===e;i.push(t),o.push(e);var y=(c?function(t,e,n,r,i,o){var u=-1,c=t.length,h=e.length;if(c!==h&&!(r&&h>c))return!1;for(;++u<c;){var a=t[u],l=e[u];if(void 0!==s)return!1;if(r){if(!_t(e,function(t){return a===t||n(a,t,r,i,o)}))return!1}else if(a!==l&&!n(a,l,r,i,o))return!1}return!0}:function(t,e,n,r,i,o){var u=lt(t),c=u.length;if(c!==lt(e).length&&!r)return!1;for(var h,a=c;a--;)if(h=u[a],!(r?h in e:ct.call(e,h)))return!1;for(var l=r;++a<c;){var f=t[h=u[a]],p=e[h];if(!(void 0===s?n(f,p,r,i,o):void 0))return!1;l||(l="constructor"===h)}if(!l){var d=t.constructor,b=e.constructor;if(d!==b&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof b&&b instanceof b))return!1}return!0})(t,e,n,r,i,o);return i.pop(),o.pop(),y}function wt(t,e,n,r,i){return t===e||(null==t||null==e||!ft(t)&&!pt(e)?t!=t&&e!=e:yt(t,e,wt,n,r,i))}var mt=y.internals.isEqual=function(t,e){return wt(t,e)},gt=(Array.prototype.slice,y.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),Et=y.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var s=e[i];for(var u in s)t[u]=s[u]}},Ct=y.internals.addRef=function(t,e){return new To(function(n){return new Vt(e.getDisposable(),t.subscribe(n))})};function xt(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function St(t,e){this.id=t,this.value=e}St.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Nt=y.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Dt=Nt.prototype;Dt.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Dt.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Dt.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},Dt.peek=function(){return this.items[0].value},Dt.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},Dt.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Dt.enqueue=function(t){var e=this.length++;this.items[e]=new St(Nt.count++,t),this.percolate(e)},Dt.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Nt.count=0;var jt=y.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},At=jt.prototype;At.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},At.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},At.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var kt=y.Disposable=function(t){this.isDisposed=!1,this.action=t||w};kt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ot=kt.create=function(t){return new kt(t)},qt=kt.empty={dispose:w},Tt=kt.isDisposable=function(t){return t&&N(t.dispose)},Ft=kt.checkDisposed=function(t){if(t.isDisposed)throw new I},Pt=kt._fixup=function(t){return Tt(t)?t:qt},Mt=y.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Mt.prototype.getDisposable=function(){return this.current},Mt.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Mt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var Rt=y.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Rt.prototype.getDisposable=function(){return this.current},Rt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},Rt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Vt=y.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Vt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var Lt=y.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};Lt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}};var Wt=y.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?qt:new t(this)},e}();function It(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function Bt(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}It.prototype.dispose=function(){this.scheduler.schedule(this,Bt)};var zt=y.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||C,this.disposable=new Mt};zt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},zt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},zt.prototype.isCancelled=function(){return this.disposable.isDisposed},zt.prototype.invokeCore=function(){return Pt(this.action(this.scheduler,this.state))};var Ut,Gt=y.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new U},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),0===(i=t.normalize(i))?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new U},t.now=g,t.prototype.now=g,t.normalize=function(t){return t<0&&(t=0),t},t}(),Ht=Gt.normalize,Qt=Gt.isScheduler;!function(t){function e(t,e){var n=e[0],r=e[1],i=new jt;return r(n,function(e){var n=!1,s=!1;var u=t.schedule(e,function(t,e){n?i.remove(u):s=!0;return r(e,o),qt});s||(i.add(u),n=!0)}),i;function o(e){var n=false,s=false;var u=t.schedule(e,c);if(!s){i.add(u);n=true}function c(t,e){if(n){i.remove(u)}else{s=true}return r(e,o),qt}}}function n(t,e){var n=e[0],r=e[1],i=new jt;return r(n,function(e,n){var s=!1,u=!1;var c=t.scheduleFuture(e,n,function(t,e){s?i.remove(c):u=!0;return r(e,o),qt});u||(i.add(c),s=!0)}),i;function o(e,n){var s=false,u=false;var c=t.scheduleFuture(e,n,h);if(!u){i.add(c);s=true}function h(t,e){if(s){i.remove(c)}else{u=true}return r(e,o),qt}}}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(Gt.prototype),Gt.prototype.schedulePeriodic=function(t,e,n){if(void 0===_.setInterval)throw new z;e=Ht(e);var r=t,i=_.setInterval(function(){r=n(r)},e);return Ot(function(){_.clearInterval(i)})},(Ut=Gt.prototype).catchError=Ut.catch=function(t){return new se(this,t)};var Kt,Jt,$t=y.internals.SchedulePeriodicRecursive=function(){function t(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return t.prototype.start=function(){var t,e=new Mt;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,(t=this,function(e,n){n(0,t._period);var r=A(t._action)(t._state);r===j&&(t._cancel.dispose(),k(r.e)),t._state=r}))),e},t}(),Xt=function(t){function e(){t.call(this)}return gt(e,t),e.prototype.schedule=function(t,e){return Pt(e(this,t))},e}(Gt),Yt=Gt.immediate=new Xt,Zt=function(t){var e;function n(){for(;e.length>0;){var t=e.dequeue();!t.isCancelled()&&t.invoke()}}function r(){t.call(this)}return gt(r,t),r.prototype.schedule=function(t,r){var i=new zt(this,t,r,this.now());if(e)e.enqueue(i);else{(e=new Nt(4)).enqueue(i);var o=A(n)();e=null,o===j&&k(o.e)}return i.disposable},r.prototype.scheduleRequired=function(){return!e},r}(Gt),te=Gt.currentThread=new Zt,ee=function(){var t,e=w;if(_.setTimeout)t=_.setTimeout,e=_.clearTimeout;else{if(!_.WScript)throw new z;t=function(t,e){_.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),ne=ee.setTimeout,re=ee.clearTimeout;!function(){var t=1,e={},n=!1;function r(t){if(n)ne(function(){r(t)},0);else{var i=e[t];if(i){n=!0;var o=A(i)();Jt(t),n=!1,o===j&&k(o.e)}}}Jt=function(t){delete e[t]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),s="function"==typeof(s=f&&b&&f.setImmediate)&&!o.test(s)&&s;if(N(s))Kt=function(n){var i=t++;return e[i]=n,s(function(){r(i)}),i};else if(void 0!==i&&"[object process]"==={}.toString.call(i))Kt=function(n){var o=t++;return e[o]=n,i.nextTick(function(){r(o)}),o};else if(function(){if(!_.postMessage||_.importScripts)return!1;var t=!1,e=_.onmessage;return _.onmessage=function(){t=!0},_.postMessage("","*"),_.onmessage=e,t}()){var u="ms.rx.schedule"+Math.random();_.addEventListener("message",function(t){"string"==typeof t.data&&t.data.substring(0,u.length)===u&&r(t.data.substring(u.length))},!1),Kt=function(n){var r=t++;return e[r]=n,_.postMessage(u+r,"*"),r}}else if(_.MessageChannel){var c=new _.MessageChannel;c.port1.onmessage=function(t){r(t.data)},Kt=function(n){var r=t++;return e[r]=n,c.port2.postMessage(r),r}}else Kt="document"in _&&"onreadystatechange"in _.document.createElement("script")?function(n){var i=_.document.createElement("script"),o=t++;return e[o]=n,i.onreadystatechange=function(){r(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},_.document.documentElement.appendChild(i),o}:function(n){var i=t++;return e[i]=n,ne(function(){r(i)},0),i}}();var ie=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(kt._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}return gt(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Jt(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,re(this._id))},e.prototype.schedule=function(t,e){var i=new Mt,o=Kt(n(i,e,this,t));return new Vt(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new Mt,s=ne(n(o,r,this,t),e);return new Vt(o,new i(s))},e.prototype.scheduleLongRunning=function(t,e){var n=Ot(w);return Kt(function(t,e,n){return function(){e(t,n)}}(t,e,n)),n},e}(Gt),oe=Gt.default=Gt.async=new ie,se=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return gt(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var i=A(t)(e._getRecursiveWrapper(n),r);return i===j?(e._handler(i.e)||k(i.e),qt):Pt(i)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,i=!1,o=new Mt;return o.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(i)return null;var e=A(n)(t);return e===j?(i=!0,r._handler(e.e)||k(e.e),o.dispose(),null):e})),o},e}(Gt),ue=y.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new U},t.prototype._acceptObserver=function(t,e,n){throw new U},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Qt(t)||(t=Yt),new To(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),ce=function(t){function e(t){this.value=t,this.kind="N"}return gt(e,ue),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(),he=function(t){function e(t){this.error=t,this.kind="E"}return gt(e,ue),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(),ae=function(t){function e(){this.kind="C"}return gt(e,ue),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(),le=ue.createOnNext=function(t){return new ce(t)},fe=ue.createOnError=function(t){return new he(t)},pe=ue.createOnCompleted=function(){return new ae},de=y.Observer=function(){};de.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},de.prototype.asObserver=function(){var t=this;return new ye(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},de.prototype.checked=function(){return new we(this)};var be=de.create=function(t,e,n){return t||(t=w),e||(e=x),n||(n=w),new ye(t,e,n)};de.fromNotifier=function(t,e){var n=$(t,e,1);return new ye(function(t){return n(le(t))},function(t){return n(fe(t))},function(){return n(pe())})},de.prototype.notifyOn=function(t){return new ge(t,this)},de.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var ve,_e=y.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return gt(e,de),e.prototype.next=G,e.prototype.error=G,e.prototype.completed=G,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(),ye=y.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return gt(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(_e),we=function(t){function e(e){t.call(this),this._observer=e,this._state=0}gt(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=A(this._observer.onNext).call(this._observer,t);this._state=0,e===j&&k(e.e)},n.onError=function(t){this.checkAccess();var e=A(this._observer.onError).call(this._observer,t);this._state=2,e===j&&k(e.e)},n.onCompleted=function(){this.checkAccess();var t=A(this._observer.onCompleted).call(this._observer);this._state=2,t===j&&k(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(de),me=y.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Rt}function n(t,e){var n;if(t.queue.length>0){n=t.queue.shift();var r=A(n)();if(r===j)return t.queue=[],t.hasFaulted=!0,k(r.e);e(t)}else t.isAcquired=!1}return gt(e,t),e.prototype.next=function(t){this.queue.push(function(t,e){return function(){t.onNext(e)}}(this.observer,t))},e.prototype.error=function(t){this.queue.push(function(t,e){return function(){t.onError(e)}}(this.observer,t))},e.prototype.completed=function(){var t;this.queue.push((t=this.observer,function(){t.onCompleted()}))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,n))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(_e),ge=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return gt(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(me),Ee=y.Observable=function(){function t(){if(y.config.longStackSupport&&O){var t=this._subscribe,e=A(k)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=(n=this,r=t,function(t){var e=t.onError;return t.onError=function(r){M(r,n),e.call(t,r)},r.call(n,t)})}var n,r}return ve=t.prototype,t.isObservable=function(t){return t&&N(t.subscribe)},ve.subscribe=ve.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:be(t,e,n))},ve.subscribeOnNext=function(t,e){return this._subscribe(be(void 0!==e?function(n){t.call(e,n)}:t))},ve.subscribeOnError=function(t,e){return this._subscribe(be(null,void 0!==e?function(n){t.call(e,n)}:t))},ve.subscribeOnCompleted=function(t,e){return this._subscribe(be(null,null,void 0!==e?function(){t.call(e)}:t))},t}(),Ce=y.ObservableBase=function(t){function e(t,e){var n,r=e[0],i=e[1],o=A(i.subscribeCore).call(i,r);o!==j||r.fail(j.e)||k(j.e),r.setDisposable((n=o)&&N(n.dispose)?n:N(n)?Ot(n):qt)}function n(){t.call(this)}return gt(n,t),n.prototype._subscribe=function(t){var n=new Fo(t),r=[n,this];return te.scheduleRequired()?te.schedule(r,e):e(0,r),n},n.prototype.subscribeCore=G,n}(Ee),xe=y.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=N(r)?r:null,this.selector=$(N(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},gt(n,_e),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=A(this.selector)(t,e,this.source);if(n===j)return this.o.onError(n.e);S(n)&&(n=Me(n)),(J(n)||K(n))&&(n=Ee.from(n)),this.o.onNext(this._wrapResult(n,t,e))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce),Se=y.internals.Enumerable=function(){};function Ne(t){this._s=t,this.isDisposed=!1}Ne.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var De=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=A(t.e.next).call(t.e);if(n===j)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;S(i)&&(i=Me(i));var o=new Mt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt,r={isDisposed:!1,o:t,subscription:e,e:this.sources[H]()},i=te.scheduleRecursive(r,n);return new Lt([e,i,new Ne(r)])},gt(r,_e),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Ce);Se.prototype.concat=function(){return new De(this)};var je=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=A(t.e.next).call(t.e);if(n===j)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;S(i)&&(i=Me(i));var o=new Mt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt,r={isDisposed:!1,e:this.sources[H](),subscription:e,lastError:null,o:t},i=te.scheduleRecursive(r,n);return new Lt([e,i,new Ne(r)])},gt(r,_e),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Ce);Se.prototype.catchError=function(){return new je(this)};var Ae=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return gt(e,Se),e.prototype[H]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?Q:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(),ke=Se.repeat=function(t,e){return new Ae(t,e)},Oe=function(t){function e(t,e,n){this.s=t,this.fn=e?$(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return gt(e,Se),e.prototype[H]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Q},e}(),qe=Se.of=function(t,e,n){return new Oe(t,e,n)},Te=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ge(this._s,t))},e}(Ce);ve.observeOn=function(t){return new Te(this,t)};var Fe=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];r.setDisposable(new It(t,n.subscribe(i)))}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,r=new Rt;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Ce);ve.subscribeOn=function(t){return new Fe(this,t)};var Pe=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,i=this,o=this._p;return N(o)&&(o=A(o)())===j?(t.onError(o.e),e):(o.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e)},e}(Ce),Me=Ee.fromPromise=function(t,e){return e||(e=oe),new Pe(t,e)};ve.toPromise=function(t){if(t||(t=y.config.Promise),!t)throw new z("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var Re=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},gt(n,_e),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Ce);ve.toArray=function(){return new Re(this)},Ee.create=function(t,e){return new To(t,e)};var Ve=function(t){function e(e){this._f=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=A(this._f)();return e===j?hn(e.e).subscribe(t):(S(e)&&(e=Me(e)),e.subscribe(t))},e}(Ce),Le=Ee.defer=function(t){return new Ve(t)},We=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),qt}return gt(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Yt?r(0,t):this.scheduler.schedule(t,r)},e}(Ce),Ie=new We(Yt),Be=Ee.empty=function(t){return Qt(t)||(t=Yt),t===Yt?Ie:new We(t)},ze=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=function(t){var e=t[H];if(!e&&"string"==typeof t)return new Ge(t)[H]();if(!e&&t.length!==s)return new Qe(t)[H]();if(!e)throw new TypeError("Object is not iterable");return t[H]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){var o=A(e.next).call(e);if(o===j)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;if(N(n)&&(s=A(n)(s,r))===j)return t.onError(s.e);t.onNext(s),i(r+1)}}(t,e,this._fn))},e}(Ce),Ue=Math.pow(2,53)-1;function Ge(t){this._s=t}function He(t){this._s=t,this._l=t.length,this._i=0}function Qe(t){this._a=t}function Ke(t){this._a=t,this._l=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(n=e,"number"!=typeof n||!_.isFinite(n)))return e;var n;if((e=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(e)*Math.floor(Math.abs(e)))<=0)return 0;if(e>Ue)return Ue;return e}(t),this._i=0}Ge.prototype[H]=function(){return new He(this._s)},He.prototype[H]=function(){return this},He.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Q},Qe.prototype[H]=function(){return new Ke(this._a)},Ke.prototype[H]=function(){return this},Ke.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Q};var Je=Ee.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!N(e))throw new Error("mapFn when provided must be a function");if(e)var i=$(e,n,2);return Qt(r)||(r=te),new ze(t,i,r)},$e=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e){var n=e.length;return function(r,i){r<n?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}(t,this._args))},e}(Ce),Xe=Ee.fromArray=function(t,e){return Qt(e)||(e=te),new $e(t,e)},Ye=function(t){function e(e,n,r,i,o){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._s=o,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=A(t.self._itrFn)(t.newState),t.newState===j)return t.o.onError(t.newState.e);var n=A(t.self._cndFn)(t.newState);if(n===j)return t.o.onError(n.e);if(n){var r=A(t.self._resFn)(t.newState);if(r===j)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Ce);function Ze(t,e){return Qt(t)||(t=te),new $e(e,t)}Ee.generate=function(t,e,n,r,i){return Qt(i)||(i=te),new Ye(t,e,n,r,i)},Ee.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new $e(e,te)},Ee.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new $e(n,t)},Ee.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new To(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Ee.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new To(function(e){function n(t){for(var n=0,r=t.length;n<r;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var tn=new(function(t){function e(){t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return qt},e}(Ce)),en=Ee.never=function(){return tn},nn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}(t,this._o,this._keys))},e}(Ce);Ee.pairs=function(t,e){return e||(e=te),new nn(t,e)};var rn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){r<e?(n.onNext(t+r),i(r+1)):n.onCompleted()}}(this.start,this.rangeCount,t))},e}(Ce);Ee.range=function(t,e,n){return Qt(n)||(n=te),new rn(t,e,n)};var on=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new sn(t,this).run()},e}(Ce);function sn(t,e){this.observer=t,this.parent=e}sn.prototype.run=function(){var t=this.observer,e=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function(n,r){if((-1===n||n>0)&&(t.onNext(e),n>0&&n--),0===n)return t.onCompleted();r(n)})},Ee.repeat=function(t,e,n){return Qt(n)||(n=te),new on(t,e,n)};var un=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),qt}return gt(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Yt?n(null,e):this._scheduler.schedule(e,n)},e}(Ce),cn=(Ee.return=Ee.just=function(t,e){return Qt(e)||(e=Yt),new un(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),qt}return gt(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Yt?n(null,e):this._scheduler.schedule(e,n)},e}(Ce)),hn=Ee.throw=function(t,e){return Qt(e)||(e=Yt),new cn(t,e)},an=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=qt,n=A(this._resFn)();if(n===j)return new Vt(hn(n.e).subscribe(t),e);n&&(e=n);var r=A(this._obsFn)(n);return new Vt(r===j?hn(r.e).subscribe(t):r.subscribe(t),e)},e}(Ce);Ee.using=function(t,e){return new an(t,e)},ve.amb=function(t){var e=this;return new To(function(n){var r,i="L",o="R",s=new Mt,u=new Mt;function c(){r||(r=i,u.dispose())}function h(){r||(r=o,s.dispose())}S(t)&&(t=Me(t));var a=be(function(t){c(),r===i&&n.onNext(t)},function(t){c(),r===i&&n.onError(t)},function(){c(),r===i&&n.onCompleted()}),l=be(function(t){h(),r===o&&n.onNext(t)},function(t){h(),r===o&&n.onError(t)},function(){h(),r===o&&n.onCompleted()});return s.setDisposable(e.subscribe(a)),u.setDisposable(t.subscribe(l)),new Vt(s,u)})},Ee.amb=function(){var t,e,n,r=en();if(Array.isArray(arguments[0]))t=arguments[0];else{var i=arguments.length;t=new Array(t);for(var o=0;o<i;o++)t[o]=arguments[o]}for(o=0,i=t.length;o<i;o++)e=r,n=t[o],r=e.amb(n);return r};var ln=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,n=new Rt;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new fn(t,n,this._fn))),n},e}(Ce),fn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=A(this._fn)(t);if(e===j)return this._o.onError(e.e);S(e)&&(e=Me(e));var n=new Mt;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(_e);ve.catch=function(t){return N(t)?new ln(this,t):pn([this,t])};var pn=Ee.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return qe(t).catchError()};function dn(){return!1}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),yn.apply(this,e)};var vn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:xt(e,dn),hasValueAll:!1,isDone:xt(e,dn),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],s=new Mt;n[i]=s,S(o)&&(o=Me(o)),s.setDisposable(o.subscribe(new _n(t,i,this._cb,r)))}return new Lt(n)},e}(Ce),_n=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(m))){var e=A(this._cb).apply(null,this._state.values);if(e===j)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter((n=this._i,function(t,e){return e!==n})).every(m)&&this._o.onCompleted();var n},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(m)&&this._o.onCompleted()},e}(_e),yn=Ee.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=N(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new vn(e,r)};ve.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),gn.apply(null,t)};var wn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(_e),mn=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];S(n)&&(n=Me(n));var r=new Mt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new wn(t,e)))}}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt,r=Ot(w),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=Yt.scheduleRecursive(i,n);return new Lt([e,r,o])},e}(Ce),gn=Ee.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new mn(t)};ve.concatAll=function(){return this.merge(1)};var En=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new jt;return e.add(this.source.subscribe(new Cn(t,this.maxConcurrent,e))),e},e}(Ce),Cn=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return gt(e,t),e.prototype.handleSubscribe=function(t){var e=new Mt;this.g.add(e),S(t)&&(t=Me(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(_e);ve.merge=function(t){return"number"!=typeof t?xn(this,t):new En(this,t)};var xn=Ee.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Qt(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=Yt,e=0;e<r;e++)n.push(arguments[e]);else for(t=Yt,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),Ze(t,n).mergeAll()},Sn=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new jt,n=new Mt;return e.add(n),n.setDisposable(this.source.subscribe(new Nn(t,e))),e},e}(Ce),Nn=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=new Mt;this.g.add(e),S(t)&&(t=Me(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(_e);ve.mergeAll=function(){return new Sn(this)};var Dn=y.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Dn.prototype=Object.create(Error.prototype),Dn.prototype.name="CompositeError";var jn=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new jt,n=new Mt,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new An(e,r))),e},e}(Ce),An=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Dn(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=new Mt;this._group.add(e),S(t)&&(t=Me(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},gt(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(_e);Ee.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=Ze(null,t);return new jn(r)},ve.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return qn([this,t])};var kn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];S(n)&&(n=Me(n));var r=new Mt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new On(t,e)))}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt,r={pos:0,subscription:e,o:t,sources:this.sources},i=Yt.scheduleRecursive(r,n);return new Vt(e,i)},e}(Ce),On=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(_e),qn=Ee.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new kn(t)},Tn=function(t){function e(e,n){this._s=e,this._o=S(n)?Me(n):n,this._open=!1,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt;e.setDisposable(this._s.subscribe(new Fn(t,this))),S(this._o)&&(this._o=Me(this._o));var n=new Mt;return n.setDisposable(this._o.subscribe(new Pn(t,this,n))),new Vt(e,n)},e}(Ce),Fn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(_e),Pn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return gt(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(_e);ve.skipUntil=function(t){return new Tn(this,t)};var Mn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,_e.call(this)}function r(t,e){this.parent=t,this.id=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt,r=this.source.subscribe(new n(t,e));return new Vt(r,e)},gt(n,_e),n.prototype.next=function(t){var e=new Mt,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),S(t)&&(t=Me(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},gt(r,_e),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Ce);ve.switch=ve.switchLatest=function(){return new Mn(this)};var Rn=function(t){function e(e,n){this.source=e,this.other=S(n)?Me(n):n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this.source.subscribe(t),this.other.subscribe(new Vn(t)))},e}(Ce),Vn=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=w,e}(_e);function dn(){return!1}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.takeUntil=function(t){return new Rn(this,t)};var Ln=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:xt(e,dn),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var s=this._ss[o],u=new Mt;S(s)&&(s=Me(s)),u.setDisposable(s.subscribe(new Wn(t,o,n))),i[o]=u}var c=new Mt;return c.setDisposable(this._s.subscribe(new In(t,this._cb,n))),i[r]=c,new Lt(i)},e}(Ce),Wn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(m)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=w,e}(_e),In=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=A(this._cb).apply(null,e);if(n===j)return this._o.onError(n.e);this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);function dn(){return!1}function Bn(){return[]}ve.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=N(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new Ln(this,e,r)};var zn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=xt(e,dn),i=xt(e,Bn),o=0;o<e;o++){var s=this._s[o],u=new Mt;n[o]=u,S(s)&&(s=Me(s)),u.setDisposable(s.subscribe(new Un(t,o,this,i,r)))}return new Lt(n)},e}(Ce),Un=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return gt(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=A(this._p._cb).apply(null,e);if(i===j)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter((o=this._i,function(t,e){return e!==o})).every(m)&&this._o.onCompleted();var o},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(m)&&this._o.onCompleted()},e}(_e);function dn(){return!1}function Bn(){return[]}function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=N(e[t-1])?e.pop():bn;Array.isArray(e[0])&&(e=e[0]);return e.unshift(this),new zn(e,r)},Ee.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=N(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var Gn=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:xt(n,Bn),done:xt(n,dn),cb:this._cb,o:t},o=0;o<n;o++)!function(t){var n=e[t],o=new Mt;(J(n)||K(n))&&(n=Je(n)),r[t]=o,o.setDisposable(n.subscribe(new Hn(i,t)))}(o);return new Lt(r)},e}(Ce),Hn=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return gt(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=A(this._s.cb).apply(null,e);if(i===j)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter((o=this._i,function(t,e){return e!==o})).every(m)&&this._s.o.onCompleted();var o},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(m)&&this._s.o.onCompleted()},e}(_e);function Qn(t){return t.toArray()}function Kn(t){return t.length>0}ve.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=N(e[t-1])?e.pop():bn;return e.unshift(this),new Gn(e,r)},ve.asObservable=function(){return new To((t=this,function(e){return t.subscribe(e)}),this);var t},ve.bufferWithCount=ve.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(Qn).filter(Kn)};var Jn=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $n(t))},e}(Ce),$n=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.dematerialize=function(){return new Jn(this)};var Xn=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yn(t,this.keyFn,this.comparer))},e}(Ce),Yn=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e,n=t;return N(this.keyFn)&&(n=A(this.keyFn)(t))===j?this.o.onError(n.e):this.hasCurrentKey&&(e=A(this.comparer)(this.currentKey,n))===j?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(_e);ve.distinctUntilChanged=function(t,e){return e||(e=E),new Xn(this,t,e)};var Zn=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||N(e._oN)?be(e._oN||w,e._oE||w,e._oC||w):e._oN,this.isStopped=!1,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},gt(n,_e),n.prototype.next=function(t){var e=A(this.t.onNext).call(this.t,t);e===j&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=A(this.t.onError).call(this.t,t);if(e===j)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=A(this.t.onCompleted).call(this.t);if(t===j)return this.o.onError(t.e);this.o.onCompleted()},e}(Ce);ve.do=ve.tap=ve.doAction=function(t,e,n){return new Zn(this,t,e,n)},ve.doOnNext=ve.tapOnNext=function(t,e){return this.tap(void 0!==e?function(n){t.call(e,n)}:t)},ve.doOnError=ve.tapOnError=function(t,e){return this.tap(w,void 0!==e?function(n){t.call(e,n)}:t)},ve.doOnCompleted=ve.tapOnCompleted=function(t,e){return this.tap(w,null,void 0!==e?function(){t.call(e)}:t)};var tr=function(t){function e(e,n,r){this.source=e,this._fn=$(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return gt(e,t),e.prototype.subscribeCore=function(t){var e=A(this.source.subscribe).call(this.source,t);return e===j&&(this._fn(),k(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=A(this._s.dispose).call(this._s);this._fn(),t===j&&k(t.e)}},e}(Ce);ve.finally=function(t,e){return new tr(this,t,e)};var er=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=w,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Ce);ve.ignoreElements=function(){return new er(this)};var nr=function(t){function e(e,n){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new rr(t))},e}(Ce),rr=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext(le(t))},e.prototype.error=function(t){this._o.onNext(fe(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(pe()),this._o.onCompleted()},e}(_e);function ir(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}ve.materialize=function(){return new nr(this)},ve.repeat=function(t){return ke(this,t).concat()},ve.retry=function(t){return ke(this,t).catchError()};var or=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return gt(n,t),n.prototype.subscribeCore=function(t){var n=new Ro,r=new Ro,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),s={isDisposed:!1},u=new Rt,c=te.scheduleRecursive(null,function(e,i){if(!s.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var h=c.value;S(h)&&(h=Me(h));var a=new Mt,l=new Mt;u.setDisposable(new Vt(l,a)),a.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){l.setDisposable(r.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(e),a.dispose()},function(){t.onCompleted()}))}}});return new Lt([i,u,c,e(s)])},n}(Ce);function ir(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}ve.retryWhen=function(t){return new or(ir(this),t)};var sr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return gt(n,t),n.prototype.subscribeCore=function(t){var n=new Ro,r=new Ro,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),s={isDisposed:!1},u=new Rt,c=te.scheduleRecursive(null,function(e,i){if(!s.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var h=c.value;S(h)&&(h=Me(h));var a=new Mt,l=new Mt;u.setDisposable(new Vt(l,a)),a.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){l.setDisposable(r.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),n.onNext(null),a.dispose()}))}}});return new Lt([i,u,c,e(s)])},n}(Ce);ve.repeatWhen=function(t){return new sr(ir(this),t)};var ur=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new cr(t,this))},e}(Ce),cr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=A(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?A(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===j)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(_e);ve.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new ur(this,n,e,t)};var hr=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ar(t,this._c))},e}(Ce),ar=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipLast=function(t){if(t<0)throw new B;return new hr(this,t)},ve.startWith=function(){var t,e=0;arguments.length&&Qt(arguments[0])?(t=arguments[0],e=1):t=Yt;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return gn.apply(null,[Xe(n,t),this])};var lr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(_e);ve.takeLast=function(t){if(t<0)throw new B;var e=this;return new To(function(n){return e.subscribe(new lr(n,t))},e)};var fr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(_e);function pr(t,e,n){var r=$(e,n,3);return t.map(function(e,n){var i=r(e,n,t);return S(i)&&(i=Me(i)),(J(i)||K(i))&&(i=Je(i)),i}).concatAll()}ve.takeLastBuffer=function(t){if(t<0)throw new B;var e=this;return new To(function(n){return e.subscribe(new fr(n,t))},e)},ve.windowWithCount=ve.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),t<=0)throw new B;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),e<=0)throw new B;return new To(function(r){var i=new Mt,o=new Wt(i),s=0,u=[];function c(){var t=new Ro;u.push(t),r.onNext(Ct(t,o))}return c(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=u.length;r<i;r++)u[r].onNext(n);var o=s-t+1;o>=0&&o%e==0&&u.shift().onCompleted(),++s%e==0&&c()},function(t){for(;u.length>0;)u.shift().onError(t);r.onError(t)},function(){for(;u.length>0;)u.shift().onCompleted();r.onCompleted()})),o},n)},ve.selectConcat=ve.concatMap=function(t,e,n){return N(t)&&N(e)?this.concatMap(function(n,r){var i=t(n,r);return S(i)&&(i=Me(i)),(J(i)||K(i))&&(i=Je(i)),i.map(function(t,i){return e(n,t,r,i)})}):N(t)?pr(this,t,n):pr(this,function(){return t})},ve.concatMapObserver=ve.selectConcatObserver=function(t,e,n,r){var i=this,o=$(t,r,2),s=$(e,r,1),u=$(n,r,0);return new To(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(e){return void t.onError(e)}S(r)&&(r=Me(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(e){return void t.onError(e)}S(n)&&(n=Me(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(e){return void t.onError(e)}S(e)&&(e=Me(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var dr=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(_e);function br(t){this.comparer=t,this.set=[]}ve.defaultIfEmpty=function(t){var e=this;return t===s&&(t=null),new To(function(n){return e.subscribe(new dr(n,t))},e)},br.prototype.push=function(t){var e=-1===function(t,e,n){for(var r=0,i=t.length;r<i;r++)if(n(t[r],e))return r;return-1}(this.set,t,this.comparer);return e&&this.set.push(t),e};var vr=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _r(t,this._keyFn,this._cmpFn))},e}(Ce),_r=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new br(r),t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=t;if(N(this._keyFn)&&(e=A(this._keyFn)(t))===j)return this._o.onError(e.e);this._h.push(e)&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.distinct=function(t,e){return e||(e=E),new vr(this,t,e)},ve.groupBy=function(t,e){return this.groupByUntil(t,e,en)},ve.groupByUntil=function(t,e,n){var r=this;return new To(function(i){var o=new Wi,u=new jt,c=new Wt(u),h=function(t){return function(e){e.onError(t)}};return u.add(r.subscribe(function(r){var a=A(t)(r);if(a===j)return o.forEach(h(a.e)),i.onError(a.e);var l=!1,f=o.get(a);if(f===s&&(f=new Ro,o.set(a,f),l=!0),l){var p=new Mo(a,f,c),d=new Mo(a,f),b=A(n)(d);if(b===j)return o.forEach(h(b.e)),i.onError(b.e);i.onNext(p);var v=new Mt;u.add(v),v.setDisposable(b.take(1).subscribe(w,function(t){o.forEach(h(t)),i.onError(t)},function(){o.delete(a)&&f.onCompleted(),u.remove(v)}))}var _=r;if(N(e)&&(_=A(e)(r))===j)return o.forEach(h(_.e)),i.onError(_.e);f.onNext(_)},function(t){o.forEach(h(t)),i.onError(t)},function(){o.forEach(function(t){t.onCompleted()}),i.onCompleted()})),c},r)};var yr=function(t){function e(e,n,r){this.source=e,this.selector=$(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,_e.call(this)}return gt(e,t),e.prototype.internalMap=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}(t,this),n)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this))},gt(n,_e),n.prototype.next=function(t){var e=A(this.selector)(t,this.i++,this.source);if(e===j)return this.o.onError(e.e);this.o.onNext(e)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce);ve.map=ve.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yr?this.internalMap(n,e):new yr(this,n,e)},ve.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(function(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return s;r=o}return r}}(e,t))},ve.flatMap=ve.selectMany=ve.mergeMap=function(t,e,n){return new xe(this,t,e,n).mergeAll()},ve.flatMapObserver=ve.selectManyObserver=function(t,e,n,r){var i=this;return new To(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(t){return void o.onError(t)}S(n)&&(n=Me(n)),o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(t){return void o.onError(t)}S(n)&&(n=Me(n)),o.onNext(n),o.onCompleted()},function(){var t;try{t=n.call(r)}catch(t){return void o.onError(t)}S(t)&&(t=Me(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},ve.flatMapLatest=ve.switchMap=function(t,e,n){return new xe(this,t,e,n).switchLatest()};var wr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},gt(n,_e),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ce);ve.skip=function(t){if(t<0)throw new B;return new wr(this,t)};var mr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new gr(t,this))},e}(Ce),gr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._r){var e=A(this._p._fn)(t,this._i++,this._p);if(e===j)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipWhile=function(t,e){var n=$(t,e,3);return new mr(this,n)};var Er=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},gt(n,_e),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ce);ve.take=function(t,e){if(t<0)throw new B;return 0===t?Be(e):new Er(this,t)};var Cr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xr(t,this))},e}(Ce),xr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._r&&(this._r=A(this._p._fn)(t,this._i++,this._p),this._r===j))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.takeWhile=function(t,e){var n=$(t,e,3);return new Cr(this,n)};var Sr=function(t){function e(e,n,r){this.source=e,this.predicate=$(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,_e.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.predicate,this))},e.prototype.internalFilter=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}(t,this),n)},gt(n,_e),n.prototype.next=function(t){var e=A(this.predicate)(t,this.i++,this.source);if(e===j)return this.o.onError(e.e);e&&this.o.onNext(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ce);ve.filter=ve.where=function(t,e){return this instanceof Sr?this.internalFilter(t,e):new Sr(this,t,e)};var Nr=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Dr(t,this._k,this._c))},e}(Ce),Dr=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._k)(t);if(e===j)return this._o.onError(e.e);var n=0;if(this._hv){if((n=A(this._c)(e,this._v))===j)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(_e);function jr(t){if(0===t.length)throw new W;return t[0]}var Ar=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new kr(t,this))},e}(Ce),kr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=A(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?A(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===j)return this._o.onError(this._a.e);this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new W),this._o.onCompleted()},e}(_e);ve.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new Ar(this,n,e,t)};var Or=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new qr(t,this._fn,this.source))},e}(Ce),qr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._fn)(t,this._i++,this._s);if(e===j)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(_e);ve.some=function(t,e){var n=$(t,e,3);return new Or(this,n)};var Tr=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Fr(t))},e}(Ce),Fr=function(t){function e(e){this._o=e,t.call(this)}return gt(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(_e);ve.isEmpty=function(){return new Tr(this)};var Pr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Mr(t,this._fn,this.source))},e}(Ce),Mr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._fn)(t,this._i++,this._s);if(e===j)return this._o.onError(e.e);Boolean(e)||(this._o.onNext(!1),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(_e);ve.every=function(t,e){var n=$(t,e,3);return new Pr(this,n)};var Rr=function(t){function e(e,n,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=e,this._elem=n,this._n=i,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),qt):this.source.subscribe(new Vr(t,this._elem,this._n))},e}(Ce),Vr=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e,n;this._i++>=this._n&&(e=t,n=this._elem,0===e&&0===n||e===n||isNaN(e)&&isNaN(n))&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(_e);ve.includes=function(t,e){return new Rr(this,t,e)};var Lr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Wr(t,this._fn,this.source))},e}(Ce),Wr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=A(this._fn)(t,this._i++,this._s);if(e===j)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(_e);ve.count=function(t,e){var n=$(t,e,3);return new Lr(this,n)};var Ir=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),qt):this.source.subscribe(new Br(t,this._e,this._n))},e}(Ce),Br=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(_e);ve.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new Ir(this,t,n)};var zr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ur(t,this._fn,this.source))},e}(Ce),Ur=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=A(this._fn)(t,this._i++,this._s);if(e===j)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(_e);ve.sum=function(t,e){var n=$(t,e,3);return new zr(this,n)},ve.minBy=function(t,e){return e||(e=C),new Nr(this,t,function(t,n){return-1*e(t,n)})},ve.min=function(t){return this.minBy(m,t).map(jr)},ve.maxBy=function(t,e){return e||(e=C),new Nr(this,t,e)},ve.max=function(t){return this.maxBy(m,t).map(jr)};var Gr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Hr(t,this._fn,this.source))},e}(Ce),Hr=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._fn){var e=A(this._fn)(t,this._c++,this._s);if(e===j)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){if(0===this._c)return this._o.onError(new W);this._o.onNext(this._t/this._c),this._o.onCompleted()},e}(_e);ve.average=function(t,e){var n;return N(t)&&(n=$(t,e,3)),new Gr(this,n)},ve.sequenceEqual=function(t,e){var n=this;return e||(e=E),new To(function(r){var i=!1,o=!1,s=[],u=[],c=n.subscribe(function(t){if(u.length>0){var n=u.shift(),i=A(e)(n,t);if(i===j)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(J(t)||K(t))&&(t=Je(t)),S(t)&&(t=Me(t));var h=t.subscribe(function(t){if(s.length>0){var n=s.shift(),o=A(e)(n,t);if(o===j)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new Vt(c,h)},n)};var Qr=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Kr(t,this._i,this._d))},e}(Ce),Kr=function(t){function e(e,n,r){this._o=e,this._i=n,this._d=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){0==this._i--&&(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d===s?this._o.onError(new B):(this._o.onNext(this._d),this._o.onCompleted())},e}(_e);ve.elementAt=function(t,e){if(t<0)throw new B;return new Qr(this,t,e)};var Jr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=A(this._obj.predicate)(t,this._i++,this._s);if(n===j)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},N(n.predicate)){var i=n.predicate;n.predicate=$(i,n.thisArg,3)}return new To(function(t){return r.subscribe(new Jr(t,n,r))},r)};var $r=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xr(t,this._obj,this.source))},e}(Ce),Xr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(this._obj.predicate){var e=A(this._obj.predicate)(t,this._i++,this._s);if(e===j)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},N(t.predicate)){var e=t.predicate;t.predicate=$(e,t.thisArg,3)}return new $r(this,t)};var Yr=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zr(t,this._obj,this.source))},e}(Ce),Zr=function(t){function e(e,n,r){this._o=e,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=A(this._obj.predicate)(t,this._i++,this._s);if(n===j)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===s?this._o.onError(new W):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},e}(_e);ve.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},N(t.predicate)){var e=t.predicate;t.predicate=$(e,t.thisArg,3)}return new Yr(this,t)};var ti=function(t){function e(e,n,r,i){this._o=e,this._s=n,this._cb=r,this._y=i,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._cb)(t,this._i,this._s);if(e===j)return this._o.onError(e.e);e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(_e);function ei(t,e,n,r){var i=$(e,n,3);return new To(function(e){return t.subscribe(new ti(e,t,i,r))},t)}ve.find=function(t,e){return ei(this,t,e,!1)},ve.findIndex=function(t,e){return ei(this,t,e,!0)};var ni=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ri(t))},e}(Ce),ri=function(t){function e(e){this._o=e,this._s=new _.Set,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(_e);ve.toSet=function(){if(void 0===_.Set)throw new TypeError;return new ni(this)};var ii=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new oi(t,this._k,this._e))},e}(Ce),oi=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new _.Map,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._k)(t);if(e===j)return this._o.onError(e.e);var n=t;if(this._e&&(n=A(this._e)(t))===j)return this._o.onError(n.e);this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(_e);ve.toMap=function(t,e){if(void 0===_.Map)throw new TypeError;return new ii(this,t,e)};var si=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ui(t,this._b,this._e))},e}(Ce),ui=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.slice=function(t,e){var n=t||0;if(n<0)throw new y.ArgumentOutOfRangeError;if("number"==typeof e&&e<n)throw new y.ArgumentOutOfRangeError;return new si(this,n,e)};var ci=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),qt):this.source.subscribe(new hi(t,this._e,this._n))},e}(Ce),hi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(_e);ve.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new ci(this,t,n)},Ee.wrap=function(t){function e(){return Ee.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var ai=Ee.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,i=arguments.length;r<i;r++)n.push(arguments[r]);return new To(function(r){var i=new jt;if(N(t)&&(t=t.apply(e,n)),!t||!N(t.next))return r.onNext(t),r.onCompleted();function o(e){var n=A(t.next).call(t,e);if(n===j)return r.onError(n.e);u(n)}function s(e){var n=A(t.next).call(t,e);if(n===j)return r.onError(n.e);u(n)}function u(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=li.call(e,t.value),u=null,c=!1;Ee.isObservable(n)?i.add(n.subscribe(function(t){c=!0,u=t},s,function(){c&&o(u)})):s(new TypeError("type not supported"))}return o(),i})};function li(t){return t?Ee.isObservable(t)?t:S(t)?Ee.fromPromise(t):function(t){var e=t.constructor;if(!e)return!1;if("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)return!0;return fi(e.prototype)}(t)||fi(t)?ai.call(this,t):N(t)?function(t){var e=this;return new To(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;i<o;i++)r.push(arguments[i]);e=r}n.onNext(e),n.onCompleted()})})}.call(this,t):J(t)||K(t)?function(t){return Ee.from(t).concatMap(function(t){return Ee.isObservable(t)||ft(t)?li.call(null,t):y.Observable.just(t)}).toArray()}.call(this,t):ft(t)?function(t){for(var e=new t.constructor,n=Object.keys(t),r=[],i=0,o=n.length;i<o;i++){var u=n[i],c=li.call(this,t[u]);c&&Ee.isObservable(c)?h(c,u):e[u]=t[u]}return Ee.forkJoin.apply(Ee,r).map(function(){return e});function h(t,n){e[n]=s,r.push(t.map(function(t){e[n]=t}))}}.call(this,t):t:t}function fi(t){return N(t.next)&&N(t.throw)}function ft(t){return Object==t.constructor}Ee.start=function(t,e,n){return pi(t,e,n)()};var pi=Ee.toAsync=function(t,e,n){return Qt(n)||(n=oe),function(){var r=arguments,i=new Vo;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(t){return void i.onError(t)}i.onNext(n),i.onCompleted()}),i.asObservable()}};function di(t,e,n,r){var i=new Vo;return r.push(function(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(N(n)){if((i=A(n).apply(e,i))===j)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function bi(t,e,n,r){var i=new Vo;return r.push(function(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;s<i;s++)o[s-1]=arguments[s];if(N(n)){var o=A(n).apply(e,o);if(o===j)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function vi(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function _i(t,e,n){var r=new jt,i=Object.prototype.toString.call(t);if(function(t){return _.StaticNodeList?t instanceof _.StaticNodeList||t instanceof _.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;o<s;o++)r.add(_i(t.item(o),e,n));else t&&r.add(new vi(t,e,n));return r}Ee.fromCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return di(t,e,n,i)}},Ee.fromNodeCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return bi(t,e,n,i)}},vi.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},y.config.useNativeEvents=!1;var yi=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return _i(this._el,this._n,function(t,e){return function(){var n=arguments[0];if(N(e)&&(n=A(e).apply(null,arguments))===j)return t.onError(n.e);t.onNext(n)}}(t,this._fn))},e}(Ce);Ee.fromEvent=function(t,e,n){return t.addListener?mi(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):y.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new yi(t,e,n).publish().refCount():mi(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var wi=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return gt(e,t),e.prototype.subscribeCore=function(t){var e=function(t,e){return function(){var n=arguments[0];if(N(e)&&(n=A(e).apply(null,arguments))===j)return t.onError(n.e);t.onNext(n)}}(t,this._fn),r=this._add(e);return new n(this._del,e,r)},n.prototype.dispose=function(){this.isDisposed||(N(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Ce),mi=Ee.fromEventPattern=function(t,e,n){return new wi(t,e,n).publish().refCount()};Ee.startAsync=function(t){var e=A(t)();return e===j?hn(e.e):Me(e)};var gi=function(t){function e(e,n){this.source=e,this.controller=new Ro,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return gt(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=qt,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=qt)});return new Lt([n,r,i])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Ee);ve.pausable=function(t){return new gi(this,t)};var Ei=function(t){function e(e,n){this.source=e,this.controller=new Ro,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return gt(e,t),e.prototype._subscribe=function(t){var e,n,r,i,o=[];function u(){for(;o.length>0;)t.onNext(o.shift())}return(n=this.source,r=this.pauser.startWith(!this.paused).distinctUntilChanged(),i=function(t,e){return{data:t,shouldFire:e}},new To(function(t){var e,o=[!1,!1],s=!1,u=!1,c=new Array(2);function h(n,r){if(c[r]=n,o[r]=!0,s||(s=o.every(m))){if(e)return t.onError(e);var h=A(i).apply(null,c);if(h===j)return t.onError(h.e);t.onNext(h)}u&&c[1]&&t.onCompleted()}return new Vt(n.subscribe(function(t){h(t,0)},function(n){c[1]?t.onError(n):e=n},function(){u=!0,c[1]&&t.onCompleted()}),r.subscribe(function(t){h(t,1)},function(e){t.onError(e)},function(){u=!0,h(!0,1)}))},n)).subscribe(function(n){e!==s&&n.shouldFire!==e?(e=n.shouldFire,n.shouldFire&&u()):(e=n.shouldFire,n.shouldFire?t.onNext(n.data):o.push(n.data))},function(e){u(),t.onError(e)},function(){u(),t.onCompleted()})},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Ee);ve.pausableBuffered=function(t){return new Ei(this,t)};var Ci=function(t){function e(e,n,r){t.call(this),this.subject=new xi(n,r),this.source=e.multicast(this.subject).refCount()}return gt(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Ee),xi=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Ro,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||te}return gt(e,t),Et(e.prototype,de,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(ue.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(ue.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(ue.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);if(!(e.hasCompleted||e.hasFailed)&&r>0)return e.requestedCount=r,Ot(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Ee);ve.controlled=function(t,e){return t&&Qt(t)&&(e=t,t=!0),null==t&&(t=!0),new Ci(this,t,e)};var Si=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}gt(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Vt(this.subscription,oe.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return gt(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=oe.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(_e);return e}(Ee);Ci.prototype.stopAndWait=function(){return new Si(this)};var Ni=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}gt(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new Vt(this.subscription,oe.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return gt(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=oe.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(_e);return e}(Ee);Ci.prototype.windowed=function(t){return new Ni(this,t)},ve.pipe=function(t){var e=this.pausableBuffered();function n(){e.resume()}return t.addListener("drain",n),e.subscribe(function(n){!t.write(n)&&e.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",n)}),e.resume(),t};var Di=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Vt(this._fn2(e).subscribe(t),e.connect())},e}(Ce);ve.multicast=function(t,e){return N(t)?new Di(this,t,e):new ki(this,t)},ve.publish=function(t){return t&&N(t)?this.multicast(function(){return new Ro},t):this.multicast(new Ro)},ve.share=function(){return this.publish().refCount()},ve.publishLast=function(t){return t&&N(t)?this.multicast(function(){return new Vo},t):this.multicast(new Vo)},ve.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new Lo(e)},t):this.multicast(new Lo(t))},ve.shareValue=function(t){return this.publishValue(t).refCount()},ve.replay=function(t,e,n,r){return t&&N(t)?this.multicast(function(){return new Wo(e,n,r)},t):this.multicast(new Wo(e,n,r))},ve.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var ji=function(t,e){this._s=t,this._o=e};ji.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var Ai=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return gt(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Ce),ki=y.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return gt(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return qt;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Ai(this)},e}(Ee);function Qn(t){return t.toArray()}ve.singleInstance=function(){var t,e=this,n=!1;return new To(function(r){return(n||(n=!0,t=e.finally(function(){n=!1}).publish().refCount()),t).subscribe(r)})},ve.join=function(t,e,n,r){var i=this;return new To(function(o){var s=new jt,u=!1,c=!1,h=0,a=0,l=new Wi,f=new Wi,p=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var n=h++,i=new Mt;l.set(n,t),s.add(i);var c=A(e)(t);if(c===j)return o.onError(c.e);i.setDisposable(c.take(1).subscribe(w,p,function(){l.delete(n)&&0===l.size&&u&&o.onCompleted(),s.remove(i)})),f.forEach(function(e){var n=A(r)(t,e);if(n===j)return o.onError(n.e);o.onNext(n)})},p,function(){u=!0,(c||0===l.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var e=a++,i=new Mt;f.set(e,t),s.add(i);var u=A(n)(t);if(u===j)return o.onError(u.e);i.setDisposable(u.take(1).subscribe(w,p,function(){f.delete(e)&&0===f.size&&c&&o.onCompleted(),s.remove(i)})),l.forEach(function(e){var n=A(r)(e,t);if(n===j)return o.onError(n.e);o.onNext(n)})},p,function(){c=!0,(u||0===f.size)&&o.onCompleted()})),s},i)},ve.groupJoin=function(t,e,n,r){var i=this;return new To(function(o){var s=new jt,u=new Wt(s),c=new Wi,h=new Wi,a=0,l=0,f=function(t){return function(e){e.onError(t)}};function f(t){}return s.add(i.subscribe(function(t){var n=new Ro,i=a++;c.set(i,n);var l=A(r)(t,Ct(n,u));if(l===j)return c.forEach(f(l.e)),o.onError(l.e);o.onNext(l),h.forEach(function(t){n.onNext(t)});var p=new Mt;s.add(p);var d=A(e)(t);if(d===j)return c.forEach(f(d.e)),o.onError(d.e);p.setDisposable(d.take(1).subscribe(w,function(t){c.forEach(f(t)),o.onError(t)},function(){c.delete(i)&&n.onCompleted(),s.remove(p)}))},function(t){c.forEach(f(t)),o.onError(t)},function(){o.onCompleted()})),s.add(t.subscribe(function(t){var e=l++;h.set(e,t);var r=new Mt;s.add(r);var i=A(n)(t);if(i===j)return c.forEach(f(i.e)),o.onError(i.e);r.setDisposable(i.take(1).subscribe(w,function(t){c.forEach(f(t)),o.onError(t)},function(){h.delete(e),s.remove(r)})),c.forEach(function(e){e.onNext(t)})},function(t){c.forEach(f(t)),o.onError(t)})),u},i)},ve.buffer=function(){return this.window.apply(this,arguments).flatMap(Qn)},ve.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?function(t){var e=this;return new To(function(n){var r=new Ro,i=new jt,o=new Wt(i);return n.onNext(Ct(r,o)),i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),S(t)&&(t=Me(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new Ro,n.onNext(Ct(r,o))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),o},e)}.call(this,t):"function"==typeof t?function(t){var e=this;return new To(function(n){var r=new Rt,i=new jt(r),o=new Wt(i),s=new Ro;return n.onNext(Ct(s,o)),i.add(e.subscribe(function(t){s.onNext(t)},function(t){s.onError(t),n.onError(t)},function(){s.onCompleted(),n.onCompleted()})),function e(){var i;try{i=t()}catch(t){return void n.onError(t)}S(i)&&(i=Me(i));var u=new Mt;r.setDisposable(u);u.setDisposable(i.take(1).subscribe(w,function(t){s.onError(t),n.onError(t)},function(){s.onCompleted(),s=new Ro,n.onNext(Ct(s,o)),e()}))}(),o},e)}.call(this,t):function(t,e){return t.groupJoin(this,e,Be,function(t,e){return e})}.call(this,t,e)};var Oi=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new qi(t))},e}(Ce),qi=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.pairwise=function(){return new Oi(this)},ve.partition=function(t,e){var n=$(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Ti=function(t){function e(t,e){this.c=t,this.s=e}return gt(e,Se),e.prototype[H]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}();ve.letBind=ve.let=function(t){return t(this)},Ee.if=function(t,e,n){return Le(function(){return n||(n=Be()),S(e)&&(e=Me(e)),S(n)&&(n=Me(n)),"function"==typeof n.now&&(n=Be(n)),t()?e:n})},Ee.for=Ee.forIn=function(t,e,n){return qe(t,e,n).concat()};var Fi=Ee.while=Ee.whileDo=function(t,e){return S(e)&&(e=Me(e)),function(t,e){return new Ti(t,e)}(t,e).concat()};ve.doWhile=function(t){return gn([this,Fi(t,this)])},Ee.case=function(t,e,n){return Le(function(){S(n)&&(n=Me(n)),n||(n=Be()),Qt(n)&&(n=Be(n));var r=e[t()];return S(r)&&(r=Me(r)),r||n})};var Pi=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],i=t[1];if(r.q.length>0){n=r.q.shift();var o=new Mt;r.d.add(o),o.setDisposable(n.subscribe(new Mi(r,i,o))),e([r,i])}else r.isAcquired=!1}return gt(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new Rt,n=new jt(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Ce),Mi=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=A(this._p._fn)(t);if(e===j)return this._s.o.onError(e.e);this._s.q.push(e),this._s.activeCount++,this._p._ensureActive(this._s)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(_e);function bn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}ve.expand=function(t,e){return Qt(e)||(e=te),new Pi(this,t,e)};var Ri=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),qt;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new jt,i=0,o=this._sources.length;i<o;i++){var s=this._sources[i];S(s)&&(s=Me(s)),r.add(s.subscribe(new Vi(t,n,i,this._cb,r)))}return r},e}(Ce),Vi=function(t){function e(e,n,r,i,o){this._o=e,this._s=n,this._i=r,this._cb=i,this._subs=o,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=A(this._cb).apply(null,this._s.results);if(e===j)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(_e);Ee.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=N(e[t-1])?e.pop():bn;return Array.isArray(e[0])&&(e=e[0]),new Ri(e,r)},ve.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Ee.forkJoin.apply(null,e)},ve.manySelect=ve.extend=function(t,e){Qt(e)||(e=y.Scheduler.immediate);var n=this;return Le(function(){var r;return n.map(function(t){var e=new Li(t);return r&&r.onNext(t),r=e,e}).tap(w,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Li=function(t){function e(e){t.call(this),this.head=e,this.tail=new Vo}return gt(e,t),Et(e.prototype,de,{_subscribe:function(t){var e=new jt;return e.add(te.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Ee.empty())},onError:function(t){this.onNext(Ee.throw(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Ee),Wi=_.Map||function(){function t(){this.size=0,this._values=[],this._keys=[]}return t.prototype.delete=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},t.prototype.get=function(t){var e=this._keys.indexOf(t);return-1===e?s:this._values[e]},t.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},t.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},t}();function Ii(t){this.patterns=t}function Bi(t,e){this.expression=t,this.selector=e}function zi(t,e,n){var r=t.get(e);if(!r){var i=new Gi(e,n);return t.set(e,i),i}return r}function Ui(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Wi;for(var r=0,i=this.joinObserverArray.length;r<i;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}Ii.prototype.and=function(t){return new Ii(this.patterns.concat(t))},Ii.prototype.thenDo=function(t){return new Bi(this,t)},Bi.prototype.activate=function(t,e,n){for(var r,i=[],o=(r=e,function(t){r.onError(t)}),s=0,u=this.expression.patterns.length;s<u;s++)i.push(zi(t,this.expression.patterns[s],o));var c=new Ui(i,function(t,e){return function(){var n=A(t.selector).apply(t,arguments);if(n===j)return e.onError(n.e);e.onNext(n)}}(this,e),function(){for(var t=0,e=i.length;t<e;t++)i[t].removeActivePlan(c);n(c)});for(s=0,u=i.length;s<u;s++)i[s].addActivePlan(c);return c},Ui.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},Ui.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;t<e;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],i=!1;for(t=0,e=this.joinObserverArray.length;t<e;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Gi=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new Mt,this.isDisposed=!1}gt(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;n<r;n++)e[n].match()}},n.error=w,n.completed=w,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(_e);ve.and=function(t){return new Ii([this,t])},ve.thenDo=function(t){return new Ii([this]).thenDo(t)},Ee.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new To(function(e){var n=[],r=new Wi,i=be(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var o=0,s=t.length;o<s;o++)n.push(t[o].activate(r,i,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(t){return hn(t).subscribe(e)}var u=new jt;return r.forEach(function(t){t.subscribe(),u.add(t)}),u})};var Hi=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Ce);function Qi(t,e,n){return new To(function(r){var i=t,o=Ht(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();(i=new Date(i.getTime()+o)).getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function Ki(t,e,n){return t===e?new To(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):Le(function(){return Qi(new Date(n.now()+t),e,n)})}var Ji=Ee.interval=function(t,e){return Ki(t,t,Qt(e)?e:oe)};Ee.timer=function(t,e,n){var r;return Qt(n)||(n=oe),null!=e&&"number"==typeof e?r=e:Qt(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?function(t,e){return new Hi(t,e)}(t,n):t instanceof Date&&r!==s?Qi(t,e,n):Ki(t,r,n)};function $i(t,e,n){return new To(function(r){var i,o=!1,s=new Rt,u=null,c=[],h=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,a;"E"===t.value.kind?((c=[]).push(t),u=t.value.error,a=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),a=!o,o=!0),a&&(null!==u?r.onError(u):(i=new Mt,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,a,l;if(null===u){h=!0;do{a=null,c.length>0&&c[0].timestamp-n.now()<=0&&(a=c.shift().value),null!==a&&a.accept(r)}while(null!==a);l=!1,s=0,c.length>0?(l=!0,s=Math.max(0,c[0].timestamp-n.now())):o=!1,h=!1,null!==(i=u)?r.onError(i):l&&e(null,s)}}))))}),new Vt(i,s)},t)}ve.delay=function(){var t,e,n,r,i,o=arguments[0];if("number"==typeof o||o instanceof Date){var s=o,u=arguments[1];return Qt(u)||(u=oe),s instanceof Date?function(t,e,n){return Le(function(){return $i(t,e-n.now(),n)})}(this,s,u):$i(this,s,u)}if(Ee.isObservable(o)||N(o))return t=this,e=o,n=arguments[1],N(e)?i=e:(r=e,i=n),new To(function(e){var n=new jt,o=!1,s=new Rt;function u(){s.setDisposable(t.subscribe(function(t){var r=A(i)(t);if(r===j)return e.onError(r.e);var o=new Mt;n.add(o),o.setDisposable(r.subscribe(function(){e.onNext(t),n.remove(o),c()},function(t){e.onError(t)},function(){e.onNext(t),n.remove(o),c()}))},function(t){e.onError(t)},function(){o=!0,s.dispose(),c()}))}function c(){o&&0===n.length&&e.onCompleted()}return r?s.setDisposable(r.subscribe(u,function(t){e.onError(t)},u)):u(),new Vt(s,n)},t);throw new Error("Invalid arguments")};var Xi=function(t){function e(e,n,r){Qt(r)||(r=oe),this.source=e,this._dt=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt;return new Vt(this.source.subscribe(new Yi(t,this._dt,this._s,e)),e)},e}(Ce),Yi=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new Mt;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(_e);function Qn(t){return t.toArray()}function Qn(t){return t.toArray()}ve.debounce=function(){if(N(arguments[0]))return t=this,e=arguments[0],new To(function(n){var r,i=!1,o=new Rt,s=0,u=t.subscribe(function(t){var u=A(e)(t);if(u===j)return n.onError(u.e);S(u)&&(u=Me(u)),i=!0,r=t;var c=++s,h=new Mt;o.setDisposable(h),h.setDisposable(u.subscribe(function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()},function(t){n.onError(t)},function(){i&&s===c&&n.onNext(r),i=!1,h.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new Vt(u,o)},t);if("number"==typeof arguments[0])return new Xi(this,arguments[0],arguments[1]);throw new Error("Invalid arguments");var t,e},ve.windowWithTime=ve.windowTime=function(t,e,n){var r,i=this;return null==e&&(r=t),Qt(n)||(n=oe),"number"==typeof e?r=e:Qt(e)&&(r=t,n=e),new To(function(e){var o,s,u=r,c=t,h=[],a=new Rt,l=0;return o=new jt(a),s=new Wt(o),h.push(new Ro),e.onNext(Ct(h[0],s)),function t(){var i=new Mt,o=!1,f=!1;a.setDisposable(i),c===u?(o=!0,f=!0):c<u?o=!0:f=!0;var p=o?c:u,d=p-l;l=p,o&&(c+=r),f&&(u+=r),i.setDisposable(n.scheduleFuture(null,d,function(){if(f){var n=new Ro;h.push(n),e.onNext(Ct(n,s))}o&&h.shift().onCompleted(),t()}))}(),o.add(i.subscribe(function(t){for(var e=0,n=h.length;e<n;e++)h[e].onNext(t)},function(t){for(var n=0,r=h.length;n<r;n++)h[n].onError(t);e.onError(t)},function(){for(var t=0,n=h.length;t<n;t++)h[t].onCompleted();e.onCompleted()})),s},i)},ve.windowWithTimeOrCount=ve.windowTimeOrCount=function(t,e,n){var r=this;return Qt(n)||(n=oe),new To(function(i){var o=new Rt,s=new jt(o),u=new Wt(s),c=0,h=0,a=new Ro;function l(e){var r=new Mt;o.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===h){c=0;var t=++h;a.onCompleted(),a=new Ro,i.onNext(Ct(a,u)),l(t)}}))}return i.onNext(Ct(a,u)),l(0),s.add(r.subscribe(function(t){var n=0,r=!1;a.onNext(t),++c===e&&(r=!0,c=0,n=++h,a.onCompleted(),a=new Ro,i.onNext(Ct(a,u))),r&&l(n)},function(t){a.onError(t),i.onError(t)},function(){a.onCompleted(),i.onCompleted()})),u},r)},ve.bufferWithTime=ve.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(Qn)},ve.bufferWithTimeOrCount=ve.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(Qn)};var Zi=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new to(t,this._s))},e}(Ce),to=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.timeInterval=function(t){return Qt(t)||(t=oe),new Zi(this,t)};var eo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new no(t,this._s))},e}(Ce),no=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.timestamp=function(t){return Qt(t)||(t=oe),new eo(this,t)};var ro=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Mt};return e.sourceSubscription.setDisposable(this.source.subscribe(new oo(e))),new Vt(e.sourceSubscription,this._sampler.subscribe(new io(e)))},e}(Ce),io=function(t){function e(e){this._s=e,t.call(this)}return gt(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(_e),oo=function(t){function e(e){this._s=e,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(_e);ve.sample=function(t,e){return Qt(e)||(e=oe),new ro(this,"number"==typeof t?Ji(t,e):t)};var so=y.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};so.prototype=Object.create(Error.prototype),ve.timeout=function(){var t,e,n,r,i=arguments[0];if(i instanceof Date||"number"==typeof i)return t=this,e=i,n=arguments[1],r=arguments[2],Qt(n)&&(r=n,n=hn(new so)),n instanceof Error&&(n=hn(n)),Qt(r)||(r=oe),Ee.isObservable(n)||(n=hn(new so)),new To(function(i){var o=0,s=new Mt,u=new Rt,c=!1,h=new Rt;function a(){var t=o;h.setDisposable(r.scheduleFuture(null,e,function(){(c=o===t)&&(S(n)&&(n=Me(n)),u.setDisposable(n.subscribe(i)))}))}return u.setDisposable(s),a(),s.setDisposable(t.subscribe(function(t){c||(o++,i.onNext(t),a())},function(t){c||(o++,i.onError(t))},function(){c||(o++,i.onCompleted())})),new Vt(u,h)},t);if(Ee.isObservable(i)||N(i))return function(t,e,n,r){return N(e)&&(r=n,n=e,e=en()),Ee.isObservable(r)||(r=hn(new so)),new To(function(i){var o=new Rt,s=new Rt,u=new Mt;o.setDisposable(u);var c=0,h=!1;function a(t){var e=c,n=new Mt;function u(){return h=e===c}s.setDisposable(n),n.setDisposable(t.subscribe(function(){u()&&o.setDisposable(r.subscribe(i)),n.dispose()},function(t){u()&&i.onError(t)},function(){u()&&o.setDisposable(r.subscribe(i))}))}function l(){var t=!h;return t&&c++,t}return a(e),u.setDisposable(t.subscribe(function(t){if(l()){i.onNext(t);var e=A(n)(t);if(e===j)return i.onError(e.e);a(S(e)?Me(e):e)}},function(t){l()&&i.onError(t)},function(){l()&&i.onCompleted()})),new Vt(o,s)},t)}(this,i,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var uo=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=A(t.self._itrFn)(t.newState),t.newState===j)return t.o.onError(t.newState.e);if(t.hasResult=A(t.self._cndFn)(t.newState),t.hasResult===j)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=A(t.self._resFn)(t.newState),t.result===j)return t.o.onError(t.result.e);var n=A(t.self._timeFn)(t.newState);if(n===j)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Ce);Ee.generateWithAbsoluteTime=function(t,e,n,r,i,o){return Qt(o)||(o=oe),new uo(t,e,n,r,i,o)};var co=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=A(t.self._itrFn)(t.newState),t.newState===j)return t.o.onError(t.newState.e);if(t.hasResult=A(t.self._cndFn)(t.newState),t.hasResult===j)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=A(t.self._resFn)(t.newState),t.result===j)return t.o.onError(t.result.e);var n=A(t.self._timeFn)(t.newState);if(n===j)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Ce);Ee.generateWithRelativeTime=function(t,e,n,r,i,o){return Qt(o)||(o=oe),new co(t,e,n,r,i,o)};var ho=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1];e[2].setDisposable(n.subscribe(r))}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Rt;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Ce);ve.delaySubscription=function(t,e){return Qt(e)||(e=oe),new ho(this,t,e)};var ao=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lo(t,this))},e}(Ce),lo=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(_e);ve.skipLastWithTime=function(t,e){return Qt(e)||(e=oe),new ao(this,t,e)};var fo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t,this._d,this._s))},e}(Ce),po=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(_e);ve.takeLastWithTime=function(t,e){return Qt(e)||(e=oe),new fo(this,t,e)},ve.takeLastBufferWithTime=function(t,e){var n=this;return Qt(e)||(e=oe),new To(function(r){var i=[];return n.subscribe(function(n){var r=e.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},n)};var bo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Ce);ve.takeWithTime=function(t,e){return Qt(e)||(e=oe),new bo(this,t,e)};var vo=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new _o(t,this)))},e}(Ce),_o=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipWithTime=function(t,e){return Qt(e)||(e=oe),new vo(this,t,e)};var yo=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return gt(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new Vt(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new wo(t,this)))},e}(Ce),wo=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(_e);ve.skipUntilWithTime=function(t,e){return Qt(e)||(e=oe),new yo(this,t,e)},ve.takeUntilWithTime=function(t,e){Qt(e)||(e=oe);var n=this;return new To(function(r){return new Vt(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},ve.throttle=function(t,e){Qt(e)||(e=oe);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new To(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var mo=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){var e=A(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===j&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(_e);ve.transduce=function(t){var e=this;return new To(function(n){var r=t(function(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}(n));return e.subscribe(new mo(n,r))},e)};var go=function(t){function e(e){this.source=e,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){var e=new Mt,n=new jt,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new Eo(r))),n},e}(Ce),Eo=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return gt(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,S(t)&&(t=Me(t));var e=new Mt;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},gt(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(_e);ve.switchFirst=function(){return new go(this)},ve.flatMapFirst=ve.exhaustMap=function(t,e,n){return new xe(this,t,e,n).switchFirst()},ve.flatMapWithMaxConcurrent=ve.flatMapMaxConcurrent=function(t,e,n,r){return new xe(this,e,n,r).merge(t)};var Co=y.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new Nt(1024),t.call(this)}gt(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=G,n.toAbsoluteTime=G,n.toRelativeTime=G,n.schedulePeriodic=function(t,e,n){return new $t(this,t,e,n).start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new B;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new B;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new B;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){var r=this;var i=new zt(this,t,function(t,e){return r.queue.remove(i),n(t,e)},e,this.comparer);return this.queue.enqueue(i),i.disposable},e}(Gt);function xo(t){this.predicate=t}function So(t){this.predicate=t}y.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,i=n||C;t.call(this,r,i)}gt(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(y.VirtualTimeScheduler),xo.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},So.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var No=y.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return new Do(t,"function"==typeof e?new xo(e):ue.createOnNext(e))},onError:function(t,e){return new Do(t,"function"==typeof e?new So(e):ue.createOnError(e))},onCompleted:function(t){return new Do(t,ue.createOnCompleted())},subscribe:function(t,e){return new jo(t,e)}},Do=y.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||E};Do.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},Do.prototype.toString=function(){return this.value.toString()+"@"+this.time};var jo=y.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};jo.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},jo.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"},(y.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)}).prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var Ao=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}gt(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new Do(this.scheduler.clock,ue.createOnNext(t)))},n.onError=function(t){this.messages.push(new Do(this.scheduler.clock,ue.createOnError(t)))},n.onCompleted=function(){this.messages.push(new Do(this.scheduler.clock,ue.createOnCompleted()))},e}(de);function ko(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;r<i;r++){var o=this.messages[r];!function(e){t.scheduleAbsolute(null,o.time,function(){for(var t=n.observers.slice(0),r=0,i=t.length;r<i;r++)e.accept(t[r]);return qt})}(o.value)}}ko.prototype.then=function(t,e){var n=this;this.subscriptions.push(new jo(this.scheduler.clock));var r,i=this.subscriptions.length-1,o=y.Observer.create(function(e){var u=t(e);if(u&&"function"==typeof u.then)r=u;else{var c=n.scheduler.clock;r=new ko(n.scheduler,[y.ReactiveTest.onNext(c,s),y.ReactiveTest.onCompleted(c)])}var h=n.observers.indexOf(o);n.observers.splice(h,1),n.subscriptions[i]=new jo(n.subscriptions[i].subscribe,n.scheduler.clock)},function(t){e(t);var r=n.observers.indexOf(o);n.observers.splice(r,1),n.subscriptions[i]=new jo(n.subscriptions[i].subscribe,n.scheduler.clock)});return this.observers.push(o),r||new ko(this.scheduler,this.messages)};var Oo=function(t){function e(e,n){t.call(this);var r,i=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var o=0,s=this.messages.length;o<s;o++)!function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=i.observers.slice(0),n=0,r=e.length;n<r;n++)t.accept(e[n]);return qt})}((r=this.messages[o]).value)}return gt(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new jo(this.scheduler.clock));var n=this.subscriptions.length-1;return Ot(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new jo(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Ee),qo=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return gt(e,t),e.prototype._subscribe=function(t){var e,n=this;this.subscriptions.push(new jo(this.scheduler.clock));for(var r=this.subscriptions.length-1,i=new jt,o=0,s=this.messages.length;o<s;o++)!function(r){i.add(n.scheduler.scheduleRelative(null,e.time,function(){return r.accept(t),qt}))}((e=this.messages[o]).value);return Ot(function(){n.subscriptions[r]=new jo(n.subscriptions[r].subscribe,n.scheduler.clock),i.dispose()})},e}(Ee);y.TestScheduler=function(t){function e(t,e){return t>e?1:t<e?-1:0}function n(){t.call(this,0,e)}return gt(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=No.created),null==e.subscribed&&(e.subscribed=No.subscribed),null==e.disposed&&(e.disposed=No.disposed);var n,r,i=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),qt}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(i),qt}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),qt}),this.start(),i},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new Oo(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return new qo(this,t)},n.prototype.createResolvedPromise=function(t,e){return new ko(this,[y.ReactiveTest.onNext(t,e),y.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new ko(this,[y.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new Ao(this)},n}(Co);var To=y.AnonymousObservable=function(t){function e(t,e){var n,r=e[0],i=e[1],o=A(i.__subscribe).call(i,r);o!==j||r.fail(j.e)||k(j.e),r.setDisposable((n=o)&&N(n.dispose)?n:N(n)?Ot(n):qt)}function n(e,n){this.source=n,this.__subscribe=e,t.call(this)}return gt(n,t),n.prototype._subscribe=function(t){var n=new Fo(t),r=[n,this];return te.scheduleRequired()?te.schedule(r,e):e(0,r),n},n}(Ee),Fo=function(t){function e(e){t.call(this),this.observer=e,this.m=new Mt}gt(e,t);var n=e.prototype;return n.next=function(t){var e=A(this.observer.onNext).call(this.observer,t);e===j&&(this.dispose(),k(e.e))},n.error=function(t){var e=A(this.observer.onError).call(this.observer,t);this.dispose(),e===j&&k(e.e)},n.completed=function(){var t=A(this.observer.onCompleted).call(this.observer);this.dispose(),t===j&&k(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(_e),Po=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return gt(e,t),e.prototype.subscribeCore=function(t){return new Vt(this._m.getDisposable(),this._u.subscribe(t))},e}(Ce),Mo=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Po(r,n):n}return gt(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Ee),Ro=y.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Ft(this),this.isStopped?this.hasError?(t.onError(this.error),qt):(t.onCompleted(),qt):(this.observers.push(t),new ji(this,t))},hasObservers:function(){return Ft(this),this.observers.length>0},onCompleted:function(){if(Ft(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=D(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ft(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=D(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Ft(this),!this.isStopped)for(var e=0,n=D(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Io(t,e)},e}(Ee),Vo=y.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Ft(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),qt):(this.observers.push(t),new ji(this,t))},hasObservers:function(){return Ft(this),this.observers.length>0},onCompleted:function(){var t;if(Ft(this),!this.isStopped){this.isStopped=!0;var e=D(this.observers),n=e.length;if(this.hasValue)for(t=0;t<n;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ft(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=D(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Ft(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Ee),Lo=y.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return Ft(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),qt):(this.observers.push(t),t.onNext(this.value),new ji(this,t))},getValue:function(){return Ft(this),this.hasError&&k(this.error),this.value},hasObservers:function(){return Ft(this),this.observers.length>0},onCompleted:function(){if(Ft(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=D(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Ft(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=D(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Ft(this),!this.isStopped){this.value=t;for(var e=0,n=D(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Ee),Wo=y.ReplaySubject=function(t){var e=Math.pow(2,53)-1;function n(n,r,i){this.bufferSize=null==n?e:n,this.windowSize=null==r?e:r,this.scheduler=i||te,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}return gt(n,t),Et(n.prototype,de.prototype,{_subscribe:function(t){Ft(this);var e,n,r=new me(this.scheduler,t),i=(e=this,n=r,Ot(function(){n.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(n),1)}));this._trim(this.scheduler.now()),this.observers.push(r);for(var o=0,s=this.q.length;o<s;o++)r.onNext(this.q[o].value);return this.hasError?r.onError(this.error):this.isStopped&&r.onCompleted(),r.ensureActive(),i},hasObservers:function(){return Ft(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Ft(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=D(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(Ft(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=D(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Ft(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=D(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Ee),Io=y.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return gt(e,t),Et(e.prototype,de.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Ee);y.Pauser=function(t){function e(){t.call(this)}return gt(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ro),_.Rx=y,(o=function(){return y}.call(e,n,e,t))===s||(t.exports=o);var Bo=V()}).call(this)}).call(this,n(1)(t),n(2),n(3))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,h=[],a=!1,l=-1;function f(){a&&c&&(a=!1,c.length?h=c.concat(h):l=-1,h.length&&p())}function p(){if(!a){var t=u(f);a=!0;for(var e=h.length;e;){for(c=h,h=[];++l<e;)c&&c[l].run();l=-1,e=h.length}c=null,a=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function b(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||a||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=b,i.addListener=b,i.once=b,i.off=b,i.removeListener=b,i.removeAllListeners=b,i.emit=b,i.prependListener=b,i.prependOnceListener=b,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e);var r,i=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},o=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=function(){function t(t,e){this.viewFile=t,this.loader=e}return t.create=function(e,n){return new t(e,n)},t.prototype.load=function(){return i(this,void 0,void 0,function(){var t,e,n;return o(this,function(r){switch(r.label){case 0:return this.element?[2,this.element]:[4,this.loader.load(this.viewFile)];case 1:if(t=r.sent(),!(e=(new DOMParser).parseFromString(t,"text/html").firstChild))throw new Error("Could not load view from "+this.viewFile);return n=e.getElementsByTagName("body"),this.element=n&&n[0].firstElementChild?n[0].firstElementChild:e,[2,this.element]}})})},t}(),u=function(){function t(t){this.factory=t}return Object.defineProperty(t.prototype,"Value",{get:function(){return this.value||(this.value=this.factory())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsCreated",{get:function(){return!!this.value},enumerable:!0,configurable:!0}),t.Create=function(e){return new t(e)},t}(),c=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},h=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},a=function(){function t(t,e){var n=this;this.ViewFile="EditEntryCardView.html",this.viewModel=e,this.element=u.Create(function(){return s.create(n.ViewFile,t).load()})}return t.prototype.remove=function(){return c(this,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return this.element.IsCreated?[4,this.element.Value]:[3,2];case 1:t.sent().remove(),t.label=2;case 2:return[2]}})})},t.prototype.loadIntoParent=function(t){return c(this,void 0,void 0,function(){var e,n,r,i,o=this;return h(this,function(s){switch(s.label){case 0:return[4,this.remove()];case 1:return s.sent(),[4,this.element.Value];case 2:if(e=s.sent(),t.appendChild(e),n=e.querySelector("input[id='answerInput']"),r=e.querySelector("input[id='questionInput']"),!n||!r)throw Error("Could not find all children in view.");return this.viewModel.answer.subscribe(function(t){n.value=t}),this.viewModel.question.subscribe(function(t){r.value=t}),n.onchange=function(t){o.viewModel.setAnswer(n.value)},r.onchange=function(t){o.viewModel.setQuestion(r.value)},(i=e.querySelector("button[id='saveEntry']")).onclick=function(t){o.viewModel.save()},this.viewModel.canExecuteSave.subscribe(function(t){i.disabled=!t}),e.querySelector("button[id='cancel']").onclick=function(t){o.viewModel.cancel()},[2]}})})},t}(),l=n(0),f=function(){function t(t,e){this.selectedSubject=new l.Subject,this._question=t,this._answer=e}return Object.defineProperty(t.prototype,"selected",{get:function(){return this.selectedSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this._question},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"answer",{get:function(){return this._answer},enumerable:!0,configurable:!0}),t.prototype.select=function(){this.selectedSubject.onNext(this)},t}(),p=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},b=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},v=function(){function t(t){var e=this;this.ViewFile="CardView.html",this.selectedBehavior=new l.Subject,this.views=new _,this.view=s.create(this.ViewFile,t),this.element=u.Create(function(){return d(e,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return[4,this.view.load()];case 1:return[2,t.sent()]}})})}),this.viewModelSubject=new l.BehaviorSubject(new f("","")),this.viewModelSubject.subscribe(function(t){return e.onViewModelChanged(t)})}return Object.defineProperty(t.prototype,"selected",{get:function(){return this.selectedBehavior.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewModel",{get:function(){return this.viewModelSubject.getValue()},set:function(t){this.viewModelSubject.onNext(t)},enumerable:!0,configurable:!0}),t.prototype.detach=function(){return d(this,void 0,void 0,function(){return b(this,function(t){switch(t.label){case 0:return this.element.IsCreated?[4,this.element.Value]:[3,2];case 1:t.sent().remove(),t.label=2;case 2:return[2]}})})},t.prototype.loadIntoParent=function(t){return d(this,void 0,void 0,function(){var e,n,r;return b(this,function(i){switch(i.label){case 0:return[4,this.detach()];case 1:return i.sent(),[4,this.element.Value];case 2:if(e=i.sent(),t.appendChild(e),n=e.querySelector("#questionText"),r=e.querySelector("#answerText"),!n||!r)throw Error("Could not find all expected children in view.");return this.views=new y(e,n,r),this.onViewModelChanged(this.viewModelSubject.getValue()),[2]}})})},t.prototype.onViewModelChanged=function(t){this.views.question=t.question,this.views.answer=t.answer,this.views.clickHandler=function(){return t.select()}},t}(),_=function(){function t(){}return Object.defineProperty(t.prototype,"question",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"answer",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickHandler",{set:function(t){},enumerable:!0,configurable:!0}),t}(),y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.questionElement=n,i.answerElement=r,i.parentElement=e,i}return p(e,t),Object.defineProperty(e.prototype,"question",{set:function(t){this.questionElement.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answer",{set:function(t){this.answerElement.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickHandler",{set:function(t){this.parentElement.onclick=t},enumerable:!0,configurable:!0}),e}(_),w=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},m=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},g=function(){function t(t,e){var n=this;this.ViewFile="EditorPage.html",this.cardViews=[],this.loader=t,this.viewModel=e,this.element=u.Create(function(){return w(n,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,s.create(this.ViewFile,t).load()];case 1:return[2,e.sent()]}})})})}return t.prototype.loadIntoParent=function(t){return w(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return m(this,function(u){switch(u.label){case 0:return[4,this.element.Value];case 1:if(e=u.sent(),t.appendChild(e),n=e.querySelector("div[id='editorContainer']"),r=e.querySelector("div[id='cardsContainer']"),i=e.querySelector("div[id='addEntryButton'"),o=M.FloatingActionButton.init(i),!n||!r||!o)throw Error("Could not find all views in layout.");return i.onclick=function(t){return s.viewModel.addCard()},this.viewModel.flashCards.subscribe(function(t){return s.updateFlashCardsList(t,r)}),this.viewModel.editingEntry.subscribe(function(t){return w(s,void 0,void 0,function(){return m(this,function(e){return t?this.onEditingStarted(n,t):this.editorView&&this.onFinishEditing(),[2]})})}),[4,this.viewModel.load()];case 2:return u.sent(),[2]}})})},t.prototype.onEditingStarted=function(t,e){return w(this,void 0,void 0,function(){var n;return m(this,function(r){switch(r.label){case 0:return[4,(n=new a(this.loader,e)).loadIntoParent(t)];case 1:return r.sent(),this.editorView=n,[2]}})})},t.prototype.detachMatchingCard=function(t){return w(this,void 0,void 0,function(){var e;return m(this,function(n){switch(n.label){case 0:if((e=this.cardViews.findIndex(function(e){return e.viewModel===t}))<0)throw Error("Attempting to edit unknown Entry.");return[4,this.cardViews[e].detach()];case 1:return n.sent(),[2,e]}})})},t.prototype.onFinishEditing=function(){return w(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.editorView?[4,this.editorView.remove()]:[2];case 1:return t.sent(),this.editorView=null,[2]}})})},t.prototype.updateFlashCardsList=function(t,e){return w(this,void 0,void 0,function(){var n,r,i,o,s;return m(this,function(u){switch(u.label){case 0:if(!((n=t.length-this.cardViews.length)<0))return[3,1];for(i=n;i<0;){if(!(r=this.cardViews.pop()))throw new Error("Controller undefined when attempting to remove.");r.detach(),++i}return[3,4];case 1:if(!(n>0))return[3,4];i=0,u.label=2;case 2:return i<n?[4,(o=new v(this.loader)).loadIntoParent(e)]:[3,4];case 3:return u.sent(),this.cardViews.push(o),++i,[3,2];case 4:if(this.cardViews.length!=t.length)throw Error("ViewModel and View sizes do not match.");return s=this.cardViews[Symbol.iterator](),t.forEach(function(t){s.next().value.viewModel=t}),[2]}})})},t}(),E=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},C=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},x=function(){function t(t,e,n){this.dbProvider=t,this.version=n,this.storeName=e}return t.prototype.save=function(t){return E(this,void 0,void 0,function(){var e,n,r,i,o;return C(this,function(s){switch(s.label){case 0:return[4,this.open()];case 1:return e=s.sent(),n=e.transaction("Entries","readwrite"),r=n.objectStore("Entries"),t.id?i=r.put(t):(delete(o=Object.assign({},t)).id,i=r.add(o)),[2,new Promise(function(e,n){i.onsuccess=function(n){t.id=i.result,e(t)},i.onerror=function(t){n()}})]}})})},t.prototype.getAll=function(){return E(this,void 0,void 0,function(){var t,e;return C(this,function(n){switch(n.label){case 0:return[4,this.open()];case 1:return t=n.sent(),e=t.transaction(this.storeName).objectStore(this.storeName).getAll(),[2,new Promise(function(t,n){e.onsuccess=function(n){var r=e.result||[];t(r)}})]}})})},t.prototype.open=function(){var t=this,e=this.dbProvider.open("FlashCards",this.version);return new Promise(function(n,r){e.onupgradeneeded=function(n){var r=e.result;r&&r.createObjectStore(t.storeName,{autoIncrement:!0,keyPath:"id"})},e.onsuccess=function(t){var i=e.result;i?n(i):r(new Error("Could not open FlashCards database."))}})},t}(),S=function(){function t(){}return t.createAutoIncrementStore=function(t,e,n){return new x(t,e,n)},t}(),N=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},D=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},j=function(){function t(t,e,n){this.question=t,this.answer=e,this.id=n||null}return t.fromDto=function(e){return new t(k.fromString(e.question),O.fromString(e.answer),e.id)},t.prototype.getMutableCopy=function(){return A.fromData(new T({id:this.id,question:this.question.value,answer:this.answer.value}))},t}(),A=function(){function t(t,e,n){this.question=t,this.answer=e,this.id=n||null}return t.prototype.asEntry=function(){return j.fromDto(new T({id:this.id,question:this.question,answer:this.answer}))},t.fromData=function(e){return new t(e.question,e.answer,e.id)},t}(),k=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.fromString=function(e){return new t(e)},t}(),O=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.fromString=function(e){return new t(e)},t}(),q=function(){function t(t){this.databaseVersion=1,this.store=S.createAutoIncrementStore(t,"Entries",this.databaseVersion)}return t.prototype.save=function(e){return N(this,void 0,void 0,function(){var n,r,i;return D(this,function(o){switch(o.label){case 0:return r=(n=j).fromDto,i=T.bind,[4,this.store.save(t.createEntryDto(e))];case 1:return[2,r.apply(n,[new(i.apply(T,[void 0,o.sent()]))])]}})})},t.prototype.createEntry=function(t,e){return j.fromDto(new T({id:null,question:t,answer:e}))},t.prototype.getAll=function(){return N(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:return[4,this.store.getAll()];case 1:return[2,t.sent().map(function(t){return j.fromDto(new T(t))})]}})})},t.createEntryDto=function(t){return{id:t.id,question:t.question.value,answer:t.answer.value}},t}(),T=function(){function t(t){this.dto=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this.dto.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.dto.question},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"answer",{get:function(){return this.dto.answer},enumerable:!0,configurable:!0}),t}(),F=function(){function t(){}return t.Utf8ArrayToStr=function(t){var e,n,r,i,o,s;for(e="",r=t.length,n=0;n<r;)switch((i=t[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(i);break;case 12:case 13:o=t[n++],e+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=t[n++],s=t[n++],e+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&s)<<0)}return e},t}(),P=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},R=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},V=function(){function t(){}return t.createFetchHtmlLoader=function(t){return new L(t,"./html/")},t}(),L=function(){function t(t,e){this.root=e,this.globalFetch=t}return t.prototype.load=function(t){return P(this,void 0,void 0,function(){var e,n,r,i;return R(this,function(o){switch(o.label){case 0:return e=this.root+t,[4,this.globalFetch.fetch(e)];case 1:return(n=o.sent())&&n.body?[4,n.body.getReader().read()]:[2,""];case 2:return r=o.sent(),r.done,i=r.value,[2,F.Utf8ArrayToStr(i)]}})})},t}(),W=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},I=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},B=function(){function t(t,e){var n=this;this.questionSubject=new l.BehaviorSubject(""),this.answerSubject=new l.BehaviorSubject(""),this.canExecuteSaveSubject=new l.BehaviorSubject(!1),this.isCancelledSubject=new l.BehaviorSubject(!1),this.savedSubject=new l.Subject,this.entryService=t,this.entry=e||null,e&&(this.answerSubject.onNext(e.answer.value),this.questionSubject.onNext(e.question.value)),this.savedSubject.subscribe(function(t){n.entry=t}),this.answer.subscribe(function(t){n.updateCanExecuteSave()}),this.question.subscribe(function(t){n.updateCanExecuteSave()})}return Object.defineProperty(t.prototype,"saved",{get:function(){return this.savedSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCancelled",{get:function(){return this.isCancelledSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"answer",{get:function(){return this.answerSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canExecuteSave",{get:function(){return this.canExecuteSaveSubject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setAnswer=function(t){this.answerSubject.onNext(t)},t.prototype.setQuestion=function(t){this.questionSubject.onNext(t)},t.prototype.cancel=function(){this.isCancelledSubject.onNext(!0)},t.prototype.updateCanExecuteSave=function(){this.canExecuteSaveSubject.onNext(!this.isCancelledSubject.getValue()&&!!this.answerSubject.getValue()&&!!this.questionSubject.getValue())},t.prototype.save=function(){return W(this,void 0,void 0,function(){var t,e,n,r;return I(this,function(i){switch(i.label){case 0:return this.canExecuteSaveSubject.getValue()?(this.entry?((e=this.entry.getMutableCopy()).question=this.questionSubject.getValue(),e.answer=this.answerSubject.getValue(),t=e.asEntry()):t=this.entryService.createEntry(this.questionSubject.getValue(),this.answerSubject.getValue()),r=(n=this.savedSubject).onNext,[4,this.entryService.save(t)]):[2];case 1:return r.apply(n,[i.sent()]),this.setQuestion(""),this.setAnswer(""),[2]}})})},t}(),z=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},U=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},G=function(){function t(t){var e=this;this.canExecuteAddCardSubject=new l.BehaviorSubject(!0),this.editingSubject=new l.BehaviorSubject(null),this.flashCardsSubject=new l.BehaviorSubject([]),this.modelLookup=new Map,this.entryService=t,this.editingSubject.subscribe(function(t){e.canExecuteAddCardSubject.onNext(!t)})}return Object.defineProperty(t.prototype,"canExecuteAddCard",{get:function(){return this.canExecuteAddCardSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingEntry",{get:function(){return this.editingSubject.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"flashCards",{get:function(){return this.flashCardsSubject.asObservable()},enumerable:!0,configurable:!0}),t.prototype.addCard=function(){var t=this;if(this.canExecuteAddCardSubject.getValue()){var e=new B(this.entryService),n=new l.CompositeDisposable;n.add(e.saved.take(1).subscribe(function(e){var r=t.flashCardsSubject.getValue();r.push(new f(e.question.value,e.answer.value)),t.flashCardsSubject.onNext(r),n.dispose(),t.editingSubject.onNext(null)})),n.add(e.isCancelled.where(function(t){return t}).take(1).subscribe(function(e){n.dispose(),t.editingSubject.onNext(null)})),this.editingSubject.onNext(e)}},t.prototype.load=function(){return z(this,void 0,void 0,function(){var t,e=this;return U(this,function(n){switch(n.label){case 0:return[4,this.entryService.getAll()];case 1:return t=n.sent(),this.flashCardsSubject.onNext(t.map(function(t){var n=new f(t.question.value,t.answer.value);return n.selected.subscribe(function(t){return e.onCardSelected(t)}),e.modelLookup.set(n,t),n})),[2]}})})},t.prototype.onCardSelected=function(t){var e=this,n=this.modelLookup.get(t);if(n){var r=new B(this.entryService,n),i=new l.CompositeDisposable;i.add(r.saved.take(1).subscribe(function(t){i.dispose(),e.editingSubject.onNext(null),e.load()})),i.add(r.isCancelled.take(1).subscribe(function(t){t&&(i.dispose(),e.editingSubject.onNext(null))}));var o=this.flashCardsSubject.getValue(),s=o.indexOf(t);o.splice(s,1),this.flashCardsSubject.onNext(o),this.editingSubject.onNext(r)}},t}(),H=function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,u)}c((r=r.apply(t,e||[])).next())})},Q=function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},K=function(){function t(t,e){var n=this;this.entryService=new q(t.indexedDB),t.onload=function(){return H(n,void 0,void 0,function(){return Q(this,function(t){switch(t.label){case 0:return[4,this.onWindowLoaded()];case 1:return t.sent(),[2]}})})},"serviceWorker"in navigator&&this.registerServiceWorker(navigator.serviceWorker),t.addEventListener("beforeinstallprompt",function(t){t.preventDefault(),e.promptInstallation({platforms:t.platforms,userChoice:t.userChoice,prompt:function(){return t.prompt.call(t)}})})}return t.prototype.onWindowLoaded=function(){return H(this,void 0,void 0,function(){var t,e,n;return Q(this,function(r){switch(r.label){case 0:return[4,navigator.serviceWorker.ready];case 1:return r.sent(),t=V.createFetchHtmlLoader(window),(e=document.getElementById("main"))?(n=new G(this.entryService),new g(t,n).loadIntoParent(e),[2]):[2]}})})},t.prototype.onServiceWorkerChanged=function(t){var e=document.getElementById("butRefresh");e&&(e.addEventListener("click",function(){t.postMessage({action:"skipWaiting"})}),e.hidden=!1)},t.prototype.registerServiceWorker=function(t){var e,n=this;t.register("/service-worker.js").then(function(t){t.addEventListener("updatefound",function(){var e=t.installing;e&&e.addEventListener("statechange",function(){if(e)switch(e.state){case"installed":navigator.serviceWorker.controller&&n.onServiceWorkerChanged(e)}})})}),t.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})},t}(),J=function(){function t(){}return t.prototype.promptInstallation=function(t){var e=document.getElementById("butAdd");e&&(e.hidden=!1,e.onclick=t.prompt)},t}();new K(window,new J)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4L2Rpc3QvcnguYWxsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlldy9WaWV3LnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvQ29yZS9MYXp5L0xhenkudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9Db250cm9sbGVycy9FZGl0RW50cnlDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlld01vZGVscy9GbGFzaENhcmRWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9Db250cm9sbGVycy9GbGFzaENhcmRDb250cm9sbGVyLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvQ29udHJvbGxlcnMvRWRpdG9yUGFnZUNvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9Db3JlL0RhdGEvT2JqZWN0U3RvcmUudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9TZXJ2aWNlcy9FbnRyaWVzL0VudHJ5U2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL1RleHRVdGlscy9VdGY4UGFyc2VyLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlldy9WaWV3TG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NjcmlwdHMvVmlld01vZGVscy9FZGl0RW50cnlWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9WaWV3TW9kZWxzL0VkaXRvclBhZ2VWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcHAudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnbG9iYWwiLCJwcm9jZXNzIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJ1bmRlZmluZWQiLCJvYmplY3RUeXBlcyIsImZ1bmN0aW9uIiwiY2hlY2tHbG9iYWwiLCJpc0ZuIiwiZnJlZUV4cG9ydHMiLCJub2RlVHlwZSIsImZyZWVNb2R1bGUiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJzZWxmIiwiZnJlZVdpbmRvdyIsIndpbmRvdyIsIm1vZHVsZUV4cG9ydHMiLCJ0aGlzR2xvYmFsIiwidGhpcyIsInJvb3QiLCJGdW5jdGlvbiIsIlJ4IiwiaW50ZXJuYWxzIiwiY29uZmlnIiwiUHJvbWlzZSIsImhlbHBlcnMiLCJub29wIiwiaWRlbnRpdHkiLCJ4IiwiZGVmYXVsdE5vdyIsIkRhdGUiLCJub3ciLCJkZWZhdWx0Q29tcGFyZXIiLCJ5IiwiaXNFcXVhbCIsImRlZmF1bHRTdWJDb21wYXJlciIsImRlZmF1bHRFcnJvciIsImRlZmF1bHRLZXlTZXJpYWxpemVyIiwidG9TdHJpbmciLCJlcnIiLCJpc1Byb21pc2UiLCJzdWJzY3JpYmUiLCJ0aGVuIiwiaXNGdW5jdGlvbiIsImNsb25lQXJyYXkiLCJhcnIiLCJhIiwibGVuIiwibGVuZ3RoIiwicHVzaCIsImVycm9yT2JqIiwiZSIsInRyeUNhdGNoIiwiZm4iLCJUeXBlRXJyb3IiLCJ0cnlDYXRjaFRhcmdldCIsImFwcGx5IiwiYXJndW1lbnRzIiwidGhyb3dlciIsImxvbmdTdGFja1N1cHBvcnQiLCJoYXNTdGFja3MiLCJzdGFja3MiLCJFcnJvciIsInN0YWNrIiwickZpbGVOYW1lIiwiclN0YXJ0aW5nTGluZSIsImNhcHR1cmVMaW5lIiwiU1RBQ0tfSlVNUF9TRVBBUkFUT1IiLCJtYWtlU3RhY2tUcmFjZUxvbmciLCJlcnJvciIsIm9ic2VydmFibGUiLCJpbmRleE9mIiwic291cmNlIiwidW5zaGlmdCIsImNvbmNhdGVkU3RhY2tzIiwiam9pbiIsInN0YWNrU3RyaW5nIiwibGluZXMiLCJzcGxpdCIsImRlc2lyZWRMaW5lcyIsImxpbmUiLCJpc0ludGVybmFsRnJhbWUiLCJzdGFja0xpbmUiLCJmaWx0ZXJTdGFja1N0cmluZyIsImZpbGVOYW1lQW5kTGluZU51bWJlciIsImdldEZpbGVOYW1lQW5kTGluZU51bWJlciIsImZpbGVOYW1lIiwibGluZU51bWJlciIsInJFbmRpbmdMaW5lIiwiYXR0ZW1wdDEiLCJleGVjIiwiTnVtYmVyIiwiYXR0ZW1wdDIiLCJhdHRlbXB0MyIsIkVtcHR5RXJyb3IiLCJtZXNzYWdlIiwiT2JqZWN0RGlzcG9zZWRFcnJvciIsIkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yIiwiTm90U3VwcG9ydGVkRXJyb3IiLCJOb3RJbXBsZW1lbnRlZEVycm9yIiwibm90SW1wbGVtZW50ZWQiLCIkaXRlcmF0b3IkIiwibm90U3VwcG9ydGVkIiwiaXRlcmF0b3IiLCJTZXQiLCJkb25lRW51bWVyYXRvciIsImRvbmUiLCJpc0l0ZXJhYmxlIiwiaXNBcnJheUxpa2UiLCJiaW5kQ2FsbGJhY2siLCJmdW5jIiwidGhpc0FyZyIsImFyZ0NvdW50IiwiYXJnIiwiaW5kZXgiLCJjb2xsZWN0aW9uIiwiYXJnc1RhZyIsImFycmF5VGFnIiwiYm9vbFRhZyIsImRhdGVUYWciLCJlcnJvclRhZyIsIm51bWJlclRhZyIsIm9iamVjdFRhZyIsInJlZ2V4cFRhZyIsInN0cmluZ1RhZyIsInR5cGVkQXJyYXlUYWdzIiwib2JqZWN0UHJvdG8iLCJvYmpUb1N0cmluZyIsIk1BWF9TQUZFX0lOVEVHRVIiLCJNYXRoIiwicG93Iiwia2V5cyIsImhhc0RvbnRFbnVtQnVnIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJkb250RW51bXMiLCJkb250RW51bXNMZW5ndGgiLCJvYmoiLCJwcm9wIiwicmVzdWx0IiwiaXNPYmplY3QiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNMZW5ndGgiLCJpc0hvc3RPYmplY3QiLCJpc0FycmF5IiwiQXJyYXkiLCJhcnJheVNvbWUiLCJhcnJheSIsInByZWRpY2F0ZSIsImJhc2VJc0VxdWFsRGVlcCIsIm90aGVyIiwiZXF1YWxGdW5jIiwiaXNMb29zZSIsInN0YWNrQSIsInN0YWNrQiIsIm9iaklzQXJyIiwib3RoSXNBcnIiLCJvYmpUYWciLCJvdGhUYWciLCJvYmpJc09iaiIsIm90aElzT2JqIiwiaXNTYW1lVGFnIiwidGFnIiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsImFyckxlbmd0aCIsIm90aExlbmd0aCIsImFyclZhbHVlIiwib3RoVmFsdWUiLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsInNraXBDdG9yIiwib2JqVmFsdWUiLCJvYmpDdG9yIiwiY29uc3RydWN0b3IiLCJvdGhDdG9yIiwicG9wIiwiYmFzZUlzRXF1YWwiLCJpbmhlcml0cyIsInNsaWNlIiwiY2hpbGQiLCJwYXJlbnQiLCJfXyIsImFkZFByb3BlcnRpZXMiLCJzb3VyY2VzIiwiaWR4IiwibG4iLCJhZGRSZWYiLCJ4cyIsIkFub255bW91c09ic2VydmFibGUiLCJvYnNlcnZlciIsIkJpbmFyeURpc3Bvc2FibGUiLCJnZXREaXNwb3NhYmxlIiwiYXJyYXlJbml0aWFsaXplIiwiY291bnQiLCJmYWN0b3J5IiwiSW5kZXhlZEl0ZW0iLCJpZCIsImNvbXBhcmVUbyIsIlByaW9yaXR5UXVldWUiLCJjYXBhY2l0eSIsIml0ZW1zIiwicHJpb3JpdHlQcm90byIsImlzSGlnaGVyUHJpb3JpdHkiLCJsZWZ0IiwicmlnaHQiLCJwZXJjb2xhdGUiLCJ0ZW1wIiwiaGVhcGlmeSIsImZpcnN0IiwicGVlayIsInJlbW92ZUF0IiwiZGVxdWV1ZSIsImVucXVldWUiLCJpdGVtIiwicmVtb3ZlIiwiQ29tcG9zaXRlRGlzcG9zYWJsZSIsImFyZ3MiLCJkaXNwb3NhYmxlcyIsImlzRGlzcG9zZWQiLCJDb21wb3NpdGVEaXNwb3NhYmxlUHJvdG90eXBlIiwiYWRkIiwiZGlzcG9zZSIsInNob3VsZERpc3Bvc2UiLCJzcGxpY2UiLCJjdXJyZW50RGlzcG9zYWJsZXMiLCJEaXNwb3NhYmxlIiwiYWN0aW9uIiwiZGlzcG9zYWJsZUNyZWF0ZSIsImRpc3Bvc2FibGVFbXB0eSIsImVtcHR5IiwiaXNEaXNwb3NhYmxlIiwiY2hlY2tEaXNwb3NlZCIsImRpc3Bvc2FibGUiLCJkaXNwb3NhYmxlRml4dXAiLCJfZml4dXAiLCJTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSIsImN1cnJlbnQiLCJzZXREaXNwb3NhYmxlIiwib2xkIiwiU2VyaWFsRGlzcG9zYWJsZSIsInNlY29uZCIsIl9maXJzdCIsIl9zZWNvbmQiLCJvbGQxIiwib2xkMiIsIk5BcnlEaXNwb3NhYmxlIiwiX2Rpc3Bvc2FibGVzIiwiUmVmQ291bnREaXNwb3NhYmxlIiwiSW5uZXJEaXNwb3NhYmxlIiwiaXNJbm5lckRpc3Bvc2VkIiwidW5kZXJseWluZ0Rpc3Bvc2FibGUiLCJpc1ByaW1hcnlEaXNwb3NlZCIsIlNjaGVkdWxlZERpc3Bvc2FibGUiLCJzY2hlZHVsZXIiLCJzY2hlZHVsZUl0ZW0iLCJzY2hlZHVsZSIsIlNjaGVkdWxlZEl0ZW0iLCJzdGF0ZSIsImR1ZVRpbWUiLCJjb21wYXJlciIsImludm9rZSIsImludm9rZUNvcmUiLCJpc0NhbmNlbGxlZCIsInNjaGVkdWxlclByb3RvIiwiU2NoZWR1bGVyIiwiaXNTY2hlZHVsZXIiLCJzY2hlZHVsZUZ1dHVyZSIsImR0Iiwibm9ybWFsaXplIiwiX3NjaGVkdWxlRnV0dXJlIiwidGltZVNwYW4iLCJub3JtYWxpemVUaW1lIiwiaW52b2tlUmVjSW1tZWRpYXRlIiwicGFpciIsImdyb3VwIiwic3RhdGUyIiwiaXNBZGRlZCIsImlzRG9uZSIsIl8iLCJzdGF0ZTMiLCJpbm5lckFjdGlvbiIsInNjaGVkdWxlV29yayIsImludm9rZVJlY0RhdGUiLCJkdWVUaW1lMSIsInNjaGVkdWxlUmVjdXJzaXZlIiwic2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUiLCJzY2hlZHVsZVBlcmlvZGljIiwicGVyaW9kIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2F0Y2hFcnJvciIsImhhbmRsZXIiLCJDYXRjaFNjaGVkdWxlciIsInNjaGVkdWxlTWV0aG9kIiwiY2xlYXJNZXRob2QiLCJTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlIiwiX3NjaGVkdWxlciIsIl9zdGF0ZSIsIl9wZXJpb2QiLCJfYWN0aW9uIiwic3RhcnQiLCJfY2FuY2VsIiwiY29tbWFuZCIsInJlY3Vyc2UiLCJJbW1lZGlhdGVTY2hlZHVsZXIiLCJfX3N1cGVyX18iLCJpbW1lZGlhdGVTY2hlZHVsZXIiLCJpbW1lZGlhdGUiLCJDdXJyZW50VGhyZWFkU2NoZWR1bGVyIiwicXVldWUiLCJydW5UcmFtcG9saW5lIiwic2kiLCJzY2hlZHVsZVJlcXVpcmVkIiwiY3VycmVudFRocmVhZFNjaGVkdWxlciIsImN1cnJlbnRUaHJlYWQiLCJsb2NhbFRpbWVyIiwibG9jYWxTZXRUaW1lb3V0IiwibG9jYWxDbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiV1NjcmlwdCIsInRpbWUiLCJTbGVlcCIsIm5leHRIYW5kbGUiLCJ0YXNrc0J5SGFuZGxlIiwiY3VycmVudGx5UnVubmluZyIsInJ1blRhc2siLCJoYW5kbGUiLCJ0YXNrIiwicmVOYXRpdmUiLCJSZWdFeHAiLCJTdHJpbmciLCJyZXBsYWNlIiwic2V0SW1tZWRpYXRlIiwidGVzdCIsIm5leHRUaWNrIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwiaXNBc3luYyIsIm9sZEhhbmRsZXIiLCJvbm1lc3NhZ2UiLCJwb3N0TWVzc2FnZVN1cHBvcnRlZCIsIk1TR19QUkVGSVgiLCJyYW5kb20iLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJkYXRhIiwic3Vic3RyaW5nIiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdEVsZW1lbnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJkb2N1bWVudEVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsIkRlZmF1bHRTY2hlZHVsZXIiLCJzY2hlZHVsZUFjdGlvbiIsIkNsZWFyRGlzcG9zYWJsZSIsIl9pZCIsIkxvY2FsQ2xlYXJEaXNwb3NhYmxlIiwic2NoZWR1bGVMb25nUnVubmluZyIsImRlZmF1bHRTY2hlZHVsZXIiLCJhc3luYyIsIl9oYW5kbGVyIiwiX3JlY3Vyc2l2ZU9yaWdpbmFsIiwiX3JlY3Vyc2l2ZVdyYXBwZXIiLCJfd3JhcCIsIl9jbG9uZSIsInJlcyIsIl9nZXRSZWN1cnNpdmVXcmFwcGVyIiwid3JhcHBlciIsImZhaWxlZCIsInN0YXRlMSIsIk5vdGlmaWNhdGlvbiIsIl9hY2NlcHQiLCJvbk5leHQiLCJvbkVycm9yIiwib25Db21wbGV0ZWQiLCJfYWNjZXB0T2JzZXJ2ZXIiLCJhY2NlcHQiLCJvYnNlcnZlck9yT25OZXh0IiwidG9PYnNlcnZhYmxlIiwibm90aWZpY2F0aW9uIiwia2luZCIsIk9uTmV4dE5vdGlmaWNhdGlvbiIsIk9uRXJyb3JOb3RpZmljYXRpb24iLCJPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCIsImNyZWF0ZU9uTmV4dCIsIm5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IiLCJjcmVhdGVPbkVycm9yIiwibm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQiLCJjcmVhdGVPbkNvbXBsZXRlZCIsIk9ic2VydmVyIiwidG9Ob3RpZmllciIsImFzT2JzZXJ2ZXIiLCJBbm9ueW1vdXNPYnNlcnZlciIsImNoZWNrZWQiLCJDaGVja2VkT2JzZXJ2ZXIiLCJvYnNlcnZlckNyZWF0ZSIsImZyb21Ob3RpZmllciIsImNiIiwibm90aWZ5T24iLCJPYnNlcnZlT25PYnNlcnZlciIsIm1ha2VTYWZlIiwiQW5vbnltb3VzU2FmZU9ic2VydmVyIiwiX29uTmV4dCIsIl9vbkVycm9yIiwiX29uQ29tcGxldGVkIiwib2JzZXJ2YWJsZVByb3RvIiwiQWJzdHJhY3RPYnNlcnZlciIsImlzU3RvcHBlZCIsIm5leHQiLCJjb21wbGV0ZWQiLCJmYWlsIiwiX29ic2VydmVyIiwiQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlIiwiY2hlY2tBY2Nlc3MiLCJTY2hlZHVsZWRPYnNlcnZlciIsImlzQWNxdWlyZWQiLCJoYXNGYXVsdGVkIiwid29yayIsInNoaWZ0IiwiZW5xdWV1ZU5leHQiLCJlbnF1ZXVlRXJyb3IiLCJlbnN1cmVBY3RpdmUiLCJpc093bmVyIiwiY2FuY2VsIiwiT2JzZXJ2YWJsZSIsIm9sZFN1YnNjcmliZSIsIl9zdWJzY3JpYmUiLCJvbGRPbkVycm9yIiwiaXNPYnNlcnZhYmxlIiwiZm9yRWFjaCIsIm9Pck9uTmV4dCIsInN1YnNjcmliZU9uTmV4dCIsInN1YnNjcmliZU9uRXJyb3IiLCJzdWJzY3JpYmVPbkNvbXBsZXRlZCIsIk9ic2VydmFibGVCYXNlIiwic3Vic2NyaWJlciIsImFkbyIsInN1YiIsInN1YnNjcmliZUNvcmUiLCJBdXRvRGV0YWNoT2JzZXJ2ZXIiLCJGbGF0TWFwT2JzZXJ2YWJsZSIsInNlbGVjdG9yIiwicmVzdWx0U2VsZWN0b3IiLCJJbm5lck9ic2VydmVyIiwiX3dyYXBSZXN1bHQiLCJtYXAiLCJpMiIsIm9ic2VydmFibGVGcm9tUHJvbWlzZSIsImZyb20iLCJFbnVtZXJhYmxlIiwiSXNEaXNwb3NlZERpc3Bvc2FibGUiLCJfcyIsIkNvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlIiwiY3VycmVudEl0ZW0iLCJjdXJyZW50VmFsdWUiLCJzdWJzY3JpcHRpb24iLCJfcmVjdXJzZSIsImNhbmNlbGFibGUiLCJjb25jYXQiLCJDYXRjaEVycm9yT2JzZXJ2YWJsZSIsImxhc3RFcnJvciIsIlJlcGVhdEVudW1lcmFibGUiLCJ2IiwiUmVwZWF0RW51bWVyYXRvciIsImVudW1lcmFibGVSZXBlYXQiLCJyZXBlYXQiLCJyZXBlYXRDb3VudCIsIk9mRW51bWVyYWJsZSIsIk9mRW51bWVyYXRvciIsImVudW1lcmFibGVPZiIsIm9mIiwiT2JzZXJ2ZU9uT2JzZXJ2YWJsZSIsIm9ic2VydmVPbiIsIlN1YnNjcmliZU9uT2JzZXJ2YWJsZSIsInN1YnNjcmliZU9uIiwiRnJvbVByb21pc2VPYnNlcnZhYmxlIiwiX3AiLCJzY2hlZHVsZU5leHQiLCJzY2hlZHVsZUVycm9yIiwic2FkIiwiZnJvbVByb21pc2UiLCJwcm9taXNlIiwidG9Qcm9taXNlIiwicHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwiVG9BcnJheU9ic2VydmFibGUiLCJ0b0FycmF5IiwiRGVmZXIiLCJfZiIsIm9ic2VydmFibGVUaHJvdyIsIm9ic2VydmFibGVEZWZlciIsImRlZmVyIiwib2JzZXJ2YWJsZUZhY3RvcnkiLCJFbXB0eU9ic2VydmFibGUiLCJFbXB0eVNpbmsiLCJydW4iLCJFTVBUWV9PQlNFUlZBQkxFIiwib2JzZXJ2YWJsZUVtcHR5IiwiRnJvbU9ic2VydmFibGUiLCJpdGVyYWJsZSIsIl9pdGVyYWJsZSIsIl9mbiIsIml0IiwiU3RyaW5nSXRlcmFibGUiLCJBcnJheUl0ZXJhYmxlIiwiZ2V0SXRlcmFibGUiLCJjcmVhdGVTY2hlZHVsZU1ldGhvZCIsIm1heFNhZmVJbnRlZ2VyIiwiU3RyaW5nSXRlcmF0b3IiLCJfbCIsIl9pIiwiX2EiLCJBcnJheUl0ZXJhdG9yIiwiaXNOYU4iLCJpc0Zpbml0ZSIsIm51bWJlciIsInNpZ24iLCJmbG9vciIsImFicyIsInRvTGVuZ3RoIiwiY2hhckF0Iiwib2JzZXJ2YWJsZUZyb20iLCJtYXBGbiIsIm1hcHBlciIsIkZyb21BcnJheU9ic2VydmFibGUiLCJfYXJncyIsIm9ic2VydmFibGVGcm9tQXJyYXkiLCJmcm9tQXJyYXkiLCJHZW5lcmF0ZU9ic2VydmFibGUiLCJjbmRGbiIsIml0ckZuIiwicmVzRm4iLCJfaW5pdGlhbFN0YXRlIiwiX2NuZEZuIiwiX2l0ckZuIiwiX3Jlc0ZuIiwibmV3U3RhdGUiLCJoYXNSZXN1bHQiLCJvYnNlcnZhYmxlT2YiLCJnZW5lcmF0ZSIsImluaXRpYWxTdGF0ZSIsImNvbmRpdGlvbiIsIml0ZXJhdGUiLCJvZldpdGhTY2hlZHVsZXIiLCJvZkFycmF5Q2hhbmdlcyIsIm9ic2VydmUiLCJ1bm9ic2VydmUiLCJvYnNlcnZlckZuIiwiY2hhbmdlcyIsIm9mT2JqZWN0Q2hhbmdlcyIsIk5FVkVSX09CU0VSVkFCTEUiLCJOZXZlck9ic2VydmFibGUiLCJvYnNlcnZhYmxlTmV2ZXIiLCJuZXZlciIsIlBhaXJzT2JzZXJ2YWJsZSIsIl9vIiwiX2tleXMiLCJwYWlycyIsIlJhbmdlT2JzZXJ2YWJsZSIsInJhbmdlQ291bnQiLCJsb29wUmVjdXJzaXZlIiwicmFuZ2UiLCJSZXBlYXRPYnNlcnZhYmxlIiwiUmVwZWF0U2luayIsIkp1c3RPYnNlcnZhYmxlIiwiX3ZhbHVlIiwiVGhyb3dPYnNlcnZhYmxlIiwianVzdCIsIl9lcnJvciIsIlVzaW5nT2JzZXJ2YWJsZSIsIm9ic0ZuIiwiX29ic0ZuIiwicmVzb3VyY2UiLCJ1c2luZyIsInJlc291cmNlRmFjdG9yeSIsImFtYiIsInJpZ2h0U291cmNlIiwibGVmdFNvdXJjZSIsImNob2ljZSIsImxlZnRDaG9pY2UiLCJyaWdodENob2ljZSIsImxlZnRTdWJzY3JpcHRpb24iLCJyaWdodFN1YnNjcmlwdGlvbiIsImNob2ljZUwiLCJjaG9pY2VSIiwibGVmdFN1YnNjcmliZSIsInJpZ2h0U3Vic2NyaWJlIiwiYWNjIiwiQ2F0Y2hPYnNlcnZhYmxlIiwiZDEiLCJDYXRjaE9ic2VydmVyIiwiaGFuZGxlck9yU2Vjb25kIiwib2JzZXJ2YWJsZUNhdGNoIiwiZmFsc2VGYWN0b3J5IiwiYXJndW1lbnRzVG9BcnJheSIsImNvbWJpbmVMYXRlc3QiLCJDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSIsInBhcmFtcyIsIl9wYXJhbXMiLCJfY2IiLCJzdWJzY3JpcHRpb25zIiwiaGFzVmFsdWUiLCJoYXNWYWx1ZUFsbCIsInZhbHVlcyIsIkNvbWJpbmVMYXRlc3RPYnNlcnZlciIsImV2ZXJ5IiwiZmlsdGVyIiwiaiIsIm9ic2VydmFibGVDb25jYXQiLCJDb25jYXRPYnNlcnZlciIsIkNvbmNhdE9ic2VydmFibGUiLCJfc291cmNlcyIsImNvbmNhdEFsbCIsIm1lcmdlIiwiTWVyZ2VPYnNlcnZhYmxlIiwibWF4Q29uY3VycmVudCIsImciLCJNZXJnZU9ic2VydmVyIiwibWF4IiwicSIsImFjdGl2ZUNvdW50IiwiaGFuZGxlU3Vic2NyaWJlIiwiaW5uZXJTb3VyY2UiLCJtYXhDb25jdXJyZW50T3JPdGhlciIsIm9ic2VydmFibGVNZXJnZSIsIm1lcmdlQWxsIiwiTWVyZ2VBbGxPYnNlcnZhYmxlIiwiTWVyZ2VBbGxPYnNlcnZlciIsIkNvbXBvc2l0ZUVycm9yIiwiZXJyb3JzIiwiaW5uZXJFcnJvcnMiLCJNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlIiwiTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIiLCJfZ3JvdXAiLCJzZXRDb21wbGV0aW9uIiwiaW5uZXIiLCJfaW5uZXIiLCJtZXJnZURlbGF5RXJyb3IiLCJvbkVycm9yUmVzdW1lTmV4dCIsIk9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZSIsInBvcyIsIk9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIiLCJjYW5jZWxsYWJsZSIsIlNraXBVbnRpbE9ic2VydmFibGUiLCJfb3BlbiIsIlNraXBVbnRpbFNvdXJjZU9ic2VydmVyIiwiU2tpcFVudGlsT3RoZXJPYnNlcnZlciIsIl9yIiwic2tpcFVudGlsIiwiU3dpdGNoT2JzZXJ2YWJsZSIsIlN3aXRjaE9ic2VydmVyIiwic3RvcHBlZCIsImxhdGVzdCIsImhhc0xhdGVzdCIsInN3aXRjaExhdGVzdCIsIlRha2VVbnRpbE9ic2VydmFibGUiLCJUYWtlVW50aWxPYnNlcnZlciIsInRha2VVbnRpbCIsIldpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSIsIl9zcyIsIldpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciIsIm91dGVyU2FkIiwiV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlciIsImFsbFZhbHVlcyIsImVtcHR5QXJyYXlGYWN0b3J5Iiwid2l0aExhdGVzdEZyb20iLCJaaXBPYnNlcnZhYmxlIiwiWmlwT2JzZXJ2ZXIiLCJfcSIsIl9kIiwibm90RW1wdHkiLCJzaGlmdEVhY2giLCJxdWV1ZWRWYWx1ZXMiLCJ6aXAiLCJaaXBJdGVyYWJsZU9ic2VydmFibGUiLCJaaXBJdGVyYWJsZU9ic2VydmVyIiwiemlwSXRlcmFibGUiLCJhc09ic2VydmFibGUiLCJidWZmZXJXaXRoQ291bnQiLCJidWZmZXJDb3VudCIsInNraXAiLCJ3aW5kb3dXaXRoQ291bnQiLCJmbGF0TWFwIiwiRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUiLCJEZW1hdGVyaWFsaXplT2JzZXJ2ZXIiLCJkZW1hdGVyaWFsaXplIiwiRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlIiwia2V5Rm4iLCJEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyIiwiaGFzQ3VycmVudEtleSIsImN1cnJlbnRLZXkiLCJjb21wYXJlckVxdWFscyIsImRpc3RpbmN0VW50aWxDaGFuZ2VkIiwiVGFwT2JzZXJ2YWJsZSIsIl9vTiIsIl9vRSIsIl9vQyIsInRhcCIsImRvQWN0aW9uIiwiZG9Pbk5leHQiLCJ0YXBPbk5leHQiLCJkb09uRXJyb3IiLCJ0YXBPbkVycm9yIiwiZG9PbkNvbXBsZXRlZCIsInRhcE9uQ29tcGxldGVkIiwiRmluYWxseU9ic2VydmFibGUiLCJGaW5hbGx5RGlzcG9zYWJsZSIsIklnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSIsImlnbm9yZUVsZW1lbnRzIiwiTWF0ZXJpYWxpemVPYnNlcnZhYmxlIiwiTWF0ZXJpYWxpemVPYnNlcnZlciIsIkBAaXRlcmF0b3IiLCJtYXRlcmlhbGl6ZSIsInJldHJ5IiwicmV0cnlDb3VudCIsIlJldHJ5V2hlbk9ic2VydmFibGUiLCJjcmVhdGVEaXNwb3NhYmxlIiwibm90aWZpZXIiLCJfbm90aWZpZXIiLCJleGNlcHRpb25zIiwiU3ViamVjdCIsIm5vdGlmaWNhdGlvbkRpc3Bvc2FibGUiLCJvdXRlciIsImV4biIsImV4IiwicmV0cnlXaGVuIiwiUmVwZWF0V2hlbk9ic2VydmFibGUiLCJjb21wbGV0aW9ucyIsInJlcGVhdFdoZW4iLCJTY2FuT2JzZXJ2YWJsZSIsImFjY3VtdWxhdG9yIiwiaGFzU2VlZCIsInNlZWQiLCJTY2FuT2JzZXJ2ZXIiLCJfaHMiLCJfaGEiLCJfaHYiLCJzY2FuIiwiU2tpcExhc3RPYnNlcnZhYmxlIiwiX2MiLCJTa2lwTGFzdE9ic2VydmVyIiwic2tpcExhc3QiLCJzdGFydFdpdGgiLCJUYWtlTGFzdE9ic2VydmVyIiwidGFrZUxhc3QiLCJUYWtlTGFzdEJ1ZmZlck9ic2VydmVyIiwiY29uY2F0TWFwIiwic2VsZWN0b3JGdW5jIiwidGFrZUxhc3RCdWZmZXIiLCJ3aW5kb3dDb3VudCIsIkluZmluaXR5IiwicmVmQ291bnREaXNwb3NhYmxlIiwiY3JlYXRlV2luZG93Iiwic2VsZWN0Q29uY2F0Iiwic2VsZWN0b3JSZXN1bHQiLCJjb25jYXRNYXBPYnNlcnZlciIsInNlbGVjdENvbmNhdE9ic2VydmVyIiwib25OZXh0RnVuYyIsIm9uRXJyb3JGdW5jIiwib25Db21wbGV0ZWRGdW5jIiwiRGVmYXVsdElmRW1wdHlPYnNlcnZlciIsIkhhc2hTZXQiLCJzZXQiLCJkZWZhdWx0SWZFbXB0eSIsImRlZmF1bHRWYWx1ZSIsInJldFZhbHVlIiwiYXJyYXlJbmRleE9mQ29tcGFyZXIiLCJEaXN0aW5jdE9ic2VydmFibGUiLCJjbXBGbiIsIl9rZXlGbiIsIl9jbXBGbiIsIkRpc3RpbmN0T2JzZXJ2ZXIiLCJfaCIsImRpc3RpbmN0Iiwia2V5U2VsZWN0b3IiLCJncm91cEJ5IiwiZWxlbWVudFNlbGVjdG9yIiwiZ3JvdXBCeVVudGlsIiwiZHVyYXRpb25TZWxlY3RvciIsIk1hcCIsImdyb3VwRGlzcG9zYWJsZSIsImhhbmRsZUVycm9yIiwiZmlyZU5ld01hcEVudHJ5Iiwid3JpdGVyIiwiR3JvdXBlZE9ic2VydmFibGUiLCJkdXJhdGlvbkdyb3VwIiwiZHVyYXRpb24iLCJtZCIsInRha2UiLCJlbGVtZW50IiwiTWFwT2JzZXJ2YWJsZSIsImludGVybmFsTWFwIiwiaW5uZXJNYXAiLCJzZWxlY3QiLCJzZWxlY3RvckZuIiwicGx1Y2siLCJjdXJyZW50UHJvcCIsInBsdWNrZXIiLCJzZWxlY3RNYW55IiwibWVyZ2VNYXAiLCJmbGF0TWFwT2JzZXJ2ZXIiLCJzZWxlY3RNYW55T2JzZXJ2ZXIiLCJmbGF0TWFwTGF0ZXN0Iiwic3dpdGNoTWFwIiwiU2tpcE9ic2VydmFibGUiLCJfY291bnQiLCJTa2lwT2JzZXJ2ZXIiLCJTa2lwV2hpbGVPYnNlcnZhYmxlIiwiU2tpcFdoaWxlT2JzZXJ2ZXIiLCJza2lwV2hpbGUiLCJUYWtlT2JzZXJ2YWJsZSIsIlRha2VPYnNlcnZlciIsIlRha2VXaGlsZU9ic2VydmFibGUiLCJUYWtlV2hpbGVPYnNlcnZlciIsInRha2VXaGlsZSIsIkZpbHRlck9ic2VydmFibGUiLCJpbnRlcm5hbEZpbHRlciIsImlubmVyUHJlZGljYXRlIiwic2hvdWxkWWllbGQiLCJ3aGVyZSIsIkV4dHJlbWFCeU9ic2VydmFibGUiLCJrIiwiX2siLCJFeHRyZW1hQnlPYnNlcnZlciIsIl92IiwiY29tcGFyaXNvbiIsImZpcnN0T25seSIsIlJlZHVjZU9ic2VydmFibGUiLCJSZWR1Y2VPYnNlcnZlciIsInJlZHVjZSIsIlNvbWVPYnNlcnZhYmxlIiwiU29tZU9ic2VydmVyIiwiQm9vbGVhbiIsInNvbWUiLCJJc0VtcHR5T2JzZXJ2YWJsZSIsIklzRW1wdHlPYnNlcnZlciIsImlzRW1wdHkiLCJFdmVyeU9ic2VydmFibGUiLCJFdmVyeU9ic2VydmVyIiwiSW5jbHVkZXNPYnNlcnZhYmxlIiwiZWxlbSIsIl9lbGVtIiwiX24iLCJJbmNsdWRlc09ic2VydmVyIiwiYiIsImluY2x1ZGVzIiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsIkNvdW50T2JzZXJ2YWJsZSIsIkNvdW50T2JzZXJ2ZXIiLCJJbmRleE9mT2JzZXJ2YWJsZSIsIl9lIiwiSW5kZXhPZk9ic2VydmVyIiwiU3VtT2JzZXJ2YWJsZSIsIlN1bU9ic2VydmVyIiwic3VtIiwibWluQnkiLCJtaW4iLCJtYXhCeSIsIkF2ZXJhZ2VPYnNlcnZhYmxlIiwiQXZlcmFnZU9ic2VydmVyIiwiX3QiLCJhdmVyYWdlIiwic2VxdWVuY2VFcXVhbCIsImRvbmVsIiwiZG9uZXIiLCJxbCIsInFyIiwic3Vic2NyaXB0aW9uMSIsImVxdWFsIiwic3Vic2NyaXB0aW9uMiIsIkVsZW1lbnRBdE9ic2VydmFibGUiLCJFbGVtZW50QXRPYnNlcnZlciIsImVsZW1lbnRBdCIsIlNpbmdsZU9ic2VydmVyIiwiX29iaiIsInNpbmdsZSIsIkZpcnN0T2JzZXJ2YWJsZSIsIkZpcnN0T2JzZXJ2ZXIiLCJMYXN0T2JzZXJ2YWJsZSIsIkxhc3RPYnNlcnZlciIsImxhc3QiLCJGaW5kVmFsdWVPYnNlcnZlciIsImNhbGxiYWNrIiwieWllbGRJbmRleCIsIl95Iiwic2hvdWxkUnVuIiwiZmluZFZhbHVlIiwiZmluZCIsImZpbmRJbmRleCIsIlRvU2V0T2JzZXJ2YWJsZSIsIlRvU2V0T2JzZXJ2ZXIiLCJ0b1NldCIsIlRvTWFwT2JzZXJ2YWJsZSIsIlRvTWFwT2JzZXJ2ZXIiLCJfbSIsInRvTWFwIiwiU2xpY2VPYnNlcnZhYmxlIiwiX2IiLCJTbGljZU9ic2VydmVyIiwiYmVnaW4iLCJlbmQiLCJMYXN0SW5kZXhPZk9ic2VydmFibGUiLCJMYXN0SW5kZXhPZk9ic2VydmVyIiwibGFzdEluZGV4T2YiLCJ3cmFwIiwiY3JlYXRlT2JzZXJ2YWJsZSIsInNwYXduIiwiX19nZW5lcmF0b3JGdW5jdGlvbl9fIiwiZ2VuIiwicHJvY2Vzc0dlbmVyYXRvciIsInJldCIsIm9icyIsInZhbCIsImN0b3IiLCJkaXNwbGF5TmFtZSIsImlzR2VuZXJhdG9yIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsInJlc3VsdHMiLCJvYnNlcnZhYmxlcyIsImZvcmtKb2luIiwiY29udGV4dCIsIm9ic2VydmFibGVUb0FzeW5jIiwidG9Bc3luYyIsInN1YmplY3QiLCJBc3luY1N1YmplY3QiLCJjcmVhdGVDYk9ic2VydmFibGUiLCJjdHgiLCJjcmVhdGVDYkhhbmRsZXIiLCJjcmVhdGVOb2RlT2JzZXJ2YWJsZSIsImNyZWF0ZU5vZGVIYW5kbGVyIiwiTGlzdGVuRGlzcG9zYWJsZSIsImNyZWF0ZUV2ZW50TGlzdGVuZXIiLCJlbCIsImV2ZW50TmFtZSIsImVsZW1Ub1N0cmluZyIsIlN0YXRpY05vZGVMaXN0IiwiTm9kZUxpc3QiLCJpc05vZGVMaXN0IiwiZnJvbUNhbGxiYWNrIiwiZnJvbU5vZGVDYWxsYmFjayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ1c2VOYXRpdmVFdmVudHMiLCJFdmVudE9ic2VydmFibGUiLCJfZWwiLCJjcmVhdGVIYW5kbGVyIiwiZnJvbUV2ZW50IiwiYWRkTGlzdGVuZXIiLCJmcm9tRXZlbnRQYXR0ZXJuIiwiaCIsInJlbW92ZUxpc3RlbmVyIiwib24iLCJvZmYiLCJwdWJsaXNoIiwicmVmQ291bnQiLCJFdmVudFBhdHRlcm5PYnNlcnZhYmxlIiwiZGVsIiwiX2FkZCIsIl9kZWwiLCJFdmVudFBhdHRlcm5EaXNwb3NhYmxlIiwiX3JldCIsInJldHVyblZhbHVlIiwiYWRkSGFuZGxlciIsInJlbW92ZUhhbmRsZXIiLCJzdGFydEFzeW5jIiwiZnVuY3Rpb25Bc3luYyIsIlBhdXNhYmxlT2JzZXJ2YWJsZSIsInBhdXNlciIsImNvbnRyb2xsZXIiLCJwYXVzZWQiLCJjb25uIiwiY29ubmVjdGlvbiIsInBhdXNhYmxlIiwiY29ubmVjdCIsInBhdXNlIiwicmVzdW1lIiwiUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUiLCJwcmV2aW91c1Nob3VsZEZpcmUiLCJkcmFpblF1ZXVlIiwic2hvdWxkRmlyZSIsInBhdXNhYmxlQnVmZmVyZWQiLCJDb250cm9sbGVkT2JzZXJ2YWJsZSIsImVuYWJsZVF1ZXVlIiwiQ29udHJvbGxlZFN1YmplY3QiLCJtdWx0aWNhc3QiLCJyZXF1ZXN0IiwibnVtYmVyT2ZJdGVtcyIsInJlcXVlc3RlZENvdW50IiwicmVxdWVzdGVkRGlzcG9zYWJsZSIsImhhc0ZhaWxlZCIsImhhc0NvbXBsZXRlZCIsImRpc3Bvc2VDdXJyZW50UmVxdWVzdCIsIl9wcm9jZXNzUmVxdWVzdCIsInJlbWFpbmluZyIsImNvbnRyb2xsZWQiLCJTdG9wQW5kV2FpdE9ic2VydmFibGUiLCJTdG9wQW5kV2FpdE9ic2VydmVyIiwiX19zdWJfXyIsInNjaGVkdWxlRGlzcG9zYWJsZSIsImlubmVyU2NoZWR1bGVNZXRob2QiLCJzdG9wQW5kV2FpdCIsIldpbmRvd2VkT2JzZXJ2YWJsZSIsIndpbmRvd1NpemUiLCJXaW5kb3dlZE9ic2VydmVyIiwicmVjZWl2ZWQiLCJ3aW5kb3dlZCIsInBpcGUiLCJkZXN0Iiwib25EcmFpbiIsIndyaXRlIiwiZW1pdCIsIl9pc1N0ZGlvIiwiTXVsdGljYXN0T2JzZXJ2YWJsZSIsImZuMSIsImZuMiIsIl9mbjEiLCJfZm4yIiwiY29ubmVjdGFibGUiLCJzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IiLCJDb25uZWN0YWJsZU9ic2VydmFibGUiLCJzaGFyZSIsInB1Ymxpc2hMYXN0IiwicHVibGlzaFZhbHVlIiwiaW5pdGlhbFZhbHVlT3JTZWxlY3RvciIsImluaXRpYWxWYWx1ZSIsIkJlaGF2aW9yU3ViamVjdCIsInNoYXJlVmFsdWUiLCJyZXBsYXkiLCJidWZmZXJTaXplIiwiUmVwbGF5U3ViamVjdCIsInNoYXJlUmVwbGF5IiwiSW5uZXJTdWJzY3JpcHRpb24iLCJvYnNlcnZlcnMiLCJSZWZDb3VudE9ic2VydmFibGUiLCJfY29ubmVjdGFibGVTdWJzY3JpcHRpb24iLCJfY29ubmVjdGlvbiIsIl9zb3VyY2UiLCJfc3ViamVjdCIsIkNvbm5lY3REaXNwb3NhYmxlIiwic2luZ2xlSW5zdGFuY2UiLCJoYXNPYnNlcnZhYmxlIiwibGVmdER1cmF0aW9uU2VsZWN0b3IiLCJyaWdodER1cmF0aW9uU2VsZWN0b3IiLCJsZWZ0RG9uZSIsInJpZ2h0RG9uZSIsImxlZnRJZCIsInJpZ2h0SWQiLCJsZWZ0TWFwIiwicmlnaHRNYXAiLCJzaXplIiwiZ3JvdXBKb2luIiwiYnVmZmVyIiwid2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciIsIndpbmRvd0Nsb3NpbmdTZWxlY3RvciIsIndpbmRvd0JvdW5kYXJpZXMiLCJ3aW4iLCJ3IiwiY3JlYXRlV2luZG93Q2xvc2UiLCJ3aW5kb3dDbG9zZSIsIm0xIiwid2luZG93T3BlbmluZ3MiLCJQYWlyd2lzZU9ic2VydmFibGUiLCJQYWlyd2lzZU9ic2VydmVyIiwiX2hwIiwicGFpcndpc2UiLCJwYXJ0aXRpb24iLCJXaGlsZUVudW1lcmFibGUiLCJsZXRCaW5kIiwidGhlblNvdXJjZSIsImVsc2VTb3VyY2VPclNjaGVkdWxlciIsImZvckluIiwib2JzZXJ2YWJsZVdoaWxlRG8iLCJ3aGlsZURvIiwiZW51bWVyYWJsZVdoaWxlIiwiZG9XaGlsZSIsImRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciIsIkV4cGFuZE9ic2VydmFibGUiLCJFeHBhbmRPYnNlcnZlciIsIl9lbnN1cmVBY3RpdmUiLCJfbTEiLCJleHBhbmQiLCJGb3JrSm9pbk9ic2VydmFibGUiLCJmaW5pc2hlZCIsImhhc1Jlc3VsdHMiLCJGb3JrSm9pbk9ic2VydmVyIiwic3VicyIsIl9zdWJzIiwibWFueVNlbGVjdCIsImV4dGVuZCIsImNoYWluIiwiY3VyciIsIkNoYWluT2JzZXJ2YWJsZSIsImhlYWQiLCJ0YWlsIiwiX3ZhbHVlcyIsIlBhdHRlcm4iLCJwYXR0ZXJucyIsIlBsYW4iLCJleHByZXNzaW9uIiwicGxhbkNyZWF0ZU9ic2VydmVyIiwiZXh0ZXJuYWxTdWJzY3JpcHRpb25zIiwiZW50cnkiLCJKb2luT2JzZXJ2ZXIiLCJBY3RpdmVQbGFuIiwiam9pbk9ic2VydmVyQXJyYXkiLCJqb2luT2JzZXJ2ZXJzIiwiam9pbk9ic2VydmVyIiwiYW5kIiwidGhlbkRvIiwiYWN0aXZhdGUiLCJkZWFjdGl2YXRlIiwiZXJySGFuZGxlciIsImFjdGl2ZVBsYW4iLCJoYW5kbGVPbk5leHQiLCJqbGVuIiwicmVtb3ZlQWN0aXZlUGxhbiIsImFkZEFjdGl2ZVBsYW4iLCJtYXRjaCIsImhhc1ZhbHVlcyIsImZpcnN0VmFsdWVzIiwiaXNDb21wbGV0ZWQiLCJhY3RpdmVQbGFucyIsIkpvaW5PYnNlcnZlclByb3RvdHlwZSIsIndoZW4iLCJwbGFucyIsIm91dE9ic2VydmVyIiwiVGltZXJPYnNlcnZhYmxlIiwiX2R0Iiwib2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZCIsImdldFRpbWUiLCJvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZCIsIm9ic2VydmFibGVpbnRlcnZhbCIsImludGVydmFsIiwidGltZXIiLCJwZXJpb2RPclNjaGVkdWxlciIsIl9vYnNlcnZhYmxlVGltZXIiLCJvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZSIsImFjdGl2ZSIsImV4Y2VwdGlvbiIsInJ1bm5pbmciLCJ0aW1lc3RhbXAiLCJyZWN1cnNlRHVlVGltZSIsInNob3VsZFJlY3Vyc2UiLCJkZWxheSIsInN1YnNjcmlwdGlvbkRlbGF5IiwiZGVsYXlEdXJhdGlvblNlbGVjdG9yIiwic3ViRGVsYXkiLCJmaXJzdEFyZyIsIm9ic2VydmFibGVEZWxheUFic29sdXRlIiwiZGVsYXlzIiwiYXRFbmQiLCJEZWJvdW5jZU9ic2VydmFibGUiLCJEZWJvdW5jZU9ic2VydmVyIiwiY3VycmVudElkIiwiZGVib3VuY2UiLCJ0aHJvdHRsZSIsImN1cnJlbnRpZCIsIndpbmRvd1dpdGhUaW1lIiwid2luZG93VGltZSIsInRpbWVTaGlmdE9yU2NoZWR1bGVyIiwidGltZVNoaWZ0IiwibmV4dFNoaWZ0IiwibmV4dFNwYW4iLCJ0aW1lckQiLCJ0b3RhbFRpbWUiLCJjcmVhdGVUaW1lciIsImlzU3BhbiIsImlzU2hpZnQiLCJuZXdUb3RhbFRpbWUiLCJ0cyIsIndpbmRvd1dpdGhUaW1lT3JDb3VudCIsIndpbmRvd1RpbWVPckNvdW50Iiwid2luZG93SWQiLCJuZXdJZCIsIm5ld1dpbmRvdyIsImJ1ZmZlcldpdGhUaW1lIiwiYnVmZmVyVGltZSIsImJ1ZmZlcldpdGhUaW1lT3JDb3VudCIsImJ1ZmZlclRpbWVPckNvdW50IiwiVGltZUludGVydmFsT2JzZXJ2YWJsZSIsIlRpbWVJbnRlcnZhbE9ic2VydmVyIiwic3BhbiIsInRpbWVJbnRlcnZhbCIsIlRpbWVzdGFtcE9ic2VydmFibGUiLCJUaW1lc3RhbXBPYnNlcnZlciIsIlNhbXBsZU9ic2VydmFibGUiLCJzYW1wbGVyIiwiX3NhbXBsZXIiLCJzb3VyY2VTdWJzY3JpcHRpb24iLCJTYW1wbGVTb3VyY2VPYnNlcnZlciIsIlNhbXBsZXJPYnNlcnZlciIsIl9oYW5kbGVNZXNzYWdlIiwic2FtcGxlIiwiaW50ZXJ2YWxPclNhbXBsZXIiLCJUaW1lb3V0RXJyb3IiLCJ0aW1lb3V0Iiwib3JpZ2luYWwiLCJzd2l0Y2hlZCIsIm15SWQiLCJmaXJzdFRpbWVvdXQiLCJ0aW1lb3V0RHVyYXRpb25TZWxlY3RvciIsInNldFRpbWVyIiwidGltZXJXaW5zIiwib1dpbnMiLCJ0aW1lb3V0V2l0aFNlbGVjdG9yIiwiR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUiLCJ0aW1lRm4iLCJfdGltZUZuIiwiZ2VuZXJhdGVXaXRoQWJzb2x1dGVUaW1lIiwidGltZVNlbGVjdG9yIiwiR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUiLCJnZW5lcmF0ZVdpdGhSZWxhdGl2ZVRpbWUiLCJEZWxheVN1YnNjcmlwdGlvbiIsImRlbGF5U3Vic2NyaXB0aW9uIiwiU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUiLCJTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIiLCJza2lwTGFzdFdpdGhUaW1lIiwiVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUiLCJUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIiLCJ0YWtlTGFzdFdpdGhUaW1lIiwidGFrZUxhc3RCdWZmZXJXaXRoVGltZSIsIlRha2VXaXRoVGltZU9ic2VydmFibGUiLCJ0YWtlV2l0aFRpbWUiLCJTa2lwV2l0aFRpbWVPYnNlcnZhYmxlIiwiU2tpcFdpdGhUaW1lT2JzZXJ2ZXIiLCJza2lwV2l0aFRpbWUiLCJTa2lwVW50aWxXaXRoVGltZU9ic2VydmFibGUiLCJzdGFydFRpbWUiLCJfc3QiLCJTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyIiwic2tpcFVudGlsV2l0aFRpbWUiLCJ0YWtlVW50aWxXaXRoVGltZSIsImVuZFRpbWUiLCJ3aW5kb3dEdXJhdGlvbiIsIlJhbmdlRXJyb3IiLCJsYXN0T25OZXh0IiwiVHJhbnNkdWNlT2JzZXJ2ZXIiLCJ4Zm9ybSIsIl94Zm9ybSIsInRyYW5zZHVjZSIsInRyYW5zZHVjZXIiLCJAQHRyYW5zZHVjZXIvaW5pdCIsIkBAdHJhbnNkdWNlci9zdGVwIiwiaW5wdXQiLCJAQHRyYW5zZHVjZXIvcmVzdWx0IiwidHJhbnNmb3JtRm9yT2JzZXJ2ZXIiLCJTd2l0Y2hGaXJzdE9ic2VydmFibGUiLCJoYXNDdXJyZW50IiwiU3dpdGNoRmlyc3RPYnNlcnZlciIsInN3aXRjaEZpcnN0IiwiZmxhdE1hcEZpcnN0IiwiZXhoYXVzdE1hcCIsImZsYXRNYXBXaXRoTWF4Q29uY3VycmVudCIsImZsYXRNYXBNYXhDb25jdXJyZW50IiwibGltaXQiLCJWaXJ0dWFsVGltZVNjaGVkdWxlciIsImluaXRpYWxDbG9jayIsImNsb2NrIiwiaXNFbmFibGVkIiwiVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUiLCJ0b0Fic29sdXRlVGltZSIsInNjaGVkdWxlQWJzb2x1dGUiLCJ0b1JlbGF0aXZlVGltZSIsInNjaGVkdWxlUmVsYXRpdmUiLCJydW5BdCIsImdldE5leHQiLCJzdG9wIiwiYWR2YW5jZVRvIiwiZHVlVG9DbG9jayIsImFkdmFuY2VCeSIsInNsZWVwIiwiT25OZXh0UHJlZGljYXRlIiwiT25FcnJvclByZWRpY2F0ZSIsIkhpc3RvcmljYWxTY2hlZHVsZXIiLCJjbXAiLCJIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8iLCJhYnNvbHV0ZSIsInJlbGF0aXZlIiwiZXF1YWxzIiwiUmVhY3RpdmVUZXN0IiwiY3JlYXRlZCIsInN1YnNjcmliZWQiLCJkaXNwb3NlZCIsInRpY2tzIiwiUmVjb3JkZWQiLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIk1BWF9WQUxVRSIsIk1vY2tEaXNwb3NhYmxlIiwiZGlzcG9zZXMiLCJNb2NrT2JzZXJ2ZXIiLCJtZXNzYWdlcyIsIk1vY2tPYnNlcnZlclByb3RvdHlwZSIsIk1vY2tQcm9taXNlIiwiaW5uZXJOb3RpZmljYXRpb24iLCJqTGVuIiwib25SZXNvbHZlZCIsIm9uUmVqZWN0ZWQiLCJuZXdQcm9taXNlIiwiSG90T2JzZXJ2YWJsZSIsIkNvbGRPYnNlcnZhYmxlIiwiVGVzdFNjaGVkdWxlciIsImJhc2VDb21wYXJlciIsInN0YXJ0U2NoZWR1bGVyIiwiY3JlYXRlRm4iLCJzZXR0aW5ncyIsImNyZWF0ZU9ic2VydmVyIiwiY3JlYXRlSG90T2JzZXJ2YWJsZSIsImNyZWF0ZUNvbGRPYnNlcnZhYmxlIiwiY3JlYXRlUmVzb2x2ZWRQcm9taXNlIiwiY3JlYXRlUmVqZWN0ZWRQcm9taXNlIiwicmVhc29uIiwiX19zdWJzY3JpYmUiLCJBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUiLCJVbmRlcmx5aW5nT2JzZXJ2YWJsZSIsInUiLCJfdSIsInVuZGVybHlpbmdPYnNlcnZhYmxlIiwibWVyZ2VkRGlzcG9zYWJsZSIsImhhc0Vycm9yIiwiaGFzT2JzZXJ2ZXJzIiwib3MiLCJBbm9ueW1vdXNTdWJqZWN0IiwiZ2V0VmFsdWUiLCJzbyIsIl90cmltIiwiUGF1c2VyIiwid2VicGFja1BvbHlmaWxsIiwiZGVwcmVjYXRlIiwicGF0aHMiLCJjaGlsZHJlbiIsImNhY2hlZFNldFRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjdXJyZW50UXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uY2UiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJWaWV3Iiwidmlld0ZpbGUiLCJsb2FkZXIiLCJsb2FkIiwic3RyaW5ndmFsIiwic2VudCIsInZpZXciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJmaXJzdENoaWxkIiwiYm9keSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJMYXp5IiwiQ3JlYXRlIiwiRWRpdEVudHJ5Q29udHJvbGxlcl9FZGl0RW50cnlDb250cm9sbGVyIiwiRWRpdEVudHJ5Q29udHJvbGxlciIsInZpZXdNb2RlbCIsIl90aGlzIiwiVmlld0ZpbGUiLCJJc0NyZWF0ZWQiLCJWYWx1ZSIsImxvYWRJbnRvUGFyZW50IiwiYW5zd2VyVmlldyIsInF1ZXJ5U2VsZWN0b3IiLCJxdWVzdGlvblZpZXciLCJhbnN3ZXIiLCJxdWVzdGlvbiIsIm9uY2hhbmdlIiwic2V0QW5zd2VyIiwic2V0UXVlc3Rpb24iLCJzYXZlQnV0dG9uIiwib25jbGljayIsInNhdmUiLCJjYW5FeGVjdXRlU2F2ZSIsImNhbkV4ZWN1dGUiLCJkaXNhYmxlZCIsIkZsYXNoQ2FyZFZpZXdNb2RlbF9GbGFzaENhcmRWaWV3TW9kZWwiLCJGbGFzaENhcmRWaWV3TW9kZWwiLCJzZWxlY3RlZFN1YmplY3QiLCJyeF9hbGwiLCJfcXVlc3Rpb24iLCJfYW5zd2VyIiwiRmxhc2hDYXJkQ29udHJvbGxlcl9GbGFzaENhcmRDb250cm9sbGVyIiwiRmxhc2hDYXJkQ29udHJvbGxlciIsInNlbGVjdGVkQmVoYXZpb3IiLCJ2aWV3cyIsIlZpZXdIb2xkZXIiLCJGbGFzaENhcmRDb250cm9sbGVyX2F3YWl0ZXIiLCJGbGFzaENhcmRDb250cm9sbGVyX2dlbmVyYXRvciIsInZpZXdNb2RlbFN1YmplY3QiLCJ2bSIsIm9uVmlld01vZGVsQ2hhbmdlZCIsImRldGFjaCIsIkZsYXNoQ2FyZFZpZXdIb2xkZXIiLCJjbGlja0hhbmRsZXIiLCJvbkNsaWNrIiwiX3N1cGVyIiwicXVlc3Rpb25FbGVtZW50IiwiYW5zd2VyRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJfX2V4dGVuZHMiLCJ0ZXh0Q29udGVudCIsIkVkaXRvclBhZ2VDb250cm9sbGVyX0VkaXRvclBhZ2VDb250cm9sbGVyIiwiRWRpdG9yUGFnZUNvbnRyb2xsZXIiLCJjYXJkVmlld3MiLCJFZGl0b3JQYWdlQ29udHJvbGxlcl9hd2FpdGVyIiwiRWRpdG9yUGFnZUNvbnRyb2xsZXJfZ2VuZXJhdG9yIiwiZWRpdG9yQ29udGFpbmVyIiwiY2FyZHNDb250YWluZXIiLCJmYWJEaXYiLCJmYWIiLCJNIiwiRmxvYXRpbmdBY3Rpb25CdXR0b24iLCJpbml0IiwiYWRkQ2FyZCIsImZsYXNoQ2FyZHMiLCJjYXJkcyIsInVwZGF0ZUZsYXNoQ2FyZHNMaXN0IiwiZWRpdGluZ0VudHJ5IiwiZWRpdGluZyIsIm9uRWRpdGluZ1N0YXJ0ZWQiLCJlZGl0b3JWaWV3Iiwib25GaW5pc2hFZGl0aW5nIiwiZWRpdG9yIiwiZGV0YWNoTWF0Y2hpbmdDYXJkIiwidXBkYXRpbmdDYXJkIiwiZWRpdGluZ1ZpZXdJbmRleCIsImNhcmRWaWV3IiwicGFnZUNvbnRhaW5lciIsImNhcmQiLCJBdXRvSW5jcmVtZW50U3RvcmUiLCJkYlByb3ZpZGVyIiwic3RvcmVOYW1lIiwiZHRvIiwib3BlbiIsImRiIiwidHJhbnNhY3Rpb24iLCJlbnRyaWVzU3RvcmUiLCJvYmplY3RTdG9yZSIsInB1dCIsImFkZGluZyIsImFzc2lnbiIsIm9uc3VjY2VzcyIsIm9uZXJyb3IiLCJnZXRBbGwiLCJyZXN1bHRTZXQiLCJvbnVwZ3JhZGVuZWVkZWQiLCJjcmVhdGVPYmplY3RTdG9yZSIsImF1dG9JbmNyZW1lbnQiLCJrZXlQYXRoIiwiT2JqZWN0U3RvcmVGYWN0b3J5IiwiY3JlYXRlQXV0b0luY3JlbWVudFN0b3JlIiwiRW50cnkiLCJmcm9tRHRvIiwiRW50cnlRdWVzdGlvbiIsImZyb21TdHJpbmciLCJFbnRyeUFuc3dlciIsImdldE11dGFibGVDb3B5IiwiTXV0YWJsZUVudHJ5IiwiZnJvbURhdGEiLCJFbnRyeURhdGEiLCJhc0VudHJ5IiwiRW50cnlTZXJ2aWNlX0VudHJ5U2VydmljZSIsIkVudHJ5U2VydmljZSIsImRhdGFiYXNlVmVyc2lvbiIsInN0b3JlIiwiY3JlYXRlRW50cnlEdG8iLCJjcmVhdGVFbnRyeSIsIlV0ZjhQYXJzZXIiLCJVdGY4QXJyYXlUb1N0ciIsIm91dCIsImNoYXIyIiwiY2hhcjMiLCJmcm9tQ2hhckNvZGUiLCJGaWxlTG9hZGVyRmFjdG9yeSIsImNyZWF0ZUZldGNoSHRtbExvYWRlciIsImdsb2JhbEZldGNoIiwiVmlld0xvYWRlcl9GZXRjaEh0bWxMb2FkZXIiLCJGZXRjaEh0bWxMb2FkZXIiLCJmaWxlUGF0aCIsImZldGNoIiwicmVzcG9uc2UiLCJnZXRSZWFkZXIiLCJyZWFkIiwiRWRpdEVudHJ5Vmlld01vZGVsX0VkaXRFbnRyeVZpZXdNb2RlbCIsIkVkaXRFbnRyeVZpZXdNb2RlbCIsImVudHJ5U2VydmljZSIsInF1ZXN0aW9uU3ViamVjdCIsImFuc3dlclN1YmplY3QiLCJjYW5FeGVjdXRlU2F2ZVN1YmplY3QiLCJpc0NhbmNlbGxlZFN1YmplY3QiLCJzYXZlZFN1YmplY3QiLCJ1cGRhdGVDYW5FeGVjdXRlU2F2ZSIsIm11dGFibGUiLCJFZGl0b3JQYWdlVmlld01vZGVsX0VkaXRvclBhZ2VWaWV3TW9kZWwiLCJFZGl0b3JQYWdlVmlld01vZGVsIiwiY2FuRXhlY3V0ZUFkZENhcmRTdWJqZWN0IiwiZWRpdGluZ1N1YmplY3QiLCJmbGFzaENhcmRzU3ViamVjdCIsIm1vZGVsTG9va3VwIiwiZW50cnlWaWV3TW9kZWwiLCJzYXZlZCIsImN1cnJlbnRDYXJkcyIsImVudHJpZXMiLCJzZWxlY3RlZCIsInNlbGVjdGVkQ2FyZCIsIm9uQ2FyZFNlbGVjdGVkIiwiY2FyZE1vZGVsIiwiZWRpdGluZ1ZtIiwiZWRpdGluZ0luZGV4IiwiYXBwX0FwcGxpY2F0aW9uIiwiQXBwbGljYXRpb24iLCJpbnN0YWxsZXIiLCJpbmRleGVkREIiLCJvbmxvYWQiLCJhcHBfYXdhaXRlciIsIm9uV2luZG93TG9hZGVkIiwibmF2aWdhdG9yIiwicmVnaXN0ZXJTZXJ2aWNlV29ya2VyIiwic2VydmljZVdvcmtlciIsInByZXZlbnREZWZhdWx0IiwicHJvbXB0SW5zdGFsbGF0aW9uIiwicGxhdGZvcm1zIiwidXNlckNob2ljZSIsInByb21wdCIsInJlYWR5Iiwidmlld0xvYWRlciIsIm1haW4iLCJnZXRFbGVtZW50QnlJZCIsIm9uU2VydmljZVdvcmtlckNoYW5nZWQiLCJuZXdXb3JrZXIiLCJyZWZyZXNoQnV0dG9uIiwiaGlkZGVuIiwicmVmcmVzaGluZyIsInJlZ2lzdGVyIiwicmVnIiwiaW5zdGFsbGluZyIsImxvY2F0aW9uIiwicmVsb2FkIiwiUHdhSW5zdGFsbGVyRGVmIiwiYnV0dG9uIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVB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LEVBQVkxSyxHQUMzQ0ssZUFBZXNLLFFBTHRCLFVBY0FoQixFQUFBNWdELFVBQUE4aEQsdUJBQVIsU0FBK0JDLEdBQzNCLElBQUlDLEVBQWdCMXJDLFNBQVN1ckMsZUFBZSxjQUN2Q0csSUFJTEEsRUFBY2xzQyxpQkFBaUIsUUFBUyxXQUNwQ2lzQyxFQUFVenNDLFlBQVksQ0FBRTlHLE9BQVEsa0JBSXBDd3pDLEVBQWNDLFFBQVMsSUFHbkJyQixFQUFBNWdELFVBQUFtaEQsc0JBQVIsU0FBOEJDLEdBQTlCLElBMkJRYyxFQTNCUmhMLEVBQUE1MUMsS0FDSTgvQyxFQUNLZSxTQUFTLHNCQUNUci9DLEtBQUssU0FBQXMvQyxHQUNGQSxFQUFJdHNDLGlCQUFpQixjQUFlLFdBRWhDLElBQUlpc0MsRUFBWUssRUFBSUMsV0FDZk4sR0FJTEEsRUFBVWpzQyxpQkFBaUIsY0FBZSxXQUN0QyxHQUFLaXNDLEVBSUwsT0FBUUEsRUFBVXh4QyxPQUNkLElBQUssWUFDRzJ3QyxVQUFVRSxjQUFjNWpCLFlBQ3hCMFosRUFBSzRLLHVCQUF1QkMsVUFZeERYLEVBQWN0ckMsaUJBQWlCLG1CQUFvQixXQUMzQ29zQyxJQUlKL2dELE9BQU9taEQsU0FBU0MsU0FDaEJMLEdBQWEsTUFHekJ0QixFQXhHQSxHQTBHQTRCLEVBQUEsb0JBQUFBLEtBUUEsT0FQSUEsRUFBQXhpRCxVQUFBc2hELG1CQUFBLFNBQW1CRyxHQUNmLElBQUlnQixFQUFTbnNDLFNBQVN1ckMsZUFBZSxVQUNqQ1ksSUFDQUEsRUFBT1IsUUFBUyxFQUNoQlEsRUFBT3pLLFFBQVV5SixFQUFPQSxTQUdwQ2UsRUFSQSxHQWdCQSxJQUFJN0IsRUFBWXgvQyxPQUFRLElBQUlxaEQiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQsIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG47KGZ1bmN0aW9uICh1bmRlZmluZWQpIHtcblxuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG4gIH1cblxuICB2YXIgZnJlZUV4cG9ydHMgPSAob2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUpID8gZXhwb3J0cyA6IG51bGw7XG4gIHZhciBmcmVlTW9kdWxlID0gKG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlKSA/IG1vZHVsZSA6IG51bGw7XG4gIHZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSAmJiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuICB2YXIgZnJlZVNlbGYgPSBjaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2Ygc2VsZl0gJiYgc2VsZik7XG4gIHZhciBmcmVlV2luZG93ID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KTtcbiAgdmFyIG1vZHVsZUV4cG9ydHMgPSAoZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzKSA/IGZyZWVFeHBvcnRzIDogbnVsbDtcbiAgdmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2YgdGhpc10gJiYgdGhpcyk7XG4gIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCAoKGZyZWVXaW5kb3cgIT09ICh0aGlzR2xvYmFsICYmIHRoaXNHbG9iYWwud2luZG93KSkgJiYgZnJlZVdpbmRvdykgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4gIHZhciBSeCA9IHtcbiAgICBpbnRlcm5hbHM6IHt9LFxuICAgIGNvbmZpZzoge1xuICAgICAgUHJvbWlzZTogcm9vdC5Qcm9taXNlXG4gICAgfSxcbiAgICBoZWxwZXJzOiB7IH1cbiAgfTtcblxuICAvLyBEZWZhdWx0c1xuICB2YXIgbm9vcCA9IFJ4LmhlbHBlcnMubm9vcCA9IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBpZGVudGl0eSA9IFJ4LmhlbHBlcnMuaWRlbnRpdHkgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSxcbiAgICBkZWZhdWx0Tm93ID0gUnguaGVscGVycy5kZWZhdWx0Tm93ID0gRGF0ZS5ub3csXG4gICAgZGVmYXVsdENvbXBhcmVyID0gUnguaGVscGVycy5kZWZhdWx0Q29tcGFyZXIgPSBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gaXNFcXVhbCh4LCB5KTsgfSxcbiAgICBkZWZhdWx0U3ViQ29tcGFyZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRTdWJDb21wYXJlciA9IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID4geSA/IDEgOiAoeCA8IHkgPyAtMSA6IDApOyB9LFxuICAgIGRlZmF1bHRLZXlTZXJpYWxpemVyID0gUnguaGVscGVycy5kZWZhdWx0S2V5U2VyaWFsaXplciA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH0sXG4gICAgZGVmYXVsdEVycm9yID0gUnguaGVscGVycy5kZWZhdWx0RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7IHRocm93IGVycjsgfSxcbiAgICBpc1Byb21pc2UgPSBSeC5oZWxwZXJzLmlzUHJvbWlzZSA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiAhIXAgJiYgdHlwZW9mIHAuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7IH0sXG4gICAgaXNGdW5jdGlvbiA9IFJ4LmhlbHBlcnMuaXNGdW5jdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciBpc0ZuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIC8vIGZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaVxuICAgICAgaWYgKGlzRm4oL3gvKSkge1xuICAgICAgICBpc0ZuID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzRm47XG4gICAgfSgpKTtcblxuICBmdW5jdGlvbiBjbG9uZUFycmF5KGFycikgeyBmb3IodmFyIGEgPSBbXSwgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBhLnB1c2goYXJyW2ldKTsgfSByZXR1cm4gYTt9XG5cbiAgdmFyIGVycm9yT2JqID0ge2U6IHt9fTtcbiAgXG4gIGZ1bmN0aW9uIHRyeUNhdGNoZXJHZW4odHJ5Q2F0Y2hUYXJnZXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0cnlDYXRjaFRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgdHJ5Q2F0Y2ggPSBSeC5pbnRlcm5hbHMudHJ5Q2F0Y2ggPSBmdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIGlmICghaXNGdW5jdGlvbihmbikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignZm4gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7IH1cbiAgICByZXR1cm4gdHJ5Q2F0Y2hlckdlbihmbik7XG4gIH07XG5cbiAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ID0gZmFsc2U7XG4gIHZhciBoYXNTdGFja3MgPSBmYWxzZSwgc3RhY2tzID0gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfSkoKTtcbiAgaGFzU3RhY2tzID0gISFzdGFja3MuZSAmJiAhIXN0YWNrcy5lLnN0YWNrO1xuXG4gIC8vIEFsbCBjb2RlIGFmdGVyIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcyByZXBvcnRlZCBieSBSeEpTXG4gIHZhciByU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKSwgckZpbGVOYW1lO1xuXG4gIHZhciBTVEFDS19KVU1QX1NFUEFSQVRPUiA9ICdGcm9tIHByZXZpb3VzIGV2ZW50Oic7XG5cbiAgZnVuY3Rpb24gbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBvYnNlcnZhYmxlKSB7XG4gICAgLy8gSWYgcG9zc2libGUsIHRyYW5zZm9ybSB0aGUgZXJyb3Igc3RhY2sgdHJhY2UgYnkgcmVtb3ZpbmcgTm9kZSBhbmQgUnhKU1xuICAgIC8vIGNydWZ0LCB0aGVuIGNvbmNhdGVuYXRpbmcgd2l0aCB0aGUgc3RhY2sgdHJhY2Ugb2YgYG9ic2VydmFibGVgLlxuICAgIGlmIChoYXNTdGFja3MgJiZcbiAgICAgICAgb2JzZXJ2YWJsZS5zdGFjayAmJlxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yLnN0YWNrICYmXG4gICAgICAgIGVycm9yLnN0YWNrLmluZGV4T2YoU1RBQ0tfSlVNUF9TRVBBUkFUT1IpID09PSAtMVxuICAgICkge1xuICAgICAgdmFyIHN0YWNrcyA9IFtdO1xuICAgICAgZm9yICh2YXIgbyA9IG9ic2VydmFibGU7ICEhbzsgbyA9IG8uc291cmNlKSB7XG4gICAgICAgIGlmIChvLnN0YWNrKSB7XG4gICAgICAgICAgc3RhY2tzLnVuc2hpZnQoby5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0YWNrcy51bnNoaWZ0KGVycm9yLnN0YWNrKTtcblxuICAgICAgdmFyIGNvbmNhdGVkU3RhY2tzID0gc3RhY2tzLmpvaW4oJ1xcbicgKyBTVEFDS19KVU1QX1NFUEFSQVRPUiArICdcXG4nKTtcbiAgICAgIGVycm9yLnN0YWNrID0gZmlsdGVyU3RhY2tTdHJpbmcoY29uY2F0ZWRTdGFja3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG4gICAgdmFyIGxpbmVzID0gc3RhY2tTdHJpbmcuc3BsaXQoJ1xcbicpLCBkZXNpcmVkTGluZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGluZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG5cbiAgICAgIGlmICghaXNJbnRlcm5hbEZyYW1lKGxpbmUpICYmICFpc05vZGVGcmFtZShsaW5lKSAmJiBsaW5lKSB7XG4gICAgICAgIGRlc2lyZWRMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKTtcbiAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF0sIGxpbmVOdW1iZXIgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG5cbiAgICByZXR1cm4gZmlsZU5hbWUgPT09IHJGaWxlTmFtZSAmJlxuICAgICAgbGluZU51bWJlciA+PSByU3RhcnRpbmdMaW5lICYmXG4gICAgICBsaW5lTnVtYmVyIDw9IHJFbmRpbmdMaW5lO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOb2RlRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgcmV0dXJuIHN0YWNrTGluZS5pbmRleE9mKCcobW9kdWxlLmpzOicpICE9PSAtMSB8fFxuICAgICAgc3RhY2tMaW5lLmluZGV4T2YoJyhub2RlLmpzOicpICE9PSAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhcHR1cmVMaW5lKCkge1xuICAgIGlmICghaGFzU3RhY2tzKSB7IHJldHVybjsgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHZhciBsaW5lcyA9IGUuc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIGZpcnN0TGluZSA9IGxpbmVzWzBdLmluZGV4T2YoJ0AnKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuICAgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihmaXJzdExpbmUpO1xuICAgICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHJGaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICAgIHJldHVybiBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSkge1xuICAgIC8vIE5hbWVkIGZ1bmN0aW9uczogJ2F0IGZ1bmN0aW9uTmFtZSAoZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXIpJ1xuICAgIHZhciBhdHRlbXB0MSA9IC9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDEpIHsgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07IH1cblxuICAgIC8vIEFub255bW91cyBmdW5jdGlvbnM6ICdhdCBmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDIgPSAvYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQyKSB7IHJldHVybiBbYXR0ZW1wdDJbMV0sIE51bWJlcihhdHRlbXB0MlsyXSldOyB9XG5cbiAgICAvLyBGaXJlZm94IHN0eWxlOiAnZnVuY3Rpb25AZmlsZW5hbWU6bGluZU51bWJlciBvciBAZmlsZW5hbWU6bGluZU51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDMgPSAvLipAKC4rKTooXFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQzKSB7IHJldHVybiBbYXR0ZW1wdDNbMV0sIE51bWJlcihhdHRlbXB0M1syXSldOyB9XG4gIH1cblxuICB2YXIgRW1wdHlFcnJvciA9IFJ4LkVtcHR5RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnU2VxdWVuY2UgY29udGFpbnMgbm8gZWxlbWVudHMuJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBFbXB0eUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgRW1wdHlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdFbXB0eUVycm9yJztcblxuICB2YXIgT2JqZWN0RGlzcG9zZWRFcnJvciA9IFJ4Lk9iamVjdERpc3Bvc2VkRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnT2JqZWN0IGhhcyBiZWVuIGRpc3Bvc2VkJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBPYmplY3REaXNwb3NlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgT2JqZWN0RGlzcG9zZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdPYmplY3REaXNwb3NlZEVycm9yJztcblxuICB2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBSeC5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnQXJndW1lbnQgb3V0IG9mIHJhbmdlJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBBcmd1bWVudE91dE9mUmFuZ2VFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcblxuICB2YXIgTm90U3VwcG9ydGVkRXJyb3IgPSBSeC5Ob3RTdXBwb3J0ZWRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgTm90U3VwcG9ydGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RTdXBwb3J0ZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdOb3RTdXBwb3J0ZWRFcnJvcic7XG5cbiAgdmFyIE5vdEltcGxlbWVudGVkRXJyb3IgPSBSeC5Ob3RJbXBsZW1lbnRlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaGlzIG9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIE5vdEltcGxlbWVudGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RJbXBsZW1lbnRlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuXG4gIHZhciBub3RJbXBsZW1lbnRlZCA9IFJ4LmhlbHBlcnMubm90SW1wbGVtZW50ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfTtcblxuICB2YXIgbm90U3VwcG9ydGVkID0gUnguaGVscGVycy5ub3RTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7XG4gIH07XG5cbiAgLy8gU2hpbSBpbiBpdGVyYXRvciBzdXBwb3J0XG4gIHZhciAkaXRlcmF0b3IkID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yKSB8fFxuICAgICdfZXM2c2hpbV9pdGVyYXRvcl8nO1xuICAvLyBCdWcgZm9yIG1vemlsbGEgdmVyc2lvblxuICBpZiAocm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290LlNldCgpWydAQGl0ZXJhdG9yJ10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAkaXRlcmF0b3IkID0gJ0BAaXRlcmF0b3InO1xuICB9XG5cbiAgdmFyIGRvbmVFbnVtZXJhdG9yID0gUnguZG9uZUVudW1lcmF0b3IgPSB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcblxuICB2YXIgaXNJdGVyYWJsZSA9IFJ4LmhlbHBlcnMuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIG8gJiYgb1skaXRlcmF0b3IkXSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHZhciBpc0FycmF5TGlrZSA9IFJ4LmhlbHBlcnMuaXNBcnJheUxpa2UgPSBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgUnguaGVscGVycy5pdGVyYXRvciA9ICRpdGVyYXRvciQ7XG5cbiAgdmFyIGJpbmRDYWxsYmFjayA9IFJ4LmludGVybmFscy5iaW5kQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmdW5jOyB9XG4gICAgc3dpdGNoKGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpXG4gICAgICAgIH07XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZyk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIE9iamVjdCAqL1xuICB2YXIgZG9udEVudW1zID0gWyd0b1N0cmluZycsXG4gICAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAndmFsdWVPZicsXG4gICAgJ2hhc093blByb3BlcnR5JyxcbiAgICAnaXNQcm90b3R5cGVPZicsXG4gICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAnY29uc3RydWN0b3InXSxcbiAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHksXG4gICAgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZyxcbiAgICBNQVhfU0FGRV9JTlRFR0VSID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cyB8fCAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgJ2NvbnN0cnVjdG9yJ1xuICAgICAgICBdLFxuICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wLCBpO1xuXG4gICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzRG9udEVudW1CdWcpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChkb250RW51bXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9KCkpO1xuXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT09IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGgsIGtleTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmICghc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKG9iakN0b3IgIT09IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIHJldHVybiArb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICByZXR1cm4gKG9iamVjdCAhPT0gK29iamVjdCkgP1xuICAgICAgICBvdGhlciAhPT0gK290aGVyIDpcbiAgICAgICAgb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIHJldHVybiBvYmplY3QgPT09IChvdGhlciArICcnKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBpc09iamVjdCA9IFJ4LmludGVybmFscy5pc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59O1xuXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxudmFyIGlzSG9zdE9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QoeyAndG9TdHJpbmcnOiAwIH0gKyAnJyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mICh2YWx1ZSArICcnKSA9PT0gJ3N0cmluZyc7XG4gIH07XG59KCkpO1xuXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09IGFycmF5VGFnO1xufTtcblxuZnVuY3Rpb24gYXJyYXlTb21lIChhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9PSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoaXNMb29zZSkge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvYmplY3QpO1xuICAgIGlmIChvYmpUYWcgPT09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPT0gb2JqZWN0VGFnKSB7XG4gICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgIH1cbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgaWYgKG90aFRhZyA9PT0gYXJnc1RhZykge1xuICAgICAgb3RoVGFnID0gb2JqZWN0VGFnO1xuICAgIH1cbiAgfVxuICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09PSBvYmplY3QpIHtcbiAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PT0gb3RoZXI7XG4gICAgfVxuICB9XG4gIC8vIEFkZCBgb2JqZWN0YCBhbmQgYG90aGVyYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gIHN0YWNrQS5wdXNoKG9iamVjdCk7XG4gIHN0YWNrQi5wdXNoKG90aGVyKTtcblxuICB2YXIgcmVzdWx0ID0gKG9iaklzQXJyID8gZXF1YWxBcnJheXMgOiBlcXVhbE9iamVjdHMpKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXG4gIHN0YWNrQS5wb3AoKTtcbiAgc3RhY2tCLnBvcCgpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG59XG5cbnZhciBpc0VxdWFsID0gUnguaW50ZXJuYWxzLmlzRXF1YWwgPSBmdW5jdGlvbiAodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xufTtcblxuICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgdmFyIGluaGVyaXRzID0gUnguaW50ZXJuYWxzLmluaGVyaXRzID0gZnVuY3Rpb24gKGNoaWxkLCBwYXJlbnQpIHtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9XG4gICAgX18ucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgX18oKTtcbiAgfTtcblxuICB2YXIgYWRkUHJvcGVydGllcyA9IFJ4LmludGVybmFscy5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGZvcih2YXIgc291cmNlcyA9IFtdLCBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgZm9yICh2YXIgaWR4ID0gMCwgbG4gPSBzb3VyY2VzLmxlbmd0aDsgaWR4IDwgbG47IGlkeCsrKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpZHhdO1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBSeCBVdGlsc1xuICB2YXIgYWRkUmVmID0gUnguaW50ZXJuYWxzLmFkZFJlZiA9IGZ1bmN0aW9uICh4cywgcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShyLmdldERpc3Bvc2FibGUoKSwgeHMuc3Vic2NyaWJlKG9ic2VydmVyKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYXJyYXlJbml0aWFsaXplKGNvdW50LCBmYWN0b3J5KSB7XG4gICAgdmFyIGEgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgYVtpXSA9IGZhY3RvcnkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleGVkSXRlbShpZCwgdmFsdWUpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgSW5kZXhlZEl0ZW0ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHZhciBjID0gdGhpcy52YWx1ZS5jb21wYXJlVG8ob3RoZXIudmFsdWUpO1xuICAgIGMgPT09IDAgJiYgKGMgPSB0aGlzLmlkIC0gb3RoZXIuaWQpO1xuICAgIHJldHVybiBjO1xuICB9O1xuXG4gIHZhciBQcmlvcml0eVF1ZXVlID0gUnguaW50ZXJuYWxzLlByaW9yaXR5UXVldWUgPSBmdW5jdGlvbiAoY2FwYWNpdHkpIHtcbiAgICB0aGlzLml0ZW1zID0gbmV3IEFycmF5KGNhcGFjaXR5KTtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgdmFyIHByaW9yaXR5UHJvdG8gPSBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZTtcbiAgcHJpb3JpdHlQcm90by5pc0hpZ2hlclByaW9yaXR5ID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNbbGVmdF0uY29tcGFyZVRvKHRoaXMuaXRlbXNbcmlnaHRdKSA8IDA7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5wZXJjb2xhdGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGggfHwgaW5kZXggPCAwKSB7IHJldHVybjsgfVxuICAgIHZhciBwYXJlbnQgPSBpbmRleCAtIDEgPj4gMTtcbiAgICBpZiAocGFyZW50IDwgMCB8fCBwYXJlbnQgPT09IGluZGV4KSB7IHJldHVybjsgfVxuICAgIGlmICh0aGlzLmlzSGlnaGVyUHJpb3JpdHkoaW5kZXgsIHBhcmVudCkpIHtcbiAgICAgIHZhciB0ZW1wID0gdGhpcy5pdGVtc1tpbmRleF07XG4gICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbcGFyZW50XTtcbiAgICAgIHRoaXMuaXRlbXNbcGFyZW50XSA9IHRlbXA7XG4gICAgICB0aGlzLnBlcmNvbGF0ZShwYXJlbnQpO1xuICAgIH1cbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmhlYXBpZnkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAraW5kZXggfHwgKGluZGV4ID0gMCk7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoIHx8IGluZGV4IDwgMCkgeyByZXR1cm47IH1cbiAgICB2YXIgbGVmdCA9IDIgKiBpbmRleCArIDEsXG4gICAgICAgIHJpZ2h0ID0gMiAqIGluZGV4ICsgMixcbiAgICAgICAgZmlyc3QgPSBpbmRleDtcbiAgICBpZiAobGVmdCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuaXNIaWdoZXJQcmlvcml0eShsZWZ0LCBmaXJzdCkpIHtcbiAgICAgIGZpcnN0ID0gbGVmdDtcbiAgICB9XG4gICAgaWYgKHJpZ2h0IDwgdGhpcy5sZW5ndGggJiYgdGhpcy5pc0hpZ2hlclByaW9yaXR5KHJpZ2h0LCBmaXJzdCkpIHtcbiAgICAgIGZpcnN0ID0gcmlnaHQ7XG4gICAgfVxuICAgIGlmIChmaXJzdCAhPT0gaW5kZXgpIHtcbiAgICAgIHZhciB0ZW1wID0gdGhpcy5pdGVtc1tpbmRleF07XG4gICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbZmlyc3RdO1xuICAgICAgdGhpcy5pdGVtc1tmaXJzdF0gPSB0ZW1wO1xuICAgICAgdGhpcy5oZWFwaWZ5KGZpcnN0KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5wZWVrID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pdGVtc1swXS52YWx1ZTsgfTtcblxuICBwcmlvcml0eVByb3RvLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zWy0tdGhpcy5sZW5ndGhdO1xuICAgIHRoaXMuaXRlbXNbdGhpcy5sZW5ndGhdID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVhcGlmeSgpO1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8uZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5wZWVrKCk7XG4gICAgdGhpcy5yZW1vdmVBdCgwKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8uZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5sZW5ndGgrKztcbiAgICB0aGlzLml0ZW1zW2luZGV4XSA9IG5ldyBJbmRleGVkSXRlbShQcmlvcml0eVF1ZXVlLmNvdW50KyssIGl0ZW0pO1xuICAgIHRoaXMucGVyY29sYXRlKGluZGV4KTtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5pdGVtc1tpXS52YWx1ZSA9PT0gaXRlbSkge1xuICAgICAgICB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBQcmlvcml0eVF1ZXVlLmNvdW50ID0gMDtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIGdyb3VwIG9mIGRpc3Bvc2FibGUgcmVzb3VyY2VzIHRoYXQgYXJlIGRpc3Bvc2VkIHRvZ2V0aGVyLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBDb21wb3NpdGVEaXNwb3NhYmxlID0gUnguQ29tcG9zaXRlRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLCBpLCBsZW47XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9IGFyZ3M7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5sZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZSA9IENvbXBvc2l0ZURpc3Bvc2FibGUucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgZGlzcG9zYWJsZSB0byB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBvciBkaXNwb3NlcyB0aGUgZGlzcG9zYWJsZSBpZiB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBpcyBkaXNwb3NlZC5cbiAgICogQHBhcmFtIHtNaXhlZH0gaXRlbSBEaXNwb3NhYmxlIHRvIGFkZC5cbiAgICovXG4gIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICBpdGVtLmRpc3Bvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKGl0ZW0pO1xuICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5kIGRpc3Bvc2VzIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGEgZGlzcG9zYWJsZSBmcm9tIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlLlxuICAgKiBAcGFyYW0ge01peGVkfSBpdGVtIERpc3Bvc2FibGUgdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBmb3VuZDsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBzaG91bGREaXNwb3NlID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHZhciBpZHggPSB0aGlzLmRpc3Bvc2FibGVzLmluZGV4T2YoaXRlbSk7XG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBzaG91bGREaXNwb3NlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaXRlbS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGREaXNwb3NlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGVzIGluIHRoZSBncm91cCBhbmQgcmVtb3ZlcyB0aGVtIGZyb20gdGhlIGdyb3VwLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIGxlbiA9IHRoaXMuZGlzcG9zYWJsZXMubGVuZ3RoLCBjdXJyZW50RGlzcG9zYWJsZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBjdXJyZW50RGlzcG9zYWJsZXNbaV0gPSB0aGlzLmRpc3Bvc2FibGVzW2ldOyB9XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjdXJyZW50RGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBzZXQgb2Ygc3RhdGljIG1ldGhvZHMgZm9yIGNyZWF0aW5nIERpc3Bvc2FibGVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuICAgKi9cbiAgdmFyIERpc3Bvc2FibGUgPSBSeC5EaXNwb3NhYmxlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uIHx8IG5vb3A7XG4gIH07XG5cbiAgLyoqIFBlcmZvcm1zIHRoZSB0YXNrIG9mIGNsZWFuaW5nIHVwIHJlc291cmNlcy4gKi9cbiAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5hY3Rpb24oKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGlzcG9zYWJsZSBvYmplY3QgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHdoZW4gZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3Bvc2UgQWN0aW9uIHRvIHJ1biBkdXJpbmcgdGhlIGZpcnN0IGNhbGwgdG8gZGlzcG9zZS4gVGhlIGFjdGlvbiBpcyBndWFyYW50ZWVkIHRvIGJlIHJ1biBhdCBtb3N0IG9uY2UuXG4gICAqIEByZXR1cm4ge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IHJ1bnMgdGhlIGdpdmVuIGFjdGlvbiB1cG9uIGRpc3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc3Bvc2FibGVDcmVhdGUgPSBEaXNwb3NhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIG5ldyBEaXNwb3NhYmxlKGFjdGlvbik7IH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpc3Bvc2FibGUgdGhhdCBkb2VzIG5vdGhpbmcgd2hlbiBkaXNwb3NlZC5cbiAgICovXG4gIHZhciBkaXNwb3NhYmxlRW1wdHkgPSBEaXNwb3NhYmxlLmVtcHR5ID0geyBkaXNwb3NlOiBub29wIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBkaXNwb3NhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBPYmplY3QgdG8gdGVzdCB3aGV0aGVyIGl0IGhhcyBhIGRpc3Bvc2UgbWV0aG9kXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgZGlzcG9zYWJsZSBvYmplY3QsIGVsc2UgZmFsc2UuXG4gICAqL1xuICB2YXIgaXNEaXNwb3NhYmxlID0gRGlzcG9zYWJsZS5pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkICYmIGlzRnVuY3Rpb24oZC5kaXNwb3NlKTtcbiAgfTtcblxuICB2YXIgY2hlY2tEaXNwb3NlZCA9IERpc3Bvc2FibGUuY2hlY2tEaXNwb3NlZCA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG4gICAgaWYgKGRpc3Bvc2FibGUuaXNEaXNwb3NlZCkgeyB0aHJvdyBuZXcgT2JqZWN0RGlzcG9zZWRFcnJvcigpOyB9XG4gIH07XG5cbiAgdmFyIGRpc3Bvc2FibGVGaXh1cCA9IERpc3Bvc2FibGUuX2ZpeHVwID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHJldHVybiBpc0Rpc3Bvc2FibGUocmVzdWx0KSA/IHJlc3VsdCA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgfTtcblxuICAvLyBTaW5nbGUgYXNzaWdubWVudFxuICB2YXIgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUgPSBSeC5TaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmN1cnJlbnQpIHsgdGhyb3cgbmV3IEVycm9yKCdEaXNwb3NhYmxlIGhhcyBhbHJlYWR5IGJlZW4gYXNzaWduZWQnKTsgfVxuICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuICAgICFzaG91bGREaXNwb3NlICYmICh0aGlzLmN1cnJlbnQgPSB2YWx1ZSk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gICAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTXVsdGlwbGUgYXNzaWdubWVudCBkaXNwb3NhYmxlXG4gIHZhciBTZXJpYWxEaXNwb3NhYmxlID0gUnguU2VyaWFsRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgc2hvdWxkRGlzcG9zZSA9IHRoaXMuaXNEaXNwb3NlZDtcbiAgICBpZiAoIXNob3VsZERpc3Bvc2UpIHtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gIH07XG5cbiAgdmFyIEJpbmFyeURpc3Bvc2FibGUgPSBSeC5CaW5hcnlEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICB0aGlzLl9maXJzdCA9IGZpcnN0O1xuICAgIHRoaXMuX3NlY29uZCA9IHNlY29uZDtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICBCaW5hcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZDEgPSB0aGlzLl9maXJzdDtcbiAgICAgIHRoaXMuX2ZpcnN0ID0gbnVsbDtcbiAgICAgIG9sZDEgJiYgb2xkMS5kaXNwb3NlKCk7XG4gICAgICB2YXIgb2xkMiA9IHRoaXMuX3NlY29uZDtcbiAgICAgIHRoaXMuX3NlY29uZCA9IG51bGw7XG4gICAgICBvbGQyICYmIG9sZDIuZGlzcG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgTkFyeURpc3Bvc2FibGUgPSBSeC5OQXJ5RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlcykge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gZGlzcG9zYWJsZXM7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH07XG5cbiAgTkFyeURpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBkaXNwb3NhYmxlIHJlc291cmNlIHRoYXQgb25seSBkaXNwb3NlcyBpdHMgdW5kZXJseWluZyBkaXNwb3NhYmxlIHJlc291cmNlIHdoZW4gYWxsIGRlcGVuZGVudCBkaXNwb3NhYmxlIG9iamVjdHMgaGF2ZSBiZWVuIGRpc3Bvc2VkLlxuICAgKi9cbiAgdmFyIFJlZkNvdW50RGlzcG9zYWJsZSA9IFJ4LlJlZkNvdW50RGlzcG9zYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBJbm5lckRpc3Bvc2FibGUoZGlzcG9zYWJsZSkge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudCsrO1xuICAgICAgdGhpcy5pc0lubmVyRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBJbm5lckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzSW5uZXJEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzSW5uZXJEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudC0tO1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NhYmxlLmNvdW50ID09PSAwICYmIHRoaXMuZGlzcG9zYWJsZS5pc1ByaW1hcnlEaXNwb3NlZCkge1xuICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUudW5kZXJseWluZ0Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBSZWZDb3VudERpc3Bvc2FibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGRpc3Bvc2FibGUuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtEaXNwb3NhYmxlfSBkaXNwb3NhYmxlIFVuZGVybHlpbmcgZGlzcG9zYWJsZS5cbiAgICAgICovXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcbiAgICAgIHRoaXMudW5kZXJseWluZ0Rpc3Bvc2FibGUgPSBkaXNwb3NhYmxlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUHJpbWFyeURpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgdW5kZXJseWluZyBkaXNwb3NhYmxlIG9ubHkgd2hlbiBhbGwgZGVwZW5kZW50IGRpc3Bvc2FibGVzIGhhdmUgYmVlbiBkaXNwb3NlZFxuICAgICAqL1xuICAgIFJlZkNvdW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzUHJpbWFyeURpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRlcGVuZGVudCBkaXNwb3NhYmxlIHRoYXQgd2hlbiBkaXNwb3NlZCBkZWNyZWFzZXMgdGhlIHJlZmNvdW50IG9uIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGVwZW5kZW50IGRpc3Bvc2FibGUgY29udHJpYnV0aW5nIHRvIHRoZSByZWZlcmVuY2UgY291bnQgdGhhdCBtYW5hZ2VzIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUncyBsaWZldGltZS5cbiAgICAgKi9cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0Rpc3Bvc2VkID8gZGlzcG9zYWJsZUVtcHR5IDogbmV3IElubmVyRGlzcG9zYWJsZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZkNvdW50RGlzcG9zYWJsZTtcbiAgfSkoKTtcblxuICBmdW5jdGlvbiBTY2hlZHVsZWREaXNwb3NhYmxlKHNjaGVkdWxlciwgZGlzcG9zYWJsZSkge1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGU7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc2VsZikge1xuICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkKSB7XG4gICAgICBzZWxmLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgc2VsZi5kaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBTY2hlZHVsZWREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIHNjaGVkdWxlSXRlbSk7XG4gIH07XG5cbiAgdmFyIFNjaGVkdWxlZEl0ZW0gPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVkSXRlbSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIHN0YXRlLCBhY3Rpb24sIGR1ZVRpbWUsIGNvbXBhcmVyKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyIHx8IGRlZmF1bHRTdWJDb21wYXJlcjtcbiAgICB0aGlzLmRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlLnNldERpc3Bvc2FibGUodGhpcy5pbnZva2VDb3JlKCkpO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmNvbXBhcmVyKHRoaXMuZHVlVGltZSwgb3RoZXIuZHVlVGltZSk7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmludm9rZUNvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cCh0aGlzLmFjdGlvbih0aGlzLnNjaGVkdWxlciwgdGhpcy5zdGF0ZSkpO1xuICB9O1xuXG4gIC8qKiBQcm92aWRlcyBhIHNldCBvZiBzdGF0aWMgcHJvcGVydGllcyB0byBhY2Nlc3MgY29tbW9ubHkgdXNlZCBzY2hlZHVsZXJzLiAqL1xuICB2YXIgU2NoZWR1bGVyID0gUnguU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlcigpIHsgfVxuXG4gICAgLyoqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgc2NoZWR1bGVyICovXG4gICAgU2NoZWR1bGVyLmlzU2NoZWR1bGVyID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgIHJldHVybiBzIGluc3RhbmNlb2YgU2NoZWR1bGVyO1xuICAgIH07XG5cbiAgICB2YXIgc2NoZWR1bGVyUHJvdG8gPSBTY2hlZHVsZXIucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZHVlVGltZS5cbiAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgZHQgPSBkdWVUaW1lO1xuICAgICAgZHQgaW5zdGFuY2VvZiBEYXRlICYmIChkdCA9IGR0IC0gdGhpcy5ub3coKSk7XG4gICAgICBkdCA9IFNjaGVkdWxlci5ub3JtYWxpemUoZHQpO1xuXG4gICAgICBpZiAoZHQgPT09IDApIHsgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGFjdGlvbik7IH1cblxuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlRnV0dXJlKHN0YXRlLCBkdCwgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgc2NoZWR1bGVyUHJvdG8uX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIC8qKiBHZXRzIHRoZSBjdXJyZW50IHRpbWUgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbCBtYWNoaW5lJ3Mgc3lzdGVtIGNsb2NrLiAqL1xuICAgIFNjaGVkdWxlci5ub3cgPSBkZWZhdWx0Tm93O1xuXG4gICAgLyoqIEdldHMgdGhlIGN1cnJlbnQgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIG1hY2hpbmUncyBzeXN0ZW0gY2xvY2suICovXG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5ub3cgPSBkZWZhdWx0Tm93O1xuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplcyB0aGUgc3BlY2lmaWVkIFRpbWVTcGFuIHZhbHVlIHRvIGEgcG9zaXRpdmUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIFRoZSB0aW1lIHNwYW4gdmFsdWUgdG8gbm9ybWFsaXplLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBzcGVjaWZpZWQgVGltZVNwYW4gdmFsdWUgaWYgaXQgaXMgemVybyBvciBwb3NpdGl2ZTsgb3RoZXJ3aXNlLCAwXG4gICAgICovXG4gICAgU2NoZWR1bGVyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICh0aW1lU3Bhbikge1xuICAgICAgdGltZVNwYW4gPCAwICYmICh0aW1lU3BhbiA9IDApO1xuICAgICAgcmV0dXJuIHRpbWVTcGFuO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVyO1xuICB9KCkpO1xuXG4gIHZhciBub3JtYWxpemVUaW1lID0gU2NoZWR1bGVyLm5vcm1hbGl6ZSwgaXNTY2hlZHVsZXIgPSBTY2hlZHVsZXIuaXNTY2hlZHVsZXI7XG5cbiAgKGZ1bmN0aW9uIChzY2hlZHVsZXJQcm90bykge1xuXG4gICAgZnVuY3Rpb24gaW52b2tlUmVjSW1tZWRpYXRlKHNjaGVkdWxlciwgcGFpcikge1xuICAgICAgdmFyIHN0YXRlID0gcGFpclswXSwgYWN0aW9uID0gcGFpclsxXSwgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgYWN0aW9uKHN0YXRlLCBpbm5lckFjdGlvbik7XG4gICAgICByZXR1cm4gZ3JvdXA7XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyQWN0aW9uKHN0YXRlMikge1xuICAgICAgICB2YXIgaXNBZGRlZCA9IGZhbHNlLCBpc0RvbmUgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZCA9IHNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZTIsIHNjaGVkdWxlV29yayk7XG4gICAgICAgIGlmICghaXNEb25lKSB7XG4gICAgICAgICAgZ3JvdXAuYWRkKGQpO1xuICAgICAgICAgIGlzQWRkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVXb3JrKF8sIHN0YXRlMykge1xuICAgICAgICAgIGlmIChpc0FkZGVkKSB7XG4gICAgICAgICAgICBncm91cC5yZW1vdmUoZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbihzdGF0ZTMsIGlubmVyQWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlUmVjRGF0ZShzY2hlZHVsZXIsIHBhaXIpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHBhaXJbMF0sIGFjdGlvbiA9IHBhaXJbMV0sIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGFjdGlvbihzdGF0ZSwgaW5uZXJBY3Rpb24pO1xuICAgICAgcmV0dXJuIGdyb3VwO1xuXG4gICAgICBmdW5jdGlvbiBpbm5lckFjdGlvbihzdGF0ZTIsIGR1ZVRpbWUxKSB7XG4gICAgICAgIHZhciBpc0FkZGVkID0gZmFsc2UsIGlzRG9uZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBkID0gc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKHN0YXRlMiwgZHVlVGltZTEsIHNjaGVkdWxlV29yayk7XG4gICAgICAgIGlmICghaXNEb25lKSB7XG4gICAgICAgICAgZ3JvdXAuYWRkKGQpO1xuICAgICAgICAgIGlzQWRkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVXb3JrKF8sIHN0YXRlMykge1xuICAgICAgICAgIGlmIChpc0FkZGVkKSB7XG4gICAgICAgICAgICBncm91cC5yZW1vdmUoZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbihzdGF0ZTMsIGlubmVyQWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCByZWN1cnNpdmVseS5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiByZWN1cnNpdmUgaW52b2NhdGlvbiBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVSZWN1cnNpdmUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGUoW3N0YXRlLCBhY3Rpb25dLCBpbnZva2VSZWNJbW1lZGlhdGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIHJlY3Vyc2l2ZWx5IGFmdGVyIGEgc3BlY2lmaWVkIHJlbGF0aXZlIG9yIGFic29sdXRlIGR1ZSB0aW1lLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gZXhlY3V0ZSByZWN1cnNpdmVseS4gVGhlIGxhc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgYWN0aW9uIGlzIHVzZWQgdG8gdHJpZ2dlciByZWN1cnNpdmUgc2NoZWR1bGluZyBvZiB0aGUgYWN0aW9uLCBwYXNzaW5nIGluIHRoZSByZWN1cnNpdmUgZHVlIHRpbWUgYW5kIGludm9jYXRpb24gc3RhdGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXIgfCBEYXRlfSBkdWVUaW1lIFJlbGF0aXZlIG9yIGFic29sdXRlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVGdXR1cmUoW3N0YXRlLCBhY3Rpb25dLCBkdWVUaW1lLCBpbnZva2VSZWNEYXRlKTtcbiAgICB9O1xuXG4gIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXG4gIChmdW5jdGlvbiAoc2NoZWR1bGVyUHJvdG8pIHtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBzY2hlZHVsZWQgdXNpbmcgd2luZG93LnNldEludGVydmFsIGZvciB0aGUgYmFzZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBJbml0aWFsIHN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHVwb24gdGhlIGZpcnN0IGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcnVubmluZyB0aGUgd29yayBwZXJpb2RpY2FsbHkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCByZWN1cnJpbmcgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uKHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiByb290LnNldEludGVydmFsID09PSAndW5kZWZpbmVkJykgeyB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoKTsgfVxuICAgICAgcGVyaW9kID0gbm9ybWFsaXplVGltZShwZXJpb2QpO1xuICAgICAgdmFyIHMgPSBzdGF0ZSwgaWQgPSByb290LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcyA9IGFjdGlvbihzKTsgfSwgcGVyaW9kKTtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHsgcm9vdC5jbGVhckludGVydmFsKGlkKTsgfSk7XG4gICAgfTtcblxuICB9KFNjaGVkdWxlci5wcm90b3R5cGUpKTtcblxuICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNjaGVkdWxlciB0aGF0IHdyYXBzIHRoZSBvcmlnaW5hbCBzY2hlZHVsZXIsIGFkZGluZyBleGNlcHRpb24gaGFuZGxpbmcgZm9yIHNjaGVkdWxlZCBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgSGFuZGxlciB0aGF0J3MgcnVuIGlmIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHQuIFRoZSBleGNlcHRpb24gd2lsbCBiZSByZXRocm93biBpZiB0aGUgaGFuZGxlciByZXR1cm5zIGZhbHNlLlxuICAgICAqIEByZXR1cm5zIHtTY2hlZHVsZXJ9IFdyYXBwZXIgYXJvdW5kIHRoZSBvcmlnaW5hbCBzY2hlZHVsZXIsIGVuZm9yY2luZyBleGNlcHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uY2F0Y2hFcnJvciA9IHNjaGVkdWxlclByb3RvWydjYXRjaCddID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBuZXcgQ2F0Y2hTY2hlZHVsZXIodGhpcywgaGFuZGxlcik7XG4gICAgfTtcbiAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cbiAgdmFyIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUgPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlVGljayhzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gdGljayhjb21tYW5kLCByZWN1cnNlKSB7XG4gICAgICAgIHJlY3Vyc2UoMCwgc2VsZi5fcGVyaW9kKTtcbiAgICAgICAgdmFyIHN0YXRlID0gdHJ5Q2F0Y2goc2VsZi5fYWN0aW9uKShzZWxmLl9zdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICBzZWxmLl9jYW5jZWwuZGlzcG9zZSgpO1xuICAgICAgICAgIHRocm93ZXIoc3RhdGUuZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZShzY2hlZHVsZXIsIHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3BlcmlvZCA9IHBlcmlvZDtcbiAgICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcbiAgICB9XG5cbiAgICBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9jYW5jZWwgPSBkO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSgwLCB0aGlzLl9wZXJpb2QsIGNyZWF0ZVRpY2sodGhpcykpKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlO1xuICB9KCkpO1xuXG4gIC8qKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgaW1tZWRpYXRlbHkgb24gdGhlIGN1cnJlbnQgdGhyZWFkLiAqL1xuICAgdmFyIEltbWVkaWF0ZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW1tZWRpYXRlU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEltbWVkaWF0ZVNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEltbWVkaWF0ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cChhY3Rpb24odGhpcywgc3RhdGUpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICB2YXIgaW1tZWRpYXRlU2NoZWR1bGVyID0gU2NoZWR1bGVyLmltbWVkaWF0ZSA9IG5ldyBJbW1lZGlhdGVTY2hlZHVsZXIoKTtcblxuICAvKipcbiAgICogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIGFzIHNvb24gYXMgcG9zc2libGUgb24gdGhlIGN1cnJlbnQgdGhyZWFkLlxuICAgKi9cbiAgdmFyIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIHZhciBxdWV1ZTtcblxuICAgIGZ1bmN0aW9uIHJ1blRyYW1wb2xpbmUgKCkge1xuICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICFpdGVtLmlzQ2FuY2VsbGVkKCkgJiYgaXRlbS5pbnZva2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbmhlcml0cyhDdXJyZW50VGhyZWFkU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2kgPSBuZXcgU2NoZWR1bGVkSXRlbSh0aGlzLCBzdGF0ZSwgYWN0aW9uLCB0aGlzLm5vdygpKTtcblxuICAgICAgaWYgKCFxdWV1ZSkge1xuICAgICAgICBxdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKDQpO1xuICAgICAgICBxdWV1ZS5lbnF1ZXVlKHNpKTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocnVuVHJhbXBvbGluZSkoKTtcbiAgICAgICAgcXVldWUgPSBudWxsO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWUuZW5xdWV1ZShzaSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2kuZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgQ3VycmVudFRocmVhZFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFxdWV1ZTsgfTtcblxuICAgIHJldHVybiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBjdXJyZW50VGhyZWFkU2NoZWR1bGVyID0gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQgPSBuZXcgQ3VycmVudFRocmVhZFNjaGVkdWxlcigpO1xuXG4gIHZhciBzY2hlZHVsZU1ldGhvZCwgY2xlYXJNZXRob2Q7XG5cbiAgdmFyIGxvY2FsVGltZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBsb2NhbFNldFRpbWVvdXQsIGxvY2FsQ2xlYXJUaW1lb3V0ID0gbm9vcDtcbiAgICBpZiAoISFyb290LnNldFRpbWVvdXQpIHtcbiAgICAgIGxvY2FsU2V0VGltZW91dCA9IHJvb3Quc2V0VGltZW91dDtcbiAgICAgIGxvY2FsQ2xlYXJUaW1lb3V0ID0gcm9vdC5jbGVhclRpbWVvdXQ7XG4gICAgfSBlbHNlIGlmICghIXJvb3QuV1NjcmlwdCkge1xuICAgICAgbG9jYWxTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKGZuLCB0aW1lKSB7XG4gICAgICAgIHJvb3QuV1NjcmlwdC5TbGVlcCh0aW1lKTtcbiAgICAgICAgZm4oKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzZXRUaW1lb3V0OiBsb2NhbFNldFRpbWVvdXQsXG4gICAgICBjbGVhclRpbWVvdXQ6IGxvY2FsQ2xlYXJUaW1lb3V0XG4gICAgfTtcbiAgfSgpKTtcbiAgdmFyIGxvY2FsU2V0VGltZW91dCA9IGxvY2FsVGltZXIuc2V0VGltZW91dCxcbiAgICBsb2NhbENsZWFyVGltZW91dCA9IGxvY2FsVGltZXIuY2xlYXJUaW1lb3V0O1xuXG4gIChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDEsIHRhc2tzQnlIYW5kbGUgPSB7fSwgY3VycmVudGx5UnVubmluZyA9IGZhbHNlO1xuXG4gICAgY2xlYXJNZXRob2QgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBydW5UYXNrKGhhbmRsZSkge1xuICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmcpIHtcbiAgICAgICAgbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcnVuVGFzayhoYW5kbGUpOyB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0YXNrKSgpO1xuICAgICAgICAgIGNsZWFyTWV0aG9kKGhhbmRsZSk7XG4gICAgICAgICAgY3VycmVudGx5UnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHRocm93ZXIocmVzdWx0LmUpOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVOYXRpdmUgPSBuZXcgUmVnRXhwKCdeJyArXG4gICAgICBTdHJpbmcodG9TdHJpbmcpXG4gICAgICAgIC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpXG4gICAgICAgIC5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZywgJy4qPycpICsgJyQnXG4gICAgKTtcblxuICAgIHZhciBzZXRJbW1lZGlhdGUgPSB0eXBlb2YgKHNldEltbWVkaWF0ZSA9IGZyZWVHbG9iYWwgJiYgbW9kdWxlRXhwb3J0cyAmJiBmcmVlR2xvYmFsLnNldEltbWVkaWF0ZSkgPT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgIXJlTmF0aXZlLnRlc3Qoc2V0SW1tZWRpYXRlKSAmJiBzZXRJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBwb3N0TWVzc2FnZVN1cHBvcnRlZCAoKSB7XG4gICAgICAvLyBFbnN1cmUgbm90IGluIGEgd29ya2VyXG4gICAgICBpZiAoIXJvb3QucG9zdE1lc3NhZ2UgfHwgcm9vdC5pbXBvcnRTY3JpcHRzKSB7IHJldHVybiBmYWxzZTsgfVxuICAgICAgdmFyIGlzQXN5bmMgPSBmYWxzZSwgb2xkSGFuZGxlciA9IHJvb3Qub25tZXNzYWdlO1xuICAgICAgLy8gVGVzdCBmb3IgYXN5bmNcbiAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkgeyBpc0FzeW5jID0gdHJ1ZTsgfTtcbiAgICAgIHJvb3QucG9zdE1lc3NhZ2UoJycsICcqJyk7XG4gICAgICByb290Lm9ubWVzc2FnZSA9IG9sZEhhbmRsZXI7XG5cbiAgICAgIHJldHVybiBpc0FzeW5jO1xuICAgIH1cblxuICAgIC8vIFVzZSBpbiBvcmRlciwgc2V0SW1tZWRpYXRlLCBuZXh0VGljaywgcG9zdE1lc3NhZ2UsIE1lc3NhZ2VDaGFubmVsLCBzY3JpcHQgcmVhZHlzdGF0ZWNoYW5nZWQsIHNldFRpbWVvdXRcbiAgICBpZiAoaXNGdW5jdGlvbihzZXRJbW1lZGlhdGUpKSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHsgcnVuVGFzayhpZCk7IH0pO1xuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1blRhc2soaWQpOyB9KTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocG9zdE1lc3NhZ2VTdXBwb3J0ZWQoKSkge1xuICAgICAgdmFyIE1TR19QUkVGSVggPSAnbXMucnguc2NoZWR1bGUnICsgTWF0aC5yYW5kb20oKTtcblxuICAgICAgdmFyIG9uR2xvYmFsUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gT25seSBpZiB3ZSdyZSBhIG1hdGNoIHRvIGF2b2lkIGFueSBvdGhlciBnbG9iYWwgZXZlbnRzXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ3N0cmluZycgJiYgZXZlbnQuZGF0YS5zdWJzdHJpbmcoMCwgTVNHX1BSRUZJWC5sZW5ndGgpID09PSBNU0dfUFJFRklYKSB7XG4gICAgICAgICAgcnVuVGFzayhldmVudC5kYXRhLnN1YnN0cmluZyhNU0dfUFJFRklYLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbkdsb2JhbFBvc3RNZXNzYWdlLCBmYWxzZSk7XG5cbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICByb290LnBvc3RNZXNzYWdlKE1TR19QUkVGSVggKyBpZCwgJyonKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCEhcm9vdC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgcm9vdC5NZXNzYWdlQ2hhbm5lbCgpO1xuXG4gICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7IHJ1blRhc2soZS5kYXRhKTsgfTtcblxuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaWQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoJ2RvY3VtZW50JyBpbiByb290ICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIHJvb3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpIHtcblxuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBzY3JpcHRFbGVtZW50ID0gcm9vdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcblxuICAgICAgICBzY3JpcHRFbGVtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBydW5UYXNrKGlkKTtcbiAgICAgICAgICBzY3JpcHRFbGVtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgICAgICAgIHNjcmlwdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBydW5UYXNrKGlkKTtcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKSk7XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzY2hlZHVsZXIgdGhhdCBzY2hlZHVsZXMgd29yayB2aWEgYSB0aW1lZCBjYWxsYmFjayBiYXNlZCB1cG9uIHBsYXRmb3JtLlxuICAgKi9cbiAgIHZhciBEZWZhdWx0U2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICAgaW5oZXJpdHMoRGVmYXVsdFNjaGVkdWxlciwgX19zdXBlcl9fKTtcbiAgICAgZnVuY3Rpb24gRGVmYXVsdFNjaGVkdWxlcigpIHtcbiAgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgfVxuXG4gICAgIGZ1bmN0aW9uIHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgc2NoZWR1bGVyLCBzdGF0ZSkge1xuICAgICAgIHJldHVybiBmdW5jdGlvbiBzY2hlZHVsZSgpIHtcbiAgICAgICAgIGRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZShEaXNwb3NhYmxlLl9maXh1cChhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZSkpKTtcbiAgICAgICB9O1xuICAgICB9XG5cbiAgICAgZnVuY3Rpb24gQ2xlYXJEaXNwb3NhYmxlKGlkKSB7XG4gICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgfVxuXG4gICAgIENsZWFyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgIGNsZWFyTWV0aG9kKHRoaXMuX2lkKTtcbiAgICAgICB9XG4gICAgIH07XG5cbiAgICAgZnVuY3Rpb24gTG9jYWxDbGVhckRpc3Bvc2FibGUoaWQpIHtcbiAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICB9XG5cbiAgICAgTG9jYWxDbGVhckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICBsb2NhbENsZWFyVGltZW91dCh0aGlzLl9pZCk7XG4gICAgICAgfVxuICAgICB9O1xuXG4gICAgRGVmYXVsdFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpZCA9IHNjaGVkdWxlTWV0aG9kKHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShkaXNwb3NhYmxlLCBuZXcgQ2xlYXJEaXNwb3NhYmxlKGlkKSk7XG4gICAgfTtcblxuICAgIERlZmF1bHRTY2hlZHVsZXIucHJvdG90eXBlLl9zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICBpZiAoZHVlVGltZSA9PT0gMCkgeyByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uKTsgfVxuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpZCA9IGxvY2FsU2V0VGltZW91dChzY2hlZHVsZUFjdGlvbihkaXNwb3NhYmxlLCBhY3Rpb24sIHRoaXMsIHN0YXRlKSwgZHVlVGltZSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoZGlzcG9zYWJsZSwgbmV3IExvY2FsQ2xlYXJEaXNwb3NhYmxlKGlkKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTG9uZ1J1bm5pbmcoc3RhdGUsIGFjdGlvbiwgZGlzcG9zYWJsZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsgYWN0aW9uKHN0YXRlLCBkaXNwb3NhYmxlKTsgfTtcbiAgICB9XG5cbiAgICBEZWZhdWx0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUxvbmdSdW5uaW5nID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkaXNwb3NhYmxlID0gZGlzcG9zYWJsZUNyZWF0ZShub29wKTtcbiAgICAgIHNjaGVkdWxlTWV0aG9kKHNjaGVkdWxlTG9uZ1J1bm5pbmcoc3RhdGUsIGFjdGlvbiwgZGlzcG9zYWJsZSkpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGU7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZhdWx0U2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBkZWZhdWx0U2NoZWR1bGVyID0gU2NoZWR1bGVyWydkZWZhdWx0J10gPSBTY2hlZHVsZXIuYXN5bmMgPSBuZXcgRGVmYXVsdFNjaGVkdWxlcigpO1xuXG4gIHZhciBDYXRjaFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDYXRjaFNjaGVkdWxlcihzY2hlZHVsZXIsIGhhbmRsZXIpIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICAgICAgdGhpcy5fcmVjdXJzaXZlT3JpZ2luYWwgPSBudWxsO1xuICAgICAgdGhpcy5fcmVjdXJzaXZlV3JhcHBlciA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgdGhpcy5fd3JhcChhY3Rpb24pKTtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl9zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBkdWVUaW1lLCB0aGlzLl93cmFwKGFjdGlvbikpO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLm5vdygpOyB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl9jbG9uZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRjaFNjaGVkdWxlcihzY2hlZHVsZXIsIHRoaXMuX2hhbmRsZXIpO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX3dyYXAgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgc3RhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKGFjdGlvbikocGFyZW50Ll9nZXRSZWN1cnNpdmVXcmFwcGVyKHNlbGYpLCBzdGF0ZSk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgaWYgKCFwYXJlbnQuX2hhbmRsZXIocmVzLmUpKSB7IHRocm93ZXIocmVzLmUpOyB9XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKHJlcyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX2dldFJlY3Vyc2l2ZVdyYXBwZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICBpZiAodGhpcy5fcmVjdXJzaXZlT3JpZ2luYWwgIT09IHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLl9yZWN1cnNpdmVPcmlnaW5hbCA9IHNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLl9jbG9uZShzY2hlZHVsZXIpO1xuICAgICAgICB3cmFwcGVyLl9yZWN1cnNpdmVPcmlnaW5hbCA9IHNjaGVkdWxlcjtcbiAgICAgICAgd3JhcHBlci5fcmVjdXJzaXZlV3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICAgIHRoaXMuX3JlY3Vyc2l2ZVdyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZVdyYXBwZXI7XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZVBlcmlvZGljID0gZnVuY3Rpb24gKHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLCBmYWlsZWQgPSBmYWxzZSwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUGVyaW9kaWMoc3RhdGUsIHBlcmlvZCwgZnVuY3Rpb24gKHN0YXRlMSkge1xuICAgICAgICBpZiAoZmFpbGVkKSB7IHJldHVybiBudWxsOyB9XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaChhY3Rpb24pKHN0YXRlMSk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hhbmRsZXIocmVzLmUpKSB7IHRocm93ZXIocmVzLmUpOyB9XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXRjaFNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgYSBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqL1xuICB2YXIgTm90aWZpY2F0aW9uID0gUnguTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oKSB7XG5cbiAgICB9XG5cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgZGVsZWdhdGUgY29ycmVzcG9uZGluZyB0byB0aGUgbm90aWZpY2F0aW9uIG9yIHRoZSBvYnNlcnZlcidzIG1ldGhvZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBub3RpZmljYXRpb24gYW5kIHJldHVybnMgdGhlIHByb2R1Y2VkIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uIHwgT2JzZXJ2ZXJ9IG9ic2VydmVyT3JPbk5leHQgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBhbiBPbk5leHQgbm90aWZpY2F0aW9uIG9yIE9ic2VydmVyIHRvIGludm9rZSB0aGUgbm90aWZpY2F0aW9uIG9uLi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25FcnJvciBub3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybnMge0FueX0gUmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBvYnNlcnZhdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgcmV0dXJuIG9ic2VydmVyT3JPbk5leHQgJiYgdHlwZW9mIG9ic2VydmVyT3JPbk5leHQgPT09ICdvYmplY3QnID9cbiAgICAgICAgdGhpcy5fYWNjZXB0T2JzZXJ2ZXIob2JzZXJ2ZXJPck9uTmV4dCkgOlxuICAgICAgICB0aGlzLl9hY2NlcHQob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTm90aWZpY2F0aW9uc1xuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gc2VuZCBvdXQgdGhlIG5vdGlmaWNhdGlvbiBjYWxscyBvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzdXJmYWNlcyB0aGUgYmVoYXZpb3Igb2YgdGhlIG5vdGlmaWNhdGlvbiB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShzZWxmLCBmdW5jdGlvbiAoXywgbm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLl9hY2NlcHRPYnNlcnZlcihvKTtcbiAgICAgICAgICBub3RpZmljYXRpb24ua2luZCA9PT0gJ04nICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbiAgfSkoKTtcblxuICB2YXIgT25OZXh0Tm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbk5leHROb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25OZXh0Tm90aWZpY2F0aW9uKHZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLmtpbmQgPSAnTic7XG4gICAgfVxuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCkge1xuICAgICAgcmV0dXJuIG9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG8ub25OZXh0KHRoaXMudmFsdWUpO1xuICAgIH07XG5cbiAgICBPbk5leHROb3RpZmljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICdPbk5leHQoJyArIHRoaXMudmFsdWUgKyAnKSc7XG4gICAgfTtcblxuICAgIHJldHVybiBPbk5leHROb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgdmFyIE9uRXJyb3JOb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uRXJyb3JOb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvck5vdGlmaWNhdGlvbihlcnJvcikge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgdGhpcy5raW5kID0gJ0UnO1xuICAgIH1cblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yKSB7XG4gICAgICByZXR1cm4gb25FcnJvcih0aGlzLmVycm9yKTtcbiAgICB9O1xuXG4gICAgT25FcnJvck5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgfTtcblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICdPbkVycm9yKCcgKyB0aGlzLmVycm9yICsgJyknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25FcnJvck5vdGlmaWNhdGlvbjtcbiAgfShOb3RpZmljYXRpb24pKTtcblxuICB2YXIgT25Db21wbGV0ZWROb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uKCkge1xuICAgICAgdGhpcy5raW5kID0gJ0MnO1xuICAgIH1cblxuICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiBvbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25Db21wbGV0ZWQoKSc7XG4gICAgfTtcblxuICAgIHJldHVybiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbjtcbiAgfShOb3RpZmljYXRpb24pKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uTmV4dCBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBUaGUgdmFsdWUgY29udGFpbmVkIGluIHRoZSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbk5leHQgbm90aWZpY2F0aW9uIGNvbnRhaW5pbmcgdGhlIHZhbHVlLlxuICAgKi9cbiAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IE9uTmV4dE5vdGlmaWNhdGlvbih2YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbkVycm9yIG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBleGNlcHRpb24gY29udGFpbmVkIGluIHRoZSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkVycm9yIG5vdGlmaWNhdGlvbiBjb250YWluaW5nIHRoZSBleGNlcHRpb24uXG4gICAqL1xuICB2YXIgbm90aWZpY2F0aW9uQ3JlYXRlT25FcnJvciA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgcmV0dXJuIG5ldyBPbkVycm9yTm90aWZpY2F0aW9uKGVycm9yKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICogQHJldHVybnMge05vdGlmaWNhdGlvbn0gVGhlIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIHZhciBub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IE9uQ29tcGxldGVkTm90aWZpY2F0aW9uKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN1cHBvcnRzIHB1c2gtc3R5bGUgaXRlcmF0aW9uIG92ZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIHZhciBPYnNlcnZlciA9IFJ4Lk9ic2VydmVyID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhIG5vdGlmaWNhdGlvbiBjYWxsYmFjayBmcm9tIGFuIG9ic2VydmVyLlxuICAgKiBAcmV0dXJucyBUaGUgYWN0aW9uIHRoYXQgZm9yd2FyZHMgaXRzIGlucHV0IG5vdGlmaWNhdGlvbiB0byB0aGUgdW5kZXJseWluZyBvYnNlcnZlci5cbiAgICovXG4gIE9ic2VydmVyLnByb3RvdHlwZS50b05vdGlmaWVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYnNlcnZlciA9IHRoaXM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuKSB7IHJldHVybiBuLmFjY2VwdChvYnNlcnZlcik7IH07XG4gIH07XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIEFuIG9ic2VydmVyIHRoYXQgaGlkZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzcGVjaWZpZWQgb2JzZXJ2ZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUuYXNPYnNlcnZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZlcihcbiAgICAgIGZ1bmN0aW9uICh4KSB7IHNlbGYub25OZXh0KHgpOyB9LFxuICAgICAgZnVuY3Rpb24gKGVycikgeyBzZWxmLm9uRXJyb3IoZXJyKTsgfSxcbiAgICAgIGZ1bmN0aW9uICgpIHsgc2VsZi5vbkNvbXBsZXRlZCgpOyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogIENoZWNrcyBhY2Nlc3MgdG8gdGhlIG9ic2VydmVyIGZvciBncmFtbWFyIHZpb2xhdGlvbnMuIFRoaXMgaW5jbHVkZXMgY2hlY2tpbmcgZm9yIG11bHRpcGxlIE9uRXJyb3Igb3IgT25Db21wbGV0ZWQgY2FsbHMsIGFzIHdlbGwgYXMgcmVlbnRyYW5jeSBpbiBhbnkgb2YgdGhlIG9ic2VydmVyIG1ldGhvZHMuXG4gICAqICBJZiBhIHZpb2xhdGlvbiBpcyBkZXRlY3RlZCwgYW4gRXJyb3IgaXMgdGhyb3duIGZyb20gdGhlIG9mZmVuZGluZyBvYnNlcnZlciBtZXRob2QgY2FsbC5cbiAgICogQHJldHVybnMgQW4gb2JzZXJ2ZXIgdGhhdCBjaGVja3MgY2FsbGJhY2tzIGludm9jYXRpb25zIGFnYWluc3QgdGhlIG9ic2VydmVyIGdyYW1tYXIgYW5kLCBpZiB0aGUgY2hlY2tzIHBhc3MsIGZvcndhcmRzIHRob3NlIHRvIHRoZSBzcGVjaWZpZWQgb2JzZXJ2ZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUuY2hlY2tlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBDaGVja2VkT2JzZXJ2ZXIodGhpcyk7IH07XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGFuIG9ic2VydmVyIGZyb20gdGhlIHNwZWNpZmllZCBPbk5leHQsIGFsb25nIHdpdGggb3B0aW9uYWwgT25FcnJvciwgYW5kIE9uQ29tcGxldGVkIGFjdGlvbnMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbk5leHRdIE9ic2VydmVyJ3MgT25OZXh0IGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gT2JzZXJ2ZXIncyBPbkNvbXBsZXRlZCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZlcn0gVGhlIG9ic2VydmVyIG9iamVjdCBpbXBsZW1lbnRlZCB1c2luZyB0aGUgZ2l2ZW4gYWN0aW9ucy5cbiAgICovXG4gIHZhciBvYnNlcnZlckNyZWF0ZSA9IE9ic2VydmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgb25OZXh0IHx8IChvbk5leHQgPSBub29wKTtcbiAgICBvbkVycm9yIHx8IChvbkVycm9yID0gZGVmYXVsdEVycm9yKTtcbiAgICBvbkNvbXBsZXRlZCB8fCAob25Db21wbGV0ZWQgPSBub29wKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmVyKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhbiBvYnNlcnZlciBmcm9tIGEgbm90aWZpY2F0aW9uIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIEFjdGlvbiB0aGF0IGhhbmRsZXMgYSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIFRoZSBvYnNlcnZlciBvYmplY3QgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgaGFuZGxlciB1c2luZyBhIG5vdGlmaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIGVhY2ggbWVzc2FnZSBpdCByZWNlaXZlcy5cbiAgICovXG4gIE9ic2VydmVyLmZyb21Ob3RpZmllciA9IGZ1bmN0aW9uIChoYW5kbGVyLCB0aGlzQXJnKSB7XG4gICAgdmFyIGNiID0gYmluZENhbGxiYWNrKGhhbmRsZXIsIHRoaXNBcmcsIDEpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiBjYihub3RpZmljYXRpb25DcmVhdGVPbk5leHQoeCkpO1xuICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gY2Iobm90aWZpY2F0aW9uQ3JlYXRlT25FcnJvcihlKSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNiKG5vdGlmaWNhdGlvbkNyZWF0ZU9uQ29tcGxldGVkKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgdGhlIGludm9jYXRpb24gb2Ygb2JzZXJ2ZXIgbWV0aG9kcyBvbiB0aGUgZ2l2ZW4gc2NoZWR1bGVyLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBzY2hlZHVsZSBvYnNlcnZlciBtZXNzYWdlcyBvbi5cbiAgICogQHJldHVybnMge09ic2VydmVyfSBPYnNlcnZlciB3aG9zZSBtZXNzYWdlcyBhcmUgc2NoZWR1bGVkIG9uIHRoZSBnaXZlbiBzY2hlZHVsZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUubm90aWZ5T24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZlT25PYnNlcnZlcihzY2hlZHVsZXIsIHRoaXMpO1xuICB9O1xuXG4gIE9ic2VydmVyLnByb3RvdHlwZS5tYWtlU2FmZSA9IGZ1bmN0aW9uKGRpc3Bvc2FibGUpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c1NhZmVPYnNlcnZlcih0aGlzLl9vbk5leHQsIHRoaXMuX29uRXJyb3IsIHRoaXMuX29uQ29tcGxldGVkLCBkaXNwb3NhYmxlKTtcbiAgfTtcblxuICAvKipcbiAgICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBPYnNlcnZlciBjbGFzcy5cbiAgICogVGhpcyBiYXNlIGNsYXNzIGVuZm9yY2VzIHRoZSBncmFtbWFyIG9mIG9ic2VydmVycyB3aGVyZSBPbkVycm9yIGFuZCBPbkNvbXBsZXRlZCBhcmUgdGVybWluYWwgbWVzc2FnZXMuXG4gICAqL1xuICB2YXIgQWJzdHJhY3RPYnNlcnZlciA9IFJ4LmludGVybmFscy5BYnN0cmFjdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBYnN0cmFjdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYnNlcnZlciBpbiBhIG5vbi1zdG9wcGVkIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0T2JzZXJ2ZXIoKSB7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIE11c3QgYmUgaW1wbGVtZW50ZWQgYnkgb3RoZXIgb2JzZXJ2ZXJzXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IG5vdEltcGxlbWVudGVkO1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gbm90SW1wbGVtZW50ZWQ7XG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyB0aGUgb2JzZXJ2ZXIgb2YgYSBuZXcgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IHZhbHVlIE5leHQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICovXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUub25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAhdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIHRoYXQgYW4gZXhjZXB0aW9uIGhhcyBvY2N1cnJlZC5cbiAgICAgKiBAcGFyYW0ge0FueX0gZXJyb3IgVGhlIGVycm9yIHRoYXQgaGFzIG9jY3VycmVkLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSBvYnNlcnZlciwgY2F1c2luZyBpdCB0byB0cmFuc2l0aW9uIHRvIHRoZSBzdG9wcGVkIHN0YXRlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsgfTtcblxuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBBYnN0cmFjdE9ic2VydmVyO1xuICB9KE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENsYXNzIHRvIGNyZWF0ZSBhbiBPYnNlcnZlciBpbnN0YW5jZSBmcm9tIGRlbGVnYXRlLWJhc2VkIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgb24qIG1ldGhvZHMuXG4gICAqL1xuICB2YXIgQW5vbnltb3VzT2JzZXJ2ZXIgPSBSeC5Bbm9ueW1vdXNPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQW5vbnltb3VzT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9ic2VydmVyIGZyb20gdGhlIHNwZWNpZmllZCBPbk5leHQsIE9uRXJyb3IsIGFuZCBPbkNvbXBsZXRlZCBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbk5leHQgT2JzZXJ2ZXIncyBPbk5leHQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbkVycm9yIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IG9uQ29tcGxldGVkIE9ic2VydmVyJ3MgT25Db21wbGV0ZWQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFub255bW91c09ic2VydmVyKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5fb25OZXh0ID0gb25OZXh0O1xuICAgICAgdGhpcy5fb25FcnJvciA9IG9uRXJyb3I7XG4gICAgICB0aGlzLl9vbkNvbXBsZXRlZCA9IG9uQ29tcGxldGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBvbk5leHQgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBOZXh0IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFub255bW91c09ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9vbk5leHQodmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgb25FcnJvciBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBlcnJvciB0aGF0IGhhcyBvY2N1cnJlZC5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgQ2FsbHMgdGhlIG9uQ29tcGxldGVkIGFjdGlvbi5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fb25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFub255bW91c09ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgQ2hlY2tlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDaGVja2VkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDaGVja2VkT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX3N0YXRlID0gMDsgLy8gMCAtIGlkbGUsIDEgLSBidXN5LCAyIC0gZG9uZVxuICAgIH1cblxuICAgIHZhciBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUgPSBDaGVja2VkT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5jaGVja0FjY2VzcygpO1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29ic2VydmVyLm9uTmV4dCkuY2FsbCh0aGlzLl9vYnNlcnZlciwgdmFsdWUpO1xuICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICB9O1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLmNoZWNrQWNjZXNzKCk7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JzZXJ2ZXIub25FcnJvcikuY2FsbCh0aGlzLl9vYnNlcnZlciwgZXJyKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gMjtcbiAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgfTtcblxuICAgIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY2hlY2tBY2Nlc3MoKTtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYnNlcnZlci5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLl9vYnNlcnZlcik7XG4gICAgICB0aGlzLl9zdGF0ZSA9IDI7XG4gICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuICAgIH07XG5cbiAgICBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUuY2hlY2tBY2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IDEpIHsgdGhyb3cgbmV3IEVycm9yKCdSZS1lbnRyYW5jeSBkZXRlY3RlZCcpOyB9XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IDIpIHsgdGhyb3cgbmV3IEVycm9yKCdPYnNlcnZlciBjb21wbGV0ZWQnKTsgfVxuICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSAwKSB7IHRoaXMuX3N0YXRlID0gMTsgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQ2hlY2tlZE9ic2VydmVyO1xuICB9KE9ic2VydmVyKSk7XG5cbiAgdmFyIFNjaGVkdWxlZE9ic2VydmVyID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2hlZHVsZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlZE9ic2VydmVyKHNjaGVkdWxlciwgb2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLmlzQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRmF1bHRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlTmV4dChvYnNlcnZlciwgeCkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBvYnNlcnZlci5vbk5leHQoeCk7IH07IH1cbiAgICBmdW5jdGlvbiBlbnF1ZXVlRXJyb3Iob2JzZXJ2ZXIsIGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25FcnJvcihlKTsgfTsgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVDb21wbGV0ZWQob2JzZXJ2ZXIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTsgfTsgfVxuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVOZXh0KHRoaXMub2JzZXJ2ZXIsIHgpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlRXJyb3IodGhpcy5vYnNlcnZlciwgZSkpO1xuICAgIH07XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVDb21wbGV0ZWQodGhpcy5vYnNlcnZlcikpO1xuICAgIH07XG5cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICB2YXIgd29yaztcbiAgICAgIGlmIChzdGF0ZS5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdvcmsgPSBzdGF0ZS5xdWV1ZS5zaGlmdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuaXNBY3F1aXJlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2god29yaykoKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHN0YXRlLnF1ZXVlID0gW107XG4gICAgICAgIHN0YXRlLmhhc0ZhdWx0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhyb3dlcihyZXMuZSk7XG4gICAgICB9XG4gICAgICByZWN1cnNlKHN0YXRlKTtcbiAgICB9XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZW5zdXJlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzT3duZXIgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5oYXNGYXVsdGVkICYmIHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBpc093bmVyID0gIXRoaXMuaXNBY3F1aXJlZDtcbiAgICAgICAgdGhpcy5pc0FjcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlzT3duZXIgJiZcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlLnNldERpc3Bvc2FibGUodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUodGhpcywgc2NoZWR1bGVNZXRob2QpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZWRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIE9ic2VydmVPbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPYnNlcnZlT25PYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9ic2VydmVyKHNjaGVkdWxlciwgb2JzZXJ2ZXIsIGNhbmNlbCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcywgc2NoZWR1bGVyLCBvYnNlcnZlcik7XG4gICAgICB0aGlzLl9jYW5jZWwgPSBjYW5jZWw7XG4gICAgfVxuXG4gICAgT2JzZXJ2ZU9uT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuZW5zdXJlQWN0aXZlKCk7XG4gICAgfTtcblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZSk7XG4gICAgICB0aGlzLmVuc3VyZUFjdGl2ZSgpO1xuICAgIH07XG5cbiAgICBPYnNlcnZlT25PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5jb21wbGV0ZWQuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZW5zdXJlQWN0aXZlKCk7XG4gICAgfTtcblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLl9jYW5jZWwgJiYgdGhpcy5fY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2NhbmNlbCA9IG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBPYnNlcnZlT25PYnNlcnZlcjtcbiAgfSkoU2NoZWR1bGVkT2JzZXJ2ZXIpO1xuXG4gIHZhciBvYnNlcnZhYmxlUHJvdG87XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBwdXNoLXN0eWxlIGNvbGxlY3Rpb24uXG4gICAqL1xuICB2YXIgT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gbWFrZVN1YnNjcmliZShzZWxmLCBzdWJzY3JpYmUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgb2xkT25FcnJvciA9IG8ub25FcnJvcjtcbiAgICAgICAgby5vbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBtYWtlU3RhY2tUcmFjZUxvbmcoZSwgc2VsZik7XG4gICAgICAgICAgb2xkT25FcnJvci5jYWxsKG8sIGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzdWJzY3JpYmUuY2FsbChzZWxmLCBvKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgIGlmIChSeC5jb25maWcubG9uZ1N0YWNrU3VwcG9ydCAmJiBoYXNTdGFja3MpIHtcbiAgICAgICAgdmFyIG9sZFN1YnNjcmliZSA9IHRoaXMuX3N1YnNjcmliZTtcbiAgICAgICAgdmFyIGUgPSB0cnlDYXRjaCh0aHJvd2VyKShuZXcgRXJyb3IoKSkuZTtcbiAgICAgICAgdGhpcy5zdGFjayA9IGUuc3RhY2suc3Vic3RyaW5nKGUuc3RhY2suaW5kZXhPZignXFxuJykgKyAxKTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gbWFrZVN1YnNjcmliZSh0aGlzLCBvbGRTdWJzY3JpYmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9ic2VydmFibGVQcm90byA9IE9ic2VydmFibGUucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhbiBPYnNlcnZhYmxlXG4gICAgKiBAcGFyYW0ge0FueX0gQW4gb2JqZWN0IHRvIGRldGVybWluZSB3aGV0aGVyIGl0IGlzIGFuIE9ic2VydmFibGVcbiAgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGFuIE9ic2VydmFibGUsIGVsc2UgZmFsc2UuXG4gICAgKi9cbiAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbyAmJiBpc0Z1bmN0aW9uKG8uc3Vic2NyaWJlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIFN1YnNjcmliZXMgYW4gbyB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtNaXhlZH0gW29Pck9uTmV4dF0gVGhlIG9iamVjdCB0aGF0IGlzIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvciBhbiBhY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSBBY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcmV0dXJucyB7RGlwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlID0gb2JzZXJ2YWJsZVByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAob09yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSh0eXBlb2Ygb09yT25OZXh0ID09PSAnb2JqZWN0JyA/XG4gICAgICAgIG9Pck9uTmV4dCA6XG4gICAgICAgIG9ic2VydmVyQ3JlYXRlKG9Pck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgbmV4dCB2YWx1ZSBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgVGhlIGZ1bmN0aW9uIHRvIGludm9rZSBvbiBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbk5leHQgPSBmdW5jdGlvbiAob25OZXh0LCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKG9ic2VydmVyQ3JlYXRlKHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uKHgpIHsgb25OZXh0LmNhbGwodGhpc0FyZywgeCk7IH0gOiBvbk5leHQpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byBhbiBleGNlcHRpb25hbCBjb25kaXRpb24gaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbkVycm9yID0gZnVuY3Rpb24gKG9uRXJyb3IsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUobnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oZSkgeyBvbkVycm9yLmNhbGwodGhpc0FyZywgZSk7IH0gOiBvbkVycm9yKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gdGhlIG5leHQgdmFsdWUgaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgVGhlIGZ1bmN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAob25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUobnVsbCwgbnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oKSB7IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7IH0gOiBvbkNvbXBsZXRlZCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbiAgfSkoKTtcblxuICB2YXIgT2JzZXJ2YWJsZUJhc2UgPSBSeC5PYnNlcnZhYmxlQmFzZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT2JzZXJ2YWJsZUJhc2UsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBmaXhTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVyICYmIGlzRnVuY3Rpb24oc3Vic2NyaWJlci5kaXNwb3NlKSA/IHN1YnNjcmliZXIgOlxuICAgICAgICBpc0Z1bmN0aW9uKHN1YnNjcmliZXIpID8gZGlzcG9zYWJsZUNyZWF0ZShzdWJzY3JpYmVyKSA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREaXNwb3NhYmxlKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgYWRvID0gc3RhdGVbMF0sIHNlbGYgPSBzdGF0ZVsxXTtcbiAgICAgIHZhciBzdWIgPSB0cnlDYXRjaChzZWxmLnN1YnNjcmliZUNvcmUpLmNhbGwoc2VsZiwgYWRvKTtcbiAgICAgIGlmIChzdWIgPT09IGVycm9yT2JqICYmICFhZG8uZmFpbChlcnJvck9iai5lKSkgeyB0aHJvd2VyKGVycm9yT2JqLmUpOyB9XG4gICAgICBhZG8uc2V0RGlzcG9zYWJsZShmaXhTdWJzY3JpYmVyKHN1YikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIE9ic2VydmFibGVCYXNlKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgT2JzZXJ2YWJsZUJhc2UucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFkbyA9IG5ldyBBdXRvRGV0YWNoT2JzZXJ2ZXIobyksIHN0YXRlID0gW2FkbywgdGhpc107XG5cbiAgICAgIGlmIChjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVxdWlyZWQoKSkge1xuICAgICAgICBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzZXREaXNwb3NhYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldERpc3Bvc2FibGUobnVsbCwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFkbztcbiAgICB9O1xuXG4gICAgT2JzZXJ2YWJsZUJhc2UucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIHJldHVybiBPYnNlcnZhYmxlQmFzZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbnZhciBGbGF0TWFwT2JzZXJ2YWJsZSA9IFJ4LkZsYXRNYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXG4gICAgaW5oZXJpdHMoRmxhdE1hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBGbGF0TWFwT2JzZXJ2YWJsZShzb3VyY2UsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24ocmVzdWx0U2VsZWN0b3IpID8gcmVzdWx0U2VsZWN0b3IgOiBudWxsO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IGJpbmRDYWxsYmFjayhpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7IHJldHVybiBzZWxlY3RvcjsgfSwgdGhpc0FyZywgMyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZsYXRNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzLnNlbGVjdG9yLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIob2JzZXJ2ZXIsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvciwgc291cmNlKSB7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLm8gPSBvYnNlcnZlcjtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5fd3JhcFJlc3VsdCA9IGZ1bmN0aW9uKHJlc3VsdCwgeCwgaSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IgP1xuICAgICAgICByZXN1bHQubWFwKGZ1bmN0aW9uKHksIGkyKSB7IHJldHVybiB0aGlzLnJlc3VsdFNlbGVjdG9yKHgsIHksIGksIGkyKTsgfSwgdGhpcykgOlxuICAgICAgICByZXN1bHQ7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgaSA9IHRoaXMuaSsrO1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuc2VsZWN0b3IpKHgsIGksIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cblxuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgIChpc0FycmF5TGlrZShyZXN1bHQpIHx8IGlzSXRlcmFibGUocmVzdWx0KSkgJiYgKHJlc3VsdCA9IE9ic2VydmFibGUuZnJvbShyZXN1bHQpKTtcbiAgICAgIHRoaXMuby5vbk5leHQodGhpcy5fd3JhcFJlc3VsdChyZXN1bHQsIHgsIGkpKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7IHRoaXMuby5vbkVycm9yKGUpOyB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oKSB7IHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIEZsYXRNYXBPYnNlcnZhYmxlO1xuXG59KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEVudW1lcmFibGUgPSBSeC5pbnRlcm5hbHMuRW51bWVyYWJsZSA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICBmdW5jdGlvbiBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSkge1xuICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuXG4gIElzRGlzcG9zZWREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICB2YXIgY3VycmVudEl0ZW0gPSB0cnlDYXRjaChzdGF0ZS5lLm5leHQpLmNhbGwoc3RhdGUuZSk7XG4gICAgICBpZiAoY3VycmVudEl0ZW0gPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IoY3VycmVudEl0ZW0uZSk7IH1cbiAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgaXNQcm9taXNlKGN1cnJlbnRWYWx1ZSkgJiYgKGN1cnJlbnRWYWx1ZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50VmFsdWUpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnRWYWx1ZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBvOiBvLFxuICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbixcbiAgICAgICAgZTogdGhpcy5zb3VyY2VzWyRpdGVyYXRvciRdKClcbiAgICAgIH07XG5cbiAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3N0YXRlLm8ub25FcnJvcihlKTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuXG4gICAgcmV0dXJuIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgRW51bWVyYWJsZS5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIENhdGNoRXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIENhdGNoRXJyb3JPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhDYXRjaEVycm9yT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuaXNEaXNwb3NlZCkgeyByZXR1cm47IH1cbiAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKHN0YXRlLmUubmV4dCkuY2FsbChzdGF0ZS5lKTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLmRvbmUpIHsgcmV0dXJuIHN0YXRlLmxhc3RFcnJvciAhPT0gbnVsbCA/IHN0YXRlLm8ub25FcnJvcihzdGF0ZS5sYXN0RXJyb3IpIDogc3RhdGUuby5vbkNvbXBsZXRlZCgpOyB9XG5cbiAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBjdXJyZW50SXRlbS52YWx1ZTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuICAgIH1cblxuICAgIENhdGNoRXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZTogdGhpcy5zb3VyY2VzWyRpdGVyYXRvciRdKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBsYXN0RXJyb3I6IG51bGwsXG4gICAgICAgIG86IG9cbiAgICAgIH07XG5cbiAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3N0YXRlLmxhc3RFcnJvciA9IGU7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fc3RhdGUuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIENhdGNoRXJyb3JPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgRW51bWVyYWJsZS5wcm90b3R5cGUuY2F0Y2hFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IENhdGNoRXJyb3JPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBSZXBlYXRFbnVtZXJhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZXBlYXRFbnVtZXJhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlcGVhdEVudW1lcmFibGUodiwgYykge1xuICAgICAgdGhpcy52ID0gdjtcbiAgICAgIHRoaXMuYyA9IGMgPT0gbnVsbCA/IC0xIDogYztcbiAgICB9XG5cbiAgICBSZXBlYXRFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVwZWF0RW51bWVyYXRvcih0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUmVwZWF0RW51bWVyYXRvcihwKSB7XG4gICAgICB0aGlzLnYgPSBwLnY7XG4gICAgICB0aGlzLmwgPSBwLmM7XG4gICAgfVxuXG4gICAgUmVwZWF0RW51bWVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLmwgPT09IDApIHsgcmV0dXJuIGRvbmVFbnVtZXJhdG9yOyB9XG4gICAgICBpZiAodGhpcy5sID4gMCkgeyB0aGlzLmwtLTsgfVxuICAgICAgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLnYgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdEVudW1lcmFibGU7XG4gIH0oRW51bWVyYWJsZSkpO1xuXG4gIHZhciBlbnVtZXJhYmxlUmVwZWF0ID0gRW51bWVyYWJsZS5yZXBlYXQgPSBmdW5jdGlvbiAodmFsdWUsIHJlcGVhdENvdW50KSB7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRFbnVtZXJhYmxlKHZhbHVlLCByZXBlYXRDb3VudCk7XG4gIH07XG5cbiAgdmFyIE9mRW51bWVyYWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPZkVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT2ZFbnVtZXJhYmxlKHMsIGZuLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnMgPSBzO1xuICAgICAgdGhpcy5mbiA9IGZuID8gYmluZENhbGxiYWNrKGZuLCB0aGlzQXJnLCAzKSA6IG51bGw7XG4gICAgfVxuICAgIE9mRW51bWVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IE9mRW51bWVyYXRvcih0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gT2ZFbnVtZXJhdG9yKHApIHtcbiAgICAgIHRoaXMuaSA9IC0xO1xuICAgICAgdGhpcy5zID0gcC5zO1xuICAgICAgdGhpcy5sID0gdGhpcy5zLmxlbmd0aDtcbiAgICAgIHRoaXMuZm4gPSBwLmZuO1xuICAgIH1cblxuICAgIE9mRW51bWVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgcmV0dXJuICsrdGhpcy5pIDwgdGhpcy5sID9cbiAgICAgICB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogIXRoaXMuZm4gPyB0aGlzLnNbdGhpcy5pXSA6IHRoaXMuZm4odGhpcy5zW3RoaXMuaV0sIHRoaXMuaSwgdGhpcy5zKSB9IDpcbiAgICAgICBkb25lRW51bWVyYXRvcjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9mRW51bWVyYWJsZTtcbiAgfShFbnVtZXJhYmxlKSk7XG5cbiAgdmFyIGVudW1lcmFibGVPZiA9IEVudW1lcmFibGUub2YgPSBmdW5jdGlvbiAoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgT2ZFbnVtZXJhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpO1xuICB9O1xuXG52YXIgT2JzZXJ2ZU9uT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gIGluaGVyaXRzKE9ic2VydmVPbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIE9ic2VydmVPbk9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gIH1cblxuICBPYnNlcnZlT25PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBPYnNlcnZlT25PYnNlcnZlcih0aGlzLl9zLCBvKSk7XG4gIH07XG5cbiAgcmV0dXJuIE9ic2VydmVPbk9ic2VydmFibGU7XG59KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgIC8qKlxuICAgKiAgV3JhcHMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbiBvcmRlciB0byBydW4gaXRzIG9ic2VydmVyIGNhbGxiYWNrcyBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICpcbiAgICogIFRoaXMgb25seSBpbnZva2VzIG9ic2VydmVyIGNhbGxiYWNrcyBvbiBhIHNjaGVkdWxlci4gSW4gY2FzZSB0aGUgc3Vic2NyaXB0aW9uIGFuZC9vciB1bnN1YnNjcmlwdGlvbiBhY3Rpb25zIGhhdmUgc2lkZS1lZmZlY3RzXG4gICAqICB0aGF0IHJlcXVpcmUgdG8gYmUgcnVuIG9uIGEgc2NoZWR1bGVyLCB1c2Ugc3Vic2NyaWJlT24uXG4gICAqXG4gICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBub3RpZnkgb2JzZXJ2ZXJzIG9uLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2hvc2Ugb2JzZXJ2YXRpb25zIGhhcHBlbiBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5vYnNlcnZlT24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZlT25PYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFN1YnNjcmliZU9uT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3Vic2NyaWJlT25PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzY2hlZHVsZXIsIHN0YXRlKSB7XG4gICAgICB2YXIgc291cmNlID0gc3RhdGVbMF0sIGQgPSBzdGF0ZVsxXSwgbyA9IHN0YXRlWzJdO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKG5ldyBTY2hlZHVsZWREaXNwb3NhYmxlKHNjaGVkdWxlciwgc291cmNlLnN1YnNjcmliZShvKSkpO1xuICAgIH1cblxuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBkID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnNjaGVkdWxlKFt0aGlzLnNvdXJjZSwgZCwgb10sIHNjaGVkdWxlTWV0aG9kKSk7XG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1YnNjcmliZU9uT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gICAvKipcbiAgICogIFdyYXBzIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW4gb3JkZXIgdG8gcnVuIGl0cyBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIGxvZ2ljIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLiBUaGlzIG9wZXJhdGlvbiBpcyBub3QgY29tbW9ubHkgdXNlZDtcbiAgICogIHNlZSB0aGUgcmVtYXJrcyBzZWN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBkaXN0aW5jdGlvbiBiZXR3ZWVuIHN1YnNjcmliZU9uIGFuZCBvYnNlcnZlT24uXG5cbiAgICogIFRoaXMgb25seSBwZXJmb3JtcyB0aGUgc2lkZS1lZmZlY3RzIG9mIHN1YnNjcmlwdGlvbiBhbmQgdW5zdWJzY3JpcHRpb24gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuIEluIG9yZGVyIHRvIGludm9rZSBvYnNlcnZlclxuICAgKiAgY2FsbGJhY2tzIG9uIGEgc2NoZWR1bGVyLCB1c2Ugb2JzZXJ2ZU9uLlxuXG4gICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBwZXJmb3JtIHN1YnNjcmlwdGlvbiBhbmQgdW5zdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdob3NlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucyBoYXBwZW4gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGUodGhpcywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRnJvbVByb21pc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21Qcm9taXNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGcm9tUHJvbWlzZU9ic2VydmFibGUocCwgcykge1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTmV4dChzLCBzdGF0ZSkge1xuICAgICAgdmFyIG8gPSBzdGF0ZVswXSwgZGF0YSA9IHN0YXRlWzFdO1xuICAgICAgby5vbk5leHQoZGF0YSk7XG4gICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVFcnJvcihzLCBzdGF0ZSkge1xuICAgICAgdmFyIG8gPSBzdGF0ZVswXSwgZXJyID0gc3RhdGVbMV07XG4gICAgICBvLm9uRXJyb3IoZXJyKTtcbiAgICB9XG5cbiAgICBGcm9tUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIHNlbGYgPSB0aGlzLCBwID0gdGhpcy5fcDtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24ocCkpIHtcbiAgICAgICAgcCA9IHRyeUNhdGNoKHApKCk7XG4gICAgICAgIGlmIChwID09PSBlcnJvck9iaikge1xuICAgICAgICAgIG8ub25FcnJvcihwLmUpO1xuICAgICAgICAgIHJldHVybiBzYWQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcFxuICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNlbGYuX3Muc2NoZWR1bGUoW28sIGRhdGFdLCBzY2hlZHVsZU5leHQpKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNlbGYuX3Muc2NoZWR1bGUoW28sIGVycl0sIHNjaGVkdWxlRXJyb3IpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzYWQ7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tUHJvbWlzZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiBDb252ZXJ0cyBhIFByb21pc2UgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAqIEBwYXJhbSB7UHJvbWlzZX0gQW4gRVM2IENvbXBsaWFudCBwcm9taXNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIHdyYXBzIHRoZSBleGlzdGluZyBwcm9taXNlIHN1Y2Nlc3MgYW5kIGZhaWx1cmUuXG4gICovXG4gIHZhciBvYnNlcnZhYmxlRnJvbVByb21pc2UgPSBPYnNlcnZhYmxlLmZyb21Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2UsIHNjaGVkdWxlcikge1xuICAgIHNjaGVkdWxlciB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tUHJvbWlzZU9ic2VydmFibGUocHJvbWlzZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKlxuICAgKiBDb252ZXJ0cyBhbiBleGlzdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIEVTNiBDb21wYXRpYmxlIFByb21pc2VcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHByb21pc2UgPSBSeC5PYnNlcnZhYmxlLnJldHVybig0MikudG9Qcm9taXNlKFJTVlAuUHJvbWlzZSk7XG4gICAqXG4gICAqIC8vIFdpdGggY29uZmlnXG4gICAqIFJ4LmNvbmZpZy5Qcm9taXNlID0gUlNWUC5Qcm9taXNlO1xuICAgKiB2YXIgcHJvbWlzZSA9IFJ4Lk9ic2VydmFibGUucmV0dXJuKDQyKS50b1Byb21pc2UoKTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Byb21pc2VDdG9yXSBUaGUgY29uc3RydWN0b3Igb2YgdGhlIHByb21pc2UuIElmIG5vdCBwcm92aWRlZCwgaXQgbG9va3MgZm9yIGl0IGluIFJ4LmNvbmZpZy5Qcm9taXNlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQW4gRVM2IGNvbXBhdGlibGUgcHJvbWlzZSB3aXRoIHRoZSBsYXN0IHZhbHVlIGZyb20gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2VDdG9yKSB7XG4gICAgcHJvbWlzZUN0b3IgfHwgKHByb21pc2VDdG9yID0gUnguY29uZmlnLlByb21pc2UpO1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHsgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCdQcm9taXNlIHR5cGUgbm90IHByb3ZpZGVkIG5vciBpbiBSeC5jb25maWcuUHJvbWlzZScpOyB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAvLyBObyBjYW5jZWxsYXRpb24gY2FuIGJlIGRvbmVcbiAgICAgIHZhciB2YWx1ZTtcbiAgICAgIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFsdWUgPSB2O1xuICAgICAgfSwgcmVqZWN0LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIFRvQXJyYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvQXJyYXlPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb0FycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmEgPSBbXTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuYS5wdXNoKHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7ICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vLm9uTmV4dCh0aGlzLmEpOyB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBUb0FycmF5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIENyZWF0ZXMgYW4gYXJyYXkgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIGEgbGlzdCBjb250YWluaW5nIGFsbCB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBUb0FycmF5T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGEgc3BlY2lmaWVkIHN1YnNjcmliZSBtZXRob2QgaW1wbGVtZW50YXRpb24uXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5jcmVhdGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIFJ4LkRpc3Bvc2FibGUuZW1wdHk7IH0gKTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgfSApO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzdWJzY3JpYmUgSW1wbGVtZW50YXRpb24gb2YgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlJ3Mgc3Vic2NyaWJlIG1ldGhvZCwgcmV0dXJuaW5nIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIHdyYXBwZWQgaW4gYSBEaXNwb3NhYmxlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGltcGxlbWVudGF0aW9uIGZvciB0aGUgU3Vic2NyaWJlIG1ldGhvZC5cbiAgICovXG4gIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSwgcGFyZW50KSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KTtcbiAgfTtcblxuICB2YXIgRGVmZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVmZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVmZXIoZmFjdG9yeSkge1xuICAgICAgdGhpcy5fZiA9IGZhY3Rvcnk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWZlci5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZikoKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocmVzdWx0LmUpLnN1YnNjcmliZShvKTt9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdC5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZlcjtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaW52b2tlcyB0aGUgc3BlY2lmaWVkIGZhY3RvcnkgZnVuY3Rpb24gd2hlbmV2ZXIgYSBuZXcgb2JzZXJ2ZXIgc3Vic2NyaWJlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmRlZmVyKGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUuZnJvbUFycmF5KFsxLDIsM10pOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgT2JzZXJ2YWJsZSBmYWN0b3J5IGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBvYnNlcnZlciB0aGF0IHN1YnNjcmliZXMgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBvciBQcm9taXNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgdHJpZ2dlciBhbiBpbnZvY2F0aW9uIG9mIHRoZSBnaXZlbiBvYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZURlZmVyID0gT2JzZXJ2YWJsZS5kZWZlciA9IGZ1bmN0aW9uIChvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgRGVmZXIob2JzZXJ2YWJsZUZhY3RvcnkpO1xuICB9O1xuXG4gIHZhciBFbXB0eU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRW1wdHlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEVtcHR5T2JzZXJ2YWJsZShzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRW1wdHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgc2luayA9IG5ldyBFbXB0eVNpbmsob2JzZXJ2ZXIsIHRoaXMuc2NoZWR1bGVyKTtcbiAgICAgIHJldHVybiBzaW5rLnJ1bigpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBFbXB0eVNpbmsob2JzZXJ2ZXIsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5vbkNvbXBsZXRlZCgpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBFbXB0eVNpbmsucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHRoaXMub2JzZXJ2ZXI7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG4gICAgICAgIHNjaGVkdWxlSXRlbShudWxsLCBzdGF0ZSkgOlxuICAgICAgICB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVtcHR5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBFTVBUWV9PQlNFUlZBQkxFID0gbmV3IEVtcHR5T2JzZXJ2YWJsZShpbW1lZGlhdGVTY2hlZHVsZXIpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIE9uQ29tcGxldGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eSgpO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZW1wdHkoUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHRlcm1pbmF0aW9uIGNhbGwgb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggbm8gZWxlbWVudHMuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUVtcHR5ID0gT2JzZXJ2YWJsZS5lbXB0eSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgIHJldHVybiBzY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/IEVNUFRZX09CU0VSVkFCTEUgOiBuZXcgRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBmbiwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9pdGVyYWJsZSA9IGl0ZXJhYmxlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlTWV0aG9kKG8sIGl0LCBmbikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoaSwgcmVjdXJzZSkge1xuICAgICAgICB2YXIgbmV4dCA9IHRyeUNhdGNoKGl0Lm5leHQpLmNhbGwoaXQpO1xuICAgICAgICBpZiAobmV4dCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihuZXh0LmUpOyB9XG4gICAgICAgIGlmIChuZXh0LmRvbmUpIHsgcmV0dXJuIG8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAgIHZhciByZXN1bHQgPSBuZXh0LnZhbHVlO1xuXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdCA9IHRyeUNhdGNoKGZuKShyZXN1bHQsIGkpO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIH1cblxuICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRnJvbU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxpc3QgPSBPYmplY3QodGhpcy5faXRlcmFibGUpLFxuICAgICAgICAgIGl0ID0gZ2V0SXRlcmFibGUobGlzdCk7XG5cbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoMCwgY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIHRoaXMuX2ZuKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmFibGUocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICB9XG5cbiAgU3RyaW5nSXRlcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3RyaW5nSXRlcmF0b3IodGhpcy5fcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RyaW5nSXRlcmF0b3Iocykge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2wgPSBzLmxlbmd0aDtcbiAgICB0aGlzLl9pID0gMDtcbiAgfVxuXG4gIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBTdHJpbmdJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fcy5jaGFyQXQodGhpcy5faSsrKSB9IDogZG9uZUVudW1lcmF0b3I7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYWJsZShhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gIH1cblxuICBBcnJheUl0ZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5SXRlcmF0b3IodGhpcy5fYSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gQXJyYXlJdGVyYXRvcihhKSB7XG4gICAgdGhpcy5fYSA9IGE7XG4gICAgdGhpcy5fbCA9IHRvTGVuZ3RoKGEpO1xuICAgIHRoaXMuX2kgPSAwO1xuICB9XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgQXJyYXlJdGVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5faSA8IHRoaXMuX2wgPyB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdGhpcy5fYVt0aGlzLl9pKytdIH0gOiBkb25lRW51bWVyYXRvcjtcbiAgfTtcblxuICBmdW5jdGlvbiBudW1iZXJJc0Zpbml0ZSh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmIHJvb3QuaXNGaW5pdGUodmFsdWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOYW4obikge1xuICAgIHJldHVybiBuICE9PSBuO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SXRlcmFibGUobykge1xuICAgIHZhciBpID0gb1skaXRlcmF0b3IkXSwgaXQ7XG4gICAgaWYgKCFpICYmIHR5cGVvZiBvID09PSAnc3RyaW5nJykge1xuICAgICAgaXQgPSBuZXcgU3RyaW5nSXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGl0ID0gbmV3IEFycmF5SXRlcmFibGUobyk7XG4gICAgICByZXR1cm4gaXRbJGl0ZXJhdG9yJF0oKTtcbiAgICB9XG4gICAgaWYgKCFpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdCBpcyBub3QgaXRlcmFibGUnKTsgfVxuICAgIHJldHVybiBvWyRpdGVyYXRvciRdKCk7XG4gIH1cblxuICBmdW5jdGlvbiBzaWduKHZhbHVlKSB7XG4gICAgdmFyIG51bWJlciA9ICt2YWx1ZTtcbiAgICBpZiAobnVtYmVyID09PSAwKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICBpZiAoaXNOYU4obnVtYmVyKSkgeyByZXR1cm4gbnVtYmVyOyB9XG4gICAgcmV0dXJuIG51bWJlciA8IDAgPyAtMSA6IDE7XG4gIH1cblxuICBmdW5jdGlvbiB0b0xlbmd0aChvKSB7XG4gICAgdmFyIGxlbiA9ICtvLmxlbmd0aDtcbiAgICBpZiAoaXNOYU4obGVuKSkgeyByZXR1cm4gMDsgfVxuICAgIGlmIChsZW4gPT09IDAgfHwgIW51bWJlcklzRmluaXRlKGxlbikpIHsgcmV0dXJuIGxlbjsgfVxuICAgIGxlbiA9IHNpZ24obGVuKSAqIE1hdGguZmxvb3IoTWF0aC5hYnMobGVuKSk7XG4gICAgaWYgKGxlbiA8PSAwKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGxlbiA+IG1heFNhZmVJbnRlZ2VyKSB7IHJldHVybiBtYXhTYWZlSW50ZWdlcjsgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICAvKipcbiAgKiBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhbiBhcnJheS1saWtlIG9yIGl0ZXJhYmxlIG9iamVjdC5cbiAgKiBAcGFyYW0ge0FueX0gYXJyYXlMaWtlIEFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0IHRvIGNvbnZlcnQgdG8gYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbbWFwRm5dIE1hcCBmdW5jdGlvbiB0byBjYWxsIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGFycmF5LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gVGhlIGNvbnRleHQgdG8gdXNlIGNhbGxpbmcgdGhlIG1hcEZuIGlmIHByb3ZpZGVkLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBPcHRpb25hbCBzY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nLiAgSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuY3VycmVudFRocmVhZC5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tID0gT2JzZXJ2YWJsZS5mcm9tID0gZnVuY3Rpb24gKGl0ZXJhYmxlLCBtYXBGbiwgdGhpc0FyZywgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGl0ZXJhYmxlID09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaXRlcmFibGUgY2Fubm90IGJlIG51bGwuJylcbiAgICB9XG4gICAgaWYgKG1hcEZuICYmICFpc0Z1bmN0aW9uKG1hcEZuKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdtYXBGbiB3aGVuIHByb3ZpZGVkIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgIH1cbiAgICBpZiAobWFwRm4pIHtcbiAgICAgIHZhciBtYXBwZXIgPSBiaW5kQ2FsbGJhY2sobWFwRm4sIHRoaXNBcmcsIDIpO1xuICAgIH1cbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21PYnNlcnZhYmxlKGl0ZXJhYmxlLCBtYXBwZXIsIHNjaGVkdWxlcik7XG4gIH1cblxuICB2YXIgRnJvbUFycmF5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGcm9tQXJyYXlPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZyb21BcnJheU9ic2VydmFibGUoYXJncywgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLl9hcmdzID0gYXJncztcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKG8sIGFyZ3MpIHtcbiAgICAgIHZhciBsZW4gPSBhcmdzLmxlbmd0aDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlIChpLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChpIDwgbGVuKSB7XG4gICAgICAgICAgby5vbk5leHQoYXJnc1tpXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIEZyb21BcnJheU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9hcmdzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGcm9tQXJyYXlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIENvbnZlcnRzIGFuIGFycmF5IHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIGFuIG9wdGlvbmFsIHNjaGVkdWxlciB0byBlbnVtZXJhdGUgdGhlIGFycmF5LlxuICAqIEBkZXByZWNhdGVkIHVzZSBPYnNlcnZhYmxlLmZyb20gb3IgT2JzZXJ2YWJsZS5vZlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gZW51bWVyYWJsZSBzZXF1ZW5jZS5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tQXJyYXkgPSBPYnNlcnZhYmxlLmZyb21BcnJheSA9IGZ1bmN0aW9uIChhcnJheSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpXG4gIH07XG5cbiAgdmFyIEdlbmVyYXRlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR2VuZXJhdGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEdlbmVyYXRlT2JzZXJ2YWJsZShzdGF0ZSwgY25kRm4sIGl0ckZuLCByZXNGbiwgcykge1xuICAgICAgdGhpcy5faW5pdGlhbFN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9jbmRGbiA9IGNuZEZuO1xuICAgICAgdGhpcy5faXRyRm4gPSBpdHJGbjtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuZmlyc3QpIHtcbiAgICAgICAgc3RhdGUuZmlyc3QgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm5ld1N0YXRlID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5faXRyRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLm5ld1N0YXRlID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHN0YXRlLm5ld1N0YXRlLmUpOyB9XG4gICAgICB9XG4gICAgICB2YXIgaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChoYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IoaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoaGFzUmVzdWx0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9yZXNGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICBzdGF0ZS5vLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICByZWN1cnNlKHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBHZW5lcmF0ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBmaXJzdDogdHJ1ZSxcbiAgICAgICAgbmV3U3RhdGU6IHRoaXMuX2luaXRpYWxTdGF0ZVxuICAgICAgfTtcbiAgICAgIHJldHVybiB0aGlzLl9zLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZVJlY3Vyc2l2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBHZW5lcmF0ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHJ1bm5pbmcgYSBzdGF0ZS1kcml2ZW4gbG9vcCBwcm9kdWNpbmcgdGhlIHNlcXVlbmNlJ3MgZWxlbWVudHMsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZ2VuZXJhdGUoMCwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggPCAxMDsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5nZW5lcmF0ZSgwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA8IDEwOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LCBSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxTdGF0ZSBJbml0aWFsIHN0YXRlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIGZvciByZXN1bHRzIHByb2R1Y2VkIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIGdlbmVyYXRlZCBzZXF1ZW5jZS5cbiAgICovXG4gIE9ic2VydmFibGUuZ2VuZXJhdGUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEdlbmVyYXRlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZU9mIChzY2hlZHVsZXIsIGFycmF5KSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFycmF5LCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgLyoqXG4gICogIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBpbnN0YW5jZSB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZiBudW1iZXIgb3IgdHlwZSBvZiB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAqICBUaGlzIG1ldGhvZCBjcmVhdGVzIGEgbmV3IE9ic2VydmFibGUgaW5zdGFuY2Ugd2l0aCBhIHZhcmlhYmxlIG51bWJlciBvZiBhcmd1bWVudHMsIHJlZ2FyZGxlc3Mgb2YgbnVtYmVyIG9yIHR5cGUgb2YgdGhlIGFyZ3VtZW50cy5cbiAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIEEgc2NoZWR1bGVyIHRvIHVzZSBmb3Igc2NoZWR1bGluZyB0aGUgYXJndW1lbnRzLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgcHVsbGVkIGZyb20gdGhlIGdpdmVuIGFyZ3VtZW50cy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5vZldpdGhTY2hlZHVsZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgZm9yKHZhciBpID0gMTsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIG5ldyBGcm9tQXJyYXlPYnNlcnZhYmxlKGFyZ3MsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGNoYW5nZXMgdG8gYW4gYXJyYXkgdXNpbmcgQXJyYXkub2JzZXJ2ZS5cbiAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgQW4gYXJyYXkgdG8gb2JzZXJ2ZSBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGNoYW5nZXMgdG8gYW4gYXJyYXkgZnJvbSBBcnJheS5vYnNlcnZlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5vZkFycmF5Q2hhbmdlcyA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGFycmF5KSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5vYnNlcnZlIG9ubHkgYWNjZXB0cyBhcnJheXMuJyk7IH1cbiAgICBpZiAodHlwZW9mIEFycmF5Lm9ic2VydmUgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIEFycmF5LnVub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcnJheS5vYnNlcnZlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBwbGF0Zm9ybScpIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIGZ1bmN0aW9uIG9ic2VydmVyRm4oY2hhbmdlcykge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBjaGFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNoYW5nZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIEFycmF5Lm9ic2VydmUoYXJyYXksIG9ic2VydmVyRm4pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBBcnJheS51bm9ic2VydmUoYXJyYXksIG9ic2VydmVyRm4pO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gY2hhbmdlcyB0byBhbiBvYmplY3QgdXNpbmcgT2JqZWN0Lm9ic2VydmUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogQW4gb2JqZWN0IHRvIG9ic2VydmUgY2hhbmdlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBjaGFuZ2VzIHRvIGFuIG9iamVjdCBmcm9tIE9iamVjdC5vYnNlcnZlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5vZk9iamVjdENoYW5nZXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqID09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignb2JqZWN0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkLicpOyB9XG4gICAgaWYgKHR5cGVvZiBPYmplY3Qub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgT2JqZWN0LnVub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qub2JzZXJ2ZSBpcyBub3Qgc3VwcG9ydGVkIG9uIHlvdXIgcGxhdGZvcm0nKSB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICBmdW5jdGlvbiBvYnNlcnZlckZuKGNoYW5nZXMpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gY2hhbmdlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChjaGFuZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBPYmplY3Qub2JzZXJ2ZShvYmosIG9ic2VydmVyRm4pO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICBPYmplY3QudW5vYnNlcnZlKG9iaiwgb2JzZXJ2ZXJGbik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciBOZXZlck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTmV2ZXJPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE5ldmVyT2JzZXJ2YWJsZSgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE5ldmVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5ldmVyT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBORVZFUl9PQlNFUlZBQkxFID0gbmV3IE5ldmVyT2JzZXJ2YWJsZSgpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9uLXRlcm1pbmF0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UsIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGRlbm90ZSBhbiBpbmZpbml0ZSBkdXJhdGlvbiAoZS5nLiB3aGVuIHVzaW5nIHJlYWN0aXZlIGpvaW5zKS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2Ugb2JzZXJ2ZXJzIHdpbGwgbmV2ZXIgZ2V0IGNhbGxlZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlTmV2ZXIgPSBPYnNlcnZhYmxlLm5ldmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBORVZFUl9PQlNFUlZBQkxFO1xuICB9O1xuXG4gIHZhciBQYWlyc09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGFpcnNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhaXJzT2JzZXJ2YWJsZShvLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fa2V5cyA9IE9iamVjdC5rZXlzKG8pO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qobywgb2JqLCBrZXlzKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChpIDwga2V5cy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBvLm9uTmV4dChba2V5LCBvYmpba2V5XV0pO1xuICAgICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBQYWlyc09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBzY2hlZHVsZU1ldGhvZChvLCB0aGlzLl9vLCB0aGlzLl9rZXlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYWlyc09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ29udmVydCBhbiBvYmplY3QgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBlbnVtZXJhdGlvbiBvZiB0aGUgaW5wdXQgc2VxdWVuY2Ugb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIFtrZXksIHZhbHVlXSBwYWlycyBmcm9tIHRoZSBvYmplY3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLnBhaXJzID0gZnVuY3Rpb24gKG9iaiwgc2NoZWR1bGVyKSB7XG4gICAgc2NoZWR1bGVyIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFBhaXJzT2JzZXJ2YWJsZShvYmosIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgICB2YXIgUmFuZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJhbmdlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSYW5nZU9ic2VydmFibGUoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICAgIHRoaXMucmFuZ2VDb3VudCA9IGNvdW50O1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKHN0YXJ0LCBjb3VudCwgbykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3AgKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBjb3VudCkge1xuICAgICAgICAgIG8ub25OZXh0KHN0YXJ0ICsgaSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIFJhbmdlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoXG4gICAgICAgIDAsXG4gICAgICAgIGxvb3BSZWN1cnNpdmUodGhpcy5zdGFydCwgdGhpcy5yYW5nZUNvdW50LCBvKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJhbmdlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBpbnRlZ3JhbCBudW1iZXJzIHdpdGhpbiBhIHNwZWNpZmllZCByYW5nZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICogQHBhcmFtIHtOdW1iZXJ9IHN0YXJ0IFRoZSB2YWx1ZSBvZiB0aGUgZmlyc3QgaW50ZWdlciBpbiB0aGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IFRoZSBudW1iZXIgb2Ygc2VxdWVudGlhbCBpbnRlZ2VycyB0byBnZW5lcmF0ZS5cbiAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3Agb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSByYW5nZSBvZiBzZXF1ZW50aWFsIGludGVncmFsIG51bWJlcnMuXG4gICovXG4gIE9ic2VydmFibGUucmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQsIGNvdW50LCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFJlcGVhdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVwZWF0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnJlcGVhdENvdW50ID0gcmVwZWF0Q291bnQgPT0gbnVsbCA/IC0xIDogcmVwZWF0Q291bnQ7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlcGVhdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzaW5rID0gbmV3IFJlcGVhdFNpbmsob2JzZXJ2ZXIsIHRoaXMpO1xuICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBlYXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgZnVuY3Rpb24gUmVwZWF0U2luayhvYnNlcnZlciwgcGFyZW50KSB7XG4gICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICB9XG5cbiAgUmVwZWF0U2luay5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYnNlcnZlciA9IHRoaXMub2JzZXJ2ZXIsIHZhbHVlID0gdGhpcy5wYXJlbnQudmFsdWU7XG4gICAgZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICBpZiAoaSA9PT0gLTEgfHwgaSA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgaSA+IDAgJiYgaS0tO1xuICAgICAgfVxuICAgICAgaWYgKGkgPT09IDApIHsgcmV0dXJuIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgIHJlY3Vyc2UoaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyZW50LnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSh0aGlzLnBhcmVudC5yZXBlYXRDb3VudCwgbG9vcFJlY3Vyc2l2ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHJlcGVhdHMgdGhlIGdpdmVuIGVsZW1lbnQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBFbGVtZW50IHRvIHJlcGVhdC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHJlcGVhdENvdW50IFtPcHRpb25hXSBOdW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkLCByZXBlYXRzIGluZGVmaW5pdGVseS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gcnVuIHRoZSBwcm9kdWNlciBsb29wIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHJlcGVhdHMgdGhlIGdpdmVuIGVsZW1lbnQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuXG4gICAqL1xuICBPYnNlcnZhYmxlLnJlcGVhdCA9IGZ1bmN0aW9uICh2YWx1ZSwgcmVwZWF0Q291bnQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUmVwZWF0T2JzZXJ2YWJsZSh2YWx1ZSwgcmVwZWF0Q291bnQsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEp1c3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEp1c3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEp1c3RPYnNlcnZhYmxlKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBKdXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSBbdGhpcy5fdmFsdWUsIG9dO1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgdmFsdWUgPSBzdGF0ZVswXSwgb2JzZXJ2ZXIgPSBzdGF0ZVsxXTtcbiAgICAgIG9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICByZXR1cm4gSnVzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIGEgc2luZ2xlIGVsZW1lbnQsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IG9ic2VydmVyIG1lc3NhZ2VzLlxuICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgY2FsbGVkICdqdXN0JyBvciBicm93c2VycyA8SUU5LlxuICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBTaW5nbGUgZWxlbWVudCBpbiB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHNlbmQgdGhlIHNpbmdsZSBlbGVtZW50IG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBzaW5nbGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVJldHVybiA9IE9ic2VydmFibGVbJ3JldHVybiddID0gT2JzZXJ2YWJsZS5qdXN0ID0gZnVuY3Rpb24gKHZhbHVlLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgSnVzdE9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFRocm93T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaHJvd09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGhyb3dPYnNlcnZhYmxlKGVycm9yLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaHJvd09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0gW3RoaXMuX2Vycm9yLCBvXTtcbiAgICAgIHJldHVybiB0aGlzLl9zY2hlZHVsZXIgPT09IGltbWVkaWF0ZVNjaGVkdWxlciA/XG4gICAgICAgIHNjaGVkdWxlSXRlbShudWxsLCBzdGF0ZSkgOlxuICAgICAgICB0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNjaGVkdWxlSXRlbSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlSXRlbShzLCBzdGF0ZSkge1xuICAgICAgdmFyIGUgPSBzdGF0ZVswXSwgbyA9IHN0YXRlWzFdO1xuICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICByZXR1cm4gVGhyb3dPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIHdpdGggYW4gZXhjZXB0aW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCB0aGUgc2luZ2xlIG9uRXJyb3IgbWVzc2FnZS5cbiAgICogIFRoZXJlIGlzIGFuIGFsaWFzIHRvIHRoaXMgbWV0aG9kIGNhbGxlZCAndGhyb3dFcnJvcicgZm9yIGJyb3dzZXJzIDxJRTkuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIEFuIG9iamVjdCB1c2VkIGZvciB0aGUgc2VxdWVuY2UncyB0ZXJtaW5hdGlvbi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgZXhjZXB0aW9uYWwgdGVybWluYXRpb24gY2FsbCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmltbWVkaWF0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgdGVybWluYXRlcyBleGNlcHRpb25hbGx5IHdpdGggdGhlIHNwZWNpZmllZCBleGNlcHRpb24gb2JqZWN0LlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVUaHJvdyA9IE9ic2VydmFibGVbJ3Rocm93J10gPSBmdW5jdGlvbiAoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFVzaW5nT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVXNpbmdPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFVzaW5nT2JzZXJ2YWJsZShyZXNGbiwgb2JzRm4pIHtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl9vYnNGbiA9IG9ic0ZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVXNpbmdPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkaXNwb3NhYmxlID0gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgdmFyIHJlc291cmNlID0gdHJ5Q2F0Y2godGhpcy5fcmVzRm4pKCk7XG4gICAgICBpZiAocmVzb3VyY2UgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShvYnNlcnZhYmxlVGhyb3cocmVzb3VyY2UuZSkuc3Vic2NyaWJlKG8pLCBkaXNwb3NhYmxlKTtcbiAgICAgIH1cbiAgICAgIHJlc291cmNlICYmIChkaXNwb3NhYmxlID0gcmVzb3VyY2UpO1xuICAgICAgdmFyIHNvdXJjZSA9IHRyeUNhdGNoKHRoaXMuX29ic0ZuKShyZXNvdXJjZSk7XG4gICAgICBpZiAoc291cmNlID09PSBlcnJvck9iaikge1xuICAgICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUob2JzZXJ2YWJsZVRocm93KHNvdXJjZS5lKS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVXNpbmdPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGRlcGVuZHMgb24gYSByZXNvdXJjZSBvYmplY3QsIHdob3NlIGxpZmV0aW1lIGlzIHRpZWQgdG8gdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlJ3MgbGlmZXRpbWUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc291cmNlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIHRvIG9idGFpbiBhIHJlc291cmNlIG9iamVjdC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2JzZXJ2YWJsZUZhY3RvcnkgRmFjdG9yeSBmdW5jdGlvbiB0byBvYnRhaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGRlcGVuZHMgb24gdGhlIG9idGFpbmVkIHJlc291cmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBsaWZldGltZSBjb250cm9scyB0aGUgbGlmZXRpbWUgb2YgdGhlIGRlcGVuZGVudCByZXNvdXJjZSBvYmplY3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLnVzaW5nID0gZnVuY3Rpb24gKHJlc291cmNlRmFjdG9yeSwgb2JzZXJ2YWJsZUZhY3RvcnkpIHtcbiAgICByZXR1cm4gbmV3IFVzaW5nT2JzZXJ2YWJsZShyZXNvdXJjZUZhY3RvcnksIG9ic2VydmFibGVGYWN0b3J5KTtcbiAgfTtcblxuICAvKipcbiAgICogUHJvcGFnYXRlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgcmVhY3RzIGZpcnN0LlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHJpZ2h0U291cmNlIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHN1cmZhY2VzIGVpdGhlciBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2VzLCB3aGljaGV2ZXIgcmVhY3RlZCBmaXJzdC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hbWIgPSBmdW5jdGlvbiAocmlnaHRTb3VyY2UpIHtcbiAgICB2YXIgbGVmdFNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGNob2ljZSxcbiAgICAgICAgbGVmdENob2ljZSA9ICdMJywgcmlnaHRDaG9pY2UgPSAnUicsXG4gICAgICAgIGxlZnRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgcmlnaHRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgaXNQcm9taXNlKHJpZ2h0U291cmNlKSAmJiAocmlnaHRTb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmlnaHRTb3VyY2UpKTtcblxuICAgICAgZnVuY3Rpb24gY2hvaWNlTCgpIHtcbiAgICAgICAgaWYgKCFjaG9pY2UpIHtcbiAgICAgICAgICBjaG9pY2UgPSBsZWZ0Q2hvaWNlO1xuICAgICAgICAgIHJpZ2h0U3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaG9pY2VSKCkge1xuICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgIGNob2ljZSA9IHJpZ2h0Q2hvaWNlO1xuICAgICAgICAgIGxlZnRTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBsZWZ0U3Vic2NyaWJlID0gb2JzZXJ2ZXJDcmVhdGUoXG4gICAgICAgIGZ1bmN0aW9uIChsZWZ0KSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbk5leHQobGVmdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2hvaWNlTCgpO1xuICAgICAgICAgIGNob2ljZSA9PT0gbGVmdENob2ljZSAmJiBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgdmFyIHJpZ2h0U3Vic2NyaWJlID0gb2JzZXJ2ZXJDcmVhdGUoXG4gICAgICAgIGZ1bmN0aW9uIChyaWdodCkge1xuICAgICAgICAgIGNob2ljZVIoKTtcbiAgICAgICAgICBjaG9pY2UgPT09IHJpZ2h0Q2hvaWNlICYmIG9ic2VydmVyLm9uTmV4dChyaWdodCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNob2ljZVIoKTtcbiAgICAgICAgICBjaG9pY2UgPT09IHJpZ2h0Q2hvaWNlICYmIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGxlZnRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShsZWZ0U291cmNlLnN1YnNjcmliZShsZWZ0U3Vic2NyaWJlKSk7XG4gICAgICByaWdodFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHJpZ2h0U291cmNlLnN1YnNjcmliZShyaWdodFN1YnNjcmliZSkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFtYihwLCBjKSB7IHJldHVybiBwLmFtYihjKTsgfVxuXG4gIC8qKlxuICAgKiBQcm9wYWdhdGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCByZWFjdHMgZmlyc3QuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgYW55IG9mIHRoZSBnaXZlbiBzZXF1ZW5jZXMsIHdoaWNoZXZlciByZWFjdGVkIGZpcnN0LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5hbWIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFjYyA9IG9ic2VydmFibGVOZXZlcigpLCBpdGVtcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpdGVtcyA9IG5ldyBBcnJheShpdGVtcyk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgaXRlbXNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGl0ZW1zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBhY2MgPSBhbWIoYWNjLCBpdGVtc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH07XG5cbiAgdmFyIENhdGNoT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENhdGNoT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGQxID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkMSk7XG4gICAgICBkMS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgQ2F0Y2hPYnNlcnZlcihvLCBzdWJzY3JpcHRpb24sIHRoaXMuX2ZuKSkpO1xuICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhdGNoT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDYXRjaE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENhdGNoT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZlcihvLCBzLCBmbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fby5vbk5leHQoeCk7IH07XG4gICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuICAgIENhdGNoT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mbikoZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX3Muc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShyZXN1bHQuc3Vic2NyaWJlKHRoaXMuX28pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENhdGNoT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtNaXhlZH0gaGFuZGxlck9yU2Vjb25kIEV4Y2VwdGlvbiBoYW5kbGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGdpdmVuIHRoZSBlcnJvciB0aGF0IG9jY3VycmVkIGluIHRoZSBmaXJzdCBzZXF1ZW5jZSwgb3IgYSBzZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHByb2R1Y2UgcmVzdWx0cyB3aGVuIGFuIGVycm9yIG9jY3VycmVkIGluIHRoZSBmaXJzdCBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZmlyc3Qgc2VxdWVuY2UncyBlbGVtZW50cywgZm9sbG93ZWQgYnkgdGhlIGVsZW1lbnRzIG9mIHRoZSBoYW5kbGVyIHNlcXVlbmNlIGluIGNhc2UgYW4gZXhjZXB0aW9uIG9jY3VycmVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydjYXRjaCddID0gZnVuY3Rpb24gKGhhbmRsZXJPclNlY29uZCkge1xuICAgIHJldHVybiBpc0Z1bmN0aW9uKGhhbmRsZXJPclNlY29uZCkgPyBuZXcgQ2F0Y2hPYnNlcnZhYmxlKHRoaXMsIGhhbmRsZXJPclNlY29uZCkgOiBvYnNlcnZhYmxlQ2F0Y2goW3RoaXMsIGhhbmRsZXJPclNlY29uZF0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gdXNlIGFzIHRoZSBuZXh0IHNlcXVlbmNlIGlmIGFuIGVycm9yIG9jY3Vycy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBlbGVtZW50cyBmcm9tIGNvbnNlY3V0aXZlIHNvdXJjZSBzZXF1ZW5jZXMgdW50aWwgYSBzb3VyY2Ugc2VxdWVuY2UgdGVybWluYXRlcyBzdWNjZXNzZnVsbHkuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUNhdGNoID0gT2JzZXJ2YWJsZVsnY2F0Y2gnXSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaXRlbXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgaXRlbXMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgaXRlbXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBpdGVtc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gZW51bWVyYWJsZU9mKGl0ZW1zKS5jYXRjaEVycm9yKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFueSBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgUHJvbWlzZXMgcHJvZHVjZXMgYW4gZWxlbWVudC5cbiAgICogVGhpcyBjYW4gYmUgaW4gdGhlIGZvcm0gb2YgYW4gYXJndW1lbnQgbGlzdCBvZiBvYnNlcnZhYmxlcyBvciBhbiBhcnJheS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogMSAtIG9icyA9IG9ic2VydmFibGUuY29tYmluZUxhdGVzdChvYnMxLCBvYnMyLCBvYnMzLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcbiAgICogMiAtIG9icyA9IG9ic2VydmFibGUuY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbWJpbmVMYXRlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICBhcmdzWzBdLnVuc2hpZnQodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbWJpbmVMYXRlc3QuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gYXJndW1lbnRzVG9BcnJheSgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICB2YXIgQ29tYmluZUxhdGVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29tYmluZUxhdGVzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9ic2VydmFibGUocGFyYW1zLCBjYikge1xuICAgICAgdGhpcy5fcGFyYW1zID0gcGFyYW1zO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBsZW4gPSB0aGlzLl9wYXJhbXMubGVuZ3RoLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcblxuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuICAgICAgICBpc0RvbmU6IGFycmF5SW5pdGlhbGl6ZShsZW4sIGZhbHNlRmFjdG9yeSksXG4gICAgICAgIHZhbHVlczogbmV3IEFycmF5KGxlbilcbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3BhcmFtc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IENvbWJpbmVMYXRlc3RPYnNlcnZlcihvYnNlcnZlciwgaSwgdGhpcy5fY2IsIHN0YXRlKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ29tYmluZUxhdGVzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29tYmluZUxhdGVzdE9ic2VydmVyKG8sIGksIGNiLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGopIHtcbiAgICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zdGF0ZS52YWx1ZXNbdGhpcy5faV0gPSB4O1xuICAgICAgdGhpcy5fc3RhdGUuaGFzVmFsdWVbdGhpcy5faV0gPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsIHx8ICh0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCA9IHRoaXMuX3N0YXRlLmhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KSkpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCB0aGlzLl9zdGF0ZS52YWx1ZXMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9zdGF0ZS5pc0RvbmUuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9zdGF0ZS5pc0RvbmUuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbWJpbmVMYXRlc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYW55IG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBQcm9taXNlcyBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAqXG4gICogQGV4YW1wbGVcbiAgKiAxIC0gb2JzID0gUnguT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KG9iczEsIG9iczIsIG9iczMsIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAqIDIgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3QoW29iczEsIG9iczIsIG9iczNdLCBmdW5jdGlvbiAobzEsIG8yLCBvMykgeyByZXR1cm4gbzEgKyBvMiArIG8zOyB9KTtcbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAqL1xuICB2YXIgY29tYmluZUxhdGVzdCA9IE9ic2VydmFibGUuY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcbiAgICByZXR1cm4gbmV3IENvbWJpbmVMYXRlc3RPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29uY2F0ZW5hdGVzIGFsbCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuICBUaGlzIHRha2VzIGluIGVpdGhlciBhbiBhcnJheSBvciB2YXJpYWJsZSBhcmd1bWVudHMgdG8gY29uY2F0ZW5hdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ2l2ZW4gc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvcih2YXIgYXJncyA9IFtdLCBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIHJldHVybiBvYnNlcnZhYmxlQ29uY2F0LmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9O1xuXG4gIHZhciBDb25jYXRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25jYXRPYnNlcnZlcihzLCBmbikge1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zLm8ub25OZXh0KHgpOyB9O1xuICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuICAgIENvbmNhdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3MuaSsrOyB0aGlzLl9mbih0aGlzLl9zKTsgfTtcblxuICAgIHJldHVybiBDb25jYXRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIENvbmNhdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ29uY2F0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb25jYXRPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuX3NvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUgKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgaWYgKHN0YXRlLmkgPT09IHN0YXRlLnNvdXJjZXMubGVuZ3RoKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IHN0YXRlLnNvdXJjZXNbc3RhdGUuaV07XG4gICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShuZXcgQ29uY2F0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ29uY2F0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlQ3JlYXRlKG5vb3ApO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBpOiAwLFxuICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbixcbiAgICAgICAgZGlzcG9zYWJsZTogZGlzcG9zYWJsZSxcbiAgICAgICAgc291cmNlczogdGhpcy5fc291cmNlc1xuICAgICAgfTtcblxuICAgICAgdmFyIGNhbmNlbGFibGUgPSBpbW1lZGlhdGVTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW3N1YnNjcmlwdGlvbiwgZGlzcG9zYWJsZSwgY2FuY2VsYWJsZV0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29uY2F0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gY29uY2F0IHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBlYWNoIGdpdmVuIHNlcXVlbmNlLCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVDb25jYXQgPSBPYnNlcnZhYmxlLmNvbmNhdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb25jYXRPYnNlcnZhYmxlKGFyZ3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBvYnNlcnZlZCBpbm5lciBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UoMSk7XG4gIH07XG5cbiAgdmFyIE1lcmdlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWVyZ2VPYnNlcnZhYmxlKHNvdXJjZSwgbWF4Q29uY3VycmVudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLm1heENvbmN1cnJlbnQgPSBtYXhDb25jdXJyZW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWVyZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGcuYWRkKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VPYnNlcnZlcihvYnNlcnZlciwgdGhpcy5tYXhDb25jdXJyZW50LCBnKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZU9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNZXJnZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBNZXJnZU9ic2VydmVyKG8sIG1heCwgZykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMubWF4ID0gbWF4O1xuICAgICAgdGhpcy5nID0gZztcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5xID0gW107XG4gICAgICB0aGlzLmFjdGl2ZUNvdW50ID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKE1lcmdlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5oYW5kbGVTdWJzY3JpYmUgPSBmdW5jdGlvbiAoeHMpIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuZy5hZGQoc2FkKTtcbiAgICAgIGlzUHJvbWlzZSh4cykgJiYgKHhzID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHhzKSk7XG4gICAgICBzYWQuc2V0RGlzcG9zYWJsZSh4cy5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIodGhpcywgc2FkKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGlubmVyU291cmNlKSB7XG4gICAgICBpZih0aGlzLmFjdGl2ZUNvdW50IDwgdGhpcy5tYXgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVDb3VudCsrO1xuICAgICAgICB0aGlzLmhhbmRsZVN1YnNjcmliZShpbm5lclNvdXJjZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnEucHVzaChpbm5lclNvdXJjZSk7XG4gICAgICB9XG4gICAgfTtcbiAgICBNZXJnZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuby5vbkVycm9yKGUpOyB9O1xuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5kb25lID0gdHJ1ZTsgdGhpcy5hY3RpdmVDb3VudCA9PT0gMCAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIocGFyZW50LCBzYWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5zYWQgPSBzYWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMucGFyZW50Lm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5wYXJlbnQuby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGFyZW50LmcucmVtb3ZlKHRoaXMuc2FkKTtcbiAgICAgIGlmICh0aGlzLnBhcmVudC5xLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuaGFuZGxlU3Vic2NyaWJlKHRoaXMucGFyZW50LnEuc2hpZnQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcmVudC5hY3RpdmVDb3VudC0tO1xuICAgICAgICB0aGlzLnBhcmVudC5kb25lICYmIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMucGFyZW50Lm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIE1lcmdlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgbGltaXRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHN1YnNjcmlwdGlvbnMgdG8gaW5uZXIgc2VxdWVuY2VzLlxuICAqIE9yIG1lcmdlcyB0d28gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhIHNpbmdsZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7TWl4ZWR9IFttYXhDb25jdXJyZW50T3JPdGhlcl0gTWF4aW11bSBudW1iZXIgb2YgaW5uZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgYmVpbmcgc3Vic2NyaWJlZCB0byBjb25jdXJyZW50bHkgb3IgdGhlIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIGlubmVyIHNlcXVlbmNlcy5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlID0gZnVuY3Rpb24gKG1heENvbmN1cnJlbnRPck90aGVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBtYXhDb25jdXJyZW50T3JPdGhlciAhPT0gJ251bWJlcicgP1xuICAgICAgb2JzZXJ2YWJsZU1lcmdlKHRoaXMsIG1heENvbmN1cnJlbnRPck90aGVyKSA6XG4gICAgICBuZXcgTWVyZ2VPYnNlcnZhYmxlKHRoaXMsIG1heENvbmN1cnJlbnRPck90aGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIGFsbCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhIHNpbmdsZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBUaGUgc2NoZWR1bGVyIGlzIG9wdGlvbmFsIGFuZCBpZiBub3Qgc3BlY2lmaWVkLCB0aGUgaW1tZWRpYXRlIHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBtZXJnZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlTWVyZ2UgPSBPYnNlcnZhYmxlLm1lcmdlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzY2hlZHVsZXIsIHNvdXJjZXMgPSBbXSwgaSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoIWFyZ3VtZW50c1swXSkge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9IGVsc2UgaWYgKGlzU2NoZWR1bGVyKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNjaGVkdWxlciA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGZvcihpID0gMTsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KHNvdXJjZXNbMF0pKSB7XG4gICAgICBzb3VyY2VzID0gc291cmNlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVPZihzY2hlZHVsZXIsIHNvdXJjZXMpLm1lcmdlQWxsKCk7XG4gIH07XG5cbiAgdmFyIE1lcmdlQWxsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZUFsbE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLCBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBnLmFkZChtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE1lcmdlQWxsT2JzZXJ2ZXIobywgZykpKTtcbiAgICAgIHJldHVybiBnO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VBbGxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlQWxsT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIE1lcmdlQWxsT2JzZXJ2ZXIobywgZykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuZyA9IGc7XG4gICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKE1lcmdlQWxsT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oaW5uZXJTb3VyY2UpIHtcbiAgICAgIHZhciBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuZy5hZGQoc2FkKTtcbiAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG4gICAgICBzYWQuc2V0RGlzcG9zYWJsZShpbm5lclNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIodGhpcywgc2FkKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VBbGxPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5kb25lID0gdHJ1ZTtcbiAgICAgIHRoaXMuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIocGFyZW50LCBzYWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5zYWQgPSBzYWQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLnBhcmVudC5vLm9uTmV4dCh4KTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucGFyZW50Lm8ub25FcnJvcihlKTtcbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGFyZW50LmcucmVtb3ZlKHRoaXMuc2FkKTtcbiAgICAgIHRoaXMucGFyZW50LmRvbmUgJiYgdGhpcy5wYXJlbnQuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VBbGxPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIGlubmVyIHNlcXVlbmNlcy5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1lcmdlQWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgTWVyZ2VBbGxPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBDb21wb3NpdGVFcnJvciA9IFJ4LkNvbXBvc2l0ZUVycm9yID0gZnVuY3Rpb24oZXJyb3JzKSB7XG4gICAgdGhpcy5pbm5lckVycm9ycyA9IGVycm9ycztcbiAgICB0aGlzLm1lc3NhZ2UgPSAnVGhpcyBjb250YWlucyBtdWx0aXBsZSBlcnJvcnMuIENoZWNrIHRoZSBpbm5lckVycm9ycyc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgQ29tcG9zaXRlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBDb21wb3NpdGVFcnJvci5wcm90b3R5cGUubmFtZSA9ICdDb21wb3NpdGVFcnJvcic7XG5cbiAgdmFyIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgc3RhdGUgPSB7IGlzU3RvcHBlZDogZmFsc2UsIGVycm9yczogW10sIG86IG8gfTtcblxuICAgICAgZ3JvdXAuYWRkKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSkpO1xuXG4gICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyKGdyb3VwLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fZ3JvdXAgPSBncm91cDtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXRDb21wbGV0aW9uKG8sIGVycm9ycykge1xuICAgICAgaWYgKGVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSBlbHNlIGlmIChlcnJvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIG8ub25FcnJvcihlcnJvcnNbMF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby5vbkVycm9yKG5ldyBDb21wb3NpdGVFcnJvcihlcnJvcnMpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX2dyb3VwLmFkZChpbm5lcik7XG5cbiAgICAgIC8vIENoZWNrIGZvciBwcm9taXNlcyBzdXBwb3J0XG4gICAgICBpc1Byb21pc2UoeCkgJiYgKHggPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeCkpO1xuICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZSh4LnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihpbm5lciwgdGhpcy5fZ3JvdXAsIHRoaXMuX3N0YXRlKSkpO1xuICAgIH07XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fc3RhdGUuZXJyb3JzLnB1c2goZSk7XG4gICAgICB0aGlzLl9zdGF0ZS5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fZ3JvdXAubGVuZ3RoID09PSAxICYmIHNldENvbXBsZXRpb24odGhpcy5fc3RhdGUubywgdGhpcy5fc3RhdGUuZXJyb3JzKTtcbiAgICB9O1xuXG4gICAgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoaW5uZXIsIGdyb3VwLCBzdGF0ZSkge1xuICAgICAgdGhpcy5faW5uZXIgPSBpbm5lcjtcbiAgICAgIHRoaXMuX2dyb3VwID0gZ3JvdXA7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3N0YXRlLmVycm9ycy5wdXNoKGUpO1xuICAgICAgdGhpcy5fZ3JvdXAucmVtb3ZlKHRoaXMuX2lubmVyKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCAmJiB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fZ3JvdXAucmVtb3ZlKHRoaXMuX2lubmVyKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCAmJiB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIEZsYXR0ZW5zIGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBPYnNlcnZhYmxlcyBpbnRvIG9uZSBPYnNlcnZhYmxlLCBpbiBhIHdheSB0aGF0IGFsbG93cyBhbiBPYnNlcnZlciB0b1xuICAqIHJlY2VpdmUgYWxsIHN1Y2Nlc3NmdWxseSBlbWl0dGVkIGl0ZW1zIGZyb20gYWxsIG9mIHRoZSBzb3VyY2UgT2JzZXJ2YWJsZXMgd2l0aG91dCBiZWluZyBpbnRlcnJ1cHRlZCBieVxuICAqIGFuIGVycm9yIG5vdGlmaWNhdGlvbiBmcm9tIG9uZSBvZiB0aGVtLlxuICAqXG4gICogVGhpcyBiZWhhdmVzIGxpa2UgT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGwgZXhjZXB0IHRoYXQgaWYgYW55IG9mIHRoZSBtZXJnZWQgT2JzZXJ2YWJsZXMgbm90aWZ5IG9mIGFuXG4gICogZXJyb3IgdmlhIHRoZSBPYnNlcnZlcidzIG9uRXJyb3IsIG1lcmdlRGVsYXlFcnJvciB3aWxsIHJlZnJhaW4gZnJvbSBwcm9wYWdhdGluZyB0aGF0XG4gICogZXJyb3Igbm90aWZpY2F0aW9uIHVudGlsIGFsbCBvZiB0aGUgbWVyZ2VkIE9ic2VydmFibGVzIGhhdmUgZmluaXNoZWQgZW1pdHRpbmcgaXRlbXMuXG4gICogQHBhcmFtIHtBcnJheSB8IEFyZ3VtZW50c30gYXJncyBBcmd1bWVudHMgb3IgYW4gYXJyYXkgdG8gbWVyZ2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IGFuIE9ic2VydmFibGUgdGhhdCBlbWl0cyBhbGwgb2YgdGhlIGl0ZW1zIGVtaXR0ZWQgYnkgdGhlIE9ic2VydmFibGVzIGVtaXR0ZWQgYnkgdGhlIE9ic2VydmFibGVcbiAgKi9cbiAgT2JzZXJ2YWJsZS5tZXJnZURlbGF5RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBvYnNlcnZhYmxlT2YobnVsbCwgYXJncyk7XG4gICAgcmV0dXJuIG5ldyBNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlKHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBub3JtYWxseSBvciBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1c2VkIHRvIHByb2R1Y2UgcmVzdWx0cyBhZnRlciB0aGUgZmlyc3Qgc2VxdWVuY2UgdGVybWluYXRlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb25jYXRlbmF0ZXMgdGhlIGZpcnN0IGFuZCBzZWNvbmQgc2VxdWVuY2UsIGV2ZW4gaWYgdGhlIGZpcnN0IHNlcXVlbmNlIHRlcm1pbmF0ZXMgZXhjZXB0aW9uYWxseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5vbkVycm9yUmVzdW1lTmV4dCA9IGZ1bmN0aW9uIChzZWNvbmQpIHtcbiAgICBpZiAoIXNlY29uZCkgeyB0aHJvdyBuZXcgRXJyb3IoJ1NlY29uZCBvYnNlcnZhYmxlIGlzIHJlcXVpcmVkJyk7IH1cbiAgICByZXR1cm4gb25FcnJvclJlc3VtZU5leHQoW3RoaXMsIHNlY29uZF0pO1xuICB9O1xuXG4gIHZhciBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZShzb3VyY2VzKSB7XG4gICAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5wb3MgPCBzdGF0ZS5zb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICB2YXIgY3VycmVudCA9IHN0YXRlLnNvdXJjZXNbc3RhdGUucG9zKytdO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudCkgJiYgKGN1cnJlbnQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudCkpO1xuICAgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnQuc3Vic2NyaWJlKG5ldyBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBzdGF0ZSA9IHtwb3M6IDAsIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLCBvOiBvLCBzb3VyY2VzOiB0aGlzLnNvdXJjZXMgfSxcbiAgICAgICAgICBjYW5jZWxsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxsYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcmVjdXJzZSh0aGlzLl9zdGF0ZSk7IH07XG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcblxuICAgIHJldHVybiBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29udGludWVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0ZXJtaW5hdGVkIG5vcm1hbGx5IG9yIGJ5IGFuIGV4Y2VwdGlvbiB3aXRoIHRoZSBuZXh0IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29uY2F0ZW5hdGVzIHRoZSBzb3VyY2Ugc2VxdWVuY2VzLCBldmVuIGlmIGEgc2VxdWVuY2UgdGVybWluYXRlcyBleGNlcHRpb25hbGx5LlxuICAgKi9cbiAgdmFyIG9uRXJyb3JSZXN1bWVOZXh0ID0gT2JzZXJ2YWJsZS5vbkVycm9yUmVzdW1lTmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNvdXJjZXMgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgc291cmNlcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXNbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUoc291cmNlcyk7XG4gIH07XG5cbiAgdmFyIFNraXBVbnRpbE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBVbnRpbE9ic2VydmFibGUoc291cmNlLCBvdGhlcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX28gPSBpc1Byb21pc2Uob3RoZXIpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSA6IG90aGVyO1xuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHZhciBsZWZ0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBsZWZ0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFNvdXJjZU9ic2VydmVyKG8sIHRoaXMpKSk7XG5cbiAgICAgIGlzUHJvbWlzZSh0aGlzLl9vKSAmJiAodGhpcy5fbyA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aGlzLl9vKSk7XG5cbiAgICAgIHZhciByaWdodFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgcmlnaHRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLl9vLnN1YnNjcmliZShuZXcgU2tpcFVudGlsT3RoZXJPYnNlcnZlcihvLCB0aGlzLCByaWdodFN1YnNjcmlwdGlvbikpKTtcblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKGxlZnRTdWJzY3JpcHRpb24sIHJpZ2h0U3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuICAgIH07XG5cbiAgICBTa2lwVW50aWxTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9wLl9vcGVuICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgU2tpcFVudGlsT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxPdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIobywgcCwgcikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3IgPSByO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gPSB0cnVlO1xuICAgICAgdGhpcy5fci5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fci5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwVW50aWxPdGhlck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9ubHkgYWZ0ZXIgdGhlIG90aGVyIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjZXMgYSB2YWx1ZS5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlIHwgUHJvbWlzZX0gb3RoZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRyaWdnZXJzIHByb3BhZ2F0aW9uIG9mIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugc3RhcnRpbmcgZnJvbSB0aGUgcG9pbnQgdGhlIG90aGVyIHNlcXVlbmNlIHRyaWdnZXJlZCBwcm9wYWdhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwVW50aWwgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gbmV3IFNraXBVbnRpbE9ic2VydmFibGUodGhpcywgb3RoZXIpO1xuICB9O1xuXG4gIHZhciBTd2l0Y2hPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN3aXRjaE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaW5uZXIgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLCBzID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTd2l0Y2hPYnNlcnZlcihvLCBpbm5lcikpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHMsIGlubmVyKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoU3dpdGNoT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIFN3aXRjaE9ic2VydmVyKG8sIGlubmVyKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5pbm5lciA9IGlubmVyO1xuICAgICAgdGhpcy5zdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmxhdGVzdCA9IDA7XG4gICAgICB0aGlzLmhhc0xhdGVzdCA9IGZhbHNlO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKGlubmVyU291cmNlKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBpZCA9ICsrdGhpcy5sYXRlc3Q7XG4gICAgICB0aGlzLmhhc0xhdGVzdCA9IHRydWU7XG4gICAgICB0aGlzLmlubmVyLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICBpc1Byb21pc2UoaW5uZXJTb3VyY2UpICYmIChpbm5lclNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShpbm5lclNvdXJjZSkpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGlubmVyU291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBpZCkpKTtcbiAgICB9O1xuXG4gICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zdG9wcGVkID0gdHJ1ZTtcbiAgICAgICF0aGlzLmhhc0xhdGVzdCAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIGlkKSB7XG4gICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLnBhcmVudC5sYXRlc3QgPT09IHRoaXMuaWQgJiYgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudC5sYXRlc3QgPT09IHRoaXMuaWQpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQuaGFzTGF0ZXN0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFyZW50LnN0b3BwZWQgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gU3dpdGNoT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIFRyYW5zZm9ybXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHZhbHVlcyBvbmx5IGZyb20gdGhlIG1vc3QgcmVjZW50IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgYXQgYW55IHBvaW50IGluIHRpbWUgcHJvZHVjZXMgdGhlIGVsZW1lbnRzIG9mIHRoZSBtb3N0IHJlY2VudCBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90b1snc3dpdGNoJ10gPSBvYnNlcnZhYmxlUHJvdG8uc3dpdGNoTGF0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgU3dpdGNoT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgVGFrZVVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gVGFrZVVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMub3RoZXIgPSBpc1Byb21pc2Uob3RoZXIpID8gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSA6IG90aGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVVudGlsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pLFxuICAgICAgICB0aGlzLm90aGVyLnN1YnNjcmliZShuZXcgVGFrZVVudGlsT2JzZXJ2ZXIobykpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZVVudGlsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUYWtlVW50aWxPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlVW50aWxPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VVbnRpbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgVGFrZVVudGlsT2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gbm9vcDtcblxuICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlcyBmcm9tIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB1bnRpbCB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGUgfCBQcm9taXNlfSBvdGhlciBPYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB0ZXJtaW5hdGVzIHByb3BhZ2F0aW9uIG9mIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgdXAgdG8gdGhlIHBvaW50IHRoZSBvdGhlciBzZXF1ZW5jZSBpbnRlcnJ1cHRlZCBmdXJ0aGVyIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VVbnRpbCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgVGFrZVVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gYXJndW1lbnRzVG9BcnJheSgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICB2YXIgV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUoc291cmNlLCBzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3NzID0gc291cmNlcztcbiAgICAgIHRoaXMuX2NiID0gcmVzdWx0U2VsZWN0b3I7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGxlbiA9IHRoaXMuX3NzLmxlbmd0aDtcbiAgICAgIHZhciBzdGF0ZSA9IHtcbiAgICAgICAgaGFzVmFsdWU6IGFycmF5SW5pdGlhbGl6ZShsZW4sIGZhbHNlRmFjdG9yeSksXG4gICAgICAgIGhhc1ZhbHVlQWxsOiBmYWxzZSxcbiAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuICAgICAgfTtcblxuICAgICAgdmFyIG4gPSB0aGlzLl9zcy5sZW5ndGgsIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiArIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIG90aGVyID0gdGhpcy5fc3NbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcihvLCBpLCBzdGF0ZSkpKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgIH1cblxuICAgICAgdmFyIG91dGVyU2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBvdXRlclNhZC5zZXREaXNwb3NhYmxlKHRoaXMuX3Muc3Vic2NyaWJlKG5ldyBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyKG8sIHRoaXMuX2NiLCBzdGF0ZSkpKTtcbiAgICAgIHN1YnNjcmlwdGlvbnNbbl0gPSBvdXRlclNhZDtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIobywgaSwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLnZhbHVlc1t0aGlzLl9pXSA9IHg7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCA9IHRoaXMuX3N0YXRlLmhhc1ZhbHVlLmV2ZXJ5KGlkZW50aXR5KTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gbm9vcDtcblxuICAgIHJldHVybiBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIobywgY2IsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgYWxsVmFsdWVzID0gW3hdLmNvbmNhdCh0aGlzLl9zdGF0ZS52YWx1ZXMpO1xuICAgICAgaWYgKCF0aGlzLl9zdGF0ZS5oYXNWYWx1ZUFsbCkgeyByZXR1cm47IH1cbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9jYikuYXBwbHkobnVsbCwgYWxsVmFsdWVzKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgIH07XG5cbiAgICBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiBvbmx5IHdoZW4gdGhlIChmaXJzdCkgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjZXMgYW4gZWxlbWVudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aXRoTGF0ZXN0RnJvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXG4gICAgcmV0dXJuIG5ldyBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUodGhpcywgYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGZhbHNlRmFjdG9yeSgpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGZ1bmN0aW9uIGVtcHR5QXJyYXlGYWN0b3J5KCkgeyByZXR1cm4gW107IH1cblxuICB2YXIgWmlwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhaaXBPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFppcE9ic2VydmFibGUoc291cmNlcywgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX3MgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFppcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIG4gPSB0aGlzLl9zLmxlbmd0aCxcbiAgICAgICAgICBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KG4pLFxuICAgICAgICAgIGRvbmUgPSBhcnJheUluaXRpYWxpemUobiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgICBxID0gYXJyYXlJbml0aWFsaXplKG4sIGVtcHR5QXJyYXlGYWN0b3J5KTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3NbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG5ldyBaaXBPYnNlcnZlcihvYnNlcnZlciwgaSwgdGhpcywgcSwgZG9uZSkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFppcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgWmlwT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFppcE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFppcE9ic2VydmVyKG8sIGksIHAsIHEsIGQpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIHRoaXMuX3EgPSBxO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3RFbXB0eSh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH1cbiAgICBmdW5jdGlvbiBzaGlmdEVhY2goeCkgeyByZXR1cm4geC5zaGlmdCgpOyB9XG4gICAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGopIHtcbiAgICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3FbdGhpcy5faV0ucHVzaCh4KTtcbiAgICAgIGlmICh0aGlzLl9xLmV2ZXJ5KG5vdEVtcHR5KSkge1xuICAgICAgICB2YXIgcXVldWVkVmFsdWVzID0gdGhpcy5fcS5tYXAoc2hpZnRFYWNoKTtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3AuX2NiKS5hcHBseShudWxsLCBxdWV1ZWRWYWx1ZXMpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9kLmZpbHRlcihub3RUaGVTYW1lKHRoaXMuX2kpKS5ldmVyeShpZGVudGl0eSkpIHtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBaaXBPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fZFt0aGlzLl9pXSA9IHRydWU7XG4gICAgICB0aGlzLl9kLmV2ZXJ5KGlkZW50aXR5KSAmJiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBaaXBPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFsbCBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgYW4gYXJyYXkgaGF2ZSBwcm9kdWNlZCBhbiBlbGVtZW50IGF0IGEgY29ycmVzcG9uZGluZyBpbmRleC5cbiAgICogVGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJndW1lbnRzIG11c3QgYmUgYSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgYXJncy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgYXJncyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by56aXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cycpOyB9XG5cbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuICAgIEFycmF5LmlzQXJyYXkoYXJnc1swXSkgJiYgKGFyZ3MgPSBhcmdzWzBdKTtcblxuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIGFyZ3MudW5zaGlmdChwYXJlbnQpO1xuXG4gICAgcmV0dXJuIG5ldyBaaXBPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICAgKiBAcGFyYW0gYXJndW1lbnRzIE9ic2VydmFibGUgc291cmNlcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHNlcmllcyBvZiBlbGVtZW50cyBhdCBjb3JyZXNwb25kaW5nIGluZGV4ZXMgaW4gdGhlIHNvdXJjZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBPYnNlcnZhYmxlLnppcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3MgPSBpc0Z1bmN0aW9uKGFyZ3NbMV0pID8gYXJnc1swXS5jb25jYXQoYXJnc1sxXSkgOiBhcmdzWzBdO1xuICAgIH1cbiAgICB2YXIgZmlyc3QgPSBhcmdzLnNoaWZ0KCk7XG4gICAgcmV0dXJuIGZpcnN0LnppcC5hcHBseShmaXJzdCwgYXJncyk7XG4gIH07XG5cbmZ1bmN0aW9uIGZhbHNlRmFjdG9yeSgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBlbXB0eUFycmF5RmFjdG9yeSgpIHsgcmV0dXJuIFtdOyB9XG5mdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICByZXR1cm4gYXJncztcbn1cblxudmFyIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgaW5oZXJpdHMoWmlwSXRlcmFibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICBmdW5jdGlvbiBaaXBJdGVyYWJsZU9ic2VydmFibGUoc291cmNlcywgY2IpIHtcbiAgICB0aGlzLnNvdXJjZXMgPSBzb3VyY2VzO1xuICAgIHRoaXMuX2NiID0gY2I7XG4gICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gIH1cblxuICBaaXBJdGVyYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgIHZhciBzb3VyY2VzID0gdGhpcy5zb3VyY2VzLCBsZW4gPSBzb3VyY2VzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgdmFyIHN0YXRlID0ge1xuICAgICAgcTogYXJyYXlJbml0aWFsaXplKGxlbiwgZW1wdHlBcnJheUZhY3RvcnkpLFxuICAgICAgZG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgIGNiOiB0aGlzLl9jYixcbiAgICAgIG86IG9cbiAgICB9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgKGlzQXJyYXlMaWtlKHNvdXJjZSkgfHwgaXNJdGVyYWJsZShzb3VyY2UpKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb20oc291cmNlKSk7XG5cbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgWmlwSXRlcmFibGVPYnNlcnZlcihzdGF0ZSwgaSkpKTtcbiAgICAgIH0oaSkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZTtcbn0oT2JzZXJ2YWJsZUJhc2UpKTtcblxudmFyIFppcEl0ZXJhYmxlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICBmdW5jdGlvbiBaaXBJdGVyYWJsZU9ic2VydmVyKHMsIGkpIHtcbiAgICB0aGlzLl9zID0gcztcbiAgICB0aGlzLl9pID0gaTtcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuICBmdW5jdGlvbiBzaGlmdEVhY2goeCkgeyByZXR1cm4geC5zaGlmdCgpOyB9XG4gIGZ1bmN0aW9uIG5vdFRoZVNhbWUoaSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgcmV0dXJuIGogIT09IGk7XG4gICAgfTtcbiAgfVxuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgIHRoaXMuX3MucVt0aGlzLl9pXS5wdXNoKHgpO1xuICAgIGlmICh0aGlzLl9zLnEuZXZlcnkobm90RW1wdHkpKSB7XG4gICAgICB2YXIgcXVldWVkVmFsdWVzID0gdGhpcy5fcy5xLm1hcChzaGlmdEVhY2gpLFxuICAgICAgICAgIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3MuY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLl9zLm8ub25OZXh0KHJlcyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9zLmRvbmUuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuICB9O1xuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3MuZG9uZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgdGhpcy5fcy5kb25lLmV2ZXJ5KGlkZW50aXR5KSAmJiB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgfTtcblxuICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZlcjtcbn0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4vKipcbiAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdoZW5ldmVyIGFsbCBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb3IgYW4gYXJyYXkgaGF2ZSBwcm9kdWNlZCBhbiBlbGVtZW50IGF0IGEgY29ycmVzcG9uZGluZyBpbmRleC5cbiAqIFRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIGFyZ3VtZW50cyBtdXN0IGJlIGEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHNlcmllcyBvZiBlbGVtZW50cyBhdCBjb3JyZXNwb25kaW5nIGluZGV4ZXMgaW4gdGhlIGFyZ3MuXG4gKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICovXG5vYnNlcnZhYmxlUHJvdG8uemlwSXRlcmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcblxuICB2YXIgcGFyZW50ID0gdGhpcztcbiAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG4gIHJldHVybiBuZXcgWmlwSXRlcmFibGVPYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbn07XG5cbiAgZnVuY3Rpb24gYXNPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiBzdWJzY3JpYmUobykgeyByZXR1cm4gc291cmNlLnN1YnNjcmliZShvKTsgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgSGlkZXMgdGhlIGlkZW50aXR5IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaGlkZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShhc09ic2VydmFibGUodGhpcyksIHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoeCkgeyByZXR1cm4geC50b0FycmF5KCk7IH1cbiAgZnVuY3Rpb24gbm90RW1wdHkoeCkgeyByZXR1cm4geC5sZW5ndGggPiAwOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiBlbGVtZW50IGNvdW50IGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTGVuZ3RoIG9mIGVhY2ggYnVmZmVyLlxuICAgKiBAcGFyYW0ge051bWJlcn0gW3NraXBdIE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgYnVmZmVycy4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byB0aGUgY291bnQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aENvdW50ID0gb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlckNvdW50ID0gZnVuY3Rpb24gKGNvdW50LCBza2lwKSB7XG4gICAgdHlwZW9mIHNraXAgIT09ICdudW1iZXInICYmIChza2lwID0gY291bnQpO1xuICAgIHJldHVybiB0aGlzLndpbmRvd1dpdGhDb3VudChjb3VudCwgc2tpcClcbiAgICAgIC5mbGF0TWFwKHRvQXJyYXkpXG4gICAgICAuZmlsdGVyKG5vdEVtcHR5KTtcbiAgfTtcblxuICB2YXIgRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVtYXRlcmlhbGl6ZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGVtYXRlcmlhbGl6ZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZW1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB4LmFjY2VwdCh0aGlzLl9vKTsgfTtcbiAgICBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gRGVtYXRlcmlhbGl6ZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogRGVtYXRlcmlhbGl6ZXMgdGhlIGV4cGxpY2l0IG5vdGlmaWNhdGlvbiB2YWx1ZXMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBpbXBsaWNpdCBub3RpZmljYXRpb25zLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBleGhpYml0aW5nIHRoZSBiZWhhdmlvciBjb3JyZXNwb25kaW5nIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UncyBub3RpZmljYXRpb24gdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRlbWF0ZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUoc291cmNlLCBrZXlGbiwgY29tcGFyZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIobywgdGhpcy5rZXlGbiwgdGhpcy5jb21wYXJlcikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyKG8sIGtleUZuLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMua2V5Rm4gPSBrZXlGbjtcbiAgICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICAgIHRoaXMuaGFzQ3VycmVudEtleSA9IGZhbHNlO1xuICAgICAgdGhpcy5jdXJyZW50S2V5ID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIGtleSA9IHgsIGNvbXBhcmVyRXF1YWxzO1xuICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5rZXlGbikpIHtcbiAgICAgICAga2V5ID0gdHJ5Q2F0Y2godGhpcy5rZXlGbikoeCk7XG4gICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihrZXkuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0N1cnJlbnRLZXkpIHtcbiAgICAgICAgY29tcGFyZXJFcXVhbHMgPSB0cnlDYXRjaCh0aGlzLmNvbXBhcmVyKSh0aGlzLmN1cnJlbnRLZXksIGtleSk7XG4gICAgICAgIGlmIChjb21wYXJlckVxdWFscyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKGNvbXBhcmVyRXF1YWxzLmUpOyB9XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuaGFzQ3VycmVudEtleSB8fCAhY29tcGFyZXJFcXVhbHMpIHtcbiAgICAgICAgdGhpcy5oYXNDdXJyZW50S2V5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jdXJyZW50S2V5ID0ga2V5O1xuICAgICAgICB0aGlzLm8ub25OZXh0KHgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7XG4gICAgICB0aGlzLm8ub25FcnJvcihlKTtcbiAgICB9O1xuICAgIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIG9ubHkgZGlzdGluY3QgY29udGlndW91cyBlbGVtZW50cyBhY2NvcmRpbmcgdG8gdGhlIGtleUZuIGFuZCB0aGUgY29tcGFyZXIuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2tleUZuXSBBIGZ1bmN0aW9uIHRvIGNvbXB1dGUgdGhlIGNvbXBhcmlzb24ga2V5IGZvciBlYWNoIGVsZW1lbnQuIElmIG5vdCBwcm92aWRlZCwgaXQgcHJvamVjdHMgdGhlIHZhbHVlLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gRXF1YWxpdHkgY29tcGFyZXIgZm9yIGNvbXB1dGVkIGtleSB2YWx1ZXMuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gYW4gZXF1YWxpdHkgY29tcGFyZXIgZnVuY3Rpb24uXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBjb250YWluaW5nIHRoZSBkaXN0aW5jdCBjb250aWd1b3VzIGVsZW1lbnRzLCBiYXNlZCBvbiBhIGNvbXB1dGVkIGtleSB2YWx1ZSwgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGlzdGluY3RVbnRpbENoYW5nZWQgPSBmdW5jdGlvbiAoa2V5Rm4sIGNvbXBhcmVyKSB7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdENvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZSh0aGlzLCBrZXlGbiwgY29tcGFyZXIpO1xuICB9O1xuXG4gIHZhciBUYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRhcE9ic2VydmFibGUsX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYXBPYnNlcnZhYmxlKHNvdXJjZSwgb2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fb04gPSBvYnNlcnZlck9yT25OZXh0O1xuICAgICAgdGhpcy5fb0UgPSBvbkVycm9yO1xuICAgICAgdGhpcy5fb0MgPSBvbkNvbXBsZXRlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRhcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy50ID0gIXAuX29OIHx8IGlzRnVuY3Rpb24ocC5fb04pID9cbiAgICAgICAgb2JzZXJ2ZXJDcmVhdGUocC5fb04gfHwgbm9vcCwgcC5fb0UgfHwgbm9vcCwgcC5fb0MgfHwgbm9vcCkgOlxuICAgICAgICBwLl9vTjtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uTmV4dCkuY2FsbCh0aGlzLnQsIHgpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25OZXh0KHgpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25FcnJvcikuY2FsbCh0aGlzLnQsIGVycik7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy50Lm9uQ29tcGxldGVkKS5jYWxsKHRoaXMudCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRhcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgaW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCBvciBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb24gfCBPYnNlcnZlcn0gb2JzZXJ2ZXJPck9uTmV4dCBBY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgYW4gby5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25FcnJvcl0gIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gVXNlZCBpZiBvbmx5IHRoZSBvYnNlcnZlck9yT25OZXh0IHBhcmFtZXRlciBpcyBhbHNvIGEgZnVuY3Rpb24uXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW29uQ29tcGxldGVkXSAgQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLiBVc2VkIGlmIG9ubHkgdGhlIG9ic2VydmVyT3JPbk5leHQgcGFyYW1ldGVyIGlzIGFsc28gYSBmdW5jdGlvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2RvJ10gPSBvYnNlcnZhYmxlUHJvdG8udGFwID0gb2JzZXJ2YWJsZVByb3RvLmRvQWN0aW9uID0gZnVuY3Rpb24gKG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgcmV0dXJuIG5ldyBUYXBPYnNlcnZhYmxlKHRoaXMsIG9ic2VydmVyT3JPbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKTtcbiAgfTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBBY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25OZXh0ID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uTmV4dCA9IGZ1bmN0aW9uIChvbk5leHQsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAodHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKHgpIHsgb25OZXh0LmNhbGwodGhpc0FyZywgeCk7IH0gOiBvbk5leHQpO1xuICB9O1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBBY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25FcnJvciA9IG9ic2VydmFibGVQcm90by50YXBPbkVycm9yID0gZnVuY3Rpb24gKG9uRXJyb3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAobm9vcCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKGUpIHsgb25FcnJvci5jYWxsKHRoaXNBcmcsIGUpOyB9IDogb25FcnJvcik7XG4gIH07XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aCB0aGUgc2lkZS1lZmZlY3RpbmcgYmVoYXZpb3IgYXBwbGllZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRvT25Db21wbGV0ZWQgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAob25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcy50YXAobm9vcCwgbnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24gKCkgeyBvbkNvbXBsZXRlZC5jYWxsKHRoaXNBcmcpOyB9IDogb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIHZhciBGaW5hbGx5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmluYWxseU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRmluYWxseU9ic2VydmFibGUoc291cmNlLCBmbiwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGJpbmRDYWxsYmFjayhmbiwgdGhpc0FyZywgMCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaW5hbGx5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZCA9IHRyeUNhdGNoKHRoaXMuc291cmNlLnN1YnNjcmliZSkuY2FsbCh0aGlzLnNvdXJjZSwgbyk7XG4gICAgICBpZiAoZCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5fZm4oKTtcbiAgICAgICAgdGhyb3dlcihkLmUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEZpbmFsbHlEaXNwb3NhYmxlKGQsIHRoaXMuX2ZuKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRmluYWxseURpc3Bvc2FibGUocywgZm4pIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgIH1cbiAgICBGaW5hbGx5RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9zLmRpc3Bvc2UpLmNhbGwodGhpcy5fcyk7XG4gICAgICAgIHRoaXMuX2ZuKCk7XG4gICAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBGaW5hbGx5T2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBJbnZva2VzIGEgc3BlY2lmaWVkIGFjdGlvbiBhZnRlciB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGVybWluYXRlcyBncmFjZWZ1bGx5IG9yIGV4Y2VwdGlvbmFsbHkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZpbmFsbHlBY3Rpb24gQWN0aW9uIHRvIGludm9rZSBhZnRlciB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGVybWluYXRlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBhY3Rpb24taW52b2tpbmcgdGVybWluYXRpb24gYmVoYXZpb3IgYXBwbGllZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90b1snZmluYWxseSddID0gZnVuY3Rpb24gKGFjdGlvbiwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmluYWxseU9ic2VydmFibGUodGhpcywgYWN0aW9uLCB0aGlzQXJnKTtcbiAgfTtcblxuICB2YXIgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5vbk5leHQgPSBub29wO1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBpZighdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm8ub25FcnJvcihlcnIpO1xuICAgICAgfVxuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZighdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHsgdGhpcy5pc1N0b3BwZWQgPSB0cnVlOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgSWdub3JlcyBhbGwgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBsZWF2aW5nIG9ubHkgdGhlIHRlcm1pbmF0aW9uIG1lc3NhZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gZW1wdHkgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNpZ25hbHMgdGVybWluYXRpb24sIHN1Y2Nlc3NmdWwgb3IgZXhjZXB0aW9uYWwsIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaWdub3JlRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBJZ25vcmVFbGVtZW50c09ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIE1hdGVyaWFsaXplT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWF0ZXJpYWxpemVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsaXplT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1hdGVyaWFsaXplT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNYXRlcmlhbGl6ZU9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hdGVyaWFsaXplT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBNYXRlcmlhbGl6ZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXRlcmlhbGl6ZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbk5leHQoeCkpIH07XG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkVycm9yKGUpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuICAgIE1hdGVyaWFsaXplT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQobm90aWZpY2F0aW9uQ3JlYXRlT25Db21wbGV0ZWQoKSk7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBNYXRlcmlhbGl6ZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIE1hdGVyaWFsaXplcyB0aGUgaW1wbGljaXQgbm90aWZpY2F0aW9ucyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGV4cGxpY2l0IG5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIG1hdGVyaWFsaXplZCBub3RpZmljYXRpb24gdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYXRlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IE1hdGVyaWFsaXplT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJlcGVhdHMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIHRpbWVzLiBJZiB0aGUgcmVwZWF0IGNvdW50IGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBzZXF1ZW5jZSByZXBlYXRzIGluZGVmaW5pdGVseS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtyZXBlYXRDb3VudF0gIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIHNlcXVlbmNlLiBJZiBub3QgcHJvdmlkZWQsIHJlcGVhdHMgdGhlIHNlcXVlbmNlIGluZGVmaW5pdGVseS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2luZyB0aGUgZWxlbWVudHMgb2YgdGhlIGdpdmVuIHNlcXVlbmNlIHJlcGVhdGVkbHkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmVwZWF0ID0gZnVuY3Rpb24gKHJlcGVhdENvdW50KSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVSZXBlYXQodGhpcywgcmVwZWF0Q291bnQpLmNvbmNhdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmVwZWF0cyB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMgb3IgdW50aWwgaXQgc3VjY2Vzc2Z1bGx5IHRlcm1pbmF0ZXMuIElmIHRoZSByZXRyeSBjb3VudCBpcyBub3Qgc3BlY2lmaWVkLCBpdCByZXRyaWVzIGluZGVmaW5pdGVseS5cbiAgICogIE5vdGUgaWYgeW91IGVuY291bnRlciBhbiBlcnJvciBhbmQgd2FudCBpdCB0byByZXRyeSBvbmNlLCB0aGVuIHlvdSBtdXN0IHVzZSAucmV0cnkoMik7XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gcmV0cmllZCA9IHJldHJ5LnJlcGVhdCgpO1xuICAgKiAgdmFyIHJlcyA9IHJldHJpZWQgPSByZXRyeS5yZXBlYXQoMik7XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbcmV0cnlDb3VudF0gIE51bWJlciBvZiB0aW1lcyB0byByZXRyeSB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmV0cnkgdGhlIHNlcXVlbmNlIGluZGVmaW5pdGVseS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2UgcmVwZWF0ZWRseSB1bnRpbCBpdCB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXRyeSA9IGZ1bmN0aW9uIChyZXRyeUNvdW50KSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVSZXBlYXQodGhpcywgcmV0cnlDb3VudCkuY2F0Y2hFcnJvcigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlcGVhdCh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAnQEBpdGVyYXRvcic6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHZhbHVlIH07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgUmV0cnlXaGVuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFJldHJ5V2hlbk9ic2VydmFibGUoc291cmNlLCBub3RpZmllcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9ub3RpZmllciA9IG5vdGlmaWVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoUmV0cnlXaGVuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIFJldHJ5V2hlbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGV4Y2VwdGlvbnMgPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBub3RpZmllciA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIGhhbmRsZWQgPSB0aGlzLl9ub3RpZmllcihleGNlcHRpb25zKSxcbiAgICAgICAgbm90aWZpY2F0aW9uRGlzcG9zYWJsZSA9IGhhbmRsZWQuc3Vic2NyaWJlKG5vdGlmaWVyKTtcblxuICAgICAgdmFyIGUgPSB0aGlzLnNvdXJjZVsnQEBpdGVyYXRvciddKCk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHsgaXNEaXNwb3NlZDogZmFsc2UgfSxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKG51bGwsIGZ1bmN0aW9uIChfLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBlLm5leHQoKTtcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkge1xuICAgICAgICAgIGlmIChsYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihsYXN0RXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHByb21pc2VcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICAgIHZhciBvdXRlciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUobmV3IEJpbmFyeURpc3Bvc2FibGUoaW5uZXIsIG91dGVyKSk7XG4gICAgICAgIG91dGVyLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbih4KSB7IG8ub25OZXh0KHgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChleG4pIHtcbiAgICAgICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUobm90aWZpZXIuc3Vic2NyaWJlKHJlY3Vyc2UsIGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihleCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBleGNlcHRpb25zLm9uTmV4dChleG4pO1xuICAgICAgICAgICAgb3V0ZXIuZGlzcG9zZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24oKSB7IG8ub25Db21wbGV0ZWQoKTsgfSkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW25vdGlmaWNhdGlvbkRpc3Bvc2FibGUsIHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJldHJ5V2hlbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBvYnNlcnZhYmxlUHJvdG8ucmV0cnlXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIG5ldyBSZXRyeVdoZW5PYnNlcnZhYmxlKHJlcGVhdCh0aGlzKSwgbm90aWZpZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHJlcGVhdCh2YWx1ZSkge1xuICAgIHJldHVybiB7XG4gICAgICAnQEBpdGVyYXRvcic6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHZhbHVlIH07XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgUmVwZWF0V2hlbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaXNEaXNwb3NlZDogZmFsc2UsXG4gICAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHN0YXRlLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBSZXBlYXRXaGVuT2JzZXJ2YWJsZShzb3VyY2UsIG5vdGlmaWVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX25vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhSZXBlYXRXaGVuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIFJlcGVhdFdoZW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjb21wbGV0aW9ucyA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIG5vdGlmaWVyID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgaGFuZGxlZCA9IHRoaXMuX25vdGlmaWVyKGNvbXBsZXRpb25zKSxcbiAgICAgICAgbm90aWZpY2F0aW9uRGlzcG9zYWJsZSA9IGhhbmRsZWQuc3Vic2NyaWJlKG5vdGlmaWVyKTtcblxuICAgICAgdmFyIGUgPSB0aGlzLnNvdXJjZVsnQEBpdGVyYXRvciddKCk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHsgaXNEaXNwb3NlZDogZmFsc2UgfSxcbiAgICAgICAgbGFzdEVycm9yLFxuICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGNhbmNlbGFibGUgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKG51bGwsIGZ1bmN0aW9uIChfLCByZWN1cnNlKSB7XG4gICAgICAgIGlmIChzdGF0ZS5pc0Rpc3Bvc2VkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBlLm5leHQoKTtcblxuICAgICAgICBpZiAoY3VycmVudEl0ZW0uZG9uZSkge1xuICAgICAgICAgIGlmIChsYXN0RXJyb3IpIHtcbiAgICAgICAgICAgIG8ub25FcnJvcihsYXN0RXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHByb21pc2VcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgICBpc1Byb21pc2UoY3VycmVudFZhbHVlKSAmJiAoY3VycmVudFZhbHVlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGN1cnJlbnRWYWx1ZSkpO1xuXG4gICAgICAgIHZhciBvdXRlciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB2YXIgaW5uZXIgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUobmV3IEJpbmFyeURpc3Bvc2FibGUoaW5uZXIsIG91dGVyKSk7XG4gICAgICAgIG91dGVyLnNldERpc3Bvc2FibGUoY3VycmVudFZhbHVlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbih4KSB7IG8ub25OZXh0KHgpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChleG4pIHsgby5vbkVycm9yKGV4bik7IH0sXG4gICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpbm5lci5zZXREaXNwb3NhYmxlKG5vdGlmaWVyLnN1YnNjcmliZShyZWN1cnNlLCBmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZXgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgY29tcGxldGlvbnMub25OZXh0KG51bGwpO1xuICAgICAgICAgICAgb3V0ZXIuZGlzcG9zZSgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKFtub3RpZmljYXRpb25EaXNwb3NhYmxlLCBzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUsIGNyZWF0ZURpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZXBlYXRXaGVuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIG9ic2VydmFibGVQcm90by5yZXBlYXRXaGVuID0gZnVuY3Rpb24gKG5vdGlmaWVyKSB7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRXaGVuT2JzZXJ2YWJsZShyZXBlYXQodGhpcyksIG5vdGlmaWVyKTtcbiAgfTtcblxuICB2YXIgU2Nhbk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2Nhbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmFibGUoc291cmNlLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLmhhc1NlZWQgPSBoYXNTZWVkO1xuICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNjYW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2Nhbk9ic2VydmVyKG8sdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2Nhbk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2Nhbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2FuT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2Nhbk9ic2VydmVyKG8sIHBhcmVudCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fZm4gPSBwYXJlbnQuYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLl9ocyA9IHBhcmVudC5oYXNTZWVkO1xuICAgICAgdGhpcy5fcyA9IHBhcmVudC5zZWVkO1xuICAgICAgdGhpcy5faGEgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2EgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2Nhbk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICF0aGlzLl9odiAmJiAodGhpcy5faHYgPSB0cnVlKTtcbiAgICAgIGlmICh0aGlzLl9oYSkge1xuICAgICAgICB0aGlzLl9hID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX2EsIHgsIHRoaXMuX2ksIHRoaXMuX3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYSA9IHRoaXMuX2hzID8gdHJ5Q2F0Y2godGhpcy5fZm4pKHRoaXMuX3MsIHgsIHRoaXMuX2ksIHRoaXMuX3ApIDogeDtcbiAgICAgICAgdGhpcy5faGEgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2EgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fYS5lKTsgfVxuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fYSk7XG4gICAgICB0aGlzLl9pKys7XG4gICAgfTtcblxuICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTY2FuT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICF0aGlzLl9odiAmJiB0aGlzLl9ocyAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl9zKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNjYW5PYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogIEFwcGxpZXMgYW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gb3ZlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCByZXR1cm5zIGVhY2ggaW50ZXJtZWRpYXRlIHJlc3VsdC4gVGhlIG9wdGlvbmFsIHNlZWQgdmFsdWUgaXMgdXNlZCBhcyB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiAgRm9yIGFnZ3JlZ2F0aW9uIGJlaGF2aW9yIHdpdGggbm8gaW50ZXJtZWRpYXRlIHJlc3VsdHMsIHNlZSBPYnNlcnZhYmxlLmFnZ3JlZ2F0ZS5cbiAgKiBAcGFyYW0ge01peGVkfSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gYWNjdW11bGF0b3IgQW4gYWNjdW11bGF0b3IgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBvbiBlYWNoIGVsZW1lbnQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgYWNjdW11bGF0ZWQgdmFsdWVzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2NhbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaGFzU2VlZCA9IGZhbHNlLCBzZWVkLCBhY2N1bXVsYXRvciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgaGFzU2VlZCA9IHRydWU7XG4gICAgICBzZWVkID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFNjYW5PYnNlcnZhYmxlKHRoaXMsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKTtcbiAgfTtcblxuICB2YXIgU2tpcExhc3RPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZhYmxlKHNvdXJjZSwgYykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwTGFzdE9ic2VydmVyKG8sIHRoaXMuX2MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBMYXN0T2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKSk7XG4gICAgfTtcblxuICAgIFNraXBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBCeXBhc3NlcyBhIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgYXQgdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cy4gQXMgbW9yZSBlbGVtZW50cyBhcmVcbiAgICogIHJlY2VpdmVkLCBlbGVtZW50cyBhcmUgdGFrZW4gZnJvbSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGUgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkLlxuICAgKiBAcGFyYW0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIGJ5cGFzcyBhdCB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSBlbGVtZW50cyBleGNlcHQgZm9yIHRoZSBieXBhc3NlZCBvbmVzIGF0IHRoZSBlbmQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcExhc3QgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBTa2lwTGFzdE9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJlcGVuZHMgYSBzZXF1ZW5jZSBvZiB2YWx1ZXMgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBhbmQgYW4gYXJndW1lbnQgbGlzdCBvZiB2YWx1ZXMgdG8gcHJlcGVuZC5cbiAgICogIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gc291cmNlLnN0YXJ0V2l0aCgxLCAyLCAzKTtcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc3RhcnRXaXRoKFJ4LlNjaGVkdWxlci50aW1lb3V0LCAxLCAyLCAzKTtcbiAgICogQHBhcmFtIHtBcmd1bWVudHN9IGFyZ3MgVGhlIHNwZWNpZmllZCB2YWx1ZXMgdG8gcHJlcGVuZCB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSBwcmVwZW5kZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdGFydFdpdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlcywgc2NoZWR1bGVyLCBzdGFydCA9IDA7XG4gICAgaWYgKCEhYXJndW1lbnRzLmxlbmd0aCAmJiBpc1NjaGVkdWxlcihhcmd1bWVudHNbMF0pKSB7XG4gICAgICBzY2hlZHVsZXIgPSBhcmd1bWVudHNbMF07XG4gICAgICBzdGFydCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgICB9XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSBzdGFydCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQuYXBwbHkobnVsbCwgW29ic2VydmFibGVGcm9tQXJyYXkoYXJncywgc2NoZWR1bGVyKSwgdGhpc10pO1xuICB9O1xuXG4gIHZhciBUYWtlTGFzdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VMYXN0T2JzZXJ2ZXIobywgYykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9jID0gYztcbiAgICAgIHRoaXMuX3EgPSBbXTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcS5wdXNoKHgpO1xuICAgICAgdGhpcy5fcS5sZW5ndGggPiB0aGlzLl9jICYmIHRoaXMuX3Euc2hpZnQoKTtcbiAgICB9O1xuXG4gICAgVGFrZUxhc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwKSB7IHRoaXMuX28ub25OZXh0KHRoaXMuX3Euc2hpZnQoKSk7IH1cbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VMYXN0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgYnVmZmVyIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIGNvdW50IGVsZW1lbnRzLiBVcG9uIGNvbXBsZXRpb24gb2ZcbiAgICogIHRoZSBzb3VyY2Ugc2VxdWVuY2UsIHRoaXMgYnVmZmVyIGlzIGRyYWluZWQgb24gdGhlIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgdGhlIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZSBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdCA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdE9ic2VydmVyKG8sIGNvdW50KSk7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgVGFrZUxhc3RCdWZmZXJPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZUxhc3RCdWZmZXJPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyKG8sIGMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICB0aGlzLl9xID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3EucHVzaCh4KTtcbiAgICAgIHRoaXMuX3EubGVuZ3RoID4gdGhpcy5fYyAmJiB0aGlzLl9xLnNoaWZ0KCk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgVGFrZUxhc3RCdWZmZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fcSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBidWZmZXIgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgY291bnQgZWxlbWVudHMuIFVwb24gY29tcGxldGlvbiBvZiB0aGVcbiAgICogIHNvdXJjZSBzZXF1ZW5jZSwgdGhpcyBidWZmZXIgaXMgcHJvZHVjZWQgb24gdGhlIHJlc3VsdCBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE51bWJlciBvZiBlbGVtZW50cyB0byB0YWtlIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGFycmF5IHdpdGggdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZUxhc3RCdWZmZXIgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFrZUxhc3RCdWZmZXJPYnNlcnZlcihvLCBjb3VudCkpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSB3aW5kb3dzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiBlbGVtZW50IGNvdW50IGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTGVuZ3RoIG9mIGVhY2ggd2luZG93LlxuICAgKiBAcGFyYW0ge051bWJlcn0gW3NraXBdIE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgd2luZG93cy4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdGhlIGNvdW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvd1dpdGhDb3VudCA9IG9ic2VydmFibGVQcm90by53aW5kb3dDb3VudCA9IGZ1bmN0aW9uIChjb3VudCwgc2tpcCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgICtjb3VudCB8fCAoY291bnQgPSAwKTtcbiAgICBNYXRoLmFicyhjb3VudCkgPT09IEluZmluaXR5ICYmIChjb3VudCA9IDApO1xuICAgIGlmIChjb3VudCA8PSAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgc2tpcCA9PSBudWxsICYmIChza2lwID0gY291bnQpO1xuICAgICtza2lwIHx8IChza2lwID0gMCk7XG4gICAgTWF0aC5hYnMoc2tpcCkgPT09IEluZmluaXR5ICYmIChza2lwID0gMCk7XG5cbiAgICBpZiAoc2tpcCA8PSAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShtKSxcbiAgICAgICAgbiA9IDAsXG4gICAgICAgIHEgPSBbXTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlV2luZG93ICgpIHtcbiAgICAgICAgdmFyIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICBxLnB1c2gocyk7XG4gICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICB9XG5cbiAgICAgIGNyZWF0ZVdpbmRvdygpO1xuXG4gICAgICBtLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uTmV4dCh4KTsgfVxuICAgICAgICAgIHZhciBjID0gbiAtIGNvdW50ICsgMTtcbiAgICAgICAgICBjID49IDAgJiYgYyAlIHNraXAgPT09IDAgJiYgcS5zaGlmdCgpLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgKytuICUgc2tpcCA9PT0gMCAmJiBjcmVhdGVXaW5kb3coKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB3aGlsZSAocS5sZW5ndGggPiAwKSB7IHEuc2hpZnQoKS5vbkVycm9yKGUpOyB9XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHsgcS5zaGlmdCgpLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApKTtcbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb25jYXRNYXAoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHZhciBzZWxlY3RvckZ1bmMgPSBiaW5kQ2FsbGJhY2soc2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBzb3VyY2UubWFwKGZ1bmN0aW9uICh4LCBpKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gc2VsZWN0b3JGdW5jKHgsIGksIHNvdXJjZSk7XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgKGlzQXJyYXlMaWtlKHJlc3VsdCkgfHwgaXNJdGVyYWJsZShyZXN1bHQpKSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb20ocmVzdWx0KSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pLmNvbmNhdEFsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqICBPbmUgb2YgdGhlIEZvbGxvd2luZzpcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIG1lcmdlcyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gc291cmNlLmNvbmNhdE1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5yYW5nZSgwLCB4KTsgfSk7XG4gICAqICBPcjpcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIGludm9rZXMgdGhlIHJlc3VsdCBzZWxlY3RvciBmb3IgdGhlIHNvdXJjZSBlbGVtZW50IGFuZCBlYWNoIG9mIHRoZSBjb3JyZXNwb25kaW5nIGlubmVyIHNlcXVlbmNlJ3MgZWxlbWVudHMsIGFuZCBtZXJnZXMgdGhlIHJlc3VsdHMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogIHZhciByZXMgPSBzb3VyY2UuY29uY2F0TWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLnJhbmdlKDAsIHgpOyB9LCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCArIHk7IH0pO1xuICAgKiAgT3I6XG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBtZXJnZXMgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5jb25jYXRNYXAoUnguT2JzZXJ2YWJsZS5mcm9tQXJyYXkoWzEsMiwzXSkpO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQgb3IgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBwcm9qZWN0IGVhY2ggZWxlbWVudCBmcm9tIHRoZVxuICAgKiBzb3VyY2Ugc2VxdWVuY2Ugb250byB3aGljaCBjb3VsZCBiZSBlaXRoZXIgYW4gb2JzZXJ2YWJsZSBvciBQcm9taXNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzdWx0U2VsZWN0b3JdICBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIGludGVybWVkaWF0ZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIG9uZS10by1tYW55IHRyYW5zZm9ybSBmdW5jdGlvbiBjb2xsZWN0aW9uU2VsZWN0b3Igb24gZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBhbmQgdGhlbiBtYXBwaW5nIGVhY2ggb2YgdGhvc2Ugc2VxdWVuY2UgZWxlbWVudHMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgc291cmNlIGVsZW1lbnQgdG8gYSByZXN1bHQgZWxlbWVudC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zZWxlY3RDb25jYXQgPSBvYnNlcnZhYmxlUHJvdG8uY29uY2F0TWFwID0gZnVuY3Rpb24gKHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSAmJiBpc0Z1bmN0aW9uKHJlc3VsdFNlbGVjdG9yKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uY2F0TWFwKGZ1bmN0aW9uICh4LCBpKSB7XG4gICAgICAgIHZhciBzZWxlY3RvclJlc3VsdCA9IHNlbGVjdG9yKHgsIGkpO1xuICAgICAgICBpc1Byb21pc2Uoc2VsZWN0b3JSZXN1bHQpICYmIChzZWxlY3RvclJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzZWxlY3RvclJlc3VsdCkpO1xuICAgICAgICAoaXNBcnJheUxpa2Uoc2VsZWN0b3JSZXN1bHQpIHx8IGlzSXRlcmFibGUoc2VsZWN0b3JSZXN1bHQpKSAmJiAoc2VsZWN0b3JSZXN1bHQgPSBvYnNlcnZhYmxlRnJvbShzZWxlY3RvclJlc3VsdCkpO1xuXG4gICAgICAgIHJldHVybiBzZWxlY3RvclJlc3VsdC5tYXAoZnVuY3Rpb24gKHksIGkyKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdFNlbGVjdG9yKHgsIHksIGksIGkyKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIGNvbmNhdE1hcCh0aGlzLCBzZWxlY3RvciwgdGhpc0FyZykgOlxuICAgICAgY29uY2F0TWFwKHRoaXMsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGVjdG9yOyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogUHJvamVjdHMgZWFjaCBub3RpZmljYXRpb24gb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBjb25jYXRzIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudDsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB3aGVuIGFuIGVycm9yIG9jY3VycyBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB3aGVuIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpcyByZWFjaGVkLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIFwidGhpc1wiIHRvIHVzZSB0byBpbnZva2UgZWFjaCB0cmFuc2Zvcm0uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBvbmUtdG8tbWFueSB0cmFuc2Zvcm0gZnVuY3Rpb24gY29ycmVzcG9uZGluZyB0byBlYWNoIG5vdGlmaWNhdGlvbiBpbiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29uY2F0TWFwT2JzZXJ2ZXIgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0Q29uY2F0T2JzZXJ2ZXIgPSBmdW5jdGlvbihvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsXG4gICAgICAgIG9uTmV4dEZ1bmMgPSBiaW5kQ2FsbGJhY2sob25OZXh0LCB0aGlzQXJnLCAyKSxcbiAgICAgICAgb25FcnJvckZ1bmMgPSBiaW5kQ2FsbGJhY2sob25FcnJvciwgdGhpc0FyZywgMSksXG4gICAgICAgIG9uQ29tcGxldGVkRnVuYyA9IGJpbmRDYWxsYmFjayhvbkNvbXBsZXRlZCwgdGhpc0FyZywgMCk7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uTmV4dEZ1bmMoeCwgaW5kZXgrKyk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uRXJyb3JGdW5jKGVycik7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25Db21wbGV0ZWRGdW5jKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9LCB0aGlzKS5jb25jYXRBbGwoKTtcbiAgfTtcblxuICB2YXIgRGVmYXVsdElmRW1wdHlPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVmYXVsdElmRW1wdHlPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWZhdWx0SWZFbXB0eU9ic2VydmVyKG8sIGQpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9mID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWZhdWx0SWZFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX2YgPSB0cnVlO1xuICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgfTtcblxuICAgIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRGVmYXVsdElmRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgIXRoaXMuX2YgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fZCk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZhdWx0SWZFbXB0eU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgdGhlIGVsZW1lbnRzIG9mIHRoZSBzcGVjaWZpZWQgc2VxdWVuY2Ugb3IgdGhlIHNwZWNpZmllZCB2YWx1ZSBpbiBhIHNpbmdsZXRvbiBzZXF1ZW5jZSBpZiB0aGUgc2VxdWVuY2UgaXMgZW1wdHkuXG4gICAqXG4gICAqICB2YXIgcmVzID0gb2JzID0geHMuZGVmYXVsdElmRW1wdHkoKTtcbiAgICogIDIgLSBvYnMgPSB4cy5kZWZhdWx0SWZFbXB0eShmYWxzZSk7XG4gICAqXG4gICAqIEBtZW1iZXJPZiBPYnNlcnZhYmxlI1xuICAgKiBAcGFyYW0gZGVmYXVsdFZhbHVlIFRoZSB2YWx1ZSB0byByZXR1cm4gaWYgdGhlIHNlcXVlbmNlIGlzIGVtcHR5LiBJZiBub3QgcHJvdmlkZWQsIHRoaXMgZGVmYXVsdHMgdG8gbnVsbC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIGRlZmF1bHQgdmFsdWUgaWYgdGhlIHNvdXJjZSBpcyBlbXB0eTsgb3RoZXJ3aXNlLCB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBpdHNlbGYuXG4gICAqL1xuICAgIG9ic2VydmFibGVQcm90by5kZWZhdWx0SWZFbXB0eSA9IGZ1bmN0aW9uIChkZWZhdWx0VmFsdWUpIHtcbiAgICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgICAgZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQgJiYgKGRlZmF1bHRWYWx1ZSA9IG51bGwpO1xuICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZWZhdWx0SWZFbXB0eU9ic2VydmVyKG8sIGRlZmF1bHRWYWx1ZSkpO1xuICAgICAgfSwgc291cmNlKTtcbiAgICB9O1xuXG4gIC8vIFN3YXAgb3V0IGZvciBBcnJheS5maW5kSW5kZXhcbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mQ29tcGFyZXIoYXJyYXksIGl0ZW0sIGNvbXBhcmVyKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAoY29tcGFyZXIoYXJyYXlbaV0sIGl0ZW0pKSB7IHJldHVybiBpOyB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEhhc2hTZXQoY29tcGFyZXIpIHtcbiAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgdGhpcy5zZXQgPSBbXTtcbiAgfVxuICBIYXNoU2V0LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgcmV0VmFsdWUgPSBhcnJheUluZGV4T2ZDb21wYXJlcih0aGlzLnNldCwgdmFsdWUsIHRoaXMuY29tcGFyZXIpID09PSAtMTtcbiAgICByZXRWYWx1ZSAmJiB0aGlzLnNldC5wdXNoKHZhbHVlKTtcbiAgICByZXR1cm4gcmV0VmFsdWU7XG4gIH07XG5cbiAgdmFyIERpc3RpbmN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0T2JzZXJ2YWJsZShzb3VyY2UsIGtleUZuLCBjbXBGbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5fY21wRm4gPSBjbXBGbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERpc3RpbmN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEaXN0aW5jdE9ic2VydmVyKG8sIHRoaXMuX2tleUZuLCB0aGlzLl9jbXBGbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERpc3RpbmN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERpc3RpbmN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGlzdGluY3RPYnNlcnZlcihvLCBrZXlGbiwgY21wRm4pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fa2V5Rm4gPSBrZXlGbjtcbiAgICAgIHRoaXMuX2ggPSBuZXcgSGFzaFNldChjbXBGbik7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEaXN0aW5jdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBrZXkgPSB4O1xuICAgICAgaWYgKGlzRnVuY3Rpb24odGhpcy5fa2V5Rm4pKSB7XG4gICAgICAgIGtleSA9IHRyeUNhdGNoKHRoaXMuX2tleUZuKSh4KTtcbiAgICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihrZXkuZSk7IH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2gucHVzaChrZXkpICYmIHRoaXMuX28ub25OZXh0KHgpO1xuICAgIH07XG5cbiAgICBEaXN0aW5jdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBEaXN0aW5jdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIG9ubHkgZGlzdGluY3QgZWxlbWVudHMgYWNjb3JkaW5nIHRvIHRoZSBrZXlTZWxlY3RvciBhbmQgdGhlIGNvbXBhcmVyLlxuICAgKiAgVXNhZ2Ugb2YgdGhpcyBvcGVyYXRvciBzaG91bGQgYmUgY29uc2lkZXJlZCBjYXJlZnVsbHkgZHVlIHRvIHRoZSBtYWludGVuYW5jZSBvZiBhbiBpbnRlcm5hbCBsb29rdXAgc3RydWN0dXJlIHdoaWNoIGNhbiBncm93IGxhcmdlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IG9icyA9IHhzLmRpc3RpbmN0KCk7XG4gICAqICAyIC0gb2JzID0geHMuZGlzdGluY3QoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pO1xuICAgKiAgMiAtIG9icyA9IHhzLmRpc3RpbmN0KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9LCBmdW5jdGlvbiAoYSxiKSB7IHJldHVybiBhID09PSBiOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2tleVNlbGVjdG9yXSAgQSBmdW5jdGlvbiB0byBjb21wdXRlIHRoZSBjb21wYXJpc29uIGtleSBmb3IgZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdICBVc2VkIHRvIGNvbXBhcmUgaXRlbXMgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9ubHkgY29udGFpbmluZyB0aGUgZGlzdGluY3QgZWxlbWVudHMsIGJhc2VkIG9uIGEgY29tcHV0ZWQga2V5IHZhbHVlLCBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGlzdGluY3QgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGNvbXBhcmVyKSB7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdENvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IERpc3RpbmN0T2JzZXJ2YWJsZSh0aGlzLCBrZXlTZWxlY3RvciwgY29tcGFyZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgR3JvdXBzIHRoZSBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFjY29yZGluZyB0byBhIHNwZWNpZmllZCBrZXkgc2VsZWN0b3IgZnVuY3Rpb24gYW5kIGNvbXBhcmVyIGFuZCBzZWxlY3RzIHRoZSByZXN1bHRpbmcgZWxlbWVudHMgYnkgdXNpbmcgYSBzcGVjaWZpZWQgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KTtcbiAgICogIDIgLSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lOyB9KTtcbiAgICogIDMgLSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50b1N0cmluZygpOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgQSBmdW5jdGlvbiB0byBleHRyYWN0IHRoZSBrZXkgZm9yIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2VsZW1lbnRTZWxlY3Rvcl0gIEEgZnVuY3Rpb24gdG8gbWFwIGVhY2ggc291cmNlIGVsZW1lbnQgdG8gYW4gZWxlbWVudCBpbiBhbiBvYnNlcnZhYmxlIGdyb3VwLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIGdyb3VwcywgZWFjaCBvZiB3aGljaCBjb3JyZXNwb25kcyB0byBhIHVuaXF1ZSBrZXkgdmFsdWUsIGNvbnRhaW5pbmcgYWxsIGVsZW1lbnRzIHRoYXQgc2hhcmUgdGhhdCBzYW1lIGtleSB2YWx1ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5ncm91cEJ5ID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy5ncm91cEJ5VW50aWwoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvciwgb2JzZXJ2YWJsZU5ldmVyKTtcbiAgfTtcblxuICAgIC8qKlxuICAgICAqICBHcm91cHMgdGhlIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYWNjb3JkaW5nIHRvIGEgc3BlY2lmaWVkIGtleSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICAgKiAgQSBkdXJhdGlvbiBzZWxlY3RvciBmdW5jdGlvbiBpcyB1c2VkIHRvIGNvbnRyb2wgdGhlIGxpZmV0aW1lIG9mIGdyb3Vwcy4gV2hlbiBhIGdyb3VwIGV4cGlyZXMsIGl0IHJlY2VpdmVzIGFuIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbi4gV2hlbiBhIG5ldyBlbGVtZW50IHdpdGggdGhlIHNhbWVcbiAgICAgKiAga2V5IHZhbHVlIGFzIGEgcmVjbGFpbWVkIGdyb3VwIG9jY3VycywgdGhlIGdyb3VwIHdpbGwgYmUgcmVib3JuIHdpdGggYSBuZXcgbGlmZXRpbWUgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogIHZhciByZXMgPSBvYnNlcnZhYmxlLmdyb3VwQnlVbnRpbChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSwgbnVsbCwgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUubmV2ZXIoKTsgfSk7XG4gICAgICogIDIgLSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lOyB9LCAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5uZXZlcigpOyB9KTtcbiAgICAgKiAgMyAtIG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSksIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lm5hbWU7IH0sICBmdW5jdGlvbiAoKSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLm5ldmVyKCk7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH0pO1xuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleVNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gZXh0cmFjdCB0aGUga2V5IGZvciBlYWNoIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uIHRvIHNpZ25hbCB0aGUgZXhwaXJhdGlvbiBvZiBhIGdyb3VwLlxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfVxuICAgICAqICBBIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgZ3JvdXBzLCBlYWNoIG9mIHdoaWNoIGNvcnJlc3BvbmRzIHRvIGEgdW5pcXVlIGtleSB2YWx1ZSwgY29udGFpbmluZyBhbGwgZWxlbWVudHMgdGhhdCBzaGFyZSB0aGF0IHNhbWUga2V5IHZhbHVlLlxuICAgICAqICBJZiBhIGdyb3VwJ3MgbGlmZXRpbWUgZXhwaXJlcywgYSBuZXcgZ3JvdXAgd2l0aCB0aGUgc2FtZSBrZXkgdmFsdWUgY2FuIGJlIGNyZWF0ZWQgb25jZSBhbiBlbGVtZW50IHdpdGggc3VjaCBhIGtleSB2YWx1ZSBpcyBlbmNvdXRlcmVkLlxuICAgICAqXG4gICAgICovXG4gICAgb2JzZXJ2YWJsZVByb3RvLmdyb3VwQnlVbnRpbCA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgbWFwID0gbmV3IE1hcCgpLFxuICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksXG4gICAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShncm91cERpc3Bvc2FibGUpLFxuICAgICAgICAgIGhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGZ1bmN0aW9uIChpdGVtKSB7IGl0ZW0ub25FcnJvcihlKTsgfTsgfTtcblxuICAgICAgICBncm91cERpc3Bvc2FibGUuYWRkKFxuICAgICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSB0cnlDYXRjaChrZXlTZWxlY3RvcikoeCk7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihrZXkuZSkpO1xuICAgICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGtleS5lKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGZpcmVOZXdNYXBFbnRyeSA9IGZhbHNlLCB3cml0ZXIgPSBtYXAuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAod3JpdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgd3JpdGVyID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgICAgbWFwLnNldChrZXksIHdyaXRlcik7XG4gICAgICAgICAgICAgIGZpcmVOZXdNYXBFbnRyeSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmaXJlTmV3TWFwRW50cnkpIHtcbiAgICAgICAgICAgICAgdmFyIGdyb3VwID0gbmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgd3JpdGVyLCByZWZDb3VudERpc3Bvc2FibGUpLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uR3JvdXAgPSBuZXcgR3JvdXBlZE9ic2VydmFibGUoa2V5LCB3cml0ZXIpO1xuICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChkdXJhdGlvblNlbGVjdG9yKShkdXJhdGlvbkdyb3VwKTtcbiAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGR1cmF0aW9uLmUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgby5vbk5leHQoZ3JvdXApO1xuXG4gICAgICAgICAgICAgIHZhciBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgICAgICBncm91cERpc3Bvc2FibGUuYWRkKG1kKTtcblxuICAgICAgICAgICAgICBtZC5zZXREaXNwb3NhYmxlKGR1cmF0aW9uLnRha2UoMSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChtYXBbJ2RlbGV0ZSddKGtleSkpIHsgd3JpdGVyLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZS5yZW1vdmUobWQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB4O1xuICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZWxlbWVudFNlbGVjdG9yKSkge1xuICAgICAgICAgICAgICBlbGVtZW50ID0gdHJ5Q2F0Y2goZWxlbWVudFNlbGVjdG9yKSh4KTtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZWxlbWVudC5lKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihlbGVtZW50LmUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdyaXRlci5vbk5leHQoZWxlbWVudCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7IGl0ZW0ub25Db21wbGV0ZWQoKTsgfSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KSk7XG5cbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICB2YXIgTWFwT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWFwT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE1hcE9ic2VydmFibGUoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLnNlbGVjdG9yID0gYmluZENhbGxiYWNrKHNlbGVjdG9yLCB0aGlzQXJnLCAzKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlubmVyTWFwKHNlbGVjdG9yLCBzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKHgsIGksIG8pIHsgcmV0dXJuIHNlbGVjdG9yLmNhbGwodGhpcywgc2VsZi5zZWxlY3Rvcih4LCBpLCBvKSwgaSwgbyk7IH07XG4gICAgfVxuXG4gICAgTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxNYXAgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiBuZXcgTWFwT2JzZXJ2YWJsZSh0aGlzLnNvdXJjZSwgaW5uZXJNYXAoc2VsZWN0b3IsIHRoaXMpLCB0aGlzQXJnKTtcbiAgICB9O1xuXG4gICAgTWFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKG8sIHRoaXMuc2VsZWN0b3IsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBzZWxlY3Rvciwgc291cmNlKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5zZWxlY3RvcikoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIHRoaXMuby5vbk5leHQocmVzdWx0KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWFwT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIG5ldyBmb3JtIGJ5IGluY29ycG9yYXRpbmcgdGhlIGVsZW1lbnQncyBpbmRleC5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHNvdXJjZSBlbGVtZW50OyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHNvdXJjZS5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hcCA9IG9ic2VydmFibGVQcm90by5zZWxlY3QgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgc2VsZWN0b3JGbiA9IHR5cGVvZiBzZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJyA/IHNlbGVjdG9yIDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZWN0b3I7IH07XG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBNYXBPYnNlcnZhYmxlID9cbiAgICAgIHRoaXMuaW50ZXJuYWxNYXAoc2VsZWN0b3JGbiwgdGhpc0FyZykgOlxuICAgICAgbmV3IE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3JGbiwgdGhpc0FyZyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcGx1Y2tlcihhcmdzLCBsZW4pIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWFwcGVyKHgpIHtcbiAgICAgIHZhciBjdXJyZW50UHJvcCA9IHg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBwID0gY3VycmVudFByb3BbYXJnc1tpXV07XG4gICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjdXJyZW50UHJvcCA9IHA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnRQcm9wO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmVzIHRoZSB2YWx1ZSBvZiBhIHNwZWNpZmllZCBuZXN0ZWQgcHJvcGVydHkgZnJvbSBhbGwgZWxlbWVudHMgaW5cbiAgICogdGhlIE9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7QXJndW1lbnRzfSBhcmd1bWVudHMgVGhlIG5lc3RlZCBwcm9wZXJ0aWVzIHRvIHBsdWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gUmV0dXJucyBhIG5ldyBPYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHByb3BlcnR5IHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wbHVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGlmIChsZW4gPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdMaXN0IG9mIHByb3BlcnRpZXMgY2Fubm90IGJlIGVtcHR5LicpOyB9XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gdGhpcy5tYXAocGx1Y2tlcihhcmdzLCBsZW4pKTtcbiAgfTtcblxub2JzZXJ2YWJsZVByb3RvLmZsYXRNYXAgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0TWFueSA9IG9ic2VydmFibGVQcm90by5tZXJnZU1hcCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5tZXJnZUFsbCgpO1xufTtcblxuICAvKipcbiAgICogUHJvamVjdHMgZWFjaCBub3RpZmljYXRpb24gb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBtZXJnZXMgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50OyB0aGUgc2Vjb25kIHBhcmFtZXRlciBvZiB0aGUgZnVuY3Rpb24gcmVwcmVzZW50cyB0aGUgaW5kZXggb2YgdGhlIHNvdXJjZSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gYW4gZXJyb3Igb2NjdXJzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHdoZW4gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlIGlzIHJlYWNoZWQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gQW4gb3B0aW9uYWwgXCJ0aGlzXCIgdG8gdXNlIHRvIGludm9rZSBlYWNoIHRyYW5zZm9ybS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIG9uZS10by1tYW55IHRyYW5zZm9ybSBmdW5jdGlvbiBjb3JyZXNwb25kaW5nIHRvIGVhY2ggbm90aWZpY2F0aW9uIGluIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5mbGF0TWFwT2JzZXJ2ZXIgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0TWFueU9ic2VydmVyID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbk5leHQuY2FsbCh0aGlzQXJnLCB4LCBpbmRleCsrKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25FcnJvci5jYWxsKHRoaXNBcmcsIGVycik7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25Db21wbGV0ZWQuY2FsbCh0aGlzQXJnKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH0sIHNvdXJjZSkubWVyZ2VBbGwoKTtcbiAgfTtcblxub2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBMYXRlc3QgPSBvYnNlcnZhYmxlUHJvdG8uc3dpdGNoTWFwID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaExhdGVzdCgpO1xufTtcblxuICB2YXIgU2tpcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcE9ic2VydmFibGUoc291cmNlLCBjb3VudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcE9ic2VydmVyKG8sIHRoaXMuX2NvdW50KSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNraXBPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3IgPSBjO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFNraXBPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX3IgPD0gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3ItLTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNraXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQnlwYXNzZXMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIHRoZW4gcmV0dXJucyB0aGUgcmVtYWluaW5nIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJlZm9yZSByZXR1cm5pbmcgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgdGhhdCBvY2N1ciBhZnRlciB0aGUgc3BlY2lmaWVkIGluZGV4IGluIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgU2tpcE9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIHZhciBTa2lwV2hpbGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFdoaWxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwV2hpbGVPYnNlcnZlcihvLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwV2hpbGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBXaGlsZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX3IgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICghdGhpcy5fcikge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX3IgPSAhcmVzO1xuICAgICAgfVxuICAgICAgdGhpcy5fciAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgQnlwYXNzZXMgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBsb25nIGFzIGEgc3BlY2lmaWVkIGNvbmRpdGlvbiBpcyB0cnVlIGFuZCB0aGVuIHJldHVybnMgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogIFRoZSBlbGVtZW50J3MgaW5kZXggaXMgdXNlZCBpbiB0aGUgbG9naWMgb2YgdGhlIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAgICpcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc2tpcFdoaWxlKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPCAxMDsgfSk7XG4gICAqICB2YXIgcmVzID0gc291cmNlLnNraXBXaGlsZShmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiB2YWx1ZSA8IDEwIHx8IGluZGV4IDwgMTA7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSBzdGFydGluZyBhdCB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGluZWFyIHNlcmllcyB0aGF0IGRvZXMgbm90IHBhc3MgdGhlIHRlc3Qgc3BlY2lmaWVkIGJ5IHByZWRpY2F0ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwV2hpbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBTa2lwV2hpbGVPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgVGFrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZU9ic2VydmFibGUoc291cmNlLCBjb3VudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZU9ic2VydmVyKG8sIHRoaXMuX2NvdW50KSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fciA9IGM7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoVGFrZU9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fci0tID4gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgdGhpcy5fciA8PSAwICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRha2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGEgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIGZvciB0aGUgZWRnZSBjYXNlIG9mIHRha2UoMCkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB1c2VkIHRvIHByb2R1Y2UgYW4gT25Db21wbGV0ZWQgbWVzc2FnZSBpbiBjYXNlIDxwYXJhbXJlZiBuYW1lPVwiY291bnQgY291bnQ8L3BhcmFtcmVmPiBpcyBzZXQgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZSA9IGZ1bmN0aW9uIChjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIGlmIChjb3VudCA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2YWJsZUVtcHR5KHNjaGVkdWxlcik7IH1cbiAgICByZXR1cm4gbmV3IFRha2VPYnNlcnZhYmxlKHRoaXMsIGNvdW50KTtcbiAgfTtcblxuICB2YXIgVGFrZVdoaWxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZVdoaWxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VXaGlsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZVdoaWxlT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZVdoaWxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUYWtlV2hpbGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZVdoaWxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9yID0gdHJ1ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9yKSB7XG4gICAgICAgIHRoaXMuX3IgPSB0cnlDYXRjaCh0aGlzLl9wLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9wKTtcbiAgICAgICAgaWYgKHRoaXMuX3IgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fci5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3IpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBUYWtlV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRha2VXaGlsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgZWxlbWVudHMgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGlzIHRydWUuXG4gICAqICBUaGUgZWxlbWVudCdzIGluZGV4IGlzIHVzZWQgaW4gdGhlIGxvZ2ljIG9mIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbjsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIGZyb20gdGhlIGlucHV0IHNlcXVlbmNlIHRoYXQgb2NjdXIgYmVmb3JlIHRoZSBlbGVtZW50IGF0IHdoaWNoIHRoZSB0ZXN0IG5vIGxvbmdlciBwYXNzZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVdoaWxlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgVGFrZVdoaWxlT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIEZpbHRlck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpbHRlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBGaWx0ZXJPYnNlcnZhYmxlKHNvdXJjZSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMucHJlZGljYXRlID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaWx0ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5wcmVkaWNhdGUsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCBzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeCwgaSwgbykgeyByZXR1cm4gc2VsZi5wcmVkaWNhdGUoeCwgaSwgbykgJiYgcHJlZGljYXRlLmNhbGwodGhpcywgeCwgaSwgbyk7IH1cbiAgICB9XG5cbiAgICBGaWx0ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnRlcm5hbEZpbHRlciA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIG5ldyBGaWx0ZXJPYnNlcnZhYmxlKHRoaXMuc291cmNlLCBpbm5lclByZWRpY2F0ZShwcmVkaWNhdGUsIHRoaXMpLCB0aGlzQXJnKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgc2hvdWxkWWllbGQgPSB0cnlDYXRjaCh0aGlzLnByZWRpY2F0ZSkoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChzaG91bGRZaWVsZCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuby5vbkVycm9yKHNob3VsZFlpZWxkLmUpO1xuICAgICAgfVxuICAgICAgc2hvdWxkWWllbGQgJiYgdGhpcy5vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmlsdGVyT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEZpbHRlcnMgdGhlIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgb24gYSBwcmVkaWNhdGUgYnkgaW5jb3Jwb3JhdGluZyB0aGUgZWxlbWVudCdzIGluZGV4LlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBzb3VyY2UgZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSB0aGF0IHNhdGlzZnkgdGhlIGNvbmRpdGlvbi5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpbHRlciA9IG9ic2VydmFibGVQcm90by53aGVyZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIEZpbHRlck9ic2VydmFibGUgPyB0aGlzLmludGVybmFsRmlsdGVyKHByZWRpY2F0ZSwgdGhpc0FyZykgOlxuICAgICAgbmV3IEZpbHRlck9ic2VydmFibGUodGhpcywgcHJlZGljYXRlLCB0aGlzQXJnKTtcbiAgfTtcblxuICB2YXIgRXh0cmVtYUJ5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXh0cmVtYUJ5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHRyZW1hQnlPYnNlcnZhYmxlKHNvdXJjZSwgaywgYykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXh0cmVtYUJ5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBFeHRyZW1hQnlPYnNlcnZlcihvLCB0aGlzLl9rLCB0aGlzLl9jKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHRyZW1hQnlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEV4dHJlbWFCeU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHRyZW1hQnlPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHRyZW1hQnlPYnNlcnZlcihvLCBrLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9sID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHRyZW1hQnlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0gdHJ5Q2F0Y2godGhpcy5faykoeCk7XG4gICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgdmFyIGNvbXBhcmlzb24gPSAwO1xuICAgICAgaWYgKCF0aGlzLl9odikge1xuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wYXJpc29uID0gdHJ5Q2F0Y2godGhpcy5fYykoa2V5LCB0aGlzLl92KTtcbiAgICAgICAgaWYgKGNvbXBhcmlzb24gPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IoY29tcGFyaXNvbi5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKGNvbXBhcmlzb24gPiAwKSB7XG4gICAgICAgIHRoaXMuX3YgPSBrZXk7XG4gICAgICAgIHRoaXMuX2wgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wYXJpc29uID49IDApIHsgdGhpcy5fbC5wdXNoKHgpOyB9XG4gICAgfTtcblxuICAgIEV4dHJlbWFCeU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIEV4dHJlbWFCeU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9sKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4dHJlbWFCeU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICBmdW5jdGlvbiBmaXJzdE9ubHkoeCkge1xuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRW1wdHlFcnJvcigpOyB9XG4gICAgcmV0dXJuIHhbMF07XG4gIH1cblxuICB2YXIgUmVkdWNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZWR1Y2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlZHVjZU9ic2VydmFibGUoc291cmNlLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLmhhc1NlZWQgPSBoYXNTZWVkO1xuICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZHVjZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgUmVkdWNlT2JzZXJ2ZXIob2JzZXJ2ZXIsdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVkdWNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBSZWR1Y2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVkdWNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVkdWNlT2JzZXJ2ZXIobywgcGFyZW50KSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9mbiA9IHBhcmVudC5hY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuX2hzID0gcGFyZW50Lmhhc1NlZWQ7XG4gICAgICB0aGlzLl9zID0gcGFyZW50LnNlZWQ7XG4gICAgICB0aGlzLl9oYSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYSA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBSZWR1Y2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAhdGhpcy5faHYgJiYgKHRoaXMuX2h2ID0gdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5faGEpIHtcbiAgICAgICAgdGhpcy5fYSA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh0aGlzLl9hLCB4LCB0aGlzLl9pLCB0aGlzLl9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2EgPSB0aGlzLl9ocyA/IHRyeUNhdGNoKHRoaXMuX2ZuKSh0aGlzLl9zLCB4LCB0aGlzLl9pLCB0aGlzLl9wKSA6IHg7XG4gICAgICAgIHRoaXMuX2hhID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9hID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHRoaXMuX2EuZSk7IH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuXG4gICAgUmVkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgUmVkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2h2ICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX2EpO1xuICAgICAgIXRoaXMuX2h2ICYmIHRoaXMuX2hzICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgIXRoaXMuX2h2ICYmICF0aGlzLl9ocyAmJiB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZWR1Y2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogQXBwbGllcyBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHJldHVybmluZyB0aGUgcmVzdWx0IG9mIHRoZSBhZ2dyZWdhdGlvbiBhcyBhIHNpbmdsZSBlbGVtZW50IGluIHRoZSByZXN1bHQgc2VxdWVuY2UuIFRoZSBzcGVjaWZpZWQgc2VlZCB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqIEZvciBhZ2dyZWdhdGlvbiBiZWhhdmlvciB3aXRoIGluY3JlbWVudGFsIGludGVybWVkaWF0ZSByZXN1bHRzLCBzZWUgT2JzZXJ2YWJsZS5zY2FuLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjY3VtdWxhdG9yIEFuIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgb24gZWFjaCBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIGZpbmFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmVkdWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNTZWVkID0gZmFsc2UsIHNlZWQsIGFjY3VtdWxhdG9yID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBoYXNTZWVkID0gdHJ1ZTtcbiAgICAgIHNlZWQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVkdWNlT2JzZXJ2YWJsZSh0aGlzLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCk7XG4gIH07XG5cbiAgdmFyIFNvbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTb21lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTb21lT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTb21lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTb21lT2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTb21lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTb21lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNvbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNvbWVPYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNvbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaWYgKEJvb2xlYW4ocmVzdWx0KSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgU29tZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTb21lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KGZhbHNlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNvbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbnkgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHNhdGlzZmllcyBhIGNvbmRpdGlvbiBpZiBwcmVzZW50LCBlbHNlIGlmIGFueSBpdGVtcyBhcmUgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlXSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgYW55IGVsZW1lbnRzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UgcGFzcyB0aGUgdGVzdCBpbiB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSBpZiBnaXZlbiwgZWxzZSBpZiBhbnkgaXRlbXMgYXJlIGluIHRoZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zb21lID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU29tZU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBJc0VtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSXNFbXB0eU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSXNFbXB0eU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElzRW1wdHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElzRW1wdHlPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJc0VtcHR5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBJc0VtcHR5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSXNFbXB0eU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElzRW1wdHlPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElzRW1wdHlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KGZhbHNlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuICAgIElzRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgSXNFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElzRW1wdHlPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgc291cmNlIHNlcXVlbmNlIGlzIGVtcHR5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBJc0VtcHR5T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgRXZlcnlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVyeU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlcnlPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV2ZXJ5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBFdmVyeU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXZlcnlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEV2ZXJ5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZXJ5T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBFdmVyeU9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXZlcnlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaWYgKCFCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoZmFsc2UpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBFdmVyeU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBFdmVyeU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZXJ5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYWxsIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugc2F0aXNmeSBhIGNvbmRpdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZV0gQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb24uXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciBhbGwgZWxlbWVudHMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZSBwYXNzIHRoZSB0ZXN0IGluIHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmV2ZXJ5ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgRXZlcnlPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgSW5jbHVkZXNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmNsdWRlc09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5jbHVkZXNPYnNlcnZhYmxlKHNvdXJjZSwgZWxlbSwgaWR4KSB7XG4gICAgICB2YXIgbiA9ICtpZHggfHwgMDtcbiAgICAgIE1hdGguYWJzKG4pID09PSBJbmZpbml0eSAmJiAobiA9IDApO1xuXG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2VsZW0gPSBlbGVtO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbmNsdWRlc09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbmNsdWRlc09ic2VydmVyKG8sIHRoaXMuX2VsZW0sIHRoaXMuX24pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluY2x1ZGVzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBJbmNsdWRlc09ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmNsdWRlc09ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluY2x1ZGVzT2JzZXJ2ZXIobywgZWxlbSwgbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9lbGVtID0gZWxlbTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wYXJlcihhLCBiKSB7XG4gICAgICByZXR1cm4gKGEgPT09IDAgJiYgYiA9PT0gMCkgfHwgKGEgPT09IGIgfHwgKGlzTmFOKGEpICYmIGlzTmFOKGIpKSk7XG4gICAgfVxuXG4gICAgSW5jbHVkZXNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faSsrID49IHRoaXMuX24gJiYgY29tcGFyZXIoeCwgdGhpcy5fZWxlbSkpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIEluY2x1ZGVzT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEluY2x1ZGVzT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQoZmFsc2UpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gSW5jbHVkZXNPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGluY2x1ZGVzIGEgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBhbiBvcHRpb25hbCBlcXVhbGl0eSBjb21wYXJlci5cbiAgICogQHBhcmFtIHNlYXJjaEVsZW1lbnQgVGhlIHZhbHVlIHRvIGxvY2F0ZSBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2Zyb21JbmRleF0gQW4gZXF1YWxpdHkgY29tcGFyZXIgdG8gY29tcGFyZSBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbmNsdWRlcyBhbiBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgdmFsdWUgZnJvbSB0aGUgZ2l2ZW4gaW5kZXguXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaW5jbHVkZXMgPSBmdW5jdGlvbiAoc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG4gICAgcmV0dXJuIG5ldyBJbmNsdWRlc09ic2VydmFibGUodGhpcywgc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KTtcbiAgfTtcblxuICB2YXIgQ291bnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb3VudE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ291bnRPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDb3VudE9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ291bnRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENvdW50T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvdW50T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDb3VudE9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fYyA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb3VudE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9mbikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzdWx0KSAmJiAodGhpcy5fYysrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2MrKztcbiAgICAgIH1cbiAgICB9O1xuICAgIENvdW50T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIENvdW50T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ291bnRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgdmFsdWUgdGhhdCByZXByZXNlbnRzIGhvdyBtYW55IGVsZW1lbnRzIGluIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBzYXRpc2Z5IGEgY29uZGl0aW9uIGlmIHByb3ZpZGVkLCBlbHNlIHRoZSBjb3VudCBvZiBpdGVtcy5cbiAgICogQGV4YW1wbGVcbiAgICogcmVzID0gc291cmNlLmNvdW50KCk7XG4gICAqIHJlcyA9IHNvdXJjZS5jb3VudChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA+IDM7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlXUEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggYSBudW1iZXIgdGhhdCByZXByZXNlbnRzIGhvdyBtYW55IGVsZW1lbnRzIGluIHRoZSBpbnB1dCBzZXF1ZW5jZSBzYXRpc2Z5IHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpZiBwcm92aWRlZCwgZWxzZSB0aGUgY291bnQgb2YgaXRlbXMgaW4gdGhlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvdW50ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgQ291bnRPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgSW5kZXhPZk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEluZGV4T2ZPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluZGV4T2ZPYnNlcnZhYmxlKHNvdXJjZSwgZSwgbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5kZXhPZk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KC0xKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbmRleE9mT2JzZXJ2ZXIobywgdGhpcy5fZSwgdGhpcy5fbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW5kZXhPZk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgSW5kZXhPZk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmRleE9mT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5kZXhPZk9ic2VydmVyKG8sIGUsIG4pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX24gJiYgeCA9PT0gdGhpcy5fZSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9pKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG4gICAgSW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQoLTEpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gSW5kZXhPZk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqIEBwYXJhbSB7QW55fSBzZWFyY2hFbGVtZW50IEVsZW1lbnQgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tSW5kZXhdIFRoZSBpbmRleCB0byBzdGFydCB0aGUgc2VhcmNoLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuZCBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgZm91bmQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UsIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcbiAgICBNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkgJiYgKG4gPSAwKTtcbiAgICByZXR1cm4gbmV3IEluZGV4T2ZPYnNlcnZhYmxlKHRoaXMsIHNlYXJjaEVsZW1lbnQsIG4pO1xuICB9O1xuXG4gIHZhciBTdW1PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdW1PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1bU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3VtT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTdW1PYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1bU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU3VtT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1bU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU3VtT2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9jID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN1bU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9mbikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIHRoaXMuX2MgKz0gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYyArPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgU3VtT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFN1bU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9jKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1bU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIHN1bSBvZiBhIHNlcXVlbmNlIG9mIHZhbHVlcyB0aGF0IGFyZSBvYnRhaW5lZCBieSBpbnZva2luZyBhbiBvcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSwgZWxzZSBpZiBub3Qgc3BlY2lmaWVkIGNvbXB1dGVzIHRoZSBzdW0gb24gZWFjaCBpdGVtIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgc3VtIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdW0gPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2soa2V5U2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU3VtT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgbWluaW11bSBrZXkgdmFsdWUgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgY29tcGFyZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0pO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1pbkJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9LCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAtIHk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBLZXkgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGtleSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHplcm8gb3IgbW9yZSBlbGVtZW50cyB0aGF0IGhhdmUgYSBtaW5pbXVtIGtleSB2YWx1ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5taW5CeSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0U3ViQ29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRXh0cmVtYUJ5T2JzZXJ2YWJsZSh0aGlzLCBrZXlTZWxlY3RvciwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGNvbXBhcmVyKHgsIHkpICogLTE7IH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtaW5pbXVtIGVsZW1lbnQgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbmFsIGNvbXBhcmVyIGVsc2UgYSBkZWZhdWx0IGdyZWF0ZXIgdGhhbiBsZXNzIHRoYW4gY2hlY2suXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluKCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnZhbHVlIC0geS52YWx1ZTsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGVsZW1lbnRzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgbWluaW11bSBlbGVtZW50IGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWluID0gZnVuY3Rpb24gKGNvbXBhcmVyKSB7XG4gICAgcmV0dXJuIHRoaXMubWluQnkoaWRlbnRpdHksIGNvbXBhcmVyKS5tYXAoZmlyc3RPbmx5KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBtYXhpbXVtICBrZXkgdmFsdWUgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgY29tcGFyZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWF4QnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0pO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1heEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9LCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAtIHk7OyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgS2V5IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdICBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUga2V5IHZhbHVlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIGxpc3Qgb2YgemVybyBvciBtb3JlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1heGltdW0ga2V5IHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1heEJ5ID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBjb21wYXJlcikge1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRTdWJDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBFeHRyZW1hQnlPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBjb21wYXJlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1heGltdW0gdmFsdWUgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb21wYXJlci5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXgoKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXgoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgLSB5LnZhbHVlOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBtYXhpbXVtIGVsZW1lbnQgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYXggPSBmdW5jdGlvbiAoY29tcGFyZXIpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhCeShpZGVudGl0eSwgY29tcGFyZXIpLm1hcChmaXJzdE9ubHkpO1xuICB9O1xuXG4gIHZhciBBdmVyYWdlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXZlcmFnZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQXZlcmFnZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQXZlcmFnZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgQXZlcmFnZU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXZlcmFnZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQXZlcmFnZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEF2ZXJhZ2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBBdmVyYWdlT2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fYyA9IDA7XG4gICAgICB0aGlzLl90ID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEF2ZXJhZ2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZih0aGlzLl9mbikge1xuICAgICAgICB2YXIgciA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9jKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAociA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyLmUpOyB9XG4gICAgICAgIHRoaXMuX3QgKz0gcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2MrKztcbiAgICAgICAgdGhpcy5fdCArPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgQXZlcmFnZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBBdmVyYWdlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9jID09PSAwKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7IH1cbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3QgLyB0aGlzLl9jKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF2ZXJhZ2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBhdmVyYWdlIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgdmFsdWVzIHRoYXQgYXJlIGluIHRoZSBzZXF1ZW5jZSBvciBvYnRhaW5lZCBieSBpbnZva2luZyBhIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlIGlmIHByZXNlbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIGF2ZXJhZ2Ugb2YgdGhlIHNlcXVlbmNlIG9mIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hdmVyYWdlID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsIGZuO1xuICAgIGlmIChpc0Z1bmN0aW9uKGtleVNlbGVjdG9yKSkge1xuICAgICAgZm4gPSBiaW5kQ2FsbGJhY2soa2V5U2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEF2ZXJhZ2VPYnNlcnZhYmxlKHNvdXJjZSwgZm4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgRGV0ZXJtaW5lcyB3aGV0aGVyIHR3byBzZXF1ZW5jZXMgYXJlIGVxdWFsIGJ5IGNvbXBhcmluZyB0aGUgZWxlbWVudHMgcGFpcndpc2UgdXNpbmcgYSBzcGVjaWZpZWQgZXF1YWxpdHkgY29tcGFyZXIuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSByZXMgPSBzb3VyY2Uuc2VxdWVuY2VFcXVhbChbMSwyLDNdKTtcbiAgICogdmFyIHJlcyA9IHJlcyA9IHNvdXJjZS5zZXF1ZW5jZUVxdWFsKFt7IHZhbHVlOiA0MiB9XSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgPT09IHkudmFsdWU7IH0pO1xuICAgKiAzIC0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoUnguT2JzZXJ2YWJsZS5yZXR1cm5WYWx1ZSg0MikpO1xuICAgKiA0IC0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoUnguT2JzZXJ2YWJsZS5yZXR1cm5WYWx1ZSh7IHZhbHVlOiA0MiB9KSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgPT09IHkudmFsdWU7IH0pO1xuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBhcnJheSB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBib3RoIHNlcXVlbmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBhIHNpbmdsZSBlbGVtZW50IHdoaWNoIGluZGljYXRlcyB3aGV0aGVyIGJvdGggc2VxdWVuY2VzIGFyZSBvZiBlcXVhbCBsZW5ndGggYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgZWxlbWVudHMgYXJlIGVxdWFsIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGVxdWFsaXR5IGNvbXBhcmVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNlcXVlbmNlRXF1YWwgPSBmdW5jdGlvbiAoc2Vjb25kLCBjb21wYXJlcikge1xuICAgIHZhciBmaXJzdCA9IHRoaXM7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdENvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkb25lbCA9IGZhbHNlLCBkb25lciA9IGZhbHNlLCBxbCA9IFtdLCBxciA9IFtdO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbjEgPSBmaXJzdC5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHFyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgdiA9IHFyLnNoaWZ0KCk7XG4gICAgICAgICAgdmFyIGVxdWFsID0gdHJ5Q2F0Y2goY29tcGFyZXIpKHYsIHgpO1xuICAgICAgICAgIGlmIChlcXVhbCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihlcXVhbC5lKTsgfVxuICAgICAgICAgIGlmICghZXF1YWwpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZG9uZXIpIHtcbiAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHFsLnB1c2goeCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uKGUpIHsgby5vbkVycm9yKGUpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmVsID0gdHJ1ZTtcbiAgICAgICAgaWYgKHFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmIChxci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkb25lcikge1xuICAgICAgICAgICAgby5vbk5leHQodHJ1ZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgKGlzQXJyYXlMaWtlKHNlY29uZCkgfHwgaXNJdGVyYWJsZShzZWNvbmQpKSAmJiAoc2Vjb25kID0gb2JzZXJ2YWJsZUZyb20oc2Vjb25kKSk7XG4gICAgICBpc1Byb21pc2Uoc2Vjb25kKSAmJiAoc2Vjb25kID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNlY29uZCkpO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbjIgPSBzZWNvbmQuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmIChxbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIHYgPSBxbC5zaGlmdCgpO1xuICAgICAgICAgIHZhciBlcXVhbCA9IHRyeUNhdGNoKGNvbXBhcmVyKSh2LCB4KTtcbiAgICAgICAgICBpZiAoZXF1YWwgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZXF1YWwuZSk7IH1cbiAgICAgICAgICBpZiAoIWVxdWFsKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRvbmVsKSB7XG4gICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxci5wdXNoKHgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbihlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkb25lciA9IHRydWU7XG4gICAgICAgIGlmIChxci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpZiAocWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9uZWwpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KHRydWUpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uMSwgc3Vic2NyaXB0aW9uMik7XG4gICAgfSwgZmlyc3QpO1xuICB9O1xuXG4gIHZhciBFbGVtZW50QXRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFbGVtZW50QXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEVsZW1lbnRBdE9ic2VydmFibGUoc291cmNlLCBpLCBkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFbGVtZW50QXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEVsZW1lbnRBdE9ic2VydmVyKG8sIHRoaXMuX2ksIHRoaXMuX2QpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVsZW1lbnRBdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRWxlbWVudEF0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEVsZW1lbnRBdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRWxlbWVudEF0T2JzZXJ2ZXIobywgaSwgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRWxlbWVudEF0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2ktLSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudEF0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEVsZW1lbnRBdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9kKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRWxlbWVudEF0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50IGF0IGEgc3BlY2lmaWVkIGluZGV4IGluIGEgc2VxdWVuY2Ugb3IgZGVmYXVsdCB2YWx1ZSBpZiBub3QgZm91bmQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgZWxlbWVudCB0byByZXRyaWV2ZS5cbiAgICogQHBhcmFtIHtBbnl9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIHRvIHVzZSBpZiBlbGVtZW50QXQgZG9lcyBub3QgZmluZCBhIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24gaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5lbGVtZW50QXQgPSAgZnVuY3Rpb24gKGluZGV4LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoaW5kZXggPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBFbGVtZW50QXRPYnNlcnZhYmxlKHRoaXMsIGluZGV4LCBkZWZhdWx0VmFsdWUpO1xuICB9O1xuXG4gIHZhciBTaW5nbGVPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTaW5nbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTaW5nbGVPYnNlcnZlcihvLCBvYmosIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNpbmdsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBzaG91bGRZaWVsZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29iai5wcmVkaWNhdGUpKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzKSAmJiAoc2hvdWxkWWllbGQgPSB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgc2hvdWxkWWllbGQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFlpZWxkKSB7XG4gICAgICAgIGlmICh0aGlzLl9odikge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vLm9uRXJyb3IobmV3IEVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBtb3JlIHRoYW4gb25lIG1hdGNoaW5nIGVsZW1lbnQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgICB0aGlzLl92ID0geDtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTaW5nbGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLl9vYmouZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFNpbmdsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb25seSBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgb3B0aW9uYWwgcHJlZGljYXRlLCBhbmQgcmVwb3J0cyBhbiBleGNlcHRpb24gaWYgdGhlcmUgaXMgbm90IGV4YWN0bHkgb25lIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9IFNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZS5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc2luZ2xlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIG9iaiA9IHt9LCBzb3VyY2UgPSB0aGlzO1xuICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG9iaiA9IGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgICBwcmVkaWNhdGU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICB0aGlzQXJnOiBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBhcmd1bWVudHNbMl1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uIChvYmoucHJlZGljYXRlKSkge1xuICAgICAgICB2YXIgZm4gPSBvYmoucHJlZGljYXRlO1xuICAgICAgICBvYmoucHJlZGljYXRlID0gYmluZENhbGxiYWNrKGZuLCBvYmoudGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFNpbmdsZU9ic2VydmVyKG8sIG9iaiwgc291cmNlKSk7XG4gICAgICB9LCBzb3VyY2UpO1xuICAgIH07XG5cbiAgdmFyIEZpcnN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmlyc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpcnN0T2JzZXJ2YWJsZShzb3VyY2UsIG9iaikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaXJzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRmlyc3RPYnNlcnZlcihvLCB0aGlzLl9vYmosIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGaXJzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRmlyc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaXJzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpcnN0T2JzZXJ2ZXIobywgb2JqLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYmoucHJlZGljYXRlKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICBpZiAoQm9vbGVhbihyZXMpKSB7XG4gICAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX29iai5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBGaXJzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBpZiBwcmVzZW50IGVsc2UgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU2VxdWVuY2UgY29udGFpbmluZyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUgaWYgcHJvdmlkZWQsIGVsc2UgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB7fSwgc291cmNlID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9iaiA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqID0ge1xuICAgICAgICBwcmVkaWNhdGU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgdGhpc0FyZzogYXJndW1lbnRzWzFdLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGFyZ3VtZW50c1syXVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24gKG9iai5wcmVkaWNhdGUpKSB7XG4gICAgICB2YXIgZm4gPSBvYmoucHJlZGljYXRlO1xuICAgICAgb2JqLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhmbiwgb2JqLnRoaXNBcmcsIDMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEZpcnN0T2JzZXJ2YWJsZSh0aGlzLCBvYmopO1xuICB9O1xuXG4gIHZhciBMYXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTGFzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdE9ic2VydmFibGUoc291cmNlLCBvYmopIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTGFzdE9ic2VydmVyKG8sIHRoaXMuX29iaiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIExhc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdE9ic2VydmVyKG8sIG9iaiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3YgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBzaG91bGRZaWVsZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29iai5wcmVkaWNhdGUpKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzKSAmJiAoc2hvdWxkWWllbGQgPSB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgc2hvdWxkWWllbGQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFlpZWxkKSB7XG4gICAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdiA9IHg7XG4gICAgICB9XG4gICAgfTtcbiAgICBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIExhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLl9vYmouZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBpZiBzcGVjaWZpZWQsIGVsc2UgdGhlIGxhc3QgZWxlbWVudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0ge30sIHNvdXJjZSA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBvYmogPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iaiA9IHtcbiAgICAgICAgcHJlZGljYXRlOiBhcmd1bWVudHNbMF0sXG4gICAgICAgIHRoaXNBcmc6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBhcmd1bWVudHNbMl1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uIChvYmoucHJlZGljYXRlKSkge1xuICAgICAgdmFyIGZuID0gb2JqLnByZWRpY2F0ZTtcbiAgICAgIG9iai5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2soZm4sIG9iai50aGlzQXJnLCAzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMYXN0T2JzZXJ2YWJsZSh0aGlzLCBvYmopO1xuICB9O1xuXG4gIHZhciBGaW5kVmFsdWVPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaW5kVmFsdWVPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaW5kVmFsdWVPYnNlcnZlcihvYnNlcnZlciwgc291cmNlLCBjYWxsYmFjaywgeWllbGRJbmRleCkge1xuICAgICAgdGhpcy5fbyA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NiID0gY2FsbGJhY2s7XG4gICAgICB0aGlzLl95ID0geWllbGRJbmRleDtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHNob3VsZFJ1biA9IHRyeUNhdGNoKHRoaXMuX2NiKSh4LCB0aGlzLl9pLCB0aGlzLl9zKTtcbiAgICAgIGlmIChzaG91bGRSdW4gPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioc2hvdWxkUnVuLmUpOyB9XG4gICAgICBpZiAoc2hvdWxkUnVuKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3kgPyB0aGlzLl9pIDogeCk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2krKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3kgJiYgdGhpcy5fby5vbk5leHQoLTEpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmluZFZhbHVlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGZpbmRWYWx1ZSAoc291cmNlLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHlpZWxkSW5kZXgpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBGaW5kVmFsdWVPYnNlcnZlcihvLCBzb3VyY2UsIGNhbGxiYWNrLCB5aWVsZEluZGV4KSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyBmb3IgYW4gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSwgYW5kIHJldHVybnMgdGhlIGZpcnN0IG9jY3VycmVuY2Ugd2l0aGluIHRoZSBlbnRpcmUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdGhhdCBkZWZpbmVzIHRoZSBjb25kaXRpb25zIG9mIHRoZSBlbGVtZW50IHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgdGhlIHByZWRpY2F0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSwgaWYgZm91bmQ7IG90aGVyd2lzZSwgdW5kZWZpbmVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpbmQgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZpbmRWYWx1ZSh0aGlzLCBwcmVkaWNhdGUsIHRoaXNBcmcsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VhcmNoZXMgZm9yIGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUsIGFuZCByZXR1cm5zXG4gICAqIGFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSB3aXRoaW4gdGhlIGVudGlyZSBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0aGF0IGRlZmluZXMgdGhlIGNvbmRpdGlvbnMgb2YgdGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyB0aGUgcHJlZGljYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgbWF0Y2gsIGlmIGZvdW5kOyBvdGhlcndpc2UsIOKAkzEuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5maW5kSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZpbmRWYWx1ZSh0aGlzLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHRydWUpO1xuICB9O1xuXG4gIHZhciBUb1NldE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvU2V0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUb1NldE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvU2V0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUb1NldE9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvU2V0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUb1NldE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb1NldE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvU2V0T2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gbmV3IHJvb3QuU2V0KCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb1NldE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3MuYWRkKHgpO1xuICAgIH07XG5cbiAgICBUb1NldE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRvU2V0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9TZXRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGEgU2V0IGlmIGl0IGV4aXN0cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSB2YWx1ZSBvZiBhIFNldCBjb250YWluaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50b1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIHJvb3QuU2V0ID09PSAndW5kZWZpbmVkJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFRvU2V0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgVG9NYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb01hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9NYXBPYnNlcnZhYmxlKHNvdXJjZSwgaywgZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVG9NYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRvTWFwT2JzZXJ2ZXIobywgdGhpcy5faywgdGhpcy5fZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9NYXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRvTWFwT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvTWFwT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9NYXBPYnNlcnZlcihvLCBrLCBlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9tID0gbmV3IHJvb3QuTWFwKCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb01hcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBrZXkgPSB0cnlDYXRjaCh0aGlzLl9rKSh4KTtcbiAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioa2V5LmUpOyB9XG4gICAgICB2YXIgZWxlbSA9IHg7XG4gICAgICBpZiAodGhpcy5fZSkge1xuICAgICAgICBlbGVtID0gdHJ5Q2F0Y2godGhpcy5fZSkoeCk7XG4gICAgICAgIGlmIChlbGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGVsZW0uZSk7IH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbS5zZXQoa2V5LCBlbGVtKTtcbiAgICB9O1xuXG4gICAgVG9NYXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUb01hcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9tKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvTWFwT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIENvbnZlcnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGEgTWFwIGlmIGl0IGV4aXN0cy5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHdoaWNoIHByb2R1Y2VzIHRoZSBrZXkgZm9yIHRoZSBNYXAuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2VsZW1lbnRTZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gd2hpY2ggcHJvZHVjZXMgdGhlIGVsZW1lbnQgZm9yIHRoZSBNYXAuIElmIG5vdCBwcmVzZW50LCBkZWZhdWx0cyB0byB0aGUgdmFsdWUgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIHZhbHVlIG9mIGEgTWFwIGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBmcm9tIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9NYXAgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvcikge1xuICAgIGlmICh0eXBlb2Ygcm9vdC5NYXAgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgVG9NYXBPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IpO1xuICB9O1xuXG4gIHZhciBTbGljZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNsaWNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTbGljZU9ic2VydmFibGUoc291cmNlLCBiLCBlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2IgPSBiO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTbGljZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2xpY2VPYnNlcnZlcihvLCB0aGlzLl9iLCB0aGlzLl9lKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTbGljZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2xpY2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2xpY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNsaWNlT2JzZXJ2ZXIobywgYiwgZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9iID0gYjtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTbGljZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX2IpIHtcbiAgICAgICAgaWYgKHRoaXMuX2UgPT09IHRoaXMuX2kpIHtcbiAgICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuICAgIFNsaWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNsaWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNsaWNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qXG4gICogVGhlIHNsaWNlKCkgbWV0aG9kIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgYSBwb3J0aW9uIG9mIGFuIE9ic2VydmFibGUgaW50byBhIG5ldyBPYnNlcnZhYmxlIG9iamVjdC5cbiAgKiBVbmxpa2UgdGhlIGFycmF5IHZlcnNpb24sIHRoaXMgZG9lcyBub3Qgc3VwcG9ydCBuZWdhdGl2ZSBudW1iZXJzIGZvciBiZWluZyBvciBlbmQuXG4gICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbl0gWmVyby1iYXNlZCBpbmRleCBhdCB3aGljaCB0byBiZWdpbiBleHRyYWN0aW9uLiBJZiBvbWl0dGVkLCB0aGlzIHdpbGwgZGVmYXVsdCB0byB6ZXJvLlxuICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kXSBaZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIGVuZCBleHRyYWN0aW9uLiBzbGljZSBleHRyYWN0cyB1cCB0byBidXQgbm90IGluY2x1ZGluZyBlbmQuXG4gICogSWYgb21pdHRlZCwgdGhpcyB3aWxsIGVtaXQgdGhlIHJlc3Qgb2YgdGhlIE9ic2VydmFibGUgb2JqZWN0LlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHNoYWxsb3cgY29weSBvZiBhIHBvcnRpb24gb2YgYW4gT2JzZXJ2YWJsZSBpbnRvIGEgbmV3IE9ic2VydmFibGUgb2JqZWN0LlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2xpY2UgPSBmdW5jdGlvbiAoYmVnaW4sIGVuZCkge1xuICAgIHZhciBzdGFydCA9IGJlZ2luIHx8IDA7XG4gICAgaWYgKHN0YXJ0IDwgMCkgeyB0aHJvdyBuZXcgUnguQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIGlmICh0eXBlb2YgZW5kID09PSAnbnVtYmVyJyAmJiBlbmQgPCBzdGFydCkge1xuICAgICAgdGhyb3cgbmV3IFJ4LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2xpY2VPYnNlcnZhYmxlKHRoaXMsIHN0YXJ0LCBlbmQpO1xuICB9O1xuXG4gIHZhciBMYXN0SW5kZXhPZk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKExhc3RJbmRleE9mT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBMYXN0SW5kZXhPZk9ic2VydmFibGUoc291cmNlLCBlLCBuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0SW5kZXhPZk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KC0xKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBMYXN0SW5kZXhPZk9ic2VydmVyKG8sIHRoaXMuX2UsIHRoaXMuX24pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RJbmRleE9mT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBMYXN0SW5kZXhPZk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0SW5kZXhPZk9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIExhc3RJbmRleE9mT2JzZXJ2ZXIobywgZSwgbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgdGhpcy5fdiA9IDA7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0SW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX24gJiYgeCA9PT0gdGhpcy5fZSkge1xuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSB0aGlzLl9pO1xuICAgICAgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG4gICAgTGFzdEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgTGFzdEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGFzdEluZGV4T2ZPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqIEBwYXJhbSB7QW55fSBzZWFyY2hFbGVtZW50IEVsZW1lbnQgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tSW5kZXhdIFRoZSBpbmRleCB0byBzdGFydCB0aGUgc2VhcmNoLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuZCBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGxhc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubGFzdEluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcbiAgICBNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkgJiYgKG4gPSAwKTtcbiAgICByZXR1cm4gbmV3IExhc3RJbmRleE9mT2JzZXJ2YWJsZSh0aGlzLCBzZWFyY2hFbGVtZW50LCBuKTtcbiAgfTtcblxuICBPYnNlcnZhYmxlLndyYXAgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVPYnNlcnZhYmxlKCkge1xuICAgICAgcmV0dXJuIE9ic2VydmFibGUuc3Bhd24uY2FsbCh0aGlzLCBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBjcmVhdGVPYnNlcnZhYmxlLl9fZ2VuZXJhdG9yRnVuY3Rpb25fXyA9IGZuO1xuICAgIHJldHVybiBjcmVhdGVPYnNlcnZhYmxlO1xuICB9O1xuXG4gIHZhciBzcGF3biA9IE9ic2VydmFibGUuc3Bhd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGdlbiA9IGFyZ3VtZW50c1swXSwgc2VsZiA9IHRoaXMsIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG5cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24oZ2VuKSkgeyBnZW4gPSBnZW4uYXBwbHkoc2VsZiwgYXJncyk7IH1cbiAgICAgIGlmICghZ2VuIHx8ICFpc0Z1bmN0aW9uKGdlbi5uZXh0KSkge1xuICAgICAgICBvLm9uTmV4dChnZW4pO1xuICAgICAgICByZXR1cm4gby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwcm9jZXNzR2VuZXJhdG9yKHJlcykge1xuICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2goZ2VuLm5leHQpLmNhbGwoZ2VuLCByZXMpO1xuICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJldC5lKTsgfVxuICAgICAgICBuZXh0KHJldCk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NHZW5lcmF0b3IoKTtcblxuICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGdlbi5uZXh0KS5jYWxsKGdlbiwgZXJyKTtcbiAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXQuZSk7IH1cbiAgICAgICAgbmV4dChyZXQpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBuZXh0KHJldCkge1xuICAgICAgICBpZiAocmV0LmRvbmUpIHtcbiAgICAgICAgICBvLm9uTmV4dChyZXQudmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9icyA9IHRvT2JzZXJ2YWJsZS5jYWxsKHNlbGYsIHJldC52YWx1ZSk7XG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG4gICAgICAgIHZhciBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob2JzKSkge1xuICAgICAgICAgIGcuYWRkKG9icy5zdWJzY3JpYmUoZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbDtcbiAgICAgICAgICB9LCBvbkVycm9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhc1ZhbHVlICYmIHByb2Nlc3NHZW5lcmF0b3IodmFsdWUpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbkVycm9yKG5ldyBUeXBlRXJyb3IoJ3R5cGUgbm90IHN1cHBvcnRlZCcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZztcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b09ic2VydmFibGUob2JqKSB7XG4gICAgaWYgKCFvYmopIHsgcmV0dXJuIG9iajsgfVxuICAgIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvYmopKSB7IHJldHVybiBvYmo7IH1cbiAgICBpZiAoaXNQcm9taXNlKG9iaikpIHsgcmV0dXJuIE9ic2VydmFibGUuZnJvbVByb21pc2Uob2JqKTsgfVxuICAgIGlmIChpc0dlbmVyYXRvckZ1bmN0aW9uKG9iaikgfHwgaXNHZW5lcmF0b3Iob2JqKSkgeyByZXR1cm4gc3Bhd24uY2FsbCh0aGlzLCBvYmopOyB9XG4gICAgaWYgKGlzRnVuY3Rpb24ob2JqKSkgeyByZXR1cm4gdGh1bmtUb09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmopOyB9XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgfHwgaXNJdGVyYWJsZShvYmopKSB7IHJldHVybiBhcnJheVRvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9iaik7IH1cbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge3JldHVybiBvYmplY3RUb09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmopO31cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlUb09ic2VydmFibGUgKG9iaikge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb20ob2JqKS5jb25jYXRNYXAoZnVuY3Rpb24obykge1xuICAgICAgaWYoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUobykgfHwgaXNPYmplY3QobykpIHtcbiAgICAgICAgcmV0dXJuIHRvT2JzZXJ2YWJsZS5jYWxsKG51bGwsIG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuanVzdChvKTtcbiAgICAgIH1cbiAgICB9KS50b0FycmF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvYmplY3RUb09ic2VydmFibGUgKG9iaikge1xuICAgIHZhciByZXN1bHRzID0gbmV3IG9iai5jb25zdHJ1Y3RvcigpLCBrZXlzID0gT2JqZWN0LmtleXMob2JqKSwgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9ialtrZXldKTtcblxuICAgICAgaWYob2JzZXJ2YWJsZSAmJiBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvYnNlcnZhYmxlKSkge1xuICAgICAgICBkZWZlcihvYnNlcnZhYmxlLCBrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0c1trZXldID0gb2JqW2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE9ic2VydmFibGUuZm9ya0pvaW4uYXBwbHkoT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZXMpLm1hcChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pO1xuXG5cbiAgICBmdW5jdGlvbiBkZWZlciAob2JzZXJ2YWJsZSwga2V5KSB7XG4gICAgICByZXN1bHRzW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICBvYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUubWFwKGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIHJlc3VsdHNba2V5XSA9IG5leHQ7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdGh1bmtUb09ic2VydmFibGUoZm4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICBmbi5jYWxsKHNlbGYsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVyciA9IGFyZ3VtZW50c1swXSwgcmVzID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBpZiAoZXJyKSB7IHJldHVybiBvLm9uRXJyb3IoZXJyKTsgfVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICAgICAgICByZXMgPSBhcmdzO1xuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlcyk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNHZW5lcmF0b3Iob2JqKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24gKG9iai5uZXh0KSAmJiBpc0Z1bmN0aW9uIChvYmpbJ3Rocm93J10pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNHZW5lcmF0b3JGdW5jdGlvbihvYmopIHtcbiAgICB2YXIgY3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoIWN0b3IpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKGN0b3IubmFtZSA9PT0gJ0dlbmVyYXRvckZ1bmN0aW9uJyB8fCBjdG9yLmRpc3BsYXlOYW1lID09PSAnR2VuZXJhdG9yRnVuY3Rpb24nKSB7IHJldHVybiB0cnVlOyB9XG4gICAgcmV0dXJuIGlzR2VuZXJhdG9yKGN0b3IucHJvdG90eXBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QgPT0gdmFsLmNvbnN0cnVjdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZXMgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBhc3luY2hyb25vdXNseSBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciwgc3VyZmFjaW5nIHRoZSByZXN1bHQgdGhyb3VnaCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5zdGFydChmdW5jdGlvbiAoKSB7IGNvbnNvbGUubG9nKCdoZWxsbycpOyB9KTtcbiAgICogdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuc3RhcnQoZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZygnaGVsbG8nKTsgfSwgUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKiB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5zdGFydChmdW5jdGlvbiAoKSB7IHRoaXMubG9nKCdoZWxsbycpOyB9LCBSeC5TY2hlZHVsZXIudGltZW91dCwgY29uc29sZSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gdG8gcnVuIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIGZ1bmN0aW9uIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIudGltZW91dC5cbiAgICogQHBhcmFtIFtjb250ZXh0XSAgVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgZXhwb3NpbmcgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0IHZhbHVlLCBvciBhbiBleGNlcHRpb24uXG4gICAqXG4gICAqIFJlbWFya3NcbiAgICogKiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIGltbWVkaWF0ZWx5LCBub3QgZHVyaW5nIHRoZSBzdWJzY3JpcHRpb24gb2YgdGhlIHJlc3VsdGluZyBzZXF1ZW5jZS5cbiAgICogKiBNdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgY2FuIG9ic2VydmUgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5zdGFydCA9IGZ1bmN0aW9uIChmdW5jLCBjb250ZXh0LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZVRvQXN5bmMoZnVuYywgY29udGV4dCwgc2NoZWR1bGVyKSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgZnVuY3Rpb24gaW50byBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24uIEVhY2ggaW52b2NhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBjYXVzZXMgYW4gaW52b2NhdGlvbiBvZiB0aGUgb3JpZ2luYWwgc3luY2hyb25vdXMgZnVuY3Rpb24gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uIEZ1bmN0aW9uIHRvIGNvbnZlcnQgdG8gYW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZnVuY3Rpb24gb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcGFyYW0ge01peGVkfSBbY29udGV4dF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRvQXN5bmMgPSBPYnNlcnZhYmxlLnRvQXN5bmMgPSBmdW5jdGlvbiAoZnVuYywgY29udGV4dCwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBzdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gICAgICBzY2hlZHVsZXIuc2NoZWR1bGUobnVsbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzdWJqZWN0Lm9uRXJyb3IoZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YmplY3Qub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHN1YmplY3Qub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgfTtcbiAgfTtcblxuZnVuY3Rpb24gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKSB7XG4gIHZhciBvID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gIGFyZ3MucHVzaChjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3RvcikpO1xuICBmbi5hcHBseShjdHgsIGFyZ3MpO1xuXG4gIHJldHVybiBvLmFzT2JzZXJ2YWJsZSgpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3VsdHMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpKSB7XG4gICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KGN0eCwgcmVzdWx0cyk7XG4gICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0c1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvLm9uQ29tcGxldGVkKCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHdpdGggYSBjYWxsYmFjayBhcyB0aGUgbGFzdCBwYXJhbWV0ZXIgdG8gY29udmVydCB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICogQHBhcmFtIHtNaXhlZH0gW2N0eF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGNhbGxiYWNrIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uLCB3aGVuIGV4ZWN1dGVkIHdpdGggdGhlIHJlcXVpcmVkIHBhcmFtZXRlcnMgbWludXMgdGhlIGNhbGxiYWNrLCBwcm9kdWNlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgdmFsdWUgb2YgdGhlIGFyZ3VtZW50cyB0byB0aGUgY2FsbGJhY2sgYXMgYW4gYXJyYXkuXG4gKi9cbk9ic2VydmFibGUuZnJvbUNhbGxiYWNrID0gZnVuY3Rpb24gKGZuLCBjdHgsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdHlwZW9mIGN0eCA9PT0gJ3VuZGVmaW5lZCcgJiYgKGN0eCA9IHRoaXMpOyBcblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbilcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiBjcmVhdGVDYk9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpO1xuICB9O1xufTtcblxuZnVuY3Rpb24gY3JlYXRlTm9kZU9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpIHtcbiAgdmFyIG8gPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG5cbiAgYXJncy5wdXNoKGNyZWF0ZU5vZGVIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpKTtcbiAgZm4uYXBwbHkoY3R4LCBhcmdzKTtcblxuICByZXR1cm4gby5hc09ic2VydmFibGUoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgdmFyIGVyciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoZXJyKSB7IHJldHVybiBvLm9uRXJyb3IoZXJyKTsgfVxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3VsdHMgPSBbXTtcbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpIC0gMV0gPSBhcmd1bWVudHNbaV07IH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgdmFyIHJlc3VsdHMgPSB0cnlDYXRjaChzZWxlY3RvcikuYXBwbHkoY3R4LCByZXN1bHRzKTtcbiAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cbiAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIE5vZGUuanMgY2FsbGJhY2sgc3R5bGUgZnVuY3Rpb24gdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gIFRoaXMgbXVzdCBiZSBpbiBmdW5jdGlvbiAoZXJyLCAuLi4pIGZvcm1hdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge01peGVkfSBbY3R4XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgY2FsbGJhY2sgbWludXMgdGhlIGVycm9yIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBbiBhc3luYyBmdW5jdGlvbiB3aGljaCB3aGVuIGFwcGxpZWQsIHJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBjYWxsYmFjayBhcmd1bWVudHMgYXMgYW4gYXJyYXkuXG4gKi9cbk9ic2VydmFibGUuZnJvbU5vZGVDYWxsYmFjayA9IGZ1bmN0aW9uIChmbiwgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHR5cGVvZiBjdHggPT09ICd1bmRlZmluZWQnICYmIChjdHggPSB0aGlzKTsgXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiBjcmVhdGVOb2RlT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncyk7XG4gIH07XG59O1xuXG4gIGZ1bmN0aW9uIGlzTm9kZUxpc3QoZWwpIHtcbiAgICBpZiAocm9vdC5TdGF0aWNOb2RlTGlzdCkge1xuICAgICAgLy8gSUU4IFNwZWNpZmljXG4gICAgICAvLyBpbnN0YW5jZW9mIGlzIHNsb3dlciB0aGFuIE9iamVjdCN0b1N0cmluZywgYnV0IE9iamVjdCN0b1N0cmluZyB3aWxsIG5vdCB3b3JrIGFzIGludGVuZGVkIGluIElFOFxuICAgICAgcmV0dXJuIGVsIGluc3RhbmNlb2Ygcm9vdC5TdGF0aWNOb2RlTGlzdCB8fCBlbCBpbnN0YW5jZW9mIHJvb3QuTm9kZUxpc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWwpID09PSAnW29iamVjdCBOb2RlTGlzdF0nO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIExpc3RlbkRpc3Bvc2FibGUoZSwgbiwgZm4pIHtcbiAgICB0aGlzLl9lID0gZTtcbiAgICB0aGlzLl9uID0gbjtcbiAgICB0aGlzLl9mbiA9IGZuO1xuICAgIHRoaXMuX2UuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9uLCB0aGlzLl9mbiwgZmFsc2UpO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9XG4gIExpc3RlbkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuX2UucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9uLCB0aGlzLl9mbiwgZmFsc2UpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lciAoZWwsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIHZhciBkaXNwb3NhYmxlcyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG5cbiAgICAvLyBBc3VtZSBOb2RlTGlzdCBvciBIVE1MQ29sbGVjdGlvblxuICAgIHZhciBlbGVtVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWwpO1xuICAgIGlmIChpc05vZGVMaXN0KGVsKSB8fCBlbGVtVG9TdHJpbmcgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBkaXNwb3NhYmxlcy5hZGQoY3JlYXRlRXZlbnRMaXN0ZW5lcihlbC5pdGVtKGkpLCBldmVudE5hbWUsIGhhbmRsZXIpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsKSB7XG4gICAgICBkaXNwb3NhYmxlcy5hZGQobmV3IExpc3RlbkRpc3Bvc2FibGUoZWwsIGV2ZW50TmFtZSwgaGFuZGxlcikpO1xuICAgIH1cblxuICAgIHJldHVybiBkaXNwb3NhYmxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIG9wdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciB0byB1c2UgbmF0aXZlIGV2ZW50cyBvbmx5XG4gICAqL1xuICBSeC5jb25maWcudXNlTmF0aXZlRXZlbnRzID0gZmFsc2U7XG5cbiAgdmFyIEV2ZW50T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVudE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlbnRPYnNlcnZhYmxlKGVsLCBuYW1lLCBmbikge1xuICAgICAgdGhpcy5fZWwgPSBlbDtcbiAgICAgIHRoaXMuX24gPSBuYW1lO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIobywgZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdHMgPSB0cnlDYXRjaChmbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIEV2ZW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgdGhpcy5fZWwsXG4gICAgICAgIHRoaXMuX24sXG4gICAgICAgIGNyZWF0ZUhhbmRsZXIobywgdGhpcy5fZm4pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZW50T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgYWRkaW5nIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBtYXRjaGluZyBET01FbGVtZW50IG9yIGVhY2ggaXRlbSBpbiB0aGUgTm9kZUxpc3QuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50IFRoZSBET01FbGVtZW50IG9yIE5vZGVMaXN0IHRvIGF0dGFjaCBhIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGF0dGFjaCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgZXZlbnRzIGZyb20gdGhlIHNwZWNpZmllZCBlbGVtZW50IGFuZCB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5mcm9tRXZlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgIC8vIE5vZGUuanMgc3BlY2lmaWNcbiAgICBpZiAoZWxlbWVudC5hZGRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm4oXG4gICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICBzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLy8gVXNlIG9ubHkgaWYgbm9uLW5hdGl2ZSBldmVudHMgYXJlIGFsbG93ZWRcbiAgICBpZiAoIVJ4LmNvbmZpZy51c2VOYXRpdmVFdmVudHMpIHtcbiAgICAgIC8vIEhhbmRsZXMganEsIEFuZ3VsYXIuanMsIFplcHRvLCBNYXJpb25ldHRlLCBFbWJlci5qc1xuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50Lm9uID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbGVtZW50Lm9mZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybihcbiAgICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50Lm9uKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5vZmYoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgICBzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBFdmVudE9ic2VydmFibGUoZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvcikucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgdmFyIEV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZCwgZGVsLCBmbikge1xuICAgICAgdGhpcy5fYWRkID0gYWRkO1xuICAgICAgdGhpcy5fZGVsID0gZGVsO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIobywgZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdHMgPSB0cnlDYXRjaChmbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIEV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGZuID0gY3JlYXRlSGFuZGxlcihvLCB0aGlzLl9mbik7XG4gICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0aGlzLl9hZGQoZm4pO1xuICAgICAgcmV0dXJuIG5ldyBFdmVudFBhdHRlcm5EaXNwb3NhYmxlKHRoaXMuX2RlbCwgZm4sIHJldHVyblZhbHVlKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZShkZWwsIGZuLCByZXQpIHtcbiAgICAgIHRoaXMuX2RlbCA9IGRlbDtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9yZXQgPSByZXQ7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBFdmVudFBhdHRlcm5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICBpc0Z1bmN0aW9uKHRoaXMuX2RlbCkgJiYgdGhpcy5fZGVsKHRoaXMuX2ZuLCB0aGlzLl9yZXQpO1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhbiBldmVudCBlbWl0dGVyIHZpYSBhbiBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgcGFpci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWRkSGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYWRkIGEgaGFuZGxlciB0byB0aGUgZW1pdHRlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3JlbW92ZUhhbmRsZXJdIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byByZW1vdmUgYSBoYW5kbGVyIGZyb20gYW4gZW1pdHRlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggd3JhcHMgYW4gZXZlbnQgZnJvbSBhbiBldmVudCBlbWl0dGVyXG4gICAqL1xuICB2YXIgZnJvbUV2ZW50UGF0dGVybiA9IE9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybiA9IGZ1bmN0aW9uIChhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3RvcikucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEludm9rZXMgdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbiwgc3VyZmFjaW5nIHRoZSByZXN1bHQgdGhyb3VnaCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbkFzeW5jIEFzeW5jaHJvbm91cyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSB0byBydW4uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4cG9zaW5nIHRoZSBmdW5jdGlvbidzIHJlc3VsdCB2YWx1ZSwgb3IgYW4gZXhjZXB0aW9uLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5zdGFydEFzeW5jID0gZnVuY3Rpb24gKGZ1bmN0aW9uQXN5bmMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRyeUNhdGNoKGZ1bmN0aW9uQXN5bmMpKCk7XG4gICAgaWYgKHByb21pc2UgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocHJvbWlzZS5lKTsgfVxuICAgIHJldHVybiBvYnNlcnZhYmxlRnJvbVByb21pc2UocHJvbWlzZSk7XG4gIH07XG5cbiAgdmFyIFBhdXNhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHBhdXNlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuXG4gICAgICBpZiAocGF1c2VyICYmIHBhdXNlci5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXIubWVyZ2UocGF1c2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyO1xuICAgICAgfVxuXG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbm4gPSB0aGlzLnNvdXJjZS5wdWJsaXNoKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IGNvbm4uc3Vic2NyaWJlKG8pLFxuICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuXG4gICAgICB2YXIgcGF1c2FibGUgPSB0aGlzLnBhdXNlci5zdGFydFdpdGgoIXRoaXMucGF1c2VkKS5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLnN1YnNjcmliZShmdW5jdGlvbiAoYikge1xuICAgICAgICBpZiAoYikge1xuICAgICAgICAgIGNvbm5lY3Rpb24gPSBjb25uLmNvbm5lY3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjb25uZWN0aW9uLCBwYXVzYWJsZV0pO1xuICAgIH07XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXVzYWJsZU9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBvYnNlcnZhYmxlIHNlcXVlbmNlIGJhc2VkIHVwb24gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggeWllbGRzIHRydWUvZmFsc2UuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlKHBhdXNlcik7XG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcGF1c2VyIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcGF1c2UgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBwYXVzZWQgYmFzZWQgdXBvbiB0aGUgcGF1c2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhdXNhYmxlID0gZnVuY3Rpb24gKHBhdXNlcikge1xuICAgIHJldHVybiBuZXcgUGF1c2FibGVPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29tYmluZUxhdGVzdFNvdXJjZShzb3VyY2UsIHN1YmplY3QsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgaGFzVmFsdWUgPSBbZmFsc2UsIGZhbHNlXSxcbiAgICAgICAgaGFzVmFsdWVBbGwgPSBmYWxzZSxcbiAgICAgICAgaXNEb25lID0gZmFsc2UsXG4gICAgICAgIHZhbHVlcyA9IG5ldyBBcnJheSgyKSxcbiAgICAgICAgZXJyO1xuXG4gICAgICBmdW5jdGlvbiBuZXh0KHgsIGkpIHtcbiAgICAgICAgdmFsdWVzW2ldID0geDtcbiAgICAgICAgaGFzVmFsdWVbaV0gPSB0cnVlO1xuICAgICAgICBpZiAoaGFzVmFsdWVBbGwgfHwgKGhhc1ZhbHVlQWxsID0gaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuICAgICAgICAgIGlmIChlcnIpIHsgcmV0dXJuIG8ub25FcnJvcihlcnIpOyB9XG4gICAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHJlc3VsdFNlbGVjdG9yKS5hcHBseShudWxsLCB2YWx1ZXMpO1xuICAgICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgICAgby5vbk5leHQocmVzKTtcbiAgICAgICAgfVxuICAgICAgICBpc0RvbmUgJiYgdmFsdWVzWzFdICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBuZXh0KHgsIDApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0pIHtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZXJyID0gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgICB2YWx1ZXNbMV0gJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0pLFxuICAgICAgICBzdWJqZWN0LnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgbmV4dCh4LCAxKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc0RvbmUgPSB0cnVlO1xuICAgICAgICAgICAgbmV4dCh0cnVlLCAxKTtcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICB2YXIgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHNvdXJjZSwgcGF1c2VyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuY29udHJvbGxlciA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG5cbiAgICAgIGlmIChwYXVzZXIgJiYgcGF1c2VyLnN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlci5tZXJnZShwYXVzZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXI7XG4gICAgICB9XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBxID0gW10sIHByZXZpb3VzU2hvdWxkRmlyZTtcblxuICAgICAgZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHsgd2hpbGUgKHEubGVuZ3RoID4gMCkgeyBvLm9uTmV4dChxLnNoaWZ0KCkpOyB9IH1cblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9XG4gICAgICAgIGNvbWJpbmVMYXRlc3RTb3VyY2UoXG4gICAgICAgICAgdGhpcy5zb3VyY2UsXG4gICAgICAgICAgdGhpcy5wYXVzZXIuc3RhcnRXaXRoKCF0aGlzLnBhdXNlZCkuZGlzdGluY3RVbnRpbENoYW5nZWQoKSxcbiAgICAgICAgICBmdW5jdGlvbiAoZGF0YSwgc2hvdWxkRmlyZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgZGF0YTogZGF0YSwgc2hvdWxkRmlyZTogc2hvdWxkRmlyZSB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgIGlmIChwcmV2aW91c1Nob3VsZEZpcmUgIT09IHVuZGVmaW5lZCAmJiByZXN1bHRzLnNob3VsZEZpcmUgIT09IHByZXZpb3VzU2hvdWxkRmlyZSkge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvdWxkRmlyZSA9IHJlc3VsdHMuc2hvdWxkRmlyZTtcbiAgICAgICAgICAgICAgICAvLyBjaGFuZ2UgaW4gc2hvdWxkRmlyZVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLnNob3VsZEZpcmUpIHsgZHJhaW5RdWV1ZSgpOyB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNTaG91bGRGaXJlID0gcmVzdWx0cy5zaG91bGRGaXJlO1xuICAgICAgICAgICAgICAgIC8vIG5ldyBkYXRhXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMuc2hvdWxkRmlyZSkge1xuICAgICAgICAgICAgICAgICAgby5vbk5leHQocmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcS5wdXNoKHJlc3VsdHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihlcnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgKTtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb247ICAgICAgXG4gICAgfTtcblxuICAgIFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMucGF1c2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQoZmFsc2UpO1xuICAgIH07XG5cbiAgICBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZSxcbiAgICogYW5kIHlpZWxkcyB0aGUgdmFsdWVzIHRoYXQgd2VyZSBidWZmZXJlZCB3aGlsZSBwYXVzZWQuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlQnVmZmVyZWQocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGVCdWZmZXJlZCA9IGZ1bmN0aW9uIChwYXVzZXIpIHtcbiAgICByZXR1cm4gbmV3IFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG4gIH07XG5cbiAgdmFyIENvbnRyb2xsZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb250cm9sbGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb250cm9sbGVkT2JzZXJ2YWJsZSAoc291cmNlLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBDb250cm9sbGVkU3ViamVjdChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlLm11bHRpY2FzdCh0aGlzLnN1YmplY3QpLnJlZkNvdW50KCk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5yZXF1ZXN0KG51bWJlck9mSXRlbXMgPT0gbnVsbCA/IC0xIDogbnVtYmVyT2ZJdGVtcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250cm9sbGVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQ29udHJvbGxlZFN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbnRyb2xsZWRTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRTdWJqZWN0KGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIGVuYWJsZVF1ZXVlID09IG51bGwgJiYgKGVuYWJsZVF1ZXVlID0gdHJ1ZSk7XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMuZW5hYmxlUXVldWUgPSBlbmFibGVRdWV1ZTtcbiAgICAgIHRoaXMucXVldWUgPSBlbmFibGVRdWV1ZSA/IFtdIDogbnVsbDtcbiAgICAgIHRoaXMucmVxdWVzdGVkQ291bnQgPSAwO1xuICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5oYXNGYWlsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlciB8fCBjdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQ29udHJvbGxlZFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlciwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5zdWJzY3JpYmUobyk7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlUXVldWUgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnN1YmplY3Qub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25Db21wbGV0ZWQoKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5oYXNGYWlsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVRdWV1ZSB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvcihlcnJvcikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkQ291bnQgPD0gMCkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlUXVldWUgJiYgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAodGhpcy5yZXF1ZXN0ZWRDb3VudC0tID09PSAwKSAmJiB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbk5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3Byb2Nlc3NSZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVRdWV1ZSkge1xuICAgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDAgJiYgKG51bWJlck9mSXRlbXMgPiAwIHx8IHRoaXMucXVldWVbMF0ua2luZCAhPT0gJ04nKSkge1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgZmlyc3QuYWNjZXB0KHRoaXMuc3ViamVjdCk7XG4gICAgICAgICAgICBpZiAoZmlyc3Qua2luZCA9PT0gJ04nKSB7XG4gICAgICAgICAgICAgIG51bWJlck9mSXRlbXMtLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVtYmVyT2ZJdGVtcztcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShudW1iZXIsXG4gICAgICAgIGZ1bmN0aW9uKHMsIGkpIHtcbiAgICAgICAgICB2YXIgcmVtYWluaW5nID0gc2VsZi5fcHJvY2Vzc1JlcXVlc3QoaSk7XG4gICAgICAgICAgdmFyIHN0b3BwZWQgPSBzZWxmLmhhc0NvbXBsZXRlZCB8fCBzZWxmLmhhc0ZhaWxlZDtcbiAgICAgICAgICBpZiAoIXN0b3BwZWQgJiYgcmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgc2VsZi5yZXF1ZXN0ZWRDb3VudCA9IHJlbWFpbmluZztcblxuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RlZENvdW50ID0gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyBTY2hlZHVsZWQgaXRlbSBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gUmV0dXJuIGEgbmV3XG4gICAgICAgICAgICAgIC8vIGRpc3Bvc2FibGUgdG8gYWxsb3cgdGhlIHJlcXVlc3QgdG8gYmUgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgLy8gdmlhIGRpc3Bvc2UuXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlO1xuICAgICAgfSxcbiAgICAgIGRpc3Bvc2VDdXJyZW50UmVxdWVzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ29udHJvbGxlZFN1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIGNvbnRyb2xsZXIgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgYWJpbGl0eSB0byBxdWV1ZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHNvdXJjZSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwKS5jb250cm9sbGVkKCk7XG4gICAqIHNvdXJjZS5yZXF1ZXN0KDMpOyAvLyBSZWFkcyAzIHZhbHVlc1xuICAgKiBAcGFyYW0ge2Jvb2x9IGVuYWJsZVF1ZXVlIHRydXRoeSB2YWx1ZSB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIHNob3VsZCBiZSBxdWV1ZWQgcGVuZGluZyB0aGUgbmV4dCByZXF1ZXN0XG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgZGV0ZXJtaW5lcyBob3cgdGhlIHJlcXVlc3RzIHdpbGwgYmUgc2NoZWR1bGVkXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBvbmx5IHByb3BhZ2F0ZXMgdmFsdWVzIG9uIHJlcXVlc3QuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29udHJvbGxlZCA9IGZ1bmN0aW9uIChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgJiYgaXNTY2hlZHVsZXIoZW5hYmxlUXVldWUpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBlbmFibGVRdWV1ZTtcbiAgICAgIGVuYWJsZVF1ZXVlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgPT0gbnVsbCkgeyAgZW5hYmxlUXVldWUgPSB0cnVlOyB9XG4gICAgcmV0dXJuIG5ldyBDb250cm9sbGVkT2JzZXJ2YWJsZSh0aGlzLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU3RvcEFuZFdhaXRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdG9wQW5kV2FpdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3RvcEFuZFdhaXRPYnNlcnZhYmxlIChzb3VyY2UpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgcmV0dXJuIHNlbGYuc291cmNlLnJlcXVlc3QoMSk7XG4gICAgfVxuXG4gICAgU3RvcEFuZFdhaXRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTdG9wQW5kV2FpdE9ic2VydmVyKG8sIHRoaXMsIHRoaXMuc3Vic2NyaXB0aW9uKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLFxuICAgICAgICBkZWZhdWx0U2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIHNjaGVkdWxlTWV0aG9kKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgdmFyIFN0b3BBbmRXYWl0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3ViX18pIHtcbiAgICAgIGluaGVyaXRzKFN0b3BBbmRXYWl0T2JzZXJ2ZXIsIF9fc3ViX18pO1xuICAgICAgZnVuY3Rpb24gU3RvcEFuZFdhaXRPYnNlcnZlciAob2JzZXJ2ZXIsIG9ic2VydmFibGUsIGNhbmNlbCkge1xuICAgICAgICBfX3N1Yl9fLmNhbGwodGhpcyk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZTtcbiAgICAgICAgdGhpcy5jYW5jZWwgPSBjYW5jZWw7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgfTtcblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBmdW5jdGlvbiBpbm5lclNjaGVkdWxlTWV0aG9kKHMsIHNlbGYpIHtcbiAgICAgICAgcmV0dXJuIHNlbGYub2JzZXJ2YWJsZS5zb3VyY2UucmVxdWVzdCgxKTtcbiAgICAgIH1cblxuICAgICAgU3RvcEFuZFdhaXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gZGVmYXVsdFNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBpbm5lclNjaGVkdWxlTWV0aG9kKTtcbiAgICAgIH07XG5cbiAgICAgIFN0b3BBbmRXYWl0T2JzZXJ2ZXIuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfX3N1Yl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gU3RvcEFuZFdhaXRPYnNlcnZlcjtcbiAgICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgIHJldHVybiBTdG9wQW5kV2FpdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGEgc3RvcCBhbmQgd2FpdCBvYnNlcnZhYmxlIHRvIHRoZSBjdXJyZW50IG9ic2VydmFibGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHN0b3AgYW5kIHdhaXQgb2JzZXJ2YWJsZS5cbiAgICovXG4gIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdG9wQW5kV2FpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFN0b3BBbmRXYWl0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgV2luZG93ZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhXaW5kb3dlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2luZG93ZWRPYnNlcnZhYmxlKHNvdXJjZSwgd2luZG93U2l6ZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgcmV0dXJuIHNlbGYuc291cmNlLnJlcXVlc3Qoc2VsZi53aW5kb3dTaXplKTtcbiAgICB9XG5cbiAgICBXaW5kb3dlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFdpbmRvd2VkT2JzZXJ2ZXIobywgdGhpcywgdGhpcy5zdWJzY3JpcHRpb24pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24sXG4gICAgICAgIGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgc2NoZWR1bGVNZXRob2QpXG4gICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgV2luZG93ZWRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdWJfXykge1xuICAgICAgaW5oZXJpdHMoV2luZG93ZWRPYnNlcnZlciwgX19zdWJfXyk7XG4gICAgICBmdW5jdGlvbiBXaW5kb3dlZE9ic2VydmVyKG9ic2VydmVyLCBvYnNlcnZhYmxlLCBjYW5jZWwpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgICAgdGhpcy5yZWNlaXZlZCA9IDA7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgX19zdWJfXy5jYWxsKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyU2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgICByZXR1cm4gc2VsZi5vYnNlcnZhYmxlLnNvdXJjZS5yZXF1ZXN0KHNlbGYub2JzZXJ2YWJsZS53aW5kb3dTaXplKTtcbiAgICAgIH1cblxuICAgICAgV2luZG93ZWRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIHRoaXMucmVjZWl2ZWQgPSArK3RoaXMucmVjZWl2ZWQgJSB0aGlzLm9ic2VydmFibGUud2luZG93U2l6ZTtcbiAgICAgICAgdGhpcy5yZWNlaXZlZCA9PT0gMCAmJiAodGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBkZWZhdWx0U2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIGlubmVyU2NoZWR1bGVNZXRob2QpKTtcbiAgICAgIH07XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICAgICAgICB0aGlzLmNhbmNlbC5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSkge1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX19zdWJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIFdpbmRvd2VkT2JzZXJ2ZXI7XG4gICAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgICByZXR1cm4gV2luZG93ZWRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNsaWRpbmcgd2luZG93ZWQgb2JzZXJ2YWJsZSBiYXNlZCB1cG9uIHRoZSB3aW5kb3cgc2l6ZS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdpbmRvd1NpemUgVGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgd2luZG93XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHdpbmRvd2VkIG9ic2VydmFibGUgYmFzZWQgdXBvbiB0aGUgd2luZG93IHNpemUuXG4gICAqL1xuICBDb250cm9sbGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93ZWQgPSBmdW5jdGlvbiAod2luZG93U2l6ZSkge1xuICAgIHJldHVybiBuZXcgV2luZG93ZWRPYnNlcnZhYmxlKHRoaXMsIHdpbmRvd1NpemUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQaXBlcyB0aGUgZXhpc3RpbmcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgTm9kZS5qcyBTdHJlYW0uXG4gICAqIEBwYXJhbSB7U3RyZWFtfSBkZXN0IFRoZSBkZXN0aW5hdGlvbiBOb2RlLmpzIHN0cmVhbS5cbiAgICogQHJldHVybnMge1N0cmVhbX0gVGhlIGRlc3RpbmF0aW9uIHN0cmVhbS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5waXBlID0gZnVuY3Rpb24gKGRlc3QpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcy5wYXVzYWJsZUJ1ZmZlcmVkKCk7XG5cbiAgICBmdW5jdGlvbiBvbkRyYWluKCkge1xuICAgICAgc291cmNlLnJlc3VtZSgpO1xuICAgIH1cblxuICAgIGRlc3QuYWRkTGlzdGVuZXIoJ2RyYWluJywgb25EcmFpbik7XG5cbiAgICBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgIWRlc3Qud3JpdGUoeCkgJiYgc291cmNlLnBhdXNlKCk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEhhY2sgY2hlY2sgYmVjYXVzZSBTVERJTyBpcyBub3QgY2xvc2FibGVcbiAgICAgICAgIWRlc3QuX2lzU3RkaW8gJiYgZGVzdC5lbmQoKTtcbiAgICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbkRyYWluKTtcbiAgICAgIH0pO1xuXG4gICAgc291cmNlLnJlc3VtZSgpO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH07XG5cbiAgdmFyIE11bHRpY2FzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE11bHRpY2FzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTXVsdGljYXN0T2JzZXJ2YWJsZShzb3VyY2UsIGZuMSwgZm4yKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuMSA9IGZuMTtcbiAgICAgIHRoaXMuX2ZuMiA9IGZuMjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE11bHRpY2FzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5zb3VyY2UubXVsdGljYXN0KHRoaXMuX2ZuMSgpKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZSh0aGlzLl9mbjIoY29ubmVjdGFibGUpLnN1YnNjcmliZShvKSwgY29ubmVjdGFibGUuY29ubmVjdCgpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE11bHRpY2FzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogTXVsdGljYXN0cyB0aGUgc291cmNlIHNlcXVlbmNlIG5vdGlmaWNhdGlvbnMgdGhyb3VnaCBhbiBpbnN0YW50aWF0ZWQgc3ViamVjdCBpbnRvIGFsbCB1c2VzIG9mIHRoZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi4gRWFjaFxuICAgKiBzdWJzY3JpcHRpb24gdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBjYXVzZXMgYSBzZXBhcmF0ZSBtdWx0aWNhc3QgaW52b2NhdGlvbiwgZXhwb3NpbmcgdGhlIHNlcXVlbmNlIHJlc3VsdGluZyBmcm9tIHRoZSBzZWxlY3RvciBmdW5jdGlvbidzXG4gICAqIGludm9jYXRpb24uIEZvciBzcGVjaWFsaXphdGlvbnMgd2l0aCBmaXhlZCBzdWJqZWN0IHR5cGVzLCBzZWUgUHVibGlzaCwgUHVibGlzaExhc3QsIGFuZCBSZXBsYXkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIDEgLSByZXMgPSBzb3VyY2UubXVsdGljYXN0KG9ic2VydmFibGUpO1xuICAgKiAyIC0gcmVzID0gc291cmNlLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3ViamVjdCgpOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258U3ViamVjdH0gc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXG4gICAqIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGFuIGludGVybWVkaWF0ZSBzdWJqZWN0IHRocm91Z2ggd2hpY2ggdGhlIHNvdXJjZSBzZXF1ZW5jZSdzIGVsZW1lbnRzIHdpbGwgYmUgbXVsdGljYXN0IHRvIHRoZSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICogT3I6XG4gICAqIFN1YmplY3QgdG8gcHVzaCBzb3VyY2UgZWxlbWVudHMgaW50by5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBPcHRpb25hbCBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2Ugc3ViamVjdCB0byB0aGUgcG9saWNpZXMgZW5mb3JjZWQgYnkgdGhlIGNyZWF0ZWQgc3ViamVjdC4gU3BlY2lmaWVkIG9ubHkgaWYgPHBhcmFtcmVmIG5hbWU9XCJzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3JcIiBpcyBhIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubXVsdGljYXN0ID0gZnVuY3Rpb24gKHN1YmplY3RPclN1YmplY3RTZWxlY3Rvciwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IpID9cbiAgICAgIG5ldyBNdWx0aWNhc3RPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RPclN1YmplY3RTZWxlY3Rvciwgc2VsZWN0b3IpIDpcbiAgICAgIG5ldyBDb25uZWN0YWJsZU9ic2VydmFibGUodGhpcywgc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIHJlZ3VsYXIgU3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlc3JlcyA9IHNvdXJjZS5wdWJsaXNoKCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBhbGwgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIGZyb20gdGhlIHRpbWUgb2YgdGhlIHN1YnNjcmlwdGlvbiBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgU3ViamVjdCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHB1Ymxpc2ggd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGNvbnRhaW5pbmcgb25seSB0aGUgbGFzdCBub3RpZmljYXRpb24uXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBBc3luY1N1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaExhc3QoKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoTGFzdChmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciBbT3B0aW9uYWxdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIG9ubHkgcmVjZWl2ZSB0aGUgbGFzdCBub3RpZmljYXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoTGFzdCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgQXN5bmNTdWJqZWN0KCk7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgQXN5bmNTdWJqZWN0KCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGFuZCBzdGFydHMgd2l0aCBpbml0aWFsVmFsdWUuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBCZWhhdmlvclN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaFZhbHVlKDQyKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoVmFsdWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguc2VsZWN0KGZ1bmN0aW9uICh5KSB7IHJldHVybiB5ICogeTsgfSkgfSwgNDIpO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIE9wdGlvbmFsIHNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgaW1tZWRpYXRlbHkgcmVjZWl2ZSB0aGUgaW5pdGlhbCB2YWx1ZSwgZm9sbG93ZWQgYnkgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZSB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gb24uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHJlY2VpdmVkIGJ5IG9ic2VydmVycyB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoVmFsdWUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlT3JTZWxlY3RvciwgaW5pdGlhbFZhbHVlKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDIgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IEJlaGF2aW9yU3ViamVjdChpbml0aWFsVmFsdWUpO1xuICAgICAgfSwgaW5pdGlhbFZhbHVlT3JTZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IEJlaGF2aW9yU3ViamVjdChpbml0aWFsVmFsdWVPclNlbGVjdG9yKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgYW5kIHN0YXJ0cyB3aXRoIGFuIGluaXRpYWxWYWx1ZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHB1Ymxpc2hWYWx1ZSB3aGljaCBjcmVhdGVzIGEgc3Vic2NyaXB0aW9uIHdoZW4gdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgZ29lcyBmcm9tIHplcm8gdG8gb25lLCB0aGVuIHNoYXJlcyB0aGF0IHN1YnNjcmlwdGlvbiB3aXRoIGFsbCBzdWJzZXF1ZW50IG9ic2VydmVycyB1bnRpbCB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyByZXR1cm5zIHRvIHplcm8sIGF0IHdoaWNoIHBvaW50IHRoZSBzdWJzY3JpcHRpb24gaXMgZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHJlY2VpdmVkIGJ5IG9ic2VydmVycyB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZVZhbHVlID0gZnVuY3Rpb24gKGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLnB1Ymxpc2hWYWx1ZShpbml0aWFsVmFsdWUpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgcmVwbGF5aW5nIG5vdGlmaWNhdGlvbnMgc3ViamVjdCB0byBhIG1heGltdW0gdGltZSBsZW5ndGggZm9yIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgUmVwbGF5U3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkobnVsbCwgMyk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMsIDUwMCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudGFrZSg2KS5yZXBlYXQoKTsgfSwgMywgNTAwLCBzY2hlZHVsZXIpO1xuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgW09wdGlvbmFsXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCB0aGUgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIHN1YmplY3QgdG8gdGhlIHNwZWNpZmllZCByZXBsYXkgYnVmZmVyIHRyaW1taW5nIHBvbGljeS5cbiAgICogQHBhcmFtIGJ1ZmZlclNpemUgW09wdGlvbmFsXSBNYXhpbXVtIGVsZW1lbnQgY291bnQgb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSB3aW5kb3dTaXplIFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHNjaGVkdWxlciBbT3B0aW9uYWxdIFNjaGVkdWxlciB3aGVyZSBjb25uZWN0ZWQgb2JzZXJ2ZXJzIHdpdGhpbiB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJlcGxheSA9IGZ1bmN0aW9uIChzZWxlY3RvciwgYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcik7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSByZXBsYXlpbmcgbm90aWZpY2F0aW9ucyBzdWJqZWN0IHRvIGEgbWF4aW11bSB0aW1lIGxlbmd0aCBmb3IgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiByZXBsYXkgd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMsIDUwMCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2Uuc2hhcmVSZXBsYXkoMywgNTAwLCBzY2hlZHVsZXIpO1xuICAgKlxuXG4gICAqIEBwYXJhbSBidWZmZXJTaXplIFtPcHRpb25hbF0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gd2luZG93IFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHNjaGVkdWxlciBbT3B0aW9uYWxdIFNjaGVkdWxlciB3aGVyZSBjb25uZWN0ZWQgb2JzZXJ2ZXJzIHdpdGhpbiB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlUmVwbGF5ID0gZnVuY3Rpb24gKGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiB0aGlzLnJlcGxheShudWxsLCBidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgdmFyIElubmVyU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHMsIG8pIHtcbiAgICB0aGlzLl9zID0gcztcbiAgICB0aGlzLl9vID0gbztcbiAgfTtcblxuICBJbm5lclN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX3MuaXNEaXNwb3NlZCAmJiB0aGlzLl9vICE9PSBudWxsKSB7XG4gICAgICB2YXIgaWR4ID0gdGhpcy5fcy5vYnNlcnZlcnMuaW5kZXhPZih0aGlzLl9vKTtcbiAgICAgIHRoaXMuX3Mub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgdGhpcy5fbyA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NvdW50ID0gMDtcbiAgICAgIHRoaXMuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZkNvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pO1xuICAgICAgKyt0aGlzLl9jb3VudCA9PT0gMSAmJiAodGhpcy5fY29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5jb25uZWN0KCkpO1xuICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKHAsIHMpIHtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcbiAgICAgICAgLS10aGlzLl9wLl9jb3VudCA9PT0gMCAmJiB0aGlzLl9wLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSZWZDb3VudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gUnguQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVPYnNlcnZhYmxlKHNvdXJjZSwgc3ViamVjdCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZS5hc09ic2VydmFibGUoKTtcbiAgICAgIHRoaXMuX3N1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29ubmVjdERpc3Bvc2FibGUocGFyZW50LCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9zID0gc3Vic2NyaXB0aW9uO1xuICAgIH1cblxuICAgIENvbm5lY3REaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3MpIHtcbiAgICAgICAgdGhpcy5fcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9wLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLl9zdWJqZWN0LmlzU3RvcHBlZCkge1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuX3NvdXJjZS5zdWJzY3JpYmUodGhpcy5fc3ViamVjdCk7XG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9jb25uZWN0aW9uO1xuICAgIH07XG5cbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YmplY3Quc3Vic2NyaWJlKG8pO1xuICAgIH07XG5cbiAgICBDb25uZWN0YWJsZU9ic2VydmFibGUucHJvdG90eXBlLnJlZkNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudE9ic2VydmFibGUodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb25uZWN0YWJsZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLiBUaGlzIG9ic2VydmFibGUgc2VxdWVuY2VcbiAgICogY2FuIGJlIHJlc3Vic2NyaWJlZCB0bywgZXZlbiBpZiBhbGwgcHJpb3Igc3Vic2NyaXB0aW9ucyBoYXZlIGVuZGVkLiAodW5saWtlIGAucHVibGlzaCgpLnJlZkNvdW50KClgKVxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNpbmdsZUluc3RhbmNlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsIGhhc09ic2VydmFibGUgPSBmYWxzZSwgb2JzZXJ2YWJsZTtcblxuICAgIGZ1bmN0aW9uIGdldE9ic2VydmFibGUoKSB7XG4gICAgICBpZiAoIWhhc09ic2VydmFibGUpIHtcbiAgICAgICAgaGFzT2JzZXJ2YWJsZSA9IHRydWU7XG4gICAgICAgIG9ic2VydmFibGUgPSBzb3VyY2VbJ2ZpbmFsbHknXShmdW5jdGlvbigpIHsgaGFzT2JzZXJ2YWJsZSA9IGZhbHNlOyB9KS5wdWJsaXNoKCkucmVmQ291bnQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gZ2V0T2JzZXJ2YWJsZSgpLnN1YnNjcmliZShvKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKipcbiAgICogIENvcnJlbGF0ZXMgdGhlIGVsZW1lbnRzIG9mIHR3byBzZXF1ZW5jZXMgYmFzZWQgb24gb3ZlcmxhcHBpbmcgZHVyYXRpb25zLlxuICAgKlxuICAgKiAgQHBhcmFtIHtPYnNlcnZhYmxlfSByaWdodCBUaGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBqb2luIGVsZW1lbnRzIGZvci5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IGxlZnREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgbGVmdCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmlnaHREdXJhdGlvblNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gc2VsZWN0IHRoZSBkdXJhdGlvbiAoZXhwcmVzc2VkIGFzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UpIG9mIGVhY2ggZWxlbWVudCBvZiB0aGUgcmlnaHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNlZCB0byBkZXRlcm1pbmUgb3ZlcmxhcC5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIEEgZnVuY3Rpb24gaW52b2tlZCB0byBjb21wdXRlIGEgcmVzdWx0IGVsZW1lbnQgZm9yIGFueSB0d28gb3ZlcmxhcHBpbmcgZWxlbWVudHMgb2YgdGhlIGxlZnQgYW5kIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2VzLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGNvcnJlc3BvbmQgd2l0aCB0aGUgZWxlbWVudHMgZnJvbSB0aGUgbGVmdCBhbmQgcmlnaHQgc291cmNlIHNlcXVlbmNlcyBmb3Igd2hpY2ggb3ZlcmxhcCBvY2N1cnMuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHJlc3VsdCBlbGVtZW50cyBjb21wdXRlZCBmcm9tIHNvdXJjZSBlbGVtZW50cyB0aGF0IGhhdmUgYW4gb3ZlcmxhcHBpbmcgZHVyYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uam9pbiA9IGZ1bmN0aW9uIChyaWdodCwgbGVmdER1cmF0aW9uU2VsZWN0b3IsIHJpZ2h0RHVyYXRpb25TZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIGxlZnREb25lID0gZmFsc2UsIHJpZ2h0RG9uZSA9IGZhbHNlO1xuICAgICAgdmFyIGxlZnRJZCA9IDAsIHJpZ2h0SWQgPSAwO1xuICAgICAgdmFyIGxlZnRNYXAgPSBuZXcgTWFwKCksIHJpZ2h0TWFwID0gbmV3IE1hcCgpO1xuICAgICAgdmFyIGhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9O1xuXG4gICAgICBncm91cC5hZGQobGVmdC5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBpZCA9IGxlZnRJZCsrLCBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICAgICAgbGVmdE1hcC5zZXQoaWQsIHZhbHVlKTtcbiAgICAgICAgICBncm91cC5hZGQobWQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2gobGVmdER1cmF0aW9uU2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7IH1cblxuICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgaGFuZGxlRXJyb3IsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGxlZnRNYXBbJ2RlbGV0ZSddKGlkKSAmJiBsZWZ0TWFwLnNpemUgPT09IDAgJiYgbGVmdERvbmUgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgICBncm91cC5yZW1vdmUobWQpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgcmlnaHRNYXAuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHJlc3VsdFNlbGVjdG9yKSh2YWx1ZSwgdik7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICAgICAgby5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlRXJyb3IsXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBsZWZ0RG9uZSA9IHRydWU7XG4gICAgICAgICAgKHJpZ2h0RG9uZSB8fCBsZWZ0TWFwLnNpemUgPT09IDApICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIGdyb3VwLmFkZChyaWdodC5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBpZCA9IHJpZ2h0SWQrKywgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgICAgIHJpZ2h0TWFwLnNldChpZCwgdmFsdWUpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChyaWdodER1cmF0aW9uU2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7IH1cblxuICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgaGFuZGxlRXJyb3IsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJpZ2h0TWFwWydkZWxldGUnXShpZCkgJiYgcmlnaHRNYXAuc2l6ZSA9PT0gMCAmJiByaWdodERvbmUgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgICBncm91cC5yZW1vdmUobWQpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpKHYsIHZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVFcnJvcixcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJpZ2h0RG9uZSA9IHRydWU7XG4gICAgICAgICAgKGxlZnREb25lIHx8IHJpZ2h0TWFwLnNpemUgPT09IDApICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfSwgbGVmdCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBDb3JyZWxhdGVzIHRoZSBlbGVtZW50cyBvZiB0d28gc2VxdWVuY2VzIGJhc2VkIG9uIG92ZXJsYXBwaW5nIGR1cmF0aW9ucywgYW5kIGdyb3VwcyB0aGUgcmVzdWx0cy5cbiAgICpcbiAgICogIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcmlnaHQgVGhlIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2UgdG8gam9pbiBlbGVtZW50cyBmb3IuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBsZWZ0RHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgZHVyYXRpb24gKGV4cHJlc3NlZCBhcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlKSBvZiBlYWNoIGVsZW1lbnQgb2YgdGhlIGxlZnQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNlZCB0byBkZXRlcm1pbmUgb3ZlcmxhcC5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHJpZ2h0RHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgZHVyYXRpb24gKGV4cHJlc3NlZCBhcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlKSBvZiBlYWNoIGVsZW1lbnQgb2YgdGhlIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzZWQgdG8gZGV0ZXJtaW5lIG92ZXJsYXAuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBBIGZ1bmN0aW9uIGludm9rZWQgdG8gY29tcHV0ZSBhIHJlc3VsdCBlbGVtZW50IGZvciBhbnkgZWxlbWVudCBvZiB0aGUgbGVmdCBzZXF1ZW5jZSB3aXRoIG92ZXJsYXBwaW5nIGVsZW1lbnRzIGZyb20gdGhlIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2UuIFRoZSBmaXJzdCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbiBpcyBhbiBlbGVtZW50IG9mIHRoZSBsZWZ0IHNlcXVlbmNlLiBUaGUgc2Vjb25kIHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGlzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBlbGVtZW50cyBmcm9tIHRoZSByaWdodCBzZXF1ZW5jZSB0aGF0IG92ZXJsYXAgd2l0aCB0aGUgbGVmdCBzZXF1ZW5jZSdzIGVsZW1lbnQuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHJlc3VsdCBlbGVtZW50cyBjb21wdXRlZCBmcm9tIHNvdXJjZSBlbGVtZW50cyB0aGF0IGhhdmUgYW4gb3ZlcmxhcHBpbmcgZHVyYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZ3JvdXBKb2luID0gZnVuY3Rpb24gKHJpZ2h0LCBsZWZ0RHVyYXRpb25TZWxlY3RvciwgcmlnaHREdXJhdGlvblNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvcikge1xuICAgIHZhciBsZWZ0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBncm91cCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgciA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZ3JvdXApO1xuICAgICAgdmFyIGxlZnRNYXAgPSBuZXcgTWFwKCksIHJpZ2h0TWFwID0gbmV3IE1hcCgpO1xuICAgICAgdmFyIGxlZnRJZCA9IDAsIHJpZ2h0SWQgPSAwO1xuICAgICAgdmFyIGhhbmRsZUVycm9yID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHYub25FcnJvcihlKTsgfTsgfTtcblxuICAgICAgZnVuY3Rpb24gaGFuZGxlRXJyb3IoZSkgeyB9O1xuXG4gICAgICBncm91cC5hZGQobGVmdC5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICB2YXIgaWQgPSBsZWZ0SWQrKztcbiAgICAgICAgICBsZWZ0TWFwLnNldChpZCwgcyk7XG5cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpKHZhbHVlLCBhZGRSZWYocywgcikpO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IocmVzdWx0LmUpKTtcbiAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IocmVzdWx0LmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvLm9uTmV4dChyZXN1bHQpO1xuXG4gICAgICAgICAgcmlnaHRNYXAuZm9yRWFjaChmdW5jdGlvbiAodikgeyBzLm9uTmV4dCh2KTsgfSk7XG5cbiAgICAgICAgICB2YXIgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICBncm91cC5hZGQobWQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2gobGVmdER1cmF0aW9uU2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZHVyYXRpb24uZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtZC5zZXREaXNwb3NhYmxlKGR1cmF0aW9uLnRha2UoMSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGxlZnRNYXBbJ2RlbGV0ZSddKGlkKSAmJiBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHsgby5vbkNvbXBsZXRlZCgpOyB9KVxuICAgICAgKTtcblxuICAgICAgZ3JvdXAuYWRkKHJpZ2h0LnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgdmFyIGlkID0gcmlnaHRJZCsrO1xuICAgICAgICAgIHJpZ2h0TWFwLnNldChpZCwgdmFsdWUpO1xuXG4gICAgICAgICAgdmFyIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgZ3JvdXAuYWRkKG1kKTtcblxuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKHJpZ2h0RHVyYXRpb25TZWxlY3RvcikodmFsdWUpO1xuICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihkdXJhdGlvbi5lKSk7XG4gICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1kLnNldERpc3Bvc2FibGUoZHVyYXRpb24udGFrZSgxKS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmlnaHRNYXBbJ2RlbGV0ZSddKGlkKTtcbiAgICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChmdW5jdGlvbiAodikgeyB2Lm9uTmV4dCh2YWx1ZSk7IH0pO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHI7XG4gICAgfSwgbGVmdCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgYnVmZmVycy5cbiAgICogIEBwYXJhbSB7TWl4ZWR9IGJ1ZmZlck9wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IgT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBkZW5vdGUgdGhlIGNyZWF0aW9uIG9mIG5ldyB3aW5kb3dzLCBvciwgYSBmdW5jdGlvbiBpbnZva2VkIHRvIGRlZmluZSB0aGUgYm91bmRhcmllcyBvZiB0aGUgcHJvZHVjZWQgd2luZG93cyAoYSBuZXcgd2luZG93IGlzIHN0YXJ0ZWQgd2hlbiB0aGUgcHJldmlvdXMgb25lIGlzIGNsb3NlZCwgcmVzdWx0aW5nIGluIG5vbi1vdmVybGFwcGluZyB3aW5kb3dzKS5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtidWZmZXJDbG9zaW5nU2VsZWN0b3JdIEEgZnVuY3Rpb24gaW52b2tlZCB0byBkZWZpbmUgdGhlIGNsb3Npbmcgb2YgZWFjaCBwcm9kdWNlZCB3aW5kb3cuIElmIGEgY2xvc2luZyBzZWxlY3RvciBmdW5jdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoZSBmaXJzdCBwYXJhbWV0ZXIsIHRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy53aW5kb3cuYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICAgICAgLmZsYXRNYXAodG9BcnJheSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSB3aW5kb3dzLlxuICAgKlxuICAgKiAgQHBhcmFtIHtNaXhlZH0gd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciBPYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGRlbm90ZSB0aGUgY3JlYXRpb24gb2YgbmV3IHdpbmRvd3MsIG9yLCBhIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBib3VuZGFyaWVzIG9mIHRoZSBwcm9kdWNlZCB3aW5kb3dzIChhIG5ldyB3aW5kb3cgaXMgc3RhcnRlZCB3aGVuIHRoZSBwcmV2aW91cyBvbmUgaXMgY2xvc2VkLCByZXN1bHRpbmcgaW4gbm9uLW92ZXJsYXBwaW5nIHdpbmRvd3MpLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gW3dpbmRvd0Nsb3NpbmdTZWxlY3Rvcl0gQSBmdW5jdGlvbiBpbnZva2VkIHRvIGRlZmluZSB0aGUgY2xvc2luZyBvZiBlYWNoIHByb2R1Y2VkIHdpbmRvdy4gSWYgYSBjbG9zaW5nIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIHNwZWNpZmllZCBmb3IgdGhlIGZpcnN0IHBhcmFtZXRlciwgdGhpcyBwYXJhbWV0ZXIgaXMgaWdub3JlZC5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93ID0gZnVuY3Rpb24gKHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IsIHdpbmRvd0Nsb3NpbmdTZWxlY3Rvcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxICYmIHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlV2luZG93V2l0aEJvdW5kYXJpZXMuY2FsbCh0aGlzLCB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGVvZiB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yID09PSAnZnVuY3Rpb24nID9cbiAgICAgIG9ic2VydmFibGVXaW5kb3dXaXRoQ2xvc2luZ1NlbGVjdG9yLmNhbGwodGhpcywgd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvcikgOlxuICAgICAgb2JzZXJ2YWJsZVdpbmRvd1dpdGhPcGVuaW5ncy5jYWxsKHRoaXMsIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IsIHdpbmRvd0Nsb3NpbmdTZWxlY3Rvcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVdpbmRvd1dpdGhPcGVuaW5ncyh3aW5kb3dPcGVuaW5ncywgd2luZG93Q2xvc2luZ1NlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHdpbmRvd09wZW5pbmdzLmdyb3VwSm9pbih0aGlzLCB3aW5kb3dDbG9zaW5nU2VsZWN0b3IsIG9ic2VydmFibGVFbXB0eSwgZnVuY3Rpb24gKF8sIHdpbikge1xuICAgICAgcmV0dXJuIHdpbjtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVXaW5kb3dXaXRoQm91bmRhcmllcyh3aW5kb3dCb3VuZGFyaWVzKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHdpbiA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIGQgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLFxuICAgICAgICByID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShkKTtcblxuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZih3aW4sIHIpKTtcblxuICAgICAgZC5hZGQoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICB3aW4ub25OZXh0KHgpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xuICAgICAgICB3aW4ub25FcnJvcihlcnIpO1xuICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycik7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuXG4gICAgICBpc1Byb21pc2Uod2luZG93Qm91bmRhcmllcykgJiYgKHdpbmRvd0JvdW5kYXJpZXMgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uod2luZG93Qm91bmRhcmllcykpO1xuXG4gICAgICBkLmFkZCh3aW5kb3dCb3VuZGFyaWVzLnN1YnNjcmliZShmdW5jdGlvbiAodykge1xuICAgICAgICB3aW4ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgd2luID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZih3aW4sIHIpKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgd2luLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW4ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHI7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVXaW5kb3dXaXRoQ2xvc2luZ1NlbGVjdG9yKHdpbmRvd0Nsb3NpbmdTZWxlY3Rvcikge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBtID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKG0pLFxuICAgICAgICByID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShkKSxcbiAgICAgICAgd2luID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYod2luLCByKSk7XG4gICAgICBkLmFkZChzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgd2luLm9uTmV4dCh4KTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB3aW4ub25FcnJvcihlcnIpO1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW4ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVXaW5kb3dDbG9zZSAoKSB7XG4gICAgICAgIHZhciB3aW5kb3dDbG9zZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB3aW5kb3dDbG9zZSA9IHdpbmRvd0Nsb3NpbmdTZWxlY3RvcigpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpc1Byb21pc2Uod2luZG93Q2xvc2UpICYmICh3aW5kb3dDbG9zZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh3aW5kb3dDbG9zZSkpO1xuXG4gICAgICAgIHZhciBtMSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBtLnNldERpc3Bvc2FibGUobTEpO1xuICAgICAgICBtMS5zZXREaXNwb3NhYmxlKHdpbmRvd0Nsb3NlLnRha2UoMSkuc3Vic2NyaWJlKG5vb3AsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB3aW4ub25FcnJvcihlcnIpO1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbi5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIHdpbiA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZih3aW4sIHIpKTtcbiAgICAgICAgICBjcmVhdGVXaW5kb3dDbG9zZSgpO1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIGNyZWF0ZVdpbmRvd0Nsb3NlKCk7XG4gICAgICByZXR1cm4gcjtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgdmFyIFBhaXJ3aXNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGFpcndpc2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhaXJ3aXNlT2JzZXJ2YWJsZShzb3VyY2UpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGFpcndpc2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFBhaXJ3aXNlT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUGFpcndpc2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFBhaXJ3aXNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGFpcndpc2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBQYWlyd2lzZU9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IG51bGw7XG4gICAgICB0aGlzLl9ocCA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGFpcndpc2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faHApIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoW3RoaXMuX3AsIHhdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2hwID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3AgPSB4O1xuICAgIH07XG4gICAgUGFpcndpc2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7IHRoaXMuX28ub25FcnJvcihlcnIpOyB9O1xuICAgIFBhaXJ3aXNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFBhaXJ3aXNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IG9ic2VydmFibGUgdGhhdCB0cmlnZ2VycyBvbiB0aGUgc2Vjb25kIGFuZCBzdWJzZXF1ZW50IHRyaWdnZXJpbmdzIG9mIHRoZSBpbnB1dCBvYnNlcnZhYmxlLlxuICAgKiBUaGUgTnRoIHRyaWdnZXJpbmcgb2YgdGhlIGlucHV0IG9ic2VydmFibGUgcGFzc2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgTi0xdGggYW5kIE50aCB0cmlnZ2VyaW5nIGFzIGEgcGFpci5cbiAgICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGUgTi0xdGggdHJpZ2dlcmluZyBpcyBoZWxkIGluIGhpZGRlbiBpbnRlcm5hbCBzdGF0ZSB1bnRpbCB0aGUgTnRoIHRyaWdnZXJpbmcgb2NjdXJzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSB0aGF0IHRyaWdnZXJzIG9uIHN1Y2Nlc3NpdmUgcGFpcnMgb2Ygb2JzZXJ2YXRpb25zIGZyb20gdGhlIGlucHV0IG9ic2VydmFibGUgYXMgYW4gYXJyYXkuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGFpcndpc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBQYWlyd2lzZU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHdvIG9ic2VydmFibGVzIHdoaWNoIHBhcnRpdGlvbiB0aGUgb2JzZXJ2YXRpb25zIG9mIHRoZSBzb3VyY2UgYnkgdGhlIGdpdmVuIGZ1bmN0aW9uLlxuICAgKiBUaGUgZmlyc3Qgd2lsbCB0cmlnZ2VyIG9ic2VydmF0aW9ucyBmb3IgdGhvc2UgdmFsdWVzIGZvciB3aGljaCB0aGUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZS5cbiAgICogVGhlIHNlY29uZCB3aWxsIHRyaWdnZXIgb2JzZXJ2YXRpb25zIGZvciB0aG9zZSB2YWx1ZXMgd2hlcmUgdGhlIHByZWRpY2F0ZSByZXR1cm5zIGZhbHNlLlxuICAgKiBUaGUgcHJlZGljYXRlIGlzIGV4ZWN1dGVkIG9uY2UgZm9yIGVhY2ggc3Vic2NyaWJlZCBvYnNlcnZlci5cbiAgICogQm90aCBhbHNvIHByb3BhZ2F0ZSBhbGwgZXJyb3Igb2JzZXJ2YXRpb25zIGFyaXNpbmcgZnJvbSB0aGUgc291cmNlIGFuZCBlYWNoIGNvbXBsZXRlc1xuICAgKiB3aGVuIHRoZSBzb3VyY2UgY29tcGxldGVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGVcbiAgICogICAgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSB3aGljaCBvdXRwdXQgT2JzZXJ2YWJsZSB3aWxsIHRyaWdnZXIgYSBwYXJ0aWN1bGFyIG9ic2VydmF0aW9uLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAqICAgIEFuIGFycmF5IG9mIG9ic2VydmFibGVzLiBUaGUgZmlyc3QgdHJpZ2dlcnMgd2hlbiB0aGUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZSxcbiAgICogICAgYW5kIHRoZSBzZWNvbmQgdHJpZ2dlcnMgd2hlbiB0aGUgcHJlZGljYXRlIHJldHVybnMgZmFsc2UuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5wYXJ0aXRpb24gPSBmdW5jdGlvbihwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gW1xuICAgICAgdGhpcy5maWx0ZXIocHJlZGljYXRlLCB0aGlzQXJnKSxcbiAgICAgIHRoaXMuZmlsdGVyKGZ1bmN0aW9uICh4LCBpLCBvKSB7IHJldHVybiAhZm4oeCwgaSwgbyk7IH0pXG4gICAgXTtcbiAgfTtcblxuICB2YXIgV2hpbGVFbnVtZXJhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdoaWxlRW51bWVyYWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBXaGlsZUVudW1lcmFibGUoYywgcykge1xuICAgICAgdGhpcy5jID0gYztcbiAgICAgIHRoaXMucyA9IHM7XG4gICAgfVxuICAgIFdoaWxlRW51bWVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuYygpID9cbiAgICAgICAgICAgeyBkb25lOiBmYWxzZSwgdmFsdWU6IHNlbGYucyB9IDpcbiAgICAgICAgICAgeyBkb25lOiB0cnVlLCB2YWx1ZTogdm9pZCAwIH07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcbiAgICByZXR1cm4gV2hpbGVFbnVtZXJhYmxlO1xuICB9KEVudW1lcmFibGUpKTtcbiAgXG4gIGZ1bmN0aW9uIGVudW1lcmFibGVXaGlsZShjb25kaXRpb24sIHNvdXJjZSkge1xuICAgIHJldHVybiBuZXcgV2hpbGVFbnVtZXJhYmxlKGNvbmRpdGlvbiwgc291cmNlKTtcbiAgfSAgXG5cbiAgIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gdGhlIHNvdXJjZSBzZXF1ZW5jZSwgd2l0aG91dCBzaGFyaW5nIHN1YnNjcmlwdGlvbnMuXG4gICAqICBUaGlzIG9wZXJhdG9yIGFsbG93cyBmb3IgYSBmbHVlbnQgc3R5bGUgb2Ygd3JpdGluZyBxdWVyaWVzIHRoYXQgdXNlIHRoZSBzYW1lIHNlcXVlbmNlIG11bHRpcGxlIHRpbWVzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgc2hhcmluZyBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubGV0QmluZCA9IG9ic2VydmFibGVQcm90b1snbGV0J10gPSBmdW5jdGlvbiAoZnVuYykge1xuICAgIHJldHVybiBmdW5jKHRoaXMpO1xuICB9O1xuXG4gICAvKipcbiAgICogIERldGVybWluZXMgd2hldGhlciBhbiBvYnNlcnZhYmxlIGNvbGxlY3Rpb24gY29udGFpbnMgdmFsdWVzLiBcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmlmKGNvbmRpdGlvbiwgb2JzMSk7XG4gICAqICAyIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pZihjb25kaXRpb24sIG9iczEsIG9iczIpO1xuICAgKiAgMyAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaWYoY29uZGl0aW9uLCBvYnMxLCBzY2hlZHVsZXIpO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gVGhlIGNvbmRpdGlvbiB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSB0aGVuU291cmNlIG9yIGVsc2VTb3VyY2Ugd2lsbCBiZSBydW4uXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gdGhlblNvdXJjZSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgd2lsbCBiZSBydW4gaWYgdGhlIGNvbmRpdGlvbiBmdW5jdGlvbiByZXR1cm5zIHRydWUuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gW2Vsc2VTb3VyY2VdIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UuIElmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCBpdCBkZWZhdWx0cyB0byBSeC5PYnNlcnZhYmUuRW1wdHkgd2l0aCB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgZWl0aGVyIHRoZSB0aGVuU291cmNlIG9yIGVsc2VTb3VyY2UuXG4gICAqL1xuICBPYnNlcnZhYmxlWydpZiddID0gZnVuY3Rpb24gKGNvbmRpdGlvbiwgdGhlblNvdXJjZSwgZWxzZVNvdXJjZU9yU2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBlbHNlU291cmNlT3JTY2hlZHVsZXIgfHwgKGVsc2VTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVFbXB0eSgpKTtcblxuICAgICAgaXNQcm9taXNlKHRoZW5Tb3VyY2UpICYmICh0aGVuU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRoZW5Tb3VyY2UpKTtcbiAgICAgIGlzUHJvbWlzZShlbHNlU291cmNlT3JTY2hlZHVsZXIpICYmIChlbHNlU291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoZWxzZVNvdXJjZU9yU2NoZWR1bGVyKSk7XG5cbiAgICAgIC8vIEFzc3VtZSBhIHNjaGVkdWxlciBmb3IgZW1wdHkgb25seVxuICAgICAgdHlwZW9mIGVsc2VTb3VyY2VPclNjaGVkdWxlci5ub3cgPT09ICdmdW5jdGlvbicgJiYgKGVsc2VTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVFbXB0eShlbHNlU291cmNlT3JTY2hlZHVsZXIpKTtcbiAgICAgIHJldHVybiBjb25kaXRpb24oKSA/IHRoZW5Tb3VyY2UgOiBlbHNlU291cmNlT3JTY2hlZHVsZXI7XG4gICAgfSk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgQ29uY2F0ZW5hdGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvYnRhaW5lZCBieSBydW5uaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZvciBlYWNoIGVsZW1lbnQgaW4gc291cmNlLlxuICAgKiBUaGVyZSBpcyBhbiBhbGlhcyBmb3IgdGhpcyBtZXRob2QgY2FsbGVkICdmb3JJbicgZm9yIGJyb3dzZXJzIDxJRTlcbiAgICogQHBhcmFtIHtBcnJheX0gc291cmNlcyBBbiBhcnJheSBvZiB2YWx1ZXMgdG8gdHVybiBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBpdGVtIGluIHRoZSBzb3VyY2VzIGFycmF5IHRvIHR1cm4gaXQgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIHRoZSBjb25jYXRlbmF0ZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuXG4gICAqL1xuICBPYnNlcnZhYmxlWydmb3InXSA9IE9ic2VydmFibGUuZm9ySW4gPSBmdW5jdGlvbiAoc291cmNlcywgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gZW51bWVyYWJsZU9mKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5jb25jYXQoKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBSZXBlYXRzIHNvdXJjZSBhcyBsb25nIGFzIGNvbmRpdGlvbiBob2xkcyBlbXVsYXRpbmcgYSB3aGlsZSBsb29wLlxuICAgKiBUaGVyZSBpcyBhbiBhbGlhcyBmb3IgdGhpcyBtZXRob2QgY2FsbGVkICd3aGlsZURvJyBmb3IgYnJvd3NlcnMgPElFOVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gVGhlIGNvbmRpdGlvbiB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSBzb3VyY2Ugd2lsbCBiZSByZXBlYXRlZC5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzb3VyY2UgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB3aWxsIGJlIHJ1biBpZiB0aGUgY29uZGl0aW9uIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggaXMgcmVwZWF0ZWQgYXMgbG9uZyBhcyB0aGUgY29uZGl0aW9uIGhvbGRzLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVXaGlsZURvID0gT2JzZXJ2YWJsZVsnd2hpbGUnXSA9IE9ic2VydmFibGUud2hpbGVEbyA9IGZ1bmN0aW9uIChjb25kaXRpb24sIHNvdXJjZSkge1xuICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgcmV0dXJuIGVudW1lcmFibGVXaGlsZShjb25kaXRpb24sIHNvdXJjZSkuY29uY2F0KCk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgUmVwZWF0cyBzb3VyY2UgYXMgbG9uZyBhcyBjb25kaXRpb24gaG9sZHMgZW11bGF0aW5nIGEgZG8gd2hpbGUgbG9vcC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uIFRoZSBjb25kaXRpb24gd2hpY2ggZGV0ZXJtaW5lcyBpZiB0aGUgc291cmNlIHdpbGwgYmUgcmVwZWF0ZWQuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc291cmNlIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgd2lsbCBiZSBydW4gaWYgdGhlIGNvbmRpdGlvbiBmdW5jdGlvbiByZXR1cm5zIHRydWUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHJlcGVhdGVkIGFzIGxvbmcgYXMgdGhlIGNvbmRpdGlvbiBob2xkcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5kb1doaWxlID0gZnVuY3Rpb24gKGNvbmRpdGlvbikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlQ29uY2F0KFt0aGlzLCBvYnNlcnZhYmxlV2hpbGVEbyhjb25kaXRpb24sIHRoaXMpXSk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgVXNlcyBzZWxlY3RvciB0byBkZXRlcm1pbmUgd2hpY2ggc291cmNlIGluIHNvdXJjZXMgdG8gdXNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBUaGUgZnVuY3Rpb24gd2hpY2ggZXh0cmFjdHMgdGhlIHZhbHVlIGZvciB0byB0ZXN0IGluIGEgY2FzZSBzdGF0ZW1lbnQuXG4gICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZXMgQSBvYmplY3Qgd2hpY2ggaGFzIGtleXMgd2hpY2ggY29ycmVzcG9uZCB0byB0aGUgY2FzZSBzdGF0ZW1lbnQgbGFiZWxzLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IFtlbHNlU291cmNlXSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgd2lsbCBiZSBydW4gaWYgdGhlIHNvdXJjZXMgYXJlIG5vdCBtYXRjaGVkLiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgaXQgZGVmYXVsdHMgdG8gUnguT2JzZXJ2YWJlLmVtcHR5IHdpdGggdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIGRldGVybWluZWQgYnkgYSBjYXNlIHN0YXRlbWVudC5cbiAgICovXG4gIE9ic2VydmFibGVbJ2Nhc2UnXSA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgc291cmNlcywgZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICBpc1Byb21pc2UoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSAmJiAoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikpO1xuICAgICAgZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyIHx8IChkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRW1wdHkoKSk7XG5cbiAgICAgIGlzU2NoZWR1bGVyKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikgJiYgKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVFbXB0eShkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpKTtcblxuICAgICAgdmFyIHJlc3VsdCA9IHNvdXJjZXNbc2VsZWN0b3IoKV07XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0IHx8IGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcjtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgRXhwYW5kT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHBhbmRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV4cGFuZE9ic2VydmFibGUoc291cmNlLCBmbiwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZShhcmdzLCByZWN1cnNlKSB7XG4gICAgICB2YXIgc3RhdGUgPSBhcmdzWzBdLCBzZWxmID0gYXJnc1sxXTtcbiAgICAgIHZhciB3b3JrO1xuICAgICAgaWYgKHN0YXRlLnEubGVuZ3RoID4gMCkge1xuICAgICAgICB3b3JrID0gc3RhdGUucS5zaGlmdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuaXNBY3F1aXJlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbTEgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHN0YXRlLmQuYWRkKG0xKTtcbiAgICAgIG0xLnNldERpc3Bvc2FibGUod29yay5zdWJzY3JpYmUobmV3IEV4cGFuZE9ic2VydmVyKHN0YXRlLCBzZWxmLCBtMSkpKTtcbiAgICAgIHJlY3Vyc2UoW3N0YXRlLCBzZWxmXSk7XG4gICAgfVxuXG4gICAgRXhwYW5kT2JzZXJ2YWJsZS5wcm90b3R5cGUuX2Vuc3VyZUFjdGl2ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgdmFyIGlzT3duZXIgPSBmYWxzZTtcbiAgICAgIGlmIChzdGF0ZS5xLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaXNPd25lciA9ICFzdGF0ZS5pc0FjcXVpcmVkO1xuICAgICAgICBzdGF0ZS5pc0FjcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlzT3duZXIgJiYgc3RhdGUubS5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShbc3RhdGUsIHRoaXNdLCBzY2hlZHVsZVJlY3Vyc2l2ZSkpO1xuICAgIH07XG5cbiAgICBFeHBhbmRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBtID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKG0pLFxuICAgICAgICBzdGF0ZSA9IHtcbiAgICAgICAgICBxOiBbXSxcbiAgICAgICAgICBtOiBtLFxuICAgICAgICAgIGQ6IGQsXG4gICAgICAgICAgYWN0aXZlQ291bnQ6IDAsXG4gICAgICAgICAgaXNBY3F1aXJlZDogZmFsc2UsXG4gICAgICAgICAgbzogb1xuICAgICAgICB9O1xuXG4gICAgICBzdGF0ZS5xLnB1c2godGhpcy5zb3VyY2UpO1xuICAgICAgc3RhdGUuYWN0aXZlQ291bnQrKztcbiAgICAgIHRoaXMuX2Vuc3VyZUFjdGl2ZShzdGF0ZSk7XG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4cGFuZE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRXhwYW5kT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXhwYW5kT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXhwYW5kT2JzZXJ2ZXIoc3RhdGUsIHBhcmVudCwgbTEpIHtcbiAgICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9tMSA9IG0xO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXhwYW5kT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcy5vLm9uTmV4dCh4KTtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9wLl9mbikoeCk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fcy5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICB0aGlzLl9zLnEucHVzaChyZXN1bHQpO1xuICAgICAgdGhpcy5fcy5hY3RpdmVDb3VudCsrO1xuICAgICAgdGhpcy5fcC5fZW5zdXJlQWN0aXZlKHRoaXMuX3MpO1xuICAgIH07XG5cbiAgICBFeHBhbmRPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIEV4cGFuZE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9zLmQucmVtb3ZlKHRoaXMuX20xKTtcbiAgICAgIHRoaXMuX3MuYWN0aXZlQ291bnQtLTtcbiAgICAgIHRoaXMuX3MuYWN0aXZlQ291bnQgPT09IDAgJiYgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHBhbmRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgIC8qKlxuICAgKiAgRXhwYW5kcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHJlY3Vyc2l2ZWx5IGludm9raW5nIHNlbGVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBTZWxlY3RvciBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggcHJvZHVjZWQgZWxlbWVudCwgcmVzdWx0aW5nIGluIGFub3RoZXIgc2VxdWVuY2UgdG8gd2hpY2ggdGhlIHNlbGVjdG9yIHdpbGwgYmUgaW52b2tlZCByZWN1cnNpdmVseSBhZ2Fpbi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciBvbiB3aGljaCB0byBwZXJmb3JtIHRoZSBleHBhbnNpb24uIElmIG5vdCBwcm92aWRlZCwgdGhpcyBkZWZhdWx0cyB0byB0aGUgY3VycmVudCB0aHJlYWQgc2NoZWR1bGVyLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGFsbCB0aGUgZWxlbWVudHMgcHJvZHVjZWQgYnkgdGhlIHJlY3Vyc2l2ZSBleHBhbnNpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZXhwYW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEV4cGFuZE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gYXJndW1lbnRzVG9BcnJheSgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICB2YXIgRm9ya0pvaW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGb3JrSm9pbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZhYmxlKHNvdXJjZXMsIGNiKSB7XG4gICAgICB0aGlzLl9zb3VyY2VzID0gc291cmNlcztcbiAgICAgIHRoaXMuX2NiID0gY2I7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGb3JrSm9pbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX3NvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvdW50ID0gdGhpcy5fc291cmNlcy5sZW5ndGg7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGZpbmlzaGVkOiBmYWxzZSxcbiAgICAgICAgaGFzUmVzdWx0czogbmV3IEFycmF5KGNvdW50KSxcbiAgICAgICAgaGFzQ29tcGxldGVkOiBuZXcgQXJyYXkoY291bnQpLFxuICAgICAgICByZXN1bHRzOiBuZXcgQXJyYXkoY291bnQpXG4gICAgICB9O1xuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5fc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fc291cmNlc1tpXTtcbiAgICAgICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICAgICAgc3Vic2NyaXB0aW9ucy5hZGQoc291cmNlLnN1YnNjcmliZShuZXcgRm9ya0pvaW5PYnNlcnZlcihvLCBzdGF0ZSwgaSwgdGhpcy5fY2IsIHN1YnNjcmlwdGlvbnMpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb25zO1xuICAgIH07XG5cbiAgICByZXR1cm4gRm9ya0pvaW5PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEZvcmtKb2luT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRm9ya0pvaW5PYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGb3JrSm9pbk9ic2VydmVyKG8sIHMsIGksIGNiLCBzdWJzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IGk7XG4gICAgICB0aGlzLl9jYiA9IGNiO1xuICAgICAgdGhpcy5fc3VicyA9IHN1YnM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGb3JrSm9pbk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICghdGhpcy5fcy5maW5pc2hlZCkge1xuICAgICAgICB0aGlzLl9zLmhhc1Jlc3VsdHNbdGhpcy5faV0gPSB0cnVlO1xuICAgICAgICB0aGlzLl9zLnJlc3VsdHNbdGhpcy5faV0gPSB4O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBGb3JrSm9pbk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICAgIHRoaXMuX3N1YnMuZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICBGb3JrSm9pbk9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuX3MuZmluaXNoZWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9zLmhhc1Jlc3VsdHNbdGhpcy5faV0pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3MuaGFzQ29tcGxldGVkW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoIXRoaXMuX3MuaGFzQ29tcGxldGVkW2ldKSB7IHJldHVybjsgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3MuZmluaXNoZWQgPSB0cnVlO1xuXG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9jYikuYXBwbHkobnVsbCwgdGhpcy5fcy5yZXN1bHRzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cblxuICAgICAgICB0aGlzLl9vLm9uTmV4dChyZXMpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBGb3JrSm9pbk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgLyoqXG4gICAqICBSdW5zIGFsbCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiBwYXJhbGxlbCBhbmQgY29sbGVjdCB0aGVpciBsYXN0IGVsZW1lbnRzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuZm9ya0pvaW4oW29iczEsIG9iczJdKTtcbiAgICogIDEgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmZvcmtKb2luKG9iczEsIG9iczIsIC4uLik7XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYW4gYXJyYXkgY29sbGVjdGluZyB0aGUgbGFzdCBlbGVtZW50cyBvZiBhbGwgdGhlIGlucHV0IHNlcXVlbmNlcy5cbiAgICovXG4gIE9ic2VydmFibGUuZm9ya0pvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcbiAgICBBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIChhcmdzID0gYXJnc1swXSk7XG4gICAgcmV0dXJuIG5ldyBGb3JrSm9pbk9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gICAvKipcbiAgICogIFJ1bnMgdHdvIG9ic2VydmFibGUgc2VxdWVuY2VzIGluIHBhcmFsbGVsIGFuZCBjb21iaW5lcyB0aGVpciBsYXN0IGVsZW1lbmV0cy5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBzZWNvbmQgU2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbiB0byBpbnZva2Ugd2l0aCB0aGUgbGFzdCBlbGVtZW50cyBvZiBib3RoIHNlcXVlbmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIHdpdGggdGhlIGxhc3QgZWxlbWVudHMgb2YgYm90aCBpbnB1dCBzZXF1ZW5jZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZm9ya0pvaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICBhcmdzWzBdLnVuc2hpZnQodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIE9ic2VydmFibGUuZm9ya0pvaW4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbW9uYWRpYyBiaW5kIG9wZXJhdG9yLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzY2hlZHVsZXIgU2NoZWR1bGVyIHVzZWQgdG8gZXhlY3V0ZSB0aGUgb3BlcmF0aW9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byB0aGUgSW1tZWRpYXRlU2NoZWR1bGVyLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCByZXN1bHRzIGZyb20gdGhlIGNvbW9uYWRpYyBiaW5kIG9wZXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYW55U2VsZWN0ID0gb2JzZXJ2YWJsZVByb3RvLmV4dGVuZCA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gUnguU2NoZWR1bGVyLmltbWVkaWF0ZSk7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgY2hhaW47XG5cbiAgICAgIHJldHVybiBzb3VyY2VcbiAgICAgICAgLm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBjdXJyID0gbmV3IENoYWluT2JzZXJ2YWJsZSh4KTtcblxuICAgICAgICAgIGNoYWluICYmIGNoYWluLm9uTmV4dCh4KTtcbiAgICAgICAgICBjaGFpbiA9IGN1cnI7XG5cbiAgICAgICAgICByZXR1cm4gY3VycjtcbiAgICAgICAgfSlcbiAgICAgICAgLnRhcChcbiAgICAgICAgICBub29wLFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IGNoYWluICYmIGNoYWluLm9uRXJyb3IoZSk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKCkgeyBjaGFpbiAmJiBjaGFpbi5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICAgIClcbiAgICAgICAgLm9ic2VydmVPbihzY2hlZHVsZXIpXG4gICAgICAgIC5tYXAoc2VsZWN0b3IpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIENoYWluT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2hhaW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENoYWluT2JzZXJ2YWJsZShoZWFkKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaGVhZCA9IGhlYWQ7XG4gICAgICB0aGlzLnRhaWwgPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhDaGFpbk9ic2VydmFibGUucHJvdG90eXBlLCBPYnNlcnZlciwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgICBnLmFkZChjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIGZ1bmN0aW9uIChfLCBzZWxmKSB7XG4gICAgICAgICAgby5vbk5leHQoc2VsZi5oZWFkKTtcbiAgICAgICAgICBnLmFkZChzZWxmLnRhaWwubWVyZ2VBbGwoKS5zdWJzY3JpYmUobykpO1xuICAgICAgICB9KSk7XG5cbiAgICAgICAgcmV0dXJuIGc7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vbk5leHQoT2JzZXJ2YWJsZS5lbXB0eSgpKTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLm9uTmV4dChPYnNlcnZhYmxlWyd0aHJvdyddKGUpKTtcbiAgICAgIH0sXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHRoaXMudGFpbC5vbk5leHQodik7XG4gICAgICAgIHRoaXMudGFpbC5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIENoYWluT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgTWFwID0gcm9vdC5NYXAgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXAoKSB7XG4gICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgICB0aGlzLl9rZXlzID0gW107XG4gICAgfVxuXG4gICAgTWFwLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgaWYgKGkgPT09IC0xKSB7IHJldHVybiBmYWxzZTsgfVxuICAgICAgdGhpcy5fdmFsdWVzLnNwbGljZShpLCAxKTtcbiAgICAgIHRoaXMuX2tleXMuc3BsaWNlKGksIDEpO1xuICAgICAgdGhpcy5zaXplLS07XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgcmV0dXJuIGkgPT09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5fdmFsdWVzW2ldO1xuICAgIH07XG5cbiAgICBNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuX2tleXMuaW5kZXhPZihrZXkpO1xuICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuX2tleXMucHVzaChrZXkpO1xuICAgICAgICB0aGlzLl92YWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIHRoaXMuc2l6ZSsrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdmFsdWVzW2ldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNiLCB0aGlzQXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgIGNiLmNhbGwodGhpc0FyZywgdGhpcy5fdmFsdWVzW2ldLCB0aGlzLl9rZXlzW2ldKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hcDtcbiAgfSgpKTtcblxuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIFJlcHJlc2VudHMgYSBqb2luIHBhdHRlcm4gb3ZlciBvYnNlcnZhYmxlIHNlcXVlbmNlcy5cbiAgICovXG4gIGZ1bmN0aW9uIFBhdHRlcm4ocGF0dGVybnMpIHtcbiAgICB0aGlzLnBhdHRlcm5zID0gcGF0dGVybnM7XG4gIH1cblxuICAvKipcbiAgICogIENyZWF0ZXMgYSBwYXR0ZXJuIHRoYXQgbWF0Y2hlcyB0aGUgY3VycmVudCBwbGFuIG1hdGNoZXMgYW5kIHdoZW4gdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBoYXMgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKiAgQHBhcmFtIG90aGVyIE9ic2VydmFibGUgc2VxdWVuY2UgdG8gbWF0Y2ggaW4gYWRkaXRpb24gdG8gdGhlIGN1cnJlbnQgcGF0dGVybi5cbiAgICogIEByZXR1cm4ge1BhdHRlcm59IFBhdHRlcm4gb2JqZWN0IHRoYXQgbWF0Y2hlcyB3aGVuIGFsbCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB0aGUgcGF0dGVybiBoYXZlIGFuIGF2YWlsYWJsZSB2YWx1ZS5cbiAgICovXG4gIFBhdHRlcm4ucHJvdG90eXBlLmFuZCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgUGF0dGVybih0aGlzLnBhdHRlcm5zLmNvbmNhdChvdGhlcikpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgTWF0Y2hlcyB3aGVuIGFsbCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB0aGUgcGF0dGVybiAoc3BlY2lmaWVkIHVzaW5nIGEgY2hhaW4gb2YgYW5kIG9wZXJhdG9ycykgaGF2ZSBhbiBhdmFpbGFibGUgdmFsdWUgYW5kIHByb2plY3RzIHRoZSB2YWx1ZXMuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBTZWxlY3RvciB0aGF0IHdpbGwgYmUgaW52b2tlZCB3aXRoIGF2YWlsYWJsZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlcywgaW4gdGhlIHNhbWUgb3JkZXIgb2YgdGhlIHNlcXVlbmNlcyBpbiB0aGUgcGF0dGVybi5cbiAgICogIEByZXR1cm4ge1BsYW59IFBsYW4gdGhhdCBwcm9kdWNlcyB0aGUgcHJvamVjdGVkIHZhbHVlcywgdG8gYmUgZmVkICh3aXRoIG90aGVyIHBsYW5zKSB0byB0aGUgd2hlbiBvcGVyYXRvci5cbiAgICovXG4gIFBhdHRlcm4ucHJvdG90eXBlLnRoZW5EbyA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgUGxhbih0aGlzLCBzZWxlY3Rvcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gUGxhbihleHByZXNzaW9uLCBzZWxlY3Rvcikge1xuICAgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cHJlc3Npb247XG4gICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlT25FcnJvcihvKSB7IHJldHVybiBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH07IH1cbiAgZnVuY3Rpb24gaGFuZGxlT25OZXh0KHNlbGYsIG9ic2VydmVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG9uTmV4dCAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goc2VsZi5zZWxlY3RvcikuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZlci5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgfTtcbiAgfVxuXG4gIFBsYW4ucHJvdG90eXBlLmFjdGl2YXRlID0gZnVuY3Rpb24gKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgb2JzZXJ2ZXIsIGRlYWN0aXZhdGUpIHtcbiAgICB2YXIgam9pbk9ic2VydmVycyA9IFtdLCBlcnJIYW5kbGVyID0gaGFuZGxlT25FcnJvcihvYnNlcnZlcik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuZXhwcmVzc2lvbi5wYXR0ZXJucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgam9pbk9ic2VydmVycy5wdXNoKHBsYW5DcmVhdGVPYnNlcnZlcihleHRlcm5hbFN1YnNjcmlwdGlvbnMsIHRoaXMuZXhwcmVzc2lvbi5wYXR0ZXJuc1tpXSwgZXJySGFuZGxlcikpO1xuICAgIH1cbiAgICB2YXIgYWN0aXZlUGxhbiA9IG5ldyBBY3RpdmVQbGFuKGpvaW5PYnNlcnZlcnMsIGhhbmRsZU9uTmV4dCh0aGlzLCBvYnNlcnZlciksIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIGogPSAwLCBqbGVuID0gam9pbk9ic2VydmVycy5sZW5ndGg7IGogPCBqbGVuOyBqKyspIHtcbiAgICAgICAgam9pbk9ic2VydmVyc1tqXS5yZW1vdmVBY3RpdmVQbGFuKGFjdGl2ZVBsYW4pO1xuICAgICAgfVxuICAgICAgZGVhY3RpdmF0ZShhY3RpdmVQbGFuKTtcbiAgICB9KTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBqb2luT2JzZXJ2ZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBqb2luT2JzZXJ2ZXJzW2ldLmFkZEFjdGl2ZVBsYW4oYWN0aXZlUGxhbik7XG4gICAgfVxuICAgIHJldHVybiBhY3RpdmVQbGFuO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBsYW5DcmVhdGVPYnNlcnZlcihleHRlcm5hbFN1YnNjcmlwdGlvbnMsIG9ic2VydmFibGUsIG9uRXJyb3IpIHtcbiAgICB2YXIgZW50cnkgPSBleHRlcm5hbFN1YnNjcmlwdGlvbnMuZ2V0KG9ic2VydmFibGUpO1xuICAgIGlmICghZW50cnkpIHtcbiAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBKb2luT2JzZXJ2ZXIob2JzZXJ2YWJsZSwgb25FcnJvcik7XG4gICAgICBleHRlcm5hbFN1YnNjcmlwdGlvbnMuc2V0KG9ic2VydmFibGUsIG9ic2VydmVyKTtcbiAgICAgIHJldHVybiBvYnNlcnZlcjtcbiAgICB9XG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgZnVuY3Rpb24gQWN0aXZlUGxhbihqb2luT2JzZXJ2ZXJBcnJheSwgb25OZXh0LCBvbkNvbXBsZXRlZCkge1xuICAgIHRoaXMuam9pbk9ic2VydmVyQXJyYXkgPSBqb2luT2JzZXJ2ZXJBcnJheTtcbiAgICB0aGlzLm9uTmV4dCA9IG9uTmV4dDtcbiAgICB0aGlzLm9uQ29tcGxldGVkID0gb25Db21wbGV0ZWQ7XG4gICAgdGhpcy5qb2luT2JzZXJ2ZXJzID0gbmV3IE1hcCgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmpvaW5PYnNlcnZlckFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgam9pbk9ic2VydmVyID0gdGhpcy5qb2luT2JzZXJ2ZXJBcnJheVtpXTtcbiAgICAgIHRoaXMuam9pbk9ic2VydmVycy5zZXQoam9pbk9ic2VydmVyLCBqb2luT2JzZXJ2ZXIpO1xuICAgIH1cbiAgfVxuXG4gIEFjdGl2ZVBsYW4ucHJvdG90eXBlLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5qb2luT2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgdi5xdWV1ZS5zaGlmdCgpOyB9KTtcbiAgfTtcblxuICBBY3RpdmVQbGFuLnByb3RvdHlwZS5tYXRjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaSwgbGVuLCBoYXNWYWx1ZXMgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBoYXNWYWx1ZXMgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChoYXNWYWx1ZXMpIHtcbiAgICAgIHZhciBmaXJzdFZhbHVlcyA9IFtdLFxuICAgICAgICAgIGlzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmpvaW5PYnNlcnZlckFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZpcnN0VmFsdWVzLnB1c2godGhpcy5qb2luT2JzZXJ2ZXJBcnJheVtpXS5xdWV1ZVswXSk7XG4gICAgICAgIHRoaXMuam9pbk9ic2VydmVyQXJyYXlbaV0ucXVldWVbMF0ua2luZCA9PT0gJ0MnICYmIChpc0NvbXBsZXRlZCA9IHRydWUpO1xuICAgICAgfVxuICAgICAgaWYgKGlzQ29tcGxldGVkKSB7XG4gICAgICAgIHRoaXMub25Db21wbGV0ZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGVxdWV1ZSgpO1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGZpcnN0VmFsdWVzLmxlbmd0aDsgaSA8IGZpcnN0VmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVzLnB1c2goZmlyc3RWYWx1ZXNbaV0udmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25OZXh0LmFwcGx5KHRoaXMsIHZhbHVlcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhciBKb2luT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEpvaW5PYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEpvaW5PYnNlcnZlcihzb3VyY2UsIG9uRXJyb3IpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLm9uRXJyb3IgPSBvbkVycm9yO1xuICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgdGhpcy5hY3RpdmVQbGFucyA9IFtdO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBKb2luT2JzZXJ2ZXJQcm90b3R5cGUgPSBKb2luT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICBpZiAobm90aWZpY2F0aW9uLmtpbmQgPT09ICdFJykge1xuICAgICAgICAgIHJldHVybiB0aGlzLm9uRXJyb3Iobm90aWZpY2F0aW9uLmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlLnB1c2gobm90aWZpY2F0aW9uKTtcbiAgICAgICAgdmFyIGFjdGl2ZVBsYW5zID0gdGhpcy5hY3RpdmVQbGFucy5zbGljZSgwKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFjdGl2ZVBsYW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgYWN0aXZlUGxhbnNbaV0ubWF0Y2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuZXJyb3IgPSBub29wO1xuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5jb21wbGV0ZWQgPSBub29wO1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLmFkZEFjdGl2ZVBsYW4gPSBmdW5jdGlvbiAoYWN0aXZlUGxhbikge1xuICAgICAgdGhpcy5hY3RpdmVQbGFucy5wdXNoKGFjdGl2ZVBsYW4pO1xuICAgIH07XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLnNvdXJjZS5tYXRlcmlhbGl6ZSgpLnN1YnNjcmliZSh0aGlzKSk7XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5yZW1vdmVBY3RpdmVQbGFuID0gZnVuY3Rpb24gKGFjdGl2ZVBsYW4pIHtcbiAgICAgIHRoaXMuYWN0aXZlUGxhbnMuc3BsaWNlKHRoaXMuYWN0aXZlUGxhbnMuaW5kZXhPZihhY3RpdmVQbGFuKSwgMSk7XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEpvaW5PYnNlcnZlcjtcbiAgfSAoQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhIHBhdHRlcm4gdGhhdCBtYXRjaGVzIHdoZW4gYm90aCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBoYXZlIGFuIGF2YWlsYWJsZSB2YWx1ZS5cbiAgICpcbiAgICogIEBwYXJhbSByaWdodCBPYnNlcnZhYmxlIHNlcXVlbmNlIHRvIG1hdGNoIHdpdGggdGhlIGN1cnJlbnQgc2VxdWVuY2UuXG4gICAqICBAcmV0dXJuIHtQYXR0ZXJufSBQYXR0ZXJuIG9iamVjdCB0aGF0IG1hdGNoZXMgd2hlbiBib3RoIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmFuZCA9IGZ1bmN0aW9uIChyaWdodCkge1xuICAgIHJldHVybiBuZXcgUGF0dGVybihbdGhpcywgcmlnaHRdKTtcbiAgfTtcblxuICAvKipcbiAgICogIE1hdGNoZXMgd2hlbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBoYXMgYW4gYXZhaWxhYmxlIHZhbHVlIGFuZCBwcm9qZWN0cyB0aGUgdmFsdWUuXG4gICAqXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBzZWxlY3RvciBTZWxlY3RvciB0aGF0IHdpbGwgYmUgaW52b2tlZCBmb3IgdmFsdWVzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqICBAcmV0dXJucyB7UGxhbn0gUGxhbiB0aGF0IHByb2R1Y2VzIHRoZSBwcm9qZWN0ZWQgdmFsdWVzLCB0byBiZSBmZWQgKHdpdGggb3RoZXIgcGxhbnMpIHRvIHRoZSB3aGVuIG9wZXJhdG9yLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRoZW5EbyA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgUGF0dGVybihbdGhpc10pLnRoZW5EbyhzZWxlY3Rvcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBKb2lucyB0b2dldGhlciB0aGUgcmVzdWx0cyBmcm9tIHNldmVyYWwgcGF0dGVybnMuXG4gICAqXG4gICAqICBAcGFyYW0gcGxhbnMgQSBzZXJpZXMgb2YgcGxhbnMgKHNwZWNpZmllZCBhcyBhbiBBcnJheSBvZiBhcyBhIHNlcmllcyBvZiBhcmd1bWVudHMpIGNyZWF0ZWQgYnkgdXNlIG9mIHRoZSBUaGVuIG9wZXJhdG9yIG9uIHBhdHRlcm5zLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgcmVzdWx0cyBmb3JtIG1hdGNoaW5nIHNldmVyYWwgcGF0dGVybnMuXG4gICAqL1xuICBPYnNlcnZhYmxlLndoZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBsYW5zO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHBsYW5zID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGFucyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IHBsYW5zW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFjdGl2ZVBsYW5zID0gW10sXG4gICAgICAgICAgZXh0ZXJuYWxTdWJzY3JpcHRpb25zID0gbmV3IE1hcCgpO1xuICAgICAgdmFyIG91dE9ic2VydmVyID0gb2JzZXJ2ZXJDcmVhdGUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7IG8ub25OZXh0KHgpOyB9LFxuICAgICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgZXh0ZXJuYWxTdWJzY3JpcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgdi5vbkVycm9yKGVycik7IH0pO1xuICAgICAgICAgIG8ub25FcnJvcihlcnIpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoeCkgeyBvLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICk7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGxhbnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBhY3RpdmVQbGFucy5wdXNoKHBsYW5zW2ldLmFjdGl2YXRlKGV4dGVybmFsU3Vic2NyaXB0aW9ucywgb3V0T2JzZXJ2ZXIsIGZ1bmN0aW9uIChhY3RpdmVQbGFuKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gYWN0aXZlUGxhbnMuaW5kZXhPZihhY3RpdmVQbGFuKTtcbiAgICAgICAgICAgIGFjdGl2ZVBsYW5zLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgYWN0aXZlUGxhbnMubGVuZ3RoID09PSAwICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGVUaHJvdyhlKS5zdWJzY3JpYmUobyk7XG4gICAgICB9XG4gICAgICB2YXIgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZXh0ZXJuYWxTdWJzY3JpcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKGpvaW5PYnNlcnZlcikge1xuICAgICAgICBqb2luT2JzZXJ2ZXIuc3Vic2NyaWJlKCk7XG4gICAgICAgIGdyb3VwLmFkZChqb2luT2JzZXJ2ZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgVGltZXJPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVyT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaW1lck9ic2VydmFibGUoZHQsIHMpIHtcbiAgICAgIHRoaXMuX2R0ID0gZHQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVyT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZShvLCB0aGlzLl9kdCwgc2NoZWR1bGVNZXRob2QpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzLCBvKSB7XG4gICAgICBvLm9uTmV4dCgwKTtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gVGltZXJPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgZnVuY3Rpb24gX29ic2VydmFibGVUaW1lcihkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IFRpbWVyT2JzZXJ2YWJsZShkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBkID0gZHVlVGltZSwgcCA9IG5vcm1hbGl6ZVRpbWUocGVyaW9kKTtcbiAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoMCwgZCwgZnVuY3Rpb24gKGNvdW50LCBzZWxmKSB7XG4gICAgICAgIGlmIChwID4gMCkge1xuICAgICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgICAgZCA9IG5ldyBEYXRlKGQuZ2V0VGltZSgpICsgcCk7XG4gICAgICAgICAgZC5nZXRUaW1lKCkgPD0gbm93ICYmIChkID0gbmV3IERhdGUobm93ICsgcCkpO1xuICAgICAgICB9XG4gICAgICAgIG9ic2VydmVyLm9uTmV4dChjb3VudCk7XG4gICAgICAgIHNlbGYoY291bnQgKyAxLCBuZXcgRGF0ZShkKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIGR1ZVRpbWUgPT09IHBlcmlvZCA/XG4gICAgICBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZVBlcmlvZGljKDAsIHBlcmlvZCwgZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNvdW50KTtcbiAgICAgICAgICByZXR1cm4gY291bnQgKyAxO1xuICAgICAgICB9KTtcbiAgICAgIH0pIDpcbiAgICAgIG9ic2VydmFibGVEZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKG5ldyBEYXRlKHNjaGVkdWxlci5ub3coKSArIGR1ZVRpbWUpLCBwZXJpb2QsIHNjaGVkdWxlcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBlYWNoIHBlcmlvZC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDApO1xuICAgKiAgMiAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwMCwgUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcHJvZHVjaW5nIHRoZSB2YWx1ZXMgaW4gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBSeC5TY2hlZHVsZXIudGltZW91dCBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZWFjaCBwZXJpb2QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZWludGVydmFsID0gT2JzZXJ2YWJsZS5pbnRlcnZhbCA9IGZ1bmN0aW9uIChwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChwZXJpb2QsIHBlcmlvZCwgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSA/IHNjaGVkdWxlciA6IGRlZmF1bHRTY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBkdWVUaW1lIGhhcyBlbGFwc2VkIGFuZCB0aGVuIGFmdGVyIGVhY2ggcGVyaW9kLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBBYnNvbHV0ZSAoc3BlY2lmaWVkIGFzIGEgRGF0ZSBvYmplY3QpIG9yIHJlbGF0aXZlIHRpbWUgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykgYXQgd2hpY2ggdG8gcHJvZHVjZSB0aGUgZmlyc3QgdmFsdWUuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFtwZXJpb2RPclNjaGVkdWxlcl0gIFBlcmlvZCB0byBwcm9kdWNlIHN1YnNlcXVlbnQgdmFsdWVzIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLCBvciB0aGUgc2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSByZXN1bHRpbmcgdGltZXIgaXMgbm90IHJlY3VycmluZy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcHJvZHVjZXMgYSB2YWx1ZSBhZnRlciBkdWUgdGltZSBoYXMgZWxhcHNlZCBhbmQgdGhlbiBlYWNoIHBlcmlvZC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlVGltZXIgPSBPYnNlcnZhYmxlLnRpbWVyID0gZnVuY3Rpb24gKGR1ZVRpbWUsIHBlcmlvZE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgcGVyaW9kO1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIGlmIChwZXJpb2RPclNjaGVkdWxlciAhPSBudWxsICYmIHR5cGVvZiBwZXJpb2RPclNjaGVkdWxlciA9PT0gJ251bWJlcicpIHtcbiAgICAgIHBlcmlvZCA9IHBlcmlvZE9yU2NoZWR1bGVyO1xuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIocGVyaW9kT3JTY2hlZHVsZXIpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBwZXJpb2RPclNjaGVkdWxlcjtcbiAgICB9XG4gICAgaWYgKChkdWVUaW1lIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgZHVlVGltZSA9PT0gJ251bWJlcicpICYmIHBlcmlvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gX29ic2VydmFibGVUaW1lcihkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICAgIH1cbiAgICBpZiAoZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgJiYgcGVyaW9kICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlVGltZXJEYXRlQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpO1xuICAgIH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZVRpbWVyVGltZVNwYW5BbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVEZWxheVJlbGF0aXZlKHNvdXJjZSwgZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWN0aXZlID0gZmFsc2UsXG4gICAgICAgIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICBleGNlcHRpb24gPSBudWxsLFxuICAgICAgICBxID0gW10sXG4gICAgICAgIHJ1bm5pbmcgPSBmYWxzZSxcbiAgICAgICAgc3Vic2NyaXB0aW9uO1xuICAgICAgc3Vic2NyaXB0aW9uID0gc291cmNlLm1hdGVyaWFsaXplKCkudGltZXN0YW1wKHNjaGVkdWxlcikuc3Vic2NyaWJlKGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcbiAgICAgICAgdmFyIGQsIHNob3VsZFJ1bjtcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi52YWx1ZS5raW5kID09PSAnRScpIHtcbiAgICAgICAgICBxID0gW107XG4gICAgICAgICAgcS5wdXNoKG5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgZXhjZXB0aW9uID0gbm90aWZpY2F0aW9uLnZhbHVlLmVycm9yO1xuICAgICAgICAgIHNob3VsZFJ1biA9ICFydW5uaW5nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHEucHVzaCh7IHZhbHVlOiBub3RpZmljYXRpb24udmFsdWUsIHRpbWVzdGFtcDogbm90aWZpY2F0aW9uLnRpbWVzdGFtcCArIGR1ZVRpbWUgfSk7XG4gICAgICAgICAgc2hvdWxkUnVuID0gIWFjdGl2ZTtcbiAgICAgICAgICBhY3RpdmUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaG91bGRSdW4pIHtcbiAgICAgICAgICBpZiAoZXhjZXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICBvLm9uRXJyb3IoZXhjZXB0aW9uKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgICAgY2FuY2VsYWJsZS5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICAgICAgZC5zZXREaXNwb3NhYmxlKHNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZShudWxsLCBkdWVUaW1lLCBmdW5jdGlvbiAoXywgc2VsZikge1xuICAgICAgICAgICAgICB2YXIgZSwgcmVjdXJzZUR1ZVRpbWUsIHJlc3VsdCwgc2hvdWxkUmVjdXJzZTtcbiAgICAgICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCAmJiBxWzBdLnRpbWVzdGFtcCAtIHNjaGVkdWxlci5ub3coKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICByZXN1bHQgPSBxLnNoaWZ0KCkudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdC5hY2NlcHQobyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IHdoaWxlIChyZXN1bHQgIT09IG51bGwpO1xuICAgICAgICAgICAgICBzaG91bGRSZWN1cnNlID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJlY3Vyc2VEdWVUaW1lID0gMDtcbiAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNob3VsZFJlY3Vyc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlY3Vyc2VEdWVUaW1lID0gTWF0aC5tYXgoMCwgcVswXS50aW1lc3RhbXAgLSBzY2hlZHVsZXIubm93KCkpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGUgPSBleGNlcHRpb247XG4gICAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgaWYgKGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkUmVjdXJzZSkge1xuICAgICAgICAgICAgICAgIHNlbGYobnVsbCwgcmVjdXJzZUR1ZVRpbWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlRGVsYXlBYnNvbHV0ZShzb3VyY2UsIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlRGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG9ic2VydmFibGVEZWxheVJlbGF0aXZlKHNvdXJjZSwgZHVlVGltZSAtIHNjaGVkdWxlci5ub3coKSwgc2NoZWR1bGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGF5V2l0aFNlbGVjdG9yKHNvdXJjZSwgc3Vic2NyaXB0aW9uRGVsYXksIGRlbGF5RHVyYXRpb25TZWxlY3Rvcikge1xuICAgIHZhciBzdWJEZWxheSwgc2VsZWN0b3I7XG4gICAgaWYgKGlzRnVuY3Rpb24oc3Vic2NyaXB0aW9uRGVsYXkpKSB7XG4gICAgICBzZWxlY3RvciA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJEZWxheSA9IHN1YnNjcmlwdGlvbkRlbGF5O1xuICAgICAgc2VsZWN0b3IgPSBkZWxheUR1cmF0aW9uU2VsZWN0b3I7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGRlbGF5cyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksIGF0RW5kID0gZmFsc2UsIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cbiAgICAgIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSB0cnlDYXRjaChzZWxlY3RvcikoeCk7XG4gICAgICAgICAgICBpZiAoZGVsYXkgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZGVsYXkuZSk7IH1cbiAgICAgICAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgICBkZWxheXMuYWRkKGQpO1xuICAgICAgICAgICAgZC5zZXREaXNwb3NhYmxlKGRlbGF5LnN1YnNjcmliZShcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgICAgICAgIGRlbGF5cy5yZW1vdmUoZCk7XG4gICAgICAgICAgICAgICAgZG9uZSgpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sXG4gICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICAgICAgICBkZWxheXMucmVtb3ZlKGQpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYXRFbmQgPSB0cnVlO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb25lICgpIHtcbiAgICAgICAgYXRFbmQgJiYgZGVsYXlzLmxlbmd0aCA9PT0gMCAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghc3ViRGVsYXkpIHtcbiAgICAgICAgc3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHN1YkRlbGF5LnN1YnNjcmliZShzdGFydCwgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LCBzdGFydCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBkZWxheXMpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICAvKipcbiAgICogIFRpbWUgc2hpZnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IGR1ZVRpbWUuXG4gICAqICBUaGUgcmVsYXRpdmUgdGltZSBpbnRlcnZhbHMgYmV0d2VlbiB0aGUgdmFsdWVzIGFyZSBwcmVzZXJ2ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIEFic29sdXRlIChzcGVjaWZpZWQgYXMgYSBEYXRlIG9iamVjdCkgb3IgcmVsYXRpdmUgdGltZSAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSBieSB3aGljaCB0byBzaGlmdCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGRlbGF5IHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaW1lLXNoaWZ0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGVsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpcnN0QXJnID0gYXJndW1lbnRzWzBdO1xuICAgIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdudW1iZXInIHx8IGZpcnN0QXJnIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgdmFyIGR1ZVRpbWUgPSBmaXJzdEFyZywgc2NoZWR1bGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgICByZXR1cm4gZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgP1xuICAgICAgICBvYnNlcnZhYmxlRGVsYXlBYnNvbHV0ZSh0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpIDpcbiAgICAgICAgb2JzZXJ2YWJsZURlbGF5UmVsYXRpdmUodGhpcywgZHVlVGltZSwgc2NoZWR1bGVyKTtcbiAgICB9IGVsc2UgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKGZpcnN0QXJnKSB8fCBpc0Z1bmN0aW9uKGZpcnN0QXJnKSkge1xuICAgICAgcmV0dXJuIGRlbGF5V2l0aFNlbGVjdG9yKHRoaXMsIGZpcnN0QXJnLCBhcmd1bWVudHNbMV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzJyk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBEZWJvdW5jZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlYm91bmNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWJvdW5jZU9ic2VydmFibGUoc291cmNlLCBkdCwgcykge1xuICAgICAgaXNTY2hlZHVsZXIocykgfHwgKHMgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZHQgPSBkdDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVib3VuY2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBEZWJvdW5jZU9ic2VydmVyKG8sIHRoaXMuX2R0LCB0aGlzLl9zLCBjYW5jZWxhYmxlKSksXG4gICAgICAgIGNhbmNlbGFibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVib3VuY2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIERlYm91bmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlYm91bmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VPYnNlcnZlcihvYnNlcnZlciwgZHVlVGltZSwgc2NoZWR1bGVyLCBjYW5jZWxhYmxlKSB7XG4gICAgICB0aGlzLl9vID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLl9kID0gZHVlVGltZTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX2MgPSBjYW5jZWxhYmxlO1xuICAgICAgdGhpcy5fdiA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVGdXR1cmUocywgc3RhdGUpIHtcbiAgICAgIHN0YXRlLnNlbGYuX2h2ICYmIHN0YXRlLnNlbGYuX2lkID09PSBzdGF0ZS5jdXJyZW50SWQgJiYgc3RhdGUuc2VsZi5fby5vbk5leHQoc3RhdGUueCk7XG4gICAgICBzdGF0ZS5zZWxmLl9odiA9IGZhbHNlO1xuICAgIH1cblxuICAgIERlYm91bmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgdGhpcy5fdiA9IHg7XG4gICAgICB2YXIgY3VycmVudElkID0gKyt0aGlzLl9pZCwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fYy5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZSh0aGlzLCB0aGlzLl9kLCBmdW5jdGlvbiAoXywgc2VsZikge1xuICAgICAgICBzZWxmLl9odiAmJiBzZWxmLl9pZCA9PT0gY3VycmVudElkICYmIHNlbGYuX28ub25OZXh0KHgpO1xuICAgICAgICBzZWxmLl9odiA9IGZhbHNlO1xuICAgICAgfSkpO1xuICAgIH07XG5cbiAgICBEZWJvdW5jZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9jLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZCsrO1xuICAgIH07XG5cbiAgICBEZWJvdW5jZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9jLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2h2ICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lkKys7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWJvdW5jZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICBmdW5jdGlvbiBkZWJvdW5jZVdpdGhTZWxlY3Rvcihzb3VyY2UsIGR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciB2YWx1ZSwgaGFzVmFsdWUgPSBmYWxzZSwgY2FuY2VsYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksIGlkID0gMDtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciB0aHJvdHRsZSA9IHRyeUNhdGNoKGR1cmF0aW9uU2VsZWN0b3IpKHgpO1xuICAgICAgICAgIGlmICh0aHJvdHRsZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcih0aHJvdHRsZS5lKTsgfVxuXG4gICAgICAgICAgaXNQcm9taXNlKHRocm90dGxlKSAmJiAodGhyb3R0bGUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UodGhyb3R0bGUpKTtcblxuICAgICAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICB2YWx1ZSA9IHg7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICB2YXIgY3VycmVudGlkID0gaWQsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICBjYW5jZWxhYmxlLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICAgICAgZC5zZXREaXNwb3NhYmxlKHRocm90dGxlLnN1YnNjcmliZShcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgJiYgaWQgPT09IGN1cnJlbnRpZCAmJiBvLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaGFzVmFsdWUgJiYgaWQgPT09IGN1cnJlbnRpZCAmJiBvLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGNhbmNlbGFibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgIGlkKys7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYW5jZWxhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICBoYXNWYWx1ZSAmJiBvLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGNhbmNlbGFibGUpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBvYnNlcnZhYmxlUHJvdG8uZGVib3VuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24gKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHJldHVybiBkZWJvdW5jZVdpdGhTZWxlY3Rvcih0aGlzLCBhcmd1bWVudHNbMF0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiBuZXcgRGVib3VuY2VPYnNlcnZhYmxlKHRoaXMsIGFyZ3VtZW50c1swXSwgYXJndW1lbnRzWzFdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIHdpbmRvd3Mgd2hpY2ggYXJlIHByb2R1Y2VkIGJhc2VkIG9uIHRpbWluZyBpbmZvcm1hdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIExlbmd0aCBvZiBlYWNoIHdpbmRvdyAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKS5cbiAgICogQHBhcmFtIHtNaXhlZH0gW3RpbWVTaGlmdE9yU2NoZWR1bGVyXSAgSW50ZXJ2YWwgYmV0d2VlbiBjcmVhdGlvbiBvZiBjb25zZWN1dGl2ZSB3aW5kb3dzIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLCBvciBhbiBvcHRpb25hbCBzY2hlZHVsZXIgcGFyYW1ldGVyLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZSBzaGlmdCBjb3JyZXNwb25kcyB0byB0aGUgdGltZVNwYW4gcGFyYW1ldGVyLCByZXN1bHRpbmcgaW4gbm9uLW92ZXJsYXBwaW5nIGFkamFjZW50IHdpbmRvd3MuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB3aW5kb3dpbmcgdGltZXJzIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygd2luZG93cy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aW5kb3dXaXRoVGltZSA9IG9ic2VydmFibGVQcm90by53aW5kb3dUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuLCB0aW1lU2hpZnRPclNjaGVkdWxlciwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsIHRpbWVTaGlmdDtcbiAgICB0aW1lU2hpZnRPclNjaGVkdWxlciA9PSBudWxsICYmICh0aW1lU2hpZnQgPSB0aW1lU3Bhbik7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgaWYgKHR5cGVvZiB0aW1lU2hpZnRPclNjaGVkdWxlciA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRpbWVTaGlmdCA9IHRpbWVTaGlmdE9yU2NoZWR1bGVyO1xuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIodGltZVNoaWZ0T3JTY2hlZHVsZXIpKSB7XG4gICAgICB0aW1lU2hpZnQgPSB0aW1lU3BhbjtcbiAgICAgIHNjaGVkdWxlciA9IHRpbWVTaGlmdE9yU2NoZWR1bGVyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgZ3JvdXBEaXNwb3NhYmxlLFxuICAgICAgICBuZXh0U2hpZnQgPSB0aW1lU2hpZnQsXG4gICAgICAgIG5leHRTcGFuID0gdGltZVNwYW4sXG4gICAgICAgIHEgPSBbXSxcbiAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlLFxuICAgICAgICB0aW1lckQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICB0b3RhbFRpbWUgPSAwO1xuICAgICAgICBncm91cERpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSh0aW1lckQpLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSk7XG5cbiAgICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lciAoKSB7XG4gICAgICAgIHZhciBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgICAgaXNTcGFuID0gZmFsc2UsXG4gICAgICAgICAgaXNTaGlmdCA9IGZhbHNlO1xuICAgICAgICB0aW1lckQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgICAgaWYgKG5leHRTcGFuID09PSBuZXh0U2hpZnQpIHtcbiAgICAgICAgICBpc1NwYW4gPSB0cnVlO1xuICAgICAgICAgIGlzU2hpZnQgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKG5leHRTcGFuIDwgbmV4dFNoaWZ0KSB7XG4gICAgICAgICAgICBpc1NwYW4gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlzU2hpZnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdUb3RhbFRpbWUgPSBpc1NwYW4gPyBuZXh0U3BhbiA6IG5leHRTaGlmdCxcbiAgICAgICAgICB0cyA9IG5ld1RvdGFsVGltZSAtIHRvdGFsVGltZTtcbiAgICAgICAgdG90YWxUaW1lID0gbmV3VG90YWxUaW1lO1xuICAgICAgICBpZiAoaXNTcGFuKSB7XG4gICAgICAgICAgbmV4dFNwYW4gKz0gdGltZVNoaWZ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1NoaWZ0KSB7XG4gICAgICAgICAgbmV4dFNoaWZ0ICs9IHRpbWVTaGlmdDtcbiAgICAgICAgfVxuICAgICAgICBtLnNldERpc3Bvc2FibGUoc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG51bGwsIHRzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGlzU2hpZnQpIHtcbiAgICAgICAgICAgIHZhciBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIHEucHVzaChzKTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzU3BhbiAmJiBxLnNoaWZ0KCkub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBjcmVhdGVUaW1lcigpO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuICAgICAgcS5wdXNoKG5ldyBTdWJqZWN0KCkpO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihxWzBdLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICBncm91cERpc3Bvc2FibGUuYWRkKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgcVtpXS5vbk5leHQoeCk7IH1cbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uRXJyb3IoZSk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgcVtpXS5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKSk7XG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgd2luZG93IHRoYXQgaXMgY29tcGxldGVkIHdoZW4gZWl0aGVyIGl0J3MgZnVsbCBvciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lIGhhcyBlbGFwc2VkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiBhIHdpbmRvdy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE1heGltdW0gZWxlbWVudCBjb3VudCBvZiBhIHdpbmRvdy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHdpbmRvd2luZyB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvd1dpdGhUaW1lT3JDb3VudCA9IG9ic2VydmFibGVQcm90by53aW5kb3dUaW1lT3JDb3VudCA9IGZ1bmN0aW9uICh0aW1lU3BhbiwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciB0aW1lckQgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICAgIGdyb3VwRGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKHRpbWVyRCksXG4gICAgICAgICAgcmVmQ291bnREaXNwb3NhYmxlID0gbmV3IFJlZkNvdW50RGlzcG9zYWJsZShncm91cERpc3Bvc2FibGUpLFxuICAgICAgICAgIG4gPSAwLFxuICAgICAgICAgIHdpbmRvd0lkID0gMCxcbiAgICAgICAgICBzID0gbmV3IFN1YmplY3QoKTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlVGltZXIoaWQpIHtcbiAgICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgdGltZXJELnNldERpc3Bvc2FibGUobSk7XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgdGltZVNwYW4sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaWQgIT09IHdpbmRvd0lkKSB7IHJldHVybjsgfVxuICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgIHZhciBuZXdJZCA9ICsrd2luZG93SWQ7XG4gICAgICAgICAgcy5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgY3JlYXRlVGltZXIobmV3SWQpO1xuICAgICAgICB9KSk7XG4gICAgICB9XG5cbiAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICBjcmVhdGVUaW1lcigwKTtcblxuICAgICAgZ3JvdXBEaXNwb3NhYmxlLmFkZChzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBuZXdJZCA9IDAsIG5ld1dpbmRvdyA9IGZhbHNlO1xuICAgICAgICAgIHMub25OZXh0KHgpO1xuICAgICAgICAgIGlmICgrK24gPT09IGNvdW50KSB7XG4gICAgICAgICAgICBuZXdXaW5kb3cgPSB0cnVlO1xuICAgICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgICBuZXdJZCA9ICsrd2luZG93SWQ7XG4gICAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYocywgcmVmQ291bnREaXNwb3NhYmxlKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5ld1dpbmRvdyAmJiBjcmVhdGVUaW1lcihuZXdJZCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgcy5vbkVycm9yKGUpO1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKSk7XG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgYnVmZmVycyB3aGljaCBhcmUgcHJvZHVjZWQgYmFzZWQgb24gdGltaW5nIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTGVuZ3RoIG9mIGVhY2ggYnVmZmVyIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpLlxuICAgKiBAcGFyYW0ge01peGVkfSBbdGltZVNoaWZ0T3JTY2hlZHVsZXJdICBJbnRlcnZhbCBiZXR3ZWVuIGNyZWF0aW9uIG9mIGNvbnNlY3V0aXZlIGJ1ZmZlcnMgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcyksIG9yIGFuIG9wdGlvbmFsIHNjaGVkdWxlciBwYXJhbWV0ZXIuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lIHNoaWZ0IGNvcnJlc3BvbmRzIHRvIHRoZSB0aW1lU3BhbiBwYXJhbWV0ZXIsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgYWRqYWNlbnQgYnVmZmVycy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIGJ1ZmZlciB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBidWZmZXJzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlcldpdGhUaW1lID0gb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlclRpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4sIHRpbWVTaGlmdE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gdGhpcy53aW5kb3dXaXRoVGltZSh0aW1lU3BhbiwgdGltZVNoaWZ0T3JTY2hlZHVsZXIsIHNjaGVkdWxlcikuZmxhdE1hcCh0b0FycmF5KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgYnVmZmVyIHRoYXQgaXMgY29tcGxldGVkIHdoZW4gZWl0aGVyIGl0J3MgZnVsbCBvciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lIGhhcyBlbGFwc2VkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiBhIGJ1ZmZlci5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE1heGltdW0gZWxlbWVudCBjb3VudCBvZiBhIGJ1ZmZlci5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIGJ1ZmZlcmluIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aFRpbWVPckNvdW50ID0gb2JzZXJ2YWJsZVByb3RvLmJ1ZmZlclRpbWVPckNvdW50ID0gZnVuY3Rpb24gKHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93V2l0aFRpbWVPckNvdW50KHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKS5mbGF0TWFwKHRvQXJyYXkpO1xuICB9O1xuXG4gIHZhciBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVJbnRlcnZhbE9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZUludGVydmFsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUaW1lSW50ZXJ2YWxPYnNlcnZlcihvLCB0aGlzLl9zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRpbWVJbnRlcnZhbE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lSW50ZXJ2YWxPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFRpbWVJbnRlcnZhbE9ic2VydmVyKG8sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9sID0gcy5ub3coKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVJbnRlcnZhbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpLCBzcGFuID0gbm93IC0gdGhpcy5fbDtcbiAgICAgIHRoaXMuX2wgPSBub3c7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh7IHZhbHVlOiB4LCBpbnRlcnZhbDogc3BhbiB9KTtcbiAgICB9O1xuICAgIFRpbWVJbnRlcnZhbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUaW1lSW50ZXJ2YWxPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gVGltZUludGVydmFsT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmVjb3JkcyB0aGUgdGltZSBpbnRlcnZhbCBiZXR3ZWVuIGNvbnNlY3V0aXZlIHZhbHVlcyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS50aW1lSW50ZXJ2YWwoKTtcbiAgICogIDIgLSByZXMgPSBzb3VyY2UudGltZUludGVydmFsKFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICpcbiAgICogQHBhcmFtIFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdXNlZCB0byBjb21wdXRlIHRpbWUgaW50ZXJ2YWxzLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aW1lIGludGVydmFsIGluZm9ybWF0aW9uIG9uIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aW1lSW50ZXJ2YWwgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFRpbWVzdGFtcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVzdGFtcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGltZXN0YW1wT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRpbWVzdGFtcE9ic2VydmVyKG8sIHRoaXMuX3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbWVzdGFtcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGltZXN0YW1wT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVzdGFtcE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcE9ic2VydmVyKG8sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh7IHZhbHVlOiB4LCB0aW1lc3RhbXA6IHRoaXMuX3Mubm93KCkgfSk7XG4gICAgfTtcblxuICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lc3RhbXBPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZWNvcmRzIHRoZSB0aW1lc3RhbXAgZm9yIGVhY2ggdmFsdWUgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UudGltZXN0YW1wKCk7IC8vIHByb2R1Y2VzIHsgdmFsdWU6IHgsIHRpbWVzdGFtcDogdHMgfVxuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS50aW1lc3RhbXAoUnguU2NoZWR1bGVyLmRlZmF1bHQpO1xuICAgKlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB1c2VkIHRvIGNvbXB1dGUgdGltZXN0YW1wcy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGltZXN0YW1wIGluZm9ybWF0aW9uIG9uIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aW1lc3RhbXAgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBPYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNhbXBsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVPYnNlcnZhYmxlKHNvdXJjZSwgc2FtcGxlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zYW1wbGVyID0gc2FtcGxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNhbXBsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBhdEVuZDogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBoYXNWYWx1ZTogZmFsc2UsXG4gICAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbjogbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKClcbiAgICAgIH07XG5cbiAgICAgIHN0YXRlLnNvdXJjZVN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2FtcGxlU291cmNlT2JzZXJ2ZXIoc3RhdGUpKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHN0YXRlLnNvdXJjZVN1YnNjcmlwdGlvbixcbiAgICAgICAgdGhpcy5fc2FtcGxlci5zdWJzY3JpYmUobmV3IFNhbXBsZXJPYnNlcnZlcihzdGF0ZSkpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2FtcGxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTYW1wbGVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNhbXBsZXJPYnNlcnZlcihzKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fcy5oYXNWYWx1ZSkge1xuICAgICAgICB0aGlzLl9zLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Muby5vbk5leHQodGhpcy5fcy52YWx1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zLmF0RW5kICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX2hhbmRsZU1lc3NhZ2UoKTsgfTtcbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vbkVycm9yKGUpOyB9O1xuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9oYW5kbGVNZXNzYWdlKCk7IH07XG5cbiAgICByZXR1cm4gU2FtcGxlck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgU2FtcGxlU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2FtcGxlU291cmNlT2JzZXJ2ZXIocykge1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTYW1wbGVTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3MudmFsdWUgPSB4O1xuICAgIH07XG4gICAgU2FtcGxlU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgU2FtcGxlU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuYXRFbmQgPSB0cnVlO1xuICAgICAgdGhpcy5fcy5zb3VyY2VTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2FtcGxlU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgU2FtcGxlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhdCBlYWNoIGludGVydmFsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoc2FtcGxlT2JzZXJ2YWJsZSk7IC8vIFNhbXBsZXIgdGljayBzZXF1ZW5jZVxuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCk7IC8vIDUgc2Vjb25kc1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCwgUnguU2NoZWR1bGVyLnRpbWVvdXQpOyAvLyA1IHNlY29uZHNcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW50ZXJ2YWxPclNhbXBsZXIgSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc2FtcGxlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIG9yIFNhbXBsZXIgT2JzZXJ2YWJsZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSBzYW1wbGluZyB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTYW1wbGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2FtcGxlID0gZnVuY3Rpb24gKGludGVydmFsT3JTYW1wbGVyLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gdHlwZW9mIGludGVydmFsT3JTYW1wbGVyID09PSAnbnVtYmVyJyA/XG4gICAgICBuZXcgU2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBvYnNlcnZhYmxlaW50ZXJ2YWwoaW50ZXJ2YWxPclNhbXBsZXIsIHNjaGVkdWxlcikpIDpcbiAgICAgIG5ldyBTYW1wbGVPYnNlcnZhYmxlKHRoaXMsIGludGVydmFsT3JTYW1wbGVyKTtcbiAgfTtcblxuICB2YXIgVGltZW91dEVycm9yID0gUnguVGltZW91dEVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RpbWVvdXQgaGFzIG9jY3VycmVkJztcbiAgICB0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBUaW1lb3V0RXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIHRpbWVvdXRXaXRoU2VsZWN0b3Ioc291cmNlLCBmaXJzdFRpbWVvdXQsIHRpbWVvdXREdXJhdGlvblNlbGVjdG9yLCBvdGhlcikge1xuICAgIGlmIChpc0Z1bmN0aW9uKGZpcnN0VGltZW91dCkpIHtcbiAgICAgIG90aGVyID0gdGltZW91dER1cmF0aW9uU2VsZWN0b3I7XG4gICAgICB0aW1lb3V0RHVyYXRpb25TZWxlY3RvciA9IGZpcnN0VGltZW91dDtcbiAgICAgIGZpcnN0VGltZW91dCA9IG9ic2VydmFibGVOZXZlcigpO1xuICAgIH1cbiAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvdGhlcikgfHwgKG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSkpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgb3JpZ2luYWwgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3JpZ2luYWwpO1xuXG4gICAgICB2YXIgaWQgPSAwLCBzd2l0Y2hlZCA9IGZhbHNlO1xuXG4gICAgICBmdW5jdGlvbiBzZXRUaW1lcih0aW1lb3V0KSB7XG4gICAgICAgIHZhciBteUlkID0gaWQsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgICBmdW5jdGlvbiB0aW1lcldpbnMoKSB7XG4gICAgICAgICAgc3dpdGNoZWQgPSAobXlJZCA9PT0gaWQpO1xuICAgICAgICAgIHJldHVybiBzd2l0Y2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWVyLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aW1lb3V0LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgICBkLmRpc3Bvc2UoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aW1lcldpbnMoKSAmJiBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lcldpbnMoKSAmJiBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobykpO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuXG4gICAgICBzZXRUaW1lcihmaXJzdFRpbWVvdXQpO1xuXG4gICAgICBmdW5jdGlvbiBvV2lucygpIHtcbiAgICAgICAgdmFyIHJlcyA9ICFzd2l0Y2hlZDtcbiAgICAgICAgaWYgKHJlcykgeyBpZCsrOyB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG5cbiAgICAgIG9yaWdpbmFsLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAob1dpbnMoKSkge1xuICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIHZhciB0aW1lb3V0ID0gdHJ5Q2F0Y2godGltZW91dER1cmF0aW9uU2VsZWN0b3IpKHgpO1xuICAgICAgICAgIGlmICh0aW1lb3V0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHRpbWVvdXQuZSk7IH1cbiAgICAgICAgICBzZXRUaW1lcihpc1Byb21pc2UodGltZW91dCkgPyBvYnNlcnZhYmxlRnJvbVByb21pc2UodGltZW91dCkgOiB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgb1dpbnMoKSAmJiBvLm9uRXJyb3IoZSk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9XaW5zKCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgdGltZXIpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lb3V0KHNvdXJjZSwgZHVlVGltZSwgb3RoZXIsIHNjaGVkdWxlcikge1xuICAgIGlmIChpc1NjaGVkdWxlcihvdGhlcikpIHtcbiAgICAgIHNjaGVkdWxlciA9IG90aGVyO1xuICAgICAgb3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICB9XG4gICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXJyb3IpIHsgb3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cob3RoZXIpOyB9XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob3RoZXIpIHx8IChvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBpZCA9IDAsXG4gICAgICAgIG9yaWdpbmFsID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHN3aXRjaGVkID0gZmFsc2UsXG4gICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblxuICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3JpZ2luYWwpO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lcigpIHtcbiAgICAgICAgdmFyIG15SWQgPSBpZDtcbiAgICAgICAgdGltZXIuc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgZHVlVGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN3aXRjaGVkID0gaWQgPT09IG15SWQ7XG4gICAgICAgICAgaWYgKHN3aXRjaGVkKSB7XG4gICAgICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlVGltZXIoKTtcblxuICAgICAgb3JpZ2luYWwuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmICghc3dpdGNoZWQpIHtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghc3dpdGNoZWQpIHtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIHRpbWVyKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgb2JzZXJ2YWJsZVByb3RvLnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpcnN0QXJnID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChmaXJzdEFyZyBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGZpcnN0QXJnID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRpbWVvdXQodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICB9IGVsc2UgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKGZpcnN0QXJnKSB8fCBpc0Z1bmN0aW9uKGZpcnN0QXJnKSkge1xuICAgICAgcmV0dXJuIHRpbWVvdXRXaXRoU2VsZWN0b3IodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlKHN0YXRlLCBjbmRGbiwgaXRyRm4sIHJlc0ZuLCB0aW1lRm4sIHMpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9jbmRGbiA9IGNuZEZuO1xuICAgICAgdGhpcy5faXRyRm4gPSBpdHJGbjtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl90aW1lRm4gPSB0aW1lRm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBzdGF0ZS5oYXNSZXN1bHQgJiYgc3RhdGUuby5vbk5leHQoc3RhdGUucmVzdWx0KTtcblxuICAgICAgaWYgKHN0YXRlLmZpcnN0KSB7XG4gICAgICAgIHN0YXRlLmZpcnN0ID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5uZXdTdGF0ZSA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX2l0ckZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5uZXdTdGF0ZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5uZXdTdGF0ZS5lKTsgfVxuICAgICAgfVxuICAgICAgc3RhdGUuaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUuaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0KSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5yZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUucmVzdWx0LmUpOyB9XG4gICAgICAgIHZhciB0aW1lID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fdGltZUZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmICh0aW1lID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHRpbWUuZSk7IH1cbiAgICAgICAgcmVjdXJzZShzdGF0ZSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5fc3RhdGUsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBoYXNSZXN1bHQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoc3RhdGUsIG5ldyBEYXRlKHRoaXMuX3Mubm93KCkpLCBzY2hlZHVsZVJlY3Vyc2l2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgR2VuZXJhdGVBYnNvbHV0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBpdGVyYXRpbmcgYSBzdGF0ZSBmcm9tIGFuIGluaXRpYWwgc3RhdGUgdW50aWwgdGhlIGNvbmRpdGlvbiBmYWlscy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHJlcyA9IHNvdXJjZS5nZW5lcmF0ZVdpdGhBYnNvbHV0ZVRpbWUoMCxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmV0dXJuIHRydWU7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiBuZXcgRGF0ZSgpOyB9XG4gICAqICB9KTtcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBDb25kaXRpb24gdG8gdGVybWluYXRlIGdlbmVyYXRpb24gKHVwb24gcmV0dXJuaW5nIGZhbHNlKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lU2VsZWN0b3IgVGltZSBzZWxlY3RvciBmdW5jdGlvbiB0byBjb250cm9sIHRoZSBzcGVlZCBvZiB2YWx1ZXMgYmVpbmcgcHJvZHVjZWQgZWFjaCBpdGVyYXRpb24sIHJldHVybmluZyBEYXRlIHZhbHVlcy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgb24gd2hpY2ggdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcC4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5nZW5lcmF0ZVdpdGhBYnNvbHV0ZVRpbWUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZShzdGF0ZSwgY25kRm4sIGl0ckZuLCByZXNGbiwgdGltZUZuLCBzKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fY25kRm4gPSBjbmRGbjtcbiAgICAgIHRoaXMuX2l0ckZuID0gaXRyRm47XG4gICAgICB0aGlzLl9yZXNGbiA9IHJlc0ZuO1xuICAgICAgdGhpcy5fdGltZUZuID0gdGltZUZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgc3RhdGUuaGFzUmVzdWx0ICYmIHN0YXRlLm8ub25OZXh0KHN0YXRlLnJlc3VsdCk7XG5cbiAgICAgIGlmIChzdGF0ZS5maXJzdCkge1xuICAgICAgICBzdGF0ZS5maXJzdCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUubmV3U3RhdGUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9pdHJGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUubmV3U3RhdGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubmV3U3RhdGUuZSk7IH1cbiAgICAgIH1cblxuICAgICAgc3RhdGUuaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUuaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0KSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5yZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUucmVzdWx0LmUpOyB9XG4gICAgICAgIHZhciB0aW1lID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fdGltZUZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmICh0aW1lID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHRpbWUuZSk7IH1cbiAgICAgICAgcmVjdXJzZShzdGF0ZSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5fc3RhdGUsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBoYXNSZXN1bHQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoc3RhdGUsIDAsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBpdGVyYXRpbmcgYSBzdGF0ZSBmcm9tIGFuIGluaXRpYWwgc3RhdGUgdW50aWwgdGhlIGNvbmRpdGlvbiBmYWlscy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHJlcyA9IHNvdXJjZS5nZW5lcmF0ZVdpdGhSZWxhdGl2ZVRpbWUoMCxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmV0dXJuIHRydWU7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiA1MDA7IH1cbiAgICogICk7XG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxTdGF0ZSBJbml0aWFsIHN0YXRlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIGZvciByZXN1bHRzIHByb2R1Y2VkIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZVNlbGVjdG9yIFRpbWUgc2VsZWN0b3IgZnVuY3Rpb24gdG8gY29udHJvbCB0aGUgc3BlZWQgb2YgdmFsdWVzIGJlaW5nIHByb2R1Y2VkIGVhY2ggaXRlcmF0aW9uLCByZXR1cm5pbmcgaW50ZWdlciB2YWx1ZXMgZGVub3RpbmcgbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBnZW5lcmF0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBPYnNlcnZhYmxlLmdlbmVyYXRlV2l0aFJlbGF0aXZlVGltZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRGVsYXlTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVsYXlTdWJzY3JpcHRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpcHRpb24oc291cmNlLCBkdCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWxheVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKFt0aGlzLnNvdXJjZSwgbywgZF0sIHRoaXMuX2R0LCBzY2hlZHVsZU1ldGhvZCkpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc3RhdGUpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZVswXSwgbyA9IHN0YXRlWzFdLCBkID0gc3RhdGVbMl07XG4gICAgICBkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShvKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIERlbGF5U3Vic2NyaXB0aW9uO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBUaW1lIHNoaWZ0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBkZWxheWluZyB0aGUgc3Vic2NyaXB0aW9uIHdpdGggdGhlIHNwZWNpZmllZCByZWxhdGl2ZSB0aW1lIGR1cmF0aW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5kZWxheVN1YnNjcmlwdGlvbig1MDAwKTsgLy8gNXNcbiAgICogIDIgLSByZXMgPSBzb3VyY2UuZGVsYXlTdWJzY3JpcHRpb24oNTAwMCwgUnguU2NoZWR1bGVyLmRlZmF1bHQpOyAvLyA1IHNlY29uZHNcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgb3IgYWJzb2x1dGUgdGltZSBzaGlmdCBvZiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHN1YnNjcmlwdGlvbiBkZWxheSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaW1lLXNoaWZ0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGVsYXlTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBEZWxheVN1YnNjcmlwdGlvbih0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcC5fcztcbiAgICAgIHRoaXMuX2QgPSBwLl9kO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgdGhpcy5fcS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHggfSk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwICYmIG5vdyAtIHRoaXMuX3FbMF0uaW50ZXJ2YWwgPj0gdGhpcy5fZCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xLnNoaWZ0KCkudmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCAmJiBub3cgLSB0aGlzLl9xWzBdLmludGVydmFsID49IHRoaXMuX2QpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBTa2lwcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyByZWNlaXZlZCBkdXJpbmcgdGhlIGluaXRpYWwgZHVyYXRpb24gd2luZG93LlxuICAgKiAgQXMgbW9yZSBlbGVtZW50cyBhcmUgcmVjZWl2ZWQsIGVsZW1lbnRzIG9sZGVyIHRoYW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBhcmUgdGFrZW4gZnJvbSB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZVxuICAgKiAgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkIHdpdGggZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3Igc2tpcHBpbmcgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXRcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgc2tpcHBlZCBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwTGFzdFdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIGR1cmF0aW9uLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcy5fZCwgdGhpcy5fcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgZCwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgdGhpcy5fcS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHggfSk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwICYmIG5vdyAtIHRoaXMuX3FbMF0uaW50ZXJ2YWwgPj0gdGhpcy5fZCkge1xuICAgICAgICB0aGlzLl9xLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBuZXh0ID0gdGhpcy5fcS5zaGlmdCgpO1xuICAgICAgICBpZiAobm93IC0gbmV4dC5pbnRlcnZhbCA8PSB0aGlzLl9kKSB7IHRoaXMuX28ub25OZXh0KG5leHQudmFsdWUpOyB9XG4gICAgICB9XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBlbGVtZW50cyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlcnMgdG8gcnVuIHRpbWVycyBhbmQgdG8gZHJhaW4gdGhlIGNvbGxlY3RlZCBlbGVtZW50cy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZUxhc3RXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgZWxlbWVudHMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBhcnJheSB3aXRoIHRoZSBlbGVtZW50cyB0YWtlbiBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdEJ1ZmZlcldpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBxID0gW107XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICBxLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogeCB9KTtcbiAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCAmJiBub3cgLSBxWzBdLmludGVydmFsID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgcS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKSwgcmVzID0gW107XG4gICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgbmV4dCA9IHEuc2hpZnQoKTtcbiAgICAgICAgICBub3cgLSBuZXh0LmludGVydmFsIDw9IGR1cmF0aW9uICYmIHJlcy5wdXNoKG5leHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlcyk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFRha2VXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIGQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIG8pIHtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZShvLCB0aGlzLl9kLCBzY2hlZHVsZU1ldGhvZCksXG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShvKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFRha2VzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UudGFrZVdpdGhUaW1lKDUwMDAsICBbb3B0aW9uYWwgc2NoZWR1bGVyXSk7XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIHJlY2VpdmVkIGR1cmluZyB0aGUgaW5pdGlhbCBkdXJhdGlvbiB3aW5kb3cuXG4gICAqICBBcyBtb3JlIGVsZW1lbnRzIGFyZSByZWNlaXZlZCwgZWxlbWVudHMgb2xkZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGFyZSB0YWtlbiBmcm9tIHRoZSBxdWV1ZSBhbmQgcHJvZHVjZWQgb24gdGhlXG4gICAqICByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQgd2l0aCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlV2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgZCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgc2VsZi5fb3BlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUodGhpcywgdGhpcy5fZCwgc2NoZWR1bGVNZXRob2QpLFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBXaXRoVGltZU9ic2VydmVyKG8sIHRoaXMpKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBXaXRoVGltZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFdpdGhUaW1lT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBTa2lwV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFNraXBzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBTcGVjaWZ5aW5nIGEgemVybyB2YWx1ZSBmb3IgZHVyYXRpb24gZG9lc24ndCBndWFyYW50ZWUgbm8gZWxlbWVudHMgd2lsbCBiZSBkcm9wcGVkIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqICBUaGlzIGlzIGEgc2lkZS1lZmZlY3Qgb2YgdGhlIGFzeW5jaHJvbnkgaW50cm9kdWNlZCBieSB0aGUgc2NoZWR1bGVyLCB3aGVyZSB0aGUgYWN0aW9uIHRoYXQgY2F1c2VzIGNhbGxiYWNrcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UgdG8gYmUgZm9yd2FyZGVkXG4gICAqICBtYXkgbm90IGV4ZWN1dGUgaW1tZWRpYXRlbHksIGRlc3BpdGUgdGhlIHplcm8gZHVlIHRpbWUuXG4gICAqXG4gICAqICBFcnJvcnMgcHJvZHVjZWQgYnkgdGhlIHNvdXJjZSBzZXF1ZW5jZSBhcmUgYWx3YXlzIGZvcndhcmRlZCB0byB0aGUgcmVzdWx0IHNlcXVlbmNlLCBldmVuIGlmIHRoZSBlcnJvciBvY2N1cnMgYmVmb3JlIHRoZSBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciBza2lwcGluZyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyBza2lwcGVkIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBXaXRoVGltZU9ic2VydmFibGUodGhpcywgZHVyYXRpb24sIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIHN0YXJ0VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3N0ID0gc3RhcnRUaW1lO1xuICAgICAgdGhpcy5fcyA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5fb3BlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZSh0aGlzLCB0aGlzLl9zdCwgc2NoZWR1bGVNZXRob2QpLFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcykpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuXG4gIC8qKlxuICAgKiAgU2tpcHMgZWxlbWVudHMgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UgdW50aWwgdGhlIHNwZWNpZmllZCBzdGFydCB0aW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiAgRXJyb3JzIHByb2R1Y2VkIGJ5IHRoZSBzb3VyY2Ugc2VxdWVuY2UgYXJlIGFsd2F5cyBmb3J3YXJkZWQgdG8gdGhlIHJlc3VsdCBzZXF1ZW5jZSwgZXZlbiBpZiB0aGUgZXJyb3Igb2NjdXJzIGJlZm9yZSB0aGUgc3RhcnQgdGltZS5cbiAgICpcbiAgICogQGV4YW1wbGVzXG4gICAqICAxIC0gcmVzID0gc291cmNlLnNraXBVbnRpbFdpdGhUaW1lKG5ldyBEYXRlKCksIFtzY2hlZHVsZXJdKTtcbiAgICogIDIgLSByZXMgPSBzb3VyY2Uuc2tpcFVudGlsV2l0aFRpbWUoNTAwMCwgW3NjaGVkdWxlcl0pO1xuICAgKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBzdGFydFRpbWUgVGltZSB0byBzdGFydCB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLiBJZiB0aGlzIHZhbHVlIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBEYXRlKCksIG5vIGVsZW1lbnRzIHdpbGwgYmUgc2tpcHBlZC5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgc2tpcHBlZCB1bnRpbCB0aGUgc3BlY2lmaWVkIHN0YXJ0IHRpbWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFVudGlsV2l0aFRpbWUgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBzdGFydFRpbWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBUYWtlcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiB1bnRpbCB0aGUgc3BlY2lmaWVkIGVuZCB0aW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAcGFyYW0ge051bWJlciB8IERhdGV9IGVuZFRpbWUgVGltZSB0byBzdG9wIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIElmIHRoaXMgdmFsdWUgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIG5ldyBEYXRlKCksIHRoZSByZXN1bHQgc3RyZWFtIHdpbGwgY29tcGxldGUgaW1tZWRpYXRlbHkuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gdW50aWwgdGhlIHNwZWNpZmllZCBlbmQgdGltZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlVW50aWxXaXRoVGltZSA9IGZ1bmN0aW9uIChlbmRUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG8sIGVuZFRpbWUsIGZ1bmN0aW9uIChfLCBvKSB7IG8ub25Db21wbGV0ZWQoKTsgfSksXG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUobykpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgZHVyaW5nIHNlcXVlbnRpYWwgdGltZSB3aW5kb3dzIG9mIGEgc3BlY2lmaWVkIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2luZG93RHVyYXRpb24gdGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIGl0ZW0gYWZ0ZXIgZW1pdHRpbmcgdGhlIGxhc3QgaXRlbVxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gdGhlIFNjaGVkdWxlciB0byB1c2UgaW50ZXJuYWxseSB0byBtYW5hZ2UgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aW1lb3V0IGZvciBlYWNoIGl0ZW0uIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aHJvdHRsZSA9IGZ1bmN0aW9uICh3aW5kb3dEdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgdmFyIGR1cmF0aW9uID0gK3dpbmRvd0R1cmF0aW9uIHx8IDA7XG4gICAgaWYgKGR1cmF0aW9uIDw9IDApIHsgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dpbmRvd0R1cmF0aW9uIGNhbm5vdCBiZSBsZXNzIG9yIGVxdWFsIHplcm8uJyk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBsYXN0T25OZXh0ID0gMDtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgICAgaWYgKGxhc3RPbk5leHQgPT09IDAgfHwgbm93IC0gbGFzdE9uTmV4dCA+PSBkdXJhdGlvbikge1xuICAgICAgICAgICAgbGFzdE9uTmV4dCA9IG5vdztcbiAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHsgby5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICApO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFRyYW5zZHVjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUcmFuc2R1Y2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUcmFuc2R1Y2VPYnNlcnZlcihvLCB4Zm9ybSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl94Zm9ybSA9IHhmb3JtO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvc3RlcCddKS5jYWxsKHRoaXMuX3hmb3JtLCB0aGlzLl9vLCB4KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvcmVzdWx0J10odGhpcy5fbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUcmFuc2R1Y2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtRm9yT2JzZXJ2ZXIobykge1xuICAgIHJldHVybiB7XG4gICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24ob2JzLCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gb2JzLm9uTmV4dChpbnB1dCk7XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbihvYnMpIHtcbiAgICAgICAgcmV0dXJuIG9icy5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgYSB0cmFuc2R1Y2VyIHRvIHRyYW5zZm9ybSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcGFyYW0ge1RyYW5zZHVjZXJ9IHRyYW5zZHVjZXIgQSB0cmFuc2R1Y2VyIHRvIGV4ZWN1dGVcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0cyBmcm9tIHRoZSB0cmFuc2R1Y2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRyYW5zZHVjZSA9IGZ1bmN0aW9uKHRyYW5zZHVjZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24obykge1xuICAgICAgdmFyIHhmb3JtID0gdHJhbnNkdWNlcih0cmFuc2Zvcm1Gb3JPYnNlcnZlcihvKSk7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBTd2l0Y2hGaXJzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN3aXRjaEZpcnN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hGaXJzdE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgc3RhdGUgPSB7XG4gICAgICAgICAgaGFzQ3VycmVudDogZmFsc2UsXG4gICAgICAgICAgaXNTdG9wcGVkOiBmYWxzZSxcbiAgICAgICAgICBvOiBvLFxuICAgICAgICAgIGc6IGdcbiAgICAgICAgfTtcblxuICAgICAgZy5hZGQobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTd2l0Y2hGaXJzdE9ic2VydmVyKHN0YXRlKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hGaXJzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU3dpdGNoRmlyc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTd2l0Y2hGaXJzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN3aXRjaEZpcnN0T2JzZXJ2ZXIoc3RhdGUpIHtcbiAgICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKCF0aGlzLl9zLmhhc0N1cnJlbnQpIHtcbiAgICAgICAgdGhpcy5fcy5oYXNDdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgaXNQcm9taXNlKHgpICYmICh4ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHgpKTtcbiAgICAgICAgdmFyIGlubmVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHRoaXMuX3MuZy5hZGQoaW5uZXIpO1xuICAgICAgICBpbm5lci5zZXREaXNwb3NhYmxlKHguc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMuX3MsIGlubmVyKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTd2l0Y2hGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgU3dpdGNoRmlyc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgIXRoaXMuX3MuaGFzQ3VycmVudCAmJiB0aGlzLl9zLmcubGVuZ3RoID09PSAxICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIGlubmVyKSB7XG4gICAgICB0aGlzLl9zID0gc3RhdGU7XG4gICAgICB0aGlzLl9pID0gaW5uZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcy5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuZy5yZW1vdmUodGhpcy5faSk7XG4gICAgICB0aGlzLl9zLmhhc0N1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3MuaXNTdG9wcGVkICYmIHRoaXMuX3MuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hGaXJzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBleGNsdXNpdmUgd2FpdGluZyBmb3IgdGhlIGZpcnN0IHRvIGZpbmlzaCBiZWZvcmUgc3Vic2NyaWJpbmcgdG8gYW5vdGhlciBvYnNlcnZhYmxlLlxuICAgKiBPYnNlcnZhYmxlcyB0aGF0IGNvbWUgaW4gYmV0d2VlbiBzdWJzY3JpcHRpb25zIHdpbGwgYmUgZHJvcHBlZCBvbiB0aGUgZmxvb3IuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIGV4Y2x1c2l2ZSBvYnNlcnZhYmxlIHdpdGggb25seSB0aGUgcmVzdWx0cyB0aGF0IGhhcHBlbiB3aGVuIHN1YnNjcmliZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc3dpdGNoRmlyc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2l0Y2hGaXJzdE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbm9ic2VydmFibGVQcm90by5mbGF0TWFwRmlyc3QgPSBvYnNlcnZhYmxlUHJvdG8uZXhoYXVzdE1hcCA9IGZ1bmN0aW9uKHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgRmxhdE1hcE9ic2VydmFibGUodGhpcywgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKS5zd2l0Y2hGaXJzdCgpO1xufTtcblxub2JzZXJ2YWJsZVByb3RvLmZsYXRNYXBXaXRoTWF4Q29uY3VycmVudCA9IG9ic2VydmFibGVQcm90by5mbGF0TWFwTWF4Q29uY3VycmVudCA9IGZ1bmN0aW9uKGxpbWl0LCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykubWVyZ2UobGltaXQpO1xufTtcblxuICAvKiogUHJvdmlkZXMgYSBzZXQgb2YgZXh0ZW5zaW9uIG1ldGhvZHMgZm9yIHZpcnR1YWwgdGltZSBzY2hlZHVsaW5nLiAqL1xuICB2YXIgVmlydHVhbFRpbWVTY2hlZHVsZXIgPSBSeC5WaXJ0dWFsVGltZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVmlydHVhbFRpbWVTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHZpcnR1YWwgdGltZSBzY2hlZHVsZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgY2xvY2sgdmFsdWUgYW5kIGFic29sdXRlIHRpbWUgY29tcGFyZXIuXG4gICAgICpcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5pdGlhbENsb2NrIEluaXRpYWwgdmFsdWUgZm9yIHRoZSBjbG9jay5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBDb21wYXJlciB0byBkZXRlcm1pbmUgY2F1c2FsaXR5IG9mIGV2ZW50cyBiYXNlZCBvbiBhYnNvbHV0ZSB0aW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpcnR1YWxUaW1lU2NoZWR1bGVyKGluaXRpYWxDbG9jaywgY29tcGFyZXIpIHtcbiAgICAgIHRoaXMuY2xvY2sgPSBpbml0aWFsQ2xvY2s7XG4gICAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5xdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKDEwMjQpO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgdmFyIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlID0gVmlydHVhbFRpbWVTY2hlZHVsZXIucHJvdG90eXBlO1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMudG9BYnNvbHV0ZVRpbWUodGhpcy5jbG9jayk7XG4gICAgfTtcblxuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlID0gZnVuY3Rpb24gKHN0YXRlLCBhY3Rpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlQWJzb2x1dGUoc3RhdGUsIHRoaXMuY2xvY2ssIGFjdGlvbik7XG4gICAgfTtcblxuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBkdCA9IGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlID9cbiAgICAgICAgdGhpcy50b1JlbGF0aXZlVGltZShkdWVUaW1lIC0gdGhpcy5ub3coKSkgOlxuICAgICAgICB0aGlzLnRvUmVsYXRpdmVUaW1lKGR1ZVRpbWUpO1xuXG4gICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVJlbGF0aXZlKHN0YXRlLCBkdCwgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHJlbGF0aXZlIHRpbWUgdmFsdWUgdG8gYW4gYWJzb2x1dGUgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYWJzb2x1dGUgQWJzb2x1dGUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSByZWxhdGl2ZSBSZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gUmVzdWx0aW5nIGFic29sdXRlIHZpcnR1YWwgdGltZSBzdW0gdmFsdWUuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWRkID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhbiBhYnNvbHV0ZSB0aW1lIHRvIGEgbnVtYmVyXG4gICAgICogQHBhcmFtIHtBbnl9IFRoZSBhYnNvbHV0ZSB0aW1lLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhYnNvbHV0ZSB0aW1lIGluIG1zXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUudG9BYnNvbHV0ZVRpbWUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBUaW1lU3BhbiB2YWx1ZSB0byBhIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gVGltZVNwYW4gdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IENvcnJlc3BvbmRpbmcgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnRvUmVsYXRpdmVUaW1lID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSBwZXJpb2RpYyBwaWVjZSBvZiB3b3JrIGJ5IGR5bmFtaWNhbGx5IGRpc2NvdmVyaW5nIHRoZSBzY2hlZHVsZXIncyBjYXBhYmlsaXRpZXMuIFRoZSBwZXJpb2RpYyB0YXNrIHdpbGwgYmUgZW11bGF0ZWQgdXNpbmcgcmVjdXJzaXZlIHNjaGVkdWxpbmcuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgSW5pdGlhbCBzdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB1cG9uIHRoZSBmaXJzdCBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHBlcmlvZCBQZXJpb2QgZm9yIHJ1bm5pbmcgdGhlIHdvcmsgcGVyaW9kaWNhbGx5LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQsIHBvdGVudGlhbGx5IHVwZGF0aW5nIHRoZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcmVjdXJyaW5nIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlUGVyaW9kaWMgPSBmdW5jdGlvbiAoc3RhdGUsIHBlcmlvZCwgYWN0aW9uKSB7XG4gICAgICB2YXIgcyA9IG5ldyBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlKHRoaXMsIHN0YXRlLCBwZXJpb2QsIGFjdGlvbik7XG4gICAgICByZXR1cm4gcy5zdGFydCgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGR1ZVRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgdGltZSBhZnRlciB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVSZWxhdGl2ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgcnVuQXQgPSB0aGlzLmFkZCh0aGlzLmNsb2NrLCBkdWVUaW1lKTtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlQWJzb2x1dGUoc3RhdGUsIHJ1bkF0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXROZXh0KCk7XG4gICAgICAgICAgaWYgKG5leHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZXIobmV4dC5kdWVUaW1lLCB0aGlzLmNsb2NrKSA+IDAgJiYgKHRoaXMuY2xvY2sgPSBuZXh0LmR1ZVRpbWUpO1xuICAgICAgICAgICAgbmV4dC5pbnZva2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRoaXMuaXNFbmFibGVkKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuaXNFbmFibGVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayB0byB0aGUgc3BlY2lmaWVkIHRpbWUsIHJ1bm5pbmcgYWxsIHdvcmsgdGlsbCB0aGF0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lIEFic29sdXRlIHRpbWUgdG8gYWR2YW5jZSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2sgdG8uXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWR2YW5jZVRvID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdWVUb0Nsb2NrID0gdGhpcy5jb21wYXJlcih0aGlzLmNsb2NrLCB0aW1lKTtcbiAgICAgIGlmICh0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIHRpbWUpID4gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPT09IDApIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoIXRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXROZXh0KCk7XG4gICAgICAgICAgaWYgKG5leHQgIT09IG51bGwgJiYgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRpbWUpIDw9IDApIHtcbiAgICAgICAgICAgIHRoaXMuY29tcGFyZXIobmV4dC5kdWVUaW1lLCB0aGlzLmNsb2NrKSA+IDAgJiYgKHRoaXMuY2xvY2sgPSBuZXh0LmR1ZVRpbWUpO1xuICAgICAgICAgICAgbmV4dC5pbnZva2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKHRoaXMuaXNFbmFibGVkKTtcbiAgICAgICAgdGhpcy5jbG9jayA9IHRpbWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieSB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHRpbWUsIHJ1bm5pbmcgYWxsIHdvcmsgc2NoZWR1bGVkIGZvciB0aGF0IHRpbWVzcGFuLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lIFJlbGF0aXZlIHRpbWUgdG8gYWR2YW5jZSB0aGUgc2NoZWR1bGVyJ3MgY2xvY2sgYnkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuYWR2YW5jZUJ5ID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIHRpbWUpLFxuICAgICAgICAgIGR1ZVRvQ2xvY2sgPSB0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIGR0KTtcbiAgICAgIGlmIChkdWVUb0Nsb2NrID4gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPT09IDApIHsgIHJldHVybjsgfVxuXG4gICAgICB0aGlzLmFkdmFuY2VUbyhkdCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFkdmFuY2VzIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieSB0aGUgc3BlY2lmaWVkIHJlbGF0aXZlIHRpbWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgUmVsYXRpdmUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zbGVlcCA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICB2YXIgZHQgPSB0aGlzLmFkZCh0aGlzLmNsb2NrLCB0aW1lKTtcbiAgICAgIGlmICh0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIGR0KSA+PSAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG5cbiAgICAgIHRoaXMuY2xvY2sgPSBkdDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbmV4dCBzY2hlZHVsZWQgaXRlbSB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7U2NoZWR1bGVkSXRlbX0gVGhlIG5leHQgc2NoZWR1bGVkIGl0ZW0uXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLnF1ZXVlLnBlZWsoKTtcbiAgICAgICAgaWYgKG5leHQuaXNDYW5jZWxsZWQoKSkge1xuICAgICAgICAgIHRoaXMucXVldWUuZGVxdWV1ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhdCBkdWVUaW1lLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkdWVUaW1lIEFic29sdXRlIHRpbWUgYXQgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNjaGVkdWxlQWJzb2x1dGUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBmdW5jdGlvbiBydW4oc2NoZWR1bGVyLCBzdGF0ZTEpIHtcbiAgICAgICAgc2VsZi5xdWV1ZS5yZW1vdmUoc2kpO1xuICAgICAgICByZXR1cm4gYWN0aW9uKHNjaGVkdWxlciwgc3RhdGUxKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpID0gbmV3IFNjaGVkdWxlZEl0ZW0odGhpcywgc3RhdGUsIHJ1biwgZHVlVGltZSwgdGhpcy5jb21wYXJlcik7XG4gICAgICB0aGlzLnF1ZXVlLmVucXVldWUoc2kpO1xuXG4gICAgICByZXR1cm4gc2kuZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFZpcnR1YWxUaW1lU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIC8qKiBQcm92aWRlcyBhIHZpcnR1YWwgdGltZSBzY2hlZHVsZXIgdGhhdCB1c2VzIERhdGUgZm9yIGFic29sdXRlIHRpbWUgYW5kIG51bWJlciBmb3IgcmVsYXRpdmUgdGltZS4gKi9cbiAgUnguSGlzdG9yaWNhbFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSGlzdG9yaWNhbFNjaGVkdWxlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaGlzdG9yaWNhbCBzY2hlZHVsZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGluaXRpYWwgY2xvY2sgdmFsdWUuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluaXRpYWxDbG9jayBJbml0aWFsIHZhbHVlIGZvciB0aGUgY2xvY2suXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29tcGFyZXIgQ29tcGFyZXIgdG8gZGV0ZXJtaW5lIGNhdXNhbGl0eSBvZiBldmVudHMgYmFzZWQgb24gYWJzb2x1dGUgdGltZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBIaXN0b3JpY2FsU2NoZWR1bGVyKGluaXRpYWxDbG9jaywgY29tcGFyZXIpIHtcbiAgICAgIHZhciBjbG9jayA9IGluaXRpYWxDbG9jayA9PSBudWxsID8gMCA6IGluaXRpYWxDbG9jaztcbiAgICAgIHZhciBjbXAgPSBjb21wYXJlciB8fCBkZWZhdWx0U3ViQ29tcGFyZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzLCBjbG9jaywgY21wKTtcbiAgICB9XG5cbiAgICB2YXIgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvID0gSGlzdG9yaWNhbFNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdGltZSB2YWx1ZSB0byBhbiBhYnNvbHV0ZSB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8uYWRkID0gZnVuY3Rpb24gKGFic29sdXRlLCByZWxhdGl2ZSkge1xuICAgICAgcmV0dXJuIGFic29sdXRlICsgcmVsYXRpdmU7XG4gICAgfTtcblxuICAgIEhpc3RvcmljYWxTY2hlZHVsZXJQcm90by50b0Fic29sdXRlVGltZSA9IGZ1bmN0aW9uIChhYnNvbHV0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGFic29sdXRlKS5nZXRUaW1lKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBUaW1lU3BhbiB2YWx1ZSB0byBhIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAbWVtYmVyT2YgSGlzdG9yaWNhbFNjaGVkdWxlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBUaW1lU3BhbiB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQ29ycmVzcG9uZGluZyByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICovXG4gICAgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvLnRvUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcblxuICAgIHJldHVybiBIaXN0b3JpY2FsU2NoZWR1bGVyO1xuICB9KFJ4LlZpcnR1YWxUaW1lU2NoZWR1bGVyKSk7XG5cbmZ1bmN0aW9uIE9uTmV4dFByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbn1cblxuT25OZXh0UHJlZGljYXRlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgaWYgKG90aGVyID09PSB0aGlzKSB7IHJldHVybiB0cnVlOyB9XG4gIGlmIChvdGhlciA9PSBudWxsKSB7IHJldHVybiBmYWxzZTsgfVxuICBpZiAob3RoZXIua2luZCAhPT0gJ04nKSB7IHJldHVybiBmYWxzZTsgfVxuICByZXR1cm4gdGhpcy5wcmVkaWNhdGUob3RoZXIudmFsdWUpO1xufTtcblxuZnVuY3Rpb24gT25FcnJvclByZWRpY2F0ZShwcmVkaWNhdGUpIHtcbiAgdGhpcy5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG59XG5cbk9uRXJyb3JQcmVkaWNhdGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICBpZiAob3RoZXIgPT09IHRoaXMpIHsgcmV0dXJuIHRydWU7IH1cbiAgaWYgKG90aGVyID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChvdGhlci5raW5kICE9PSAnRScpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIHJldHVybiB0aGlzLnByZWRpY2F0ZShvdGhlci5lcnJvcik7XG59O1xuXG52YXIgUmVhY3RpdmVUZXN0ID0gUnguUmVhY3RpdmVUZXN0ID0ge1xuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCBmb3IgY3JlYXRpb24gb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgY3JlYXRlZDogMTAwLFxuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCB0byBzdWJzY3JpYmUgdG8gb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgc3Vic2NyaWJlZDogMjAwLFxuICAvKiogRGVmYXVsdCB2aXJ0dWFsIHRpbWUgdXNlZCB0byBkaXNwb3NlIHN1YnNjcmlwdGlvbnMgaW4gdW5pdCB0ZXN0cy4gKi9cbiAgZGlzcG9zZWQ6IDEwMDAsXG5cbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhbiBPbk5leHQgbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUgd2l0aCBhIGdpdmVuIHZhbHVlIG9yIGEgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgKlxuICAgKiAxIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIDQyKTtcbiAgICogMiAtIFJlYWN0aXZlVGVzdC5vbk5leHQoMjAwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5sZW5ndGggPT0gMjsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uTmV4dCBub3RpZmljYXRpb24gb2NjdXJzLlxuICAgKiBAcGFyYW0gdmFsdWUgUmVjb3JkZWQgdmFsdWUgc3RvcmVkIGluIHRoZSBPbk5leHQgbm90aWZpY2F0aW9uIG9yIGEgcHJlZGljYXRlLlxuICAgKiBAcmV0dXJuIFJlY29yZGVkIE9uTmV4dCBub3RpZmljYXRpb24uXG4gICAqL1xuICBvbk5leHQ6IGZ1bmN0aW9uICh0aWNrcywgdmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID9cbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgbmV3IE9uTmV4dFByZWRpY2F0ZSh2YWx1ZSkpIDpcbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpO1xuICB9LFxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGFuIE9uRXJyb3Igbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUgd2l0aCBhIGdpdmVuIGVycm9yLlxuICAgKlxuICAgKiAxIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIG5ldyBFcnJvcignZXJyb3InKSk7XG4gICAqIDIgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgZnVuY3Rpb24gKGUpIHsgcmV0dXJuIGUubWVzc2FnZSA9PT0gJ2Vycm9yJzsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uRXJyb3Igbm90aWZpY2F0aW9uIG9jY3Vycy5cbiAgICogQHBhcmFtIGV4Y2VwdGlvbiBSZWNvcmRlZCBleGNlcHRpb24gc3RvcmVkIGluIHRoZSBPbkVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICogQHJldHVybiBSZWNvcmRlZCBPbkVycm9yIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIG9uRXJyb3I6IGZ1bmN0aW9uICh0aWNrcywgZXJyb3IpIHtcbiAgICByZXR1cm4gdHlwZW9mIGVycm9yID09PSAnZnVuY3Rpb24nID9cbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgbmV3IE9uRXJyb3JQcmVkaWNhdGUoZXJyb3IpKSA6XG4gICAgICBuZXcgUmVjb3JkZWQodGlja3MsIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yKGVycm9yKSk7XG4gIH0sXG4gIC8qKlxuICAgKiBGYWN0b3J5IG1ldGhvZCBmb3IgYW4gT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIHJlY29yZCBhdCBhIGdpdmVuIHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSB0aWNrcyBSZWNvcmRlZCB2aXJ0dWFsIHRpbWUgdGhlIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbiBvY2N1cnMuXG4gICAqIEByZXR1cm4gUmVjb3JkZWQgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICh0aWNrcykge1xuICAgIHJldHVybiBuZXcgUmVjb3JkZWQodGlja3MsIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKTtcbiAgfSxcbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhIHN1YnNjcmlwdGlvbiByZWNvcmQgYmFzZWQgb24gYSBnaXZlbiBzdWJzY3JpcHRpb24gYW5kIGRpc3Bvc2FsIHRpbWUuXG4gICAqXG4gICAqIEBwYXJhbSBzdGFydCBWaXJ0dWFsIHRpbWUgaW5kaWNhdGluZyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gd2FzIGNyZWF0ZWQuXG4gICAqIEBwYXJhbSBlbmQgVmlydHVhbCB0aW1lIGluZGljYXRpbmcgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIHdhcyBkaXNwb3NlZC5cbiAgICogQHJldHVybiBTdWJzY3JpcHRpb24gb2JqZWN0LlxuICAgKi9cbiAgc3Vic2NyaWJlOiBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKHN0YXJ0LCBlbmQpO1xuICB9XG59O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCByZWNvcmRpbmcgdGhlIHByb2R1Y3Rpb24gb2YgdGhlIHNwZWNpZmllZCB2YWx1ZSBhdCB0aGUgZ2l2ZW4gdmlydHVhbCB0aW1lLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgVmlydHVhbCB0aW1lIHRoZSB2YWx1ZSB3YXMgcHJvZHVjZWQgb24uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFZhbHVlIHRoYXQgd2FzIHByb2R1Y2VkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBBbiBvcHRpb25hbCBjb21wYXJlci5cbiAgICovXG4gIHZhciBSZWNvcmRlZCA9IFJ4LlJlY29yZGVkID0gZnVuY3Rpb24gKHRpbWUsIHZhbHVlLCBjb21wYXJlcikge1xuICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlciB8fCBkZWZhdWx0Q29tcGFyZXI7XG4gIH07XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiByZWNvcmRlZCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVjb3JkZWR9IG90aGVyIFJlY29yZGVkIG9iamVjdCB0byBjaGVjayBmb3IgZXF1YWxpdHkuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGJvdGggb2JqZWN0cyBhcmUgZXF1YWw7IGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIFJlY29yZGVkLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy50aW1lID09PSBvdGhlci50aW1lICYmIHRoaXMuY29tcGFyZXIodGhpcy52YWx1ZSwgb3RoZXIudmFsdWUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFJlY29yZGVkIHZhbHVlLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgUmVjb3JkZWQgdmFsdWUuXG4gICAqL1xuICBSZWNvcmRlZC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUudG9TdHJpbmcoKSArICdAJyArIHRoaXMudGltZTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBzdWJzY3JpcHRpb24gb2JqZWN0IHdpdGggdGhlIGdpdmVuIHZpcnR1YWwgc3Vic2NyaXB0aW9uIGFuZCB1bnN1YnNjcmlwdGlvbiB0aW1lLlxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHN1YnNjcmliZSBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdGhlIHN1YnNjcmlwdGlvbiBvY2N1cnJlZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IHVuc3Vic2NyaWJlIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0aGUgdW5zdWJzY3JpcHRpb24gb2NjdXJyZWQuXG4gICAqL1xuICB2YXIgU3Vic2NyaXB0aW9uID0gUnguU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICB0aGlzLnN1YnNjcmliZSA9IHN0YXJ0O1xuICAgIHRoaXMudW5zdWJzY3JpYmUgPSBlbmQgfHwgTnVtYmVyLk1BWF9WQUxVRTtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHN1YnNjcmlwdGlvbiBpcyBlcXVhbCB0byB0aGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICogQHBhcmFtIG90aGVyIFN1YnNjcmlwdGlvbiBvYmplY3QgdG8gY2hlY2sgZm9yIGVxdWFsaXR5LlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBib3RoIG9iamVjdHMgYXJlIGVxdWFsOyBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLnN1YnNjcmliZSA9PT0gb3RoZXIuc3Vic2NyaWJlICYmIHRoaXMudW5zdWJzY3JpYmUgPT09IG90aGVyLnVuc3Vic2NyaWJlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFN1YnNjcmlwdGlvbiB2YWx1ZS5cbiAgICogQHJldHVybnMge1N0cmluZ30gU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IFN1YnNjcmlwdGlvbiB2YWx1ZS5cbiAgICovXG4gIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICcoJyArIHRoaXMuc3Vic2NyaWJlICsgJywgJyArICh0aGlzLnVuc3Vic2NyaWJlID09PSBOdW1iZXIuTUFYX1ZBTFVFID8gJ0luZmluaXRlJyA6IHRoaXMudW5zdWJzY3JpYmUpICsgJyknO1xuICB9O1xuXG4gIHZhciBNb2NrRGlzcG9zYWJsZSA9IFJ4Lk1vY2tEaXNwb3NhYmxlID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuZGlzcG9zZXMgPSBbXTtcbiAgICB0aGlzLmRpc3Bvc2VzLnB1c2godGhpcy5zY2hlZHVsZXIuY2xvY2spO1xuICB9O1xuXG4gIE1vY2tEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGlzcG9zZXMucHVzaCh0aGlzLnNjaGVkdWxlci5jbG9jayk7XG4gIH07XG5cbiAgdmFyIE1vY2tPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTW9ja09ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gTW9ja09ic2VydmVyKHNjaGVkdWxlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBbXTtcbiAgICB9XG5cbiAgICB2YXIgTW9ja09ic2VydmVyUHJvdG90eXBlID0gTW9ja09ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQodmFsdWUpKSk7XG4gICAgfTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yKGUpKSk7XG4gICAgfTtcblxuICAgIE1vY2tPYnNlcnZlclByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMubWVzc2FnZXMucHVzaChuZXcgUmVjb3JkZWQodGhpcy5zY2hlZHVsZXIuY2xvY2ssIE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCgpKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2NrT2JzZXJ2ZXI7XG4gIH0pKE9ic2VydmVyKTtcblxuICBmdW5jdGlvbiBNb2NrUHJvbWlzZShzY2hlZHVsZXIsIG1lc3NhZ2VzKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV0sXG4gICAgICAgICAgbm90aWZpY2F0aW9uID0gbWVzc2FnZS52YWx1ZTtcbiAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIG9icyA9IHNlbGYub2JzZXJ2ZXJzLnNsaWNlKDApO1xuXG4gICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpMZW4gPSBvYnMubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XG4gICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQob2JzW2pdKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfSk7XG4gICAgICB9KShub3RpZmljYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIE1vY2tQcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChuZXcgU3Vic2NyaXB0aW9uKHRoaXMuc2NoZWR1bGVyLmNsb2NrKSk7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG5cbiAgICB2YXIgbmV3UHJvbWlzZTtcblxuICAgIHZhciBvYnNlcnZlciA9IFJ4Lk9ic2VydmVyLmNyZWF0ZShcbiAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHZhciByZXRWYWx1ZSA9IG9uUmVzb2x2ZWQoeCk7XG4gICAgICAgIGlmIChyZXRWYWx1ZSAmJiB0eXBlb2YgcmV0VmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG5ld1Byb21pc2UgPSByZXRWYWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdGlja3MgPSBzZWxmLnNjaGVkdWxlci5jbG9jaztcbiAgICAgICAgICBuZXdQcm9taXNlID0gbmV3IE1vY2tQcm9taXNlKHNlbGYuc2NoZWR1bGVyLCBbUnguUmVhY3RpdmVUZXN0Lm9uTmV4dCh0aWNrcywgdW5kZWZpbmVkKSwgUnguUmVhY3RpdmVUZXN0Lm9uQ29tcGxldGVkKHRpY2tzKV0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZHggPSBzZWxmLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICAgICAgc2VsZi5vYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBzZWxmLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBvblJlamVjdGVkKGVycik7XG4gICAgICAgIHZhciBpZHggPSBzZWxmLm9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKTtcbiAgICAgICAgc2VsZi5vYnNlcnZlcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKHNlbGYuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBzZWxmLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICB9XG4gICAgKTtcbiAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcblxuICAgIHJldHVybiBuZXdQcm9taXNlIHx8IG5ldyBNb2NrUHJvbWlzZSh0aGlzLnNjaGVkdWxlciwgdGhpcy5tZXNzYWdlcyk7XG4gIH07XG5cbiAgdmFyIEhvdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEhvdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBIb3RPYnNlcnZhYmxlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdmFyIG1lc3NhZ2UsIG5vdGlmaWNhdGlvbiwgb2JzZXJ2YWJsZSA9IHRoaXM7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG1lc3NhZ2UgPSB0aGlzLm1lc3NhZ2VzW2ldO1xuICAgICAgICBub3RpZmljYXRpb24gPSBtZXNzYWdlLnZhbHVlO1xuICAgICAgICAoZnVuY3Rpb24gKGlubmVyTm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb2JzID0gb2JzZXJ2YWJsZS5vYnNlcnZlcnMuc2xpY2UoMCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqTGVuID0gb2JzLmxlbmd0aDsgaiA8IGpMZW47IGorKykge1xuICAgICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQob2JzW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgSG90T2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRoaXM7XG4gICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2gobmV3IFN1YnNjcmlwdGlvbih0aGlzLnNjaGVkdWxlci5jbG9jaykpO1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZHggPSBvYnNlcnZhYmxlLm9ic2VydmVycy5pbmRleE9mKG8pO1xuICAgICAgICBvYnNlcnZhYmxlLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24ob2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIG9ic2VydmFibGUuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gSG90T2JzZXJ2YWJsZTtcbiAgfSkoT2JzZXJ2YWJsZSk7XG5cbiAgdmFyIENvbGRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb2xkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIENvbGRPYnNlcnZhYmxlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLm1lc3NhZ2VzID0gbWVzc2FnZXM7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICB9XG5cbiAgICBDb2xkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbWVzc2FnZSwgbm90aWZpY2F0aW9uLCBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKG5ldyBTdWJzY3JpcHRpb24odGhpcy5zY2hlZHVsZXIuY2xvY2spKTtcbiAgICAgIHZhciBpbmRleCA9IHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGggLSAxO1xuICAgICAgdmFyIGQgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV07XG4gICAgICAgIG5vdGlmaWNhdGlvbiA9IG1lc3NhZ2UudmFsdWU7XG4gICAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICBkLmFkZChvYnNlcnZhYmxlLnNjaGVkdWxlci5zY2hlZHVsZVJlbGF0aXZlKG51bGwsIG1lc3NhZ2UudGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaW5uZXJOb3RpZmljYXRpb24uYWNjZXB0KG8pO1xuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9ic2VydmFibGUuc3Vic2NyaXB0aW9uc1tpbmRleF0gPSBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmFibGUuc3Vic2NyaXB0aW9uc1tpbmRleF0uc3Vic2NyaWJlLCBvYnNlcnZhYmxlLnNjaGVkdWxlci5jbG9jayk7XG4gICAgICAgIGQuZGlzcG9zZSgpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb2xkT2JzZXJ2YWJsZTtcbiAgfSkoT2JzZXJ2YWJsZSk7XG5cbiAgLyoqIFZpcnR1YWwgdGltZSBzY2hlZHVsZXIgdXNlZCBmb3IgdGVzdGluZyBhcHBsaWNhdGlvbnMgYW5kIGxpYnJhcmllcyBidWlsdCB1c2luZyBSZWFjdGl2ZSBFeHRlbnNpb25zLiAqL1xuICBSeC5UZXN0U2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUZXN0U2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gYmFzZUNvbXBhcmVyKHgsIHkpIHtcbiAgICAgIHJldHVybiB4ID4geSA/IDEgOiAoeCA8IHkgPyAtMSA6IDApO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRlc3RTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzLCAwLCBiYXNlQ29tcGFyZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYXQgdGhlIHNwZWNpZmllZCB2aXJ0dWFsIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIGR1ZVRpbWUgQWJzb2x1dGUgdmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJuIERpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVBYnNvbHV0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICBkdWVUaW1lIDw9IHRoaXMuY2xvY2sgJiYgKGR1ZVRpbWUgPSB0aGlzLmNsb2NrICsgMSk7XG4gICAgICByZXR1cm4gX19zdXBlcl9fLnByb3RvdHlwZS5zY2hlZHVsZUFic29sdXRlLmNhbGwodGhpcywgc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHRvIGFuIGFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoYWJzb2x1dGUsIHJlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gYWJzb2x1dGUgKyByZWxhdGl2ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gYSBEYXRlVGltZU9mZnNldCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIENvcnJlc3BvbmRpbmcgRGF0ZVRpbWVPZmZzZXQgdmFsdWUuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUudG9BYnNvbHV0ZVRpbWUgPSBmdW5jdGlvbiAoYWJzb2x1dGUpIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZShhYnNvbHV0ZSkuZ2V0VGltZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRpbWVTcGFuIFRpbWVTcGFuIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybiBDb3JyZXNwb25kaW5nIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS50b1JlbGF0aXZlVGltZSA9IGZ1bmN0aW9uICh0aW1lU3Bhbikge1xuICAgICAgcmV0dXJuIHRpbWVTcGFuO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSB0ZXN0IHNjaGVkdWxlciBhbmQgdXNlcyB0aGUgc3BlY2lmaWVkIHZpcnR1YWwgdGltZXMgdG8gaW52b2tlIHRoZSBmYWN0b3J5IGZ1bmN0aW9uLCBzdWJzY3JpYmUgdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSwgYW5kIGRpc3Bvc2UgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjcmVhdGUgRmFjdG9yeSBtZXRob2QgdG8gY3JlYXRlIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGNyZWF0ZWQgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGludm9rZSB0aGUgZmFjdG9yeSB0byBjcmVhdGUgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gc3Vic2NyaWJlZCBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gc3Vic2NyaWJlIHRvIHRoZSBjcmVhdGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIGRpc3Bvc2VkIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0byBkaXNwb3NlIHRoZSBzdWJzY3JpcHRpb24uXG4gICAgICogQHJldHVybiBPYnNlcnZlciB3aXRoIHRpbWVzdGFtcGVkIHJlY29yZGluZ3Mgb2Ygbm90aWZpY2F0aW9uIG1lc3NhZ2VzIHRoYXQgd2VyZSByZWNlaXZlZCBkdXJpbmcgdGhlIHZpcnR1YWwgdGltZSB3aW5kb3cgd2hlbiB0aGUgc3Vic2NyaXB0aW9uIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2FzIGFjdGl2ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5zdGFydFNjaGVkdWxlciA9IGZ1bmN0aW9uIChjcmVhdGVGbiwgc2V0dGluZ3MpIHtcbiAgICAgIHNldHRpbmdzIHx8IChzZXR0aW5ncyA9IHt9KTtcbiAgICAgIHNldHRpbmdzLmNyZWF0ZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3MuY3JlYXRlZCA9IFJlYWN0aXZlVGVzdC5jcmVhdGVkKTtcbiAgICAgIHNldHRpbmdzLnN1YnNjcmliZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3Muc3Vic2NyaWJlZCA9IFJlYWN0aXZlVGVzdC5zdWJzY3JpYmVkKTtcbiAgICAgIHNldHRpbmdzLmRpc3Bvc2VkID09IG51bGwgJiYgKHNldHRpbmdzLmRpc3Bvc2VkID0gUmVhY3RpdmVUZXN0LmRpc3Bvc2VkKTtcblxuICAgICAgdmFyIG9ic2VydmVyID0gdGhpcy5jcmVhdGVPYnNlcnZlcigpLCBzb3VyY2UsIHN1YnNjcmlwdGlvbjtcblxuICAgICAgdGhpcy5zY2hlZHVsZUFic29sdXRlKG51bGwsIHNldHRpbmdzLmNyZWF0ZWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc291cmNlID0gY3JlYXRlRm4oKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3Muc3Vic2NyaWJlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdWJzY3JpcHRpb24gPSBzb3VyY2Uuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3MuZGlzcG9zZWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnN0YXJ0KCk7XG5cbiAgICAgIHJldHVybiBvYnNlcnZlcjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGhvdCBvYnNlcnZhYmxlIHVzaW5nIHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wZWQgbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGVpdGhlciBhcyBhbiBhcnJheSBvciBhcmd1bWVudHMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIE5vdGlmaWNhdGlvbnMgdG8gc3VyZmFjZSB0aHJvdWdoIHRoZSBjcmVhdGVkIHNlcXVlbmNlIGF0IHRoZWlyIHNwZWNpZmllZCBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWVzLlxuICAgICAqIEByZXR1cm4gSG90IG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiBzdWJzY3JpcHRpb25zIGFuZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZUhvdE9ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncztcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEhvdE9ic2VydmFibGUodGhpcywgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBjb2xkIG9ic2VydmFibGUgdXNpbmcgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgTm90aWZpY2F0aW9ucyB0byBzdXJmYWNlIHRocm91Z2ggdGhlIGNyZWF0ZWQgc2VxdWVuY2UgYXQgdGhlaXIgc3BlY2lmaWVkIHZpcnR1YWwgdGltZSBvZmZzZXRzIGZyb20gdGhlIHNlcXVlbmNlIHN1YnNjcmlwdGlvbiB0aW1lLlxuICAgICAqIEByZXR1cm4gQ29sZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXNzZXJ0IHRoZSB0aW1pbmcgb2Ygc3Vic2NyaXB0aW9ucyBhbmQgbm90aWZpY2F0aW9ucy5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVDb2xkT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgQ29sZE9ic2VydmFibGUodGhpcywgYXJncyk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZXNvbHZlZCBwcm9taXNlIHdpdGggdGhlIGdpdmVuIHZhbHVlIGFuZCB0aWNrc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aWNrcyBUaGUgYWJzb2x1dGUgdGltZSBvZiB0aGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gdmFsdWUgVGhlIHZhbHVlIHRvIHlpZWxkIGF0IHRoZSBnaXZlbiB0aWNrLlxuICAgICAqIEByZXR1cm5zIHtNb2NrUHJvbWlzZX0gQSBtb2NrIFByb21pc2Ugd2hpY2ggZnVsZmlsbHMgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlUmVzb2x2ZWRQcm9taXNlID0gZnVuY3Rpb24gKHRpY2tzLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrUHJvbWlzZSh0aGlzLCBbUnguUmVhY3RpdmVUZXN0Lm9uTmV4dCh0aWNrcywgdmFsdWUpLCBSeC5SZWFjdGl2ZVRlc3Qub25Db21wbGV0ZWQodGlja3MpXSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGdpdmVuIHJlYXNvbiBhbmQgdGlja3NcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGlja3MgVGhlIGFic29sdXRlIHRpbWUgb2YgdGhlIHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IHJlYXNvbiBUaGUgcmVhc29uIGZvciByZWplY3Rpb24gdG8geWllbGQgYXQgdGhlIGdpdmVuIHRpY2suXG4gICAgICogQHJldHVybnMge01vY2tQcm9taXNlfSBBIG1vY2sgUHJvbWlzZSB3aGljaCByZWplY3RzIHdpdGggdGhlIGdpdmVuIHJlYXNvbi5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVSZWplY3RlZFByb21pc2UgPSBmdW5jdGlvbiAodGlja3MsIHJlYXNvbikge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrUHJvbWlzZSh0aGlzLCBbUnguUmVhY3RpdmVUZXN0Lm9uRXJyb3IodGlja3MsIHJlYXNvbildKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYnNlcnZlciB0aGF0IHJlY29yZHMgcmVjZWl2ZWQgbm90aWZpY2F0aW9uIG1lc3NhZ2VzIGFuZCB0aW1lc3RhbXBzIHRob3NlLlxuICAgICAqIEByZXR1cm4gT2JzZXJ2ZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiByZWNlaXZlZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZU9ic2VydmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG5ldyBNb2NrT2JzZXJ2ZXIodGhpcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUZXN0U2NoZWR1bGVyO1xuICB9KShWaXJ0dWFsVGltZVNjaGVkdWxlcik7XG5cbiAgdmFyIEFub255bW91c09ic2VydmFibGUgPSBSeC5Bbm9ueW1vdXNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBbm9ueW1vdXNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgLy8gRml4IHN1YnNjcmliZXIgdG8gY2hlY2sgZm9yIHVuZGVmaW5lZCBvciBmdW5jdGlvbiByZXR1cm5lZCB0byBkZWNvcmF0ZSBhcyBEaXNwb3NhYmxlXG4gICAgZnVuY3Rpb24gZml4U3Vic2NyaWJlcihzdWJzY3JpYmVyKSB7XG4gICAgICByZXR1cm4gc3Vic2NyaWJlciAmJiBpc0Z1bmN0aW9uKHN1YnNjcmliZXIuZGlzcG9zZSkgPyBzdWJzY3JpYmVyIDpcbiAgICAgICAgaXNGdW5jdGlvbihzdWJzY3JpYmVyKSA/IGRpc3Bvc2FibGVDcmVhdGUoc3Vic2NyaWJlcikgOiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0RGlzcG9zYWJsZShzLCBzdGF0ZSkge1xuICAgICAgdmFyIGFkbyA9IHN0YXRlWzBdLCBzZWxmID0gc3RhdGVbMV07XG4gICAgICB2YXIgc3ViID0gdHJ5Q2F0Y2goc2VsZi5fX3N1YnNjcmliZSkuY2FsbChzZWxmLCBhZG8pO1xuICAgICAgaWYgKHN1YiA9PT0gZXJyb3JPYmogJiYgIWFkby5mYWlsKGVycm9yT2JqLmUpKSB7IHRocm93ZXIoZXJyb3JPYmouZSk7IH1cbiAgICAgIGFkby5zZXREaXNwb3NhYmxlKGZpeFN1YnNjcmliZXIoc3ViKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQW5vbnltb3VzT2JzZXJ2YWJsZShzdWJzY3JpYmUsIHBhcmVudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQW5vbnltb3VzT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgYWRvID0gbmV3IEF1dG9EZXRhY2hPYnNlcnZlcihvKSwgc3RhdGUgPSBbYWRvLCB0aGlzXTtcblxuICAgICAgaWYgKGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZXF1aXJlZCgpKSB7XG4gICAgICAgIGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGUoc3RhdGUsIHNldERpc3Bvc2FibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RGlzcG9zYWJsZShudWxsLCBzdGF0ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWRvO1xuICAgIH07XG5cbiAgICByZXR1cm4gQW5vbnltb3VzT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQXV0b0RldGFjaE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBdXRvRGV0YWNoT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBBdXRvRGV0YWNoT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5tID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgfVxuXG4gICAgdmFyIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZSA9IEF1dG9EZXRhY2hPYnNlcnZlci5wcm90b3R5cGU7XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25OZXh0KS5jYWxsKHRoaXMub2JzZXJ2ZXIsIHZhbHVlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICB0aHJvd2VyKHJlc3VsdC5lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25FcnJvcikuY2FsbCh0aGlzLm9ic2VydmVyLCBlcnIpO1xuICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICByZXN1bHQgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzdWx0LmUpO1xuICAgIH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQpLmNhbGwodGhpcy5vYnNlcnZlcik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIHJlc3VsdCA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXN1bHQuZSk7XG4gICAgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5zZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKHZhbHVlKSB7IHRoaXMubS5zZXREaXNwb3NhYmxlKHZhbHVlKTsgfTtcbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubS5nZXREaXNwb3NhYmxlKCk7IH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5tLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF1dG9EZXRhY2hPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFVuZGVybHlpbmdPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhVbmRlcmx5aW5nT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBVbmRlcmx5aW5nT2JzZXJ2YWJsZShtLCB1KSB7XG4gICAgICB0aGlzLl9tID0gbTtcbiAgICAgIHRoaXMuX3UgPSB1O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVW5kZXJseWluZ09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHRoaXMuX20uZ2V0RGlzcG9zYWJsZSgpLCB0aGlzLl91LnN1YnNjcmliZShvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBVbmRlcmx5aW5nT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBHcm91cGVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoR3JvdXBlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR3JvdXBlZE9ic2VydmFibGUoa2V5LCB1bmRlcmx5aW5nT2JzZXJ2YWJsZSwgbWVyZ2VkRGlzcG9zYWJsZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmtleSA9IGtleTtcbiAgICAgIHRoaXMudW5kZXJseWluZ09ic2VydmFibGUgPSAhbWVyZ2VkRGlzcG9zYWJsZSA/XG4gICAgICAgIHVuZGVybHlpbmdPYnNlcnZhYmxlIDpcbiAgICAgICAgbmV3IFVuZGVybHlpbmdPYnNlcnZhYmxlKG1lcmdlZERpc3Bvc2FibGUsIHVuZGVybHlpbmdPYnNlcnZhYmxlKTtcbiAgICB9XG5cbiAgICBHcm91cGVkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy51bmRlcmx5aW5nT2JzZXJ2YWJsZS5zdWJzY3JpYmUobyk7XG4gICAgfTtcblxuICAgIHJldHVybiBHcm91cGVkT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGFuIG9iamVjdCB0aGF0IGlzIGJvdGggYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyB3ZWxsIGFzIGFuIG9ic2VydmVyLlxuICAgKiAgRWFjaCBub3RpZmljYXRpb24gaXMgYnJvYWRjYXN0ZWQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgdmFyIFN1YmplY3QgPSBSeC5TdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1YmplY3QoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICAgIH1cbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZXhjZXB0aW9uLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgVGhlIGV4Y2VwdGlvbiB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG9zW2ldLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzdWJqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBvYnNlcnZlciBhbmQgb2JzZXJ2YWJsZS5cbiAgICAgKiBAcGFyYW0ge09ic2VydmVyfSBvYnNlcnZlciBUaGUgb2JzZXJ2ZXIgdXNlZCB0byBzZW5kIG1lc3NhZ2VzIHRvIHRoZSBzdWJqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gb2JzZXJ2YWJsZSBUaGUgb2JzZXJ2YWJsZSB1c2VkIHRvIHN1YnNjcmliZSB0byBtZXNzYWdlcyBzZW50IGZyb20gdGhlIHN1YmplY3QuXG4gICAgICogQHJldHVybnMge1N1YmplY3R9IFN1YmplY3QgaW1wbGVtZW50ZWQgdXNpbmcgdGhlIGdpdmVuIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuICAgICAqL1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG9ic2VydmVyLCBvYnNlcnZhYmxlKSB7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3Qob2JzZXJ2ZXIsIG9ic2VydmFibGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi5cbiAgICogIFRoZSBsYXN0IHZhbHVlIGJlZm9yZSB0aGUgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uLCBvciB0aGUgZXJyb3IgcmVjZWl2ZWQgdGhyb3VnaCBPbkVycm9yLCBpcyBzZW50IHRvIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycy5cbiAgICovXG4gIHZhciBBc3luY1N1YmplY3QgPSBSeC5Bc3luY1N1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFzeW5jU3ViamVjdCwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzdWJqZWN0IHRoYXQgY2FuIG9ubHkgcmVjZWl2ZSBvbmUgdmFsdWUgYW5kIHRoYXQgdmFsdWUgaXMgY2FjaGVkIGZvciBhbGwgZnV0dXJlIG9ic2VydmF0aW9ucy5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3luY1N1YmplY3QoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhBc3luY1N1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG5cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLCBhbHNvIGNhdXNpbmcgdGhlIGxhc3QgcmVjZWl2ZWQgdmFsdWUgdG8gYmUgc2VudCBvdXQgKGlmIGFueSkuXG4gICAgICAgKi9cbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpLCBsZW47XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdmFyIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDtcblxuICAgICAgICAgIGlmICh0aGlzLmhhc1ZhbHVlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIG8gPSBvc1tpXTtcbiAgICAgICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlcnJvci5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBFcnJvciB0byBzZW5kIHRvIGFsbCBvYnNlcnZlcnMuXG4gICAgICAgKi9cbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogU2VuZHMgYSB2YWx1ZSB0byB0aGUgc3ViamVjdC4gVGhlIGxhc3QgdmFsdWUgcmVjZWl2ZWQgYmVmb3JlIHN1Y2Nlc3NmdWwgdGVybWluYXRpb24gd2lsbCBiZSBzZW50IHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHN0b3JlIGluIHRoZSBzdWJqZWN0LlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5oYXNWYWx1ZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cbiAgICAgICAqL1xuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBc3luY1N1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiAgUmVwcmVzZW50cyBhIHZhbHVlIHRoYXQgY2hhbmdlcyBvdmVyIHRpbWUuXG4gICAqICBPYnNlcnZlcnMgY2FuIHN1YnNjcmliZSB0byB0aGUgc3ViamVjdCB0byByZWNlaXZlIHRoZSBsYXN0IChvciBpbml0aWFsKSB2YWx1ZSBhbmQgYWxsIHN1YnNlcXVlbnQgbm90aWZpY2F0aW9ucy5cbiAgICovXG4gIHZhciBCZWhhdmlvclN1YmplY3QgPSBSeC5CZWhhdmlvclN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEJlaGF2aW9yU3ViamVjdCwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBCZWhhdmlvclN1YmplY3QodmFsdWUpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICAgICAgby5vbk5leHQodGhpcy52YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbm5lclN1YnNjcmlwdGlvbih0aGlzLCBvKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgIG8ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEdldHMgdGhlIGN1cnJlbnQgdmFsdWUgb3IgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAqIFZhbHVlIGlzIGZyb3plbiBhZnRlciBvbkNvbXBsZXRlZCBpcyBjYWxsZWQuXG4gICAgICAgKiBBZnRlciBvbkVycm9yIGlzIGNhbGxlZCBhbHdheXMgdGhyb3dzIHRoZSBzcGVjaWZpZWQgZXhjZXB0aW9uLlxuICAgICAgICogQW4gZXhjZXB0aW9uIGlzIGFsd2F5cyB0aHJvd24gYWZ0ZXIgZGlzcG9zZSBpcyBjYWxsZWQuXG4gICAgICAgKiBAcmV0dXJucyB7TWl4ZWR9IFRoZSBpbml0aWFsIHZhbHVlIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3IgdW50aWwgb25OZXh0IGlzIGNhbGxlZDsgYWZ0ZXIgd2hpY2gsIHRoZSBsYXN0IHZhbHVlIHBhc3NlZCB0byBvbk5leHQuXG4gICAgICAgKi9cbiAgICAgIGdldFZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7IHRocm93ZXIodGhpcy5lcnJvcik7IH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgY2hlY2tEaXNwb3NlZCh0aGlzKTsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIG9zW2ldLm9uTmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEJlaGF2aW9yU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqIEVhY2ggbm90aWZpY2F0aW9uIGlzIGJyb2FkY2FzdGVkIHRvIGFsbCBzdWJzY3JpYmVkIGFuZCBmdXR1cmUgb2JzZXJ2ZXJzLCBzdWJqZWN0IHRvIGJ1ZmZlciB0cmltbWluZyBwb2xpY2llcy5cbiAgICovXG4gIHZhciBSZXBsYXlTdWJqZWN0ID0gUnguUmVwbGF5U3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG5cbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdygyLCA1MykgLSAxO1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZShzdWJqZWN0LCBvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBvYnNlcnZlci5kaXNwb3NlKCk7XG4gICAgICAgICFzdWJqZWN0LmlzRGlzcG9zZWQgJiYgc3ViamVjdC5vYnNlcnZlcnMuc3BsaWNlKHN1YmplY3Qub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpLCAxKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFJlcGxheVN1YmplY3QsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiAgSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIFJlcGxheVN1YmplY3QgY2xhc3Mgd2l0aCB0aGUgc3BlY2lmaWVkIGJ1ZmZlciBzaXplLCB3aW5kb3cgc2l6ZSBhbmQgc2NoZWR1bGVyLlxuICAgICAqICBAcGFyYW0ge051bWJlcn0gW2J1ZmZlclNpemVdIE1heGltdW0gZWxlbWVudCBjb3VudCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICAgKiAgQHBhcmFtIHtOdW1iZXJ9IFt3aW5kb3dTaXplXSBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRoZSBvYnNlcnZlcnMgYXJlIGludm9rZWQgb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyU2l6ZSA9IGJ1ZmZlclNpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogYnVmZmVyU2l6ZTtcbiAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemUgPT0gbnVsbCA/IG1heFNhZmVJbnRlZ2VyIDogd2luZG93U2l6ZTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyIHx8IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXI7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoUmVwbGF5U3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgdmFyIHNvID0gbmV3IFNjaGVkdWxlZE9ic2VydmVyKHRoaXMuc2NoZWR1bGVyLCBvKSwgc3Vic2NyaXB0aW9uID0gY3JlYXRlUmVtb3ZhYmxlRGlzcG9zYWJsZSh0aGlzLCBzbyk7XG5cbiAgICAgICAgdGhpcy5fdHJpbSh0aGlzLnNjaGVkdWxlci5ub3coKSk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc28pO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLnEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBzby5vbk5leHQodGhpcy5xW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgc28ub25FcnJvcih0aGlzLmVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHNvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBzby5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIF90cmltOiBmdW5jdGlvbiAobm93KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLnEubGVuZ3RoID4gdGhpcy5idWZmZXJTaXplKSB7XG4gICAgICAgICAgdGhpcy5xLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHRoaXMucS5sZW5ndGggPiAwICYmIChub3cgLSB0aGlzLnFbMF0uaW50ZXJ2YWwpID4gdGhpcy53aW5kb3dTaXplKSB7XG4gICAgICAgICAgdGhpcy5xLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgYXJyaXZhbCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHRoaXMucS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHZhbHVlIH0pO1xuICAgICAgICB0aGlzLl90cmltKG5vdyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmVyID0gb3NbaV07XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB2YXIgbm93ID0gdGhpcy5zY2hlZHVsZXIubm93KCk7XG4gICAgICAgIHRoaXMuX3RyaW0obm93KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgdmFyIG9ic2VydmVyID0gb3NbaV07XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgb2JzZXJ2ZXIuZW5zdXJlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBVbnN1YnNjcmliZSBhbGwgb2JzZXJ2ZXJzIGFuZCByZWxlYXNlIHJlc291cmNlcy5cbiAgICAgICAqL1xuICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gUmVwbGF5U3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgdmFyIEFub255bW91c1N1YmplY3QgPSBSeC5Bbm9ueW1vdXNTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBbm9ueW1vdXNTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3Qob2JzZXJ2ZXIsIG9ic2VydmFibGUpIHtcbiAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEFub255bW91c1N1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGUuc3Vic2NyaWJlKG8pO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgIH0sXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uTmV4dCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICogVXNlZCB0byBwYXVzZSBhbmQgcmVzdW1lIHN0cmVhbXMuXG4gICovXG4gIFJ4LlBhdXNlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2VyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhdXNlcyB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICAgKi9cbiAgICBQYXVzZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkgeyB0aGlzLm9uTmV4dChmYWxzZSk7IH07XG5cbiAgICAvKipcbiAgICAqIFJlc3VtZXMgdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UuXG4gICAgKi9cbiAgICBQYXVzZXIucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHsgdGhpcy5vbk5leHQodHJ1ZSk7IH07XG5cbiAgICByZXR1cm4gUGF1c2VyO1xuICB9KFN1YmplY3QpKTtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcbiAgICByb290LlJ4ID0gUng7XG5cbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gUng7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuICAgIC8vIGluIE5vZGUuanMgb3IgUmluZ29KU1xuICAgIGlmIChtb2R1bGVFeHBvcnRzKSB7XG4gICAgICAoZnJlZU1vZHVsZS5leHBvcnRzID0gUngpLlJ4ID0gUng7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyZWVFeHBvcnRzLlJ4ID0gUng7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGluIGEgYnJvd3NlciBvciBSaGlub1xuICAgIHJvb3QuUnggPSBSeDtcbiAgfVxuXG4gIC8vIEFsbCBjb2RlIGJlZm9yZSB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMuXG4gIHZhciByRW5kaW5nTGluZSA9IGNhcHR1cmVMaW5lKCk7XG5cbn0uY2FsbCh0aGlzKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZiAoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcblx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn07XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiaW1wb3J0IHsgRmlsZUxvYWRlciB9IGZyb20gXCIuL1ZpZXdMb2FkZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmlld0ZpbGU6IHN0cmluZztcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgbG9hZGVyOiBGaWxlTG9hZGVyO1xyXG4gICAgcHJpdmF0ZSBlbGVtZW50OiBFbGVtZW50IHwgbnVsbDtcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHZpZXdGaWxlOiBzdHJpbmcsIGxvYWRlcjogRmlsZUxvYWRlcikge1xyXG4gICAgICAgIHRoaXMudmlld0ZpbGUgPSB2aWV3RmlsZTtcclxuICAgICAgICB0aGlzLmxvYWRlciA9IGxvYWRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZSh2aWV3RmlsZTogc3RyaW5nLCBsb2FkZXI6IEZpbGVMb2FkZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZpZXcodmlld0ZpbGUsIGxvYWRlcik7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZCgpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHN0cmluZ3ZhbCA9IGF3YWl0IHRoaXMubG9hZGVyLmxvYWQodGhpcy52aWV3RmlsZSk7XHJcbiAgICAgICAgbGV0IHZpZXcgPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHN0cmluZ3ZhbCwgXCJ0ZXh0L2h0bWxcIikuZmlyc3RDaGlsZCBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKCF2aWV3KSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBsb2FkIHZpZXcgZnJvbSBcIiArIHRoaXMudmlld0ZpbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGJvZHkgPSB2aWV3LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5Jyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gYm9keSAmJiBib2R5WzBdLmZpcnN0RWxlbWVudENoaWxkID8gYm9keVswXS5maXJzdEVsZW1lbnRDaGlsZCA6IHZpZXc7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgTGF6eTxUPiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZhY3Rvcnk6ICgpID0+IFQ7IFxyXG4gICAgcHJpdmF0ZSB2YWx1ZTogVCB8IG51bGw7XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihmYWN0b3J5OiAoKSA9PiBUKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgVmFsdWUoKTogVCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgfHwgKHRoaXMudmFsdWUgPSB0aGlzLmZhY3RvcnkoKSk7IFxyXG4gICAgfVxyXG5cclxuICAgIGdldCBJc0NyZWF0ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENyZWF0ZTxUPihmYWN0b3J5OiAoKSA9PiBUKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBMYXp5PFQ+KGZhY3RvcnkpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmlldyB9IGZyb20gXCIuLi9WaWV3L1ZpZXdcIlxyXG5pbXBvcnQgeyBGaWxlTG9hZGVyIH0gZnJvbSBcIi4uL1ZpZXcvVmlld0xvYWRlclwiXHJcbmltcG9ydCB7IEVkaXRFbnRyeVZpZXdNb2RlbCB9IGZyb20gXCIuLi9WaWV3TW9kZWxzL0VkaXRFbnRyeVZpZXdNb2RlbFwiXHJcbmltcG9ydCB7IExhenkgfSBmcm9tIFwiLi4vQ29yZS9MYXp5L0xhenlcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0RW50cnlDb250cm9sbGVyIHtcclxuXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IFZpZXdGaWxlID0gXCJFZGl0RW50cnlDYXJkVmlldy5odG1sXCJcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmlld01vZGVsOiBFZGl0RW50cnlWaWV3TW9kZWxcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogTGF6eTxQcm9taXNlPEVsZW1lbnQ+PlxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxvYWRlcjogRmlsZUxvYWRlciwgdmlld01vZGVsOiBFZGl0RW50cnlWaWV3TW9kZWwpIHtcclxuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IHZpZXdNb2RlbFxyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IExhenkuQ3JlYXRlKCgpID0+IFZpZXcuY3JlYXRlKHRoaXMuVmlld0ZpbGUsIGxvYWRlcikubG9hZCgpKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyByZW1vdmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5Jc0NyZWF0ZWQpIHtcclxuICAgICAgICAgICAgKGF3YWl0IHRoaXMuZWxlbWVudC5WYWx1ZSkucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEludG9QYXJlbnQocGFyZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGF3YWl0IHRoaXMucmVtb3ZlKClcclxuICAgICAgICBsZXQgZWxlbWVudCA9IGF3YWl0IHRoaXMuZWxlbWVudC5WYWx1ZTtcclxuXHJcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpXHJcblxyXG4gICAgICAgIGxldCBhbnN3ZXJWaWV3ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRbaWQ9J2Fuc3dlcklucHV0J11cIikgYXMgSFRNTElucHV0RWxlbWVudFxyXG4gICAgICAgIGxldCBxdWVzdGlvblZpZXcgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFtpZD0ncXVlc3Rpb25JbnB1dCddXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnRcclxuXHJcbiAgICAgICAgaWYgKCFhbnN3ZXJWaWV3IHx8ICFxdWVzdGlvblZpZXcpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBhbGwgY2hpbGRyZW4gaW4gdmlldy5cIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudmlld01vZGVsLmFuc3dlci5zdWJzY3JpYmUoYW5zd2VyID0+IHtcclxuICAgICAgICAgICAgYW5zd2VyVmlldy52YWx1ZSA9IGFuc3dlclxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMudmlld01vZGVsLnF1ZXN0aW9uLnN1YnNjcmliZShxdWVzdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIHF1ZXN0aW9uVmlldy52YWx1ZSA9IHF1ZXN0aW9uXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgYW5zd2VyVmlldy5vbmNoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5zZXRBbnN3ZXIoYW5zd2VyVmlldy52YWx1ZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHF1ZXN0aW9uVmlldy5vbmNoYW5nZSA9IGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5zZXRRdWVzdGlvbihxdWVzdGlvblZpZXcudmFsdWUpIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNhdmVCdXR0b24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25baWQ9J3NhdmVFbnRyeSddXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuc2F2ZSgpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnZpZXdNb2RlbC5jYW5FeGVjdXRlU2F2ZS5zdWJzY3JpYmUoY2FuRXhlY3V0ZSA9PiB7XHJcbiAgICAgICAgICAgIHNhdmVCdXR0b24uZGlzYWJsZWQgPSAhY2FuRXhlY3V0ZVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIGxldCBjYW5jZWxCdXR0b24gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25baWQ9J2NhbmNlbCddXCIpIGFzIEhUTUxCdXR0b25FbGVtZW50XHJcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5jYW5jZWwoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4XCJcclxuXHJcbmV4cG9ydCBjbGFzcyBGbGFzaENhcmRWaWV3TW9kZWwge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZWxlY3RlZFN1YmplY3Q6IFN1YmplY3Q8Rmxhc2hDYXJkVmlld01vZGVsPiA9IG5ldyBTdWJqZWN0KCkgIFxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcXVlc3Rpb246IHN0cmluZ1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBfYW5zd2VyOiBzdHJpbmdcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9xdWVzdGlvbiA9IHF1ZXN0aW9uXHJcbiAgICAgICAgdGhpcy5fYW5zd2VyID0gYW5zd2VyXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzZWxlY3RlZCgpOiBPYnNlcnZhYmxlPEZsYXNoQ2FyZFZpZXdNb2RlbD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkU3ViamVjdC5hc09ic2VydmFibGUoKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcXVlc3Rpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVlc3Rpb25cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGFuc3dlcigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hbnN3ZXJcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VsZWN0KCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTdWJqZWN0Lm9uTmV4dCh0aGlzKVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi4vVmlldy9WaWV3XCJcclxuaW1wb3J0IHsgRmlsZUxvYWRlciB9IGZyb20gXCIuLi9WaWV3L1ZpZXdMb2FkZXJcIlxyXG5pbXBvcnQgeyBGbGFzaENhcmRWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9GbGFzaENhcmRWaWV3TW9kZWxcIlxyXG5pbXBvcnQgeyBMYXp5IH0gZnJvbSBcIi4uL0NvcmUvTGF6eS9MYXp5XCJcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSBcInJ4XCJcclxuXHJcbmV4cG9ydCBjbGFzcyBGbGFzaENhcmRDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVmlld0ZpbGUgPSBcIkNhcmRWaWV3Lmh0bWxcIlxyXG4gICAgcHJpdmF0ZSByZWFkb25seSB2aWV3OiBWaWV3XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVsZW1lbnQ6IExhenk8UHJvbWlzZTxIVE1MRWxlbWVudD4+XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHZpZXdNb2RlbFN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxGbGFzaENhcmRWaWV3TW9kZWw+XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNlbGVjdGVkQmVoYXZpb3I6IFN1YmplY3Q8Rmxhc2hDYXJkVmlld01vZGVsPiA9IG5ldyBTdWJqZWN0KClcclxuICAgIHByaXZhdGUgdmlld3M6IFZpZXdIb2xkZXIgPSBuZXcgVmlld0hvbGRlcigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxvYWRlcjogRmlsZUxvYWRlcikge1xyXG4gICAgICAgIHRoaXMudmlldyA9IFZpZXcuY3JlYXRlKHRoaXMuVmlld0ZpbGUsIGxvYWRlcilcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBMYXp5LkNyZWF0ZShhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnZpZXcubG9hZCgpIGFzIEhUTUxFbGVtZW50KVxyXG4gICAgICAgIHRoaXMudmlld01vZGVsU3ViamVjdCA9IG5ldyBCZWhhdmlvclN1YmplY3QobmV3IEZsYXNoQ2FyZFZpZXdNb2RlbChcIlwiLCBcIlwiKSlcclxuXHJcbiAgICAgICAgdGhpcy52aWV3TW9kZWxTdWJqZWN0LnN1YnNjcmliZSh2bSA9PiB0aGlzLm9uVmlld01vZGVsQ2hhbmdlZCh2bSkpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzZWxlY3RlZCgpOiBPYnNlcnZhYmxlPEZsYXNoQ2FyZFZpZXdNb2RlbD4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkQmVoYXZpb3IuYXNPYnNlcnZhYmxlKCkgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB2aWV3TW9kZWwodmlld01vZGVsOiBGbGFzaENhcmRWaWV3TW9kZWwpIHtcclxuICAgICAgICB0aGlzLnZpZXdNb2RlbFN1YmplY3Qub25OZXh0KHZpZXdNb2RlbClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHZpZXdNb2RlbCgpOiBGbGFzaENhcmRWaWV3TW9kZWwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbFN1YmplY3QuZ2V0VmFsdWUoKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBkZXRhY2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5Jc0NyZWF0ZWQpIHtcclxuICAgICAgICAgICAgKGF3YWl0IHRoaXMuZWxlbWVudC5WYWx1ZSkucmVtb3ZlKClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEludG9QYXJlbnQocGFyZW50OiBFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5kZXRhY2goKVxyXG5cclxuICAgICAgICBsZXQgZWxlbWVudCA9IGF3YWl0IHRoaXMuZWxlbWVudC5WYWx1ZVxyXG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbGVtZW50KVxyXG5cclxuICAgICAgICBsZXQgcXVlc3Rpb25WaWV3ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3F1ZXN0aW9uVGV4dFwiKSBhcyBIVE1MU3BhbkVsZW1lbnRcclxuICAgICAgICBsZXQgYW5zd2VyVmlldyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbnN3ZXJUZXh0XCIpIGFzIEhUTUxTcGFuRWxlbWVudFxyXG5cclxuICAgICAgICBpZiAoIXF1ZXN0aW9uVmlldyB8fCAhYW5zd2VyVmlldykge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkNvdWxkIG5vdCBmaW5kIGFsbCBleHBlY3RlZCBjaGlsZHJlbiBpbiB2aWV3LlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy52aWV3cyA9IG5ldyBGbGFzaENhcmRWaWV3SG9sZGVyKGVsZW1lbnQsIHF1ZXN0aW9uVmlldywgYW5zd2VyVmlldylcclxuICAgICAgICB0aGlzLm9uVmlld01vZGVsQ2hhbmdlZCh0aGlzLnZpZXdNb2RlbFN1YmplY3QuZ2V0VmFsdWUoKSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uVmlld01vZGVsQ2hhbmdlZCh2aWV3TW9kZWw6IEZsYXNoQ2FyZFZpZXdNb2RlbCkge1xyXG4gICAgICAgIHRoaXMudmlld3MucXVlc3Rpb24gPSB2aWV3TW9kZWwucXVlc3Rpb25cclxuICAgICAgICB0aGlzLnZpZXdzLmFuc3dlciA9IHZpZXdNb2RlbC5hbnN3ZXJcclxuICAgICAgICB0aGlzLnZpZXdzLmNsaWNrSGFuZGxlciA9ICgpID0+IHZpZXdNb2RlbC5zZWxlY3QoKVxyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBWaWV3SG9sZGVyIHtcclxuICAgIHNldCBxdWVzdGlvbihxdWVzdGlvbjogc3RyaW5nKSB7IH1cclxuICAgIHNldCBhbnN3ZXIoYW5zd2VyOiBzdHJpbmcpIHsgfVxyXG4gICAgc2V0IGNsaWNrSGFuZGxlcihvbkNsaWNrOiAoKSA9PiB2b2lkKSB7IH1cclxufSAgXHJcblxyXG5jbGFzcyBGbGFzaENhcmRWaWV3SG9sZGVyIGV4dGVuZHMgVmlld0hvbGRlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHF1ZXN0aW9uRWxlbWVudDogSFRNTFNwYW5FbGVtZW50XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGFuc3dlckVsZW1lbnQ6IEhUTUxTcGFuRWxlbWVudFxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudFxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBhcmVudDogSFRNTEVsZW1lbnQsIHF1ZXN0aW9uOiBIVE1MU3BhbkVsZW1lbnQsIGFuc3dlcjogSFRNTFNwYW5FbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIHRoaXMucXVlc3Rpb25FbGVtZW50ID0gcXVlc3Rpb25cclxuICAgICAgICB0aGlzLmFuc3dlckVsZW1lbnQgPSBhbnN3ZXJcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBwYXJlbnRcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHF1ZXN0aW9uKHF1ZXN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnF1ZXN0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHF1ZXN0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBhbnN3ZXIoYW5zd2VyOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmFuc3dlckVsZW1lbnQudGV4dENvbnRlbnQgPSBhbnN3ZXJcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGNsaWNrSGFuZGxlcihvbkNsaWNrOiAoKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50Lm9uY2xpY2sgPSBvbkNsaWNrXHJcbiAgICB9XHJcbn0gXHJcbiIsImltcG9ydCB7IFZpZXcgfSBmcm9tIFwiLi4vVmlldy9WaWV3XCJcclxuaW1wb3J0IHsgRmlsZUxvYWRlciB9IGZyb20gXCIuLi9WaWV3L1ZpZXdMb2FkZXJcIlxyXG5pbXBvcnQgeyBFZGl0RW50cnlDb250cm9sbGVyIH0gZnJvbSBcIi4vRWRpdEVudHJ5Q29udHJvbGxlclwiXHJcbmltcG9ydCB7IEVkaXRvclBhZ2VWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9FZGl0b3JQYWdlVmlld01vZGVsXCJcclxuaW1wb3J0IHsgRmxhc2hDYXJkQ29udHJvbGxlciB9IGZyb20gXCIuL0ZsYXNoQ2FyZENvbnRyb2xsZXJcIlxyXG5pbXBvcnQgeyBGbGFzaENhcmRWaWV3TW9kZWwgfSBmcm9tIFwiLi4vVmlld01vZGVscy9GbGFzaENhcmRWaWV3TW9kZWxcIlxyXG5pbXBvcnQgeyBMYXp5IH0gZnJvbSBcIi4uL0NvcmUvTGF6eS9MYXp5XCJcclxuaW1wb3J0IHsgRWRpdEVudHJ5Vmlld01vZGVsIH0gZnJvbSBcIi4uL1ZpZXdNb2RlbHMvRWRpdEVudHJ5Vmlld01vZGVsXCI7XHJcbmltcG9ydCB7IENvbXBvc2l0ZURpc3Bvc2FibGUgfSBmcm9tIFwicnhcIlxyXG5cclxuZXhwb3J0IGNsYXNzIEVkaXRvclBhZ2VDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgVmlld0ZpbGUgPSBcIkVkaXRvclBhZ2UuaHRtbFwiXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGxvYWRlcjogRmlsZUxvYWRlclxyXG4gICAgcHJpdmF0ZSByZWFkb25seSB2aWV3TW9kZWw6IEVkaXRvclBhZ2VWaWV3TW9kZWxcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogTGF6eTxQcm9taXNlPEVsZW1lbnQ+PlxyXG4gICAgcHJpdmF0ZSBlZGl0b3JWaWV3OiBFZGl0RW50cnlDb250cm9sbGVyIHwgbnVsbFxyXG4gICAgcHJpdmF0ZSBjYXJkVmlld3M6IEZsYXNoQ2FyZENvbnRyb2xsZXJbXSA9IFtdXHJcblxyXG4gICAgY29uc3RydWN0b3IobG9hZGVyOiBGaWxlTG9hZGVyLCB2aWV3TW9kZWw6IEVkaXRvclBhZ2VWaWV3TW9kZWwpIHtcclxuICAgICAgICB0aGlzLmxvYWRlciA9IGxvYWRlclxyXG4gICAgICAgIHRoaXMudmlld01vZGVsID0gdmlld01vZGVsXHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gTGF6eS5DcmVhdGUoYXN5bmMgKCkgPT4gYXdhaXQgVmlldy5jcmVhdGUodGhpcy5WaWV3RmlsZSwgbG9hZGVyKS5sb2FkKCkpXHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZEludG9QYXJlbnQocGFyZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGxldCBlbGVtZW50ID0gYXdhaXQgdGhpcy5lbGVtZW50LlZhbHVlXHJcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpXHJcblxyXG4gICAgICAgIGxldCBlZGl0b3JDb250YWluZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXZbaWQ9J2VkaXRvckNvbnRhaW5lciddXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnRcclxuICAgICAgICBsZXQgY2FyZHNDb250YWluZXIgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXZbaWQ9J2NhcmRzQ29udGFpbmVyJ11cIikgYXMgSFRNTElucHV0RWxlbWVudFxyXG5cclxuICAgICAgICBsZXQgZmFiRGl2ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2W2lkPSdhZGRFbnRyeUJ1dHRvbidcIikgYXMgSFRNTERpdkVsZW1lbnRcclxuICAgICAgICBsZXQgZmFiID0gTS5GbG9hdGluZ0FjdGlvbkJ1dHRvbi5pbml0KGZhYkRpdilcclxuXHJcbiAgICAgICAgaWYgKCFlZGl0b3JDb250YWluZXIgfHwgIWNhcmRzQ29udGFpbmVyIHx8ICFmYWIpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBhbGwgdmlld3MgaW4gbGF5b3V0LlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmFiRGl2Lm9uY2xpY2sgPSBlID0+IHRoaXMudmlld01vZGVsLmFkZENhcmQoKVxyXG5cclxuICAgICAgICB0aGlzLnZpZXdNb2RlbC5mbGFzaENhcmRzLnN1YnNjcmliZShjYXJkcyA9PiB0aGlzLnVwZGF0ZUZsYXNoQ2FyZHNMaXN0KGNhcmRzLCBjYXJkc0NvbnRhaW5lcikpXHJcblxyXG4gICAgICAgIHRoaXMudmlld01vZGVsLmVkaXRpbmdFbnRyeS5zdWJzY3JpYmUoYXN5bmMgZWRpdGluZyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlZGl0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uRWRpdGluZ1N0YXJ0ZWQoZWRpdG9yQ29udGFpbmVyLCBlZGl0aW5nKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWRpdG9yVmlldykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbmlzaEVkaXRpbmcoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgYXdhaXQgdGhpcy52aWV3TW9kZWwubG9hZCgpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBvbkVkaXRpbmdTdGFydGVkKGVkaXRvckNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGVkaXRvcjogRWRpdEVudHJ5Vmlld01vZGVsKSB7XHJcbiAgICAgICAgbGV0IGVkaXRvclZpZXcgPSBuZXcgRWRpdEVudHJ5Q29udHJvbGxlcih0aGlzLmxvYWRlciwgZWRpdG9yKSBcclxuICAgICAgICBhd2FpdCBlZGl0b3JWaWV3LmxvYWRJbnRvUGFyZW50KGVkaXRvckNvbnRhaW5lcilcclxuICAgICAgICB0aGlzLmVkaXRvclZpZXcgPSBlZGl0b3JWaWV3XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBkZXRhY2hNYXRjaGluZ0NhcmQodXBkYXRpbmdDYXJkOiBGbGFzaENhcmRWaWV3TW9kZWwpOiBQcm9taXNlPG51bWJlcj4ge1xyXG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgbWF0Y2hpbmcgY2FyZCB3aXRoIHRoZSBlZGl0YWJsZSB2ZXJzaW9uLlxyXG4gICAgICAgIGxldCBlZGl0aW5nVmlld0luZGV4ID0gdGhpcy5jYXJkVmlld3MuZmluZEluZGV4KGNhcmRWaWV3ID0+IGNhcmRWaWV3LnZpZXdNb2RlbCA9PT0gdXBkYXRpbmdDYXJkKVxyXG4gICAgICAgIGlmIChlZGl0aW5nVmlld0luZGV4IDwgMCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIkF0dGVtcHRpbmcgdG8gZWRpdCB1bmtub3duIEVudHJ5LlwiKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGVkaXRpbmdWaWV3ID0gdGhpcy5jYXJkVmlld3NbZWRpdGluZ1ZpZXdJbmRleF07XHJcbiAgICAgICAgYXdhaXQgZWRpdGluZ1ZpZXcuZGV0YWNoKClcclxuXHJcbiAgICAgICAgcmV0dXJuIGVkaXRpbmdWaWV3SW5kZXhcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIG9uRmluaXNoRWRpdGluZygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZWRpdG9yVmlldykge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGF3YWl0IHRoaXMuZWRpdG9yVmlldy5yZW1vdmUoKVxyXG4gICAgICAgIHRoaXMuZWRpdG9yVmlldyA9IG51bGxcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZUZsYXNoQ2FyZHNMaXN0KGNhcmRzOiBGbGFzaENhcmRWaWV3TW9kZWxbXSwgcGFnZUNvbnRhaW5lcjogRWxlbWVudCkge1xyXG4gICAgICAgIGxldCBjaGFuZ2VzID0gY2FyZHMubGVuZ3RoIC0gdGhpcy5jYXJkVmlld3MubGVuZ3RoXHJcbiAgICAgICAgaWYgKGNoYW5nZXMgPCAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgY2FyZHMuXHJcbiAgICAgICAgICAgIHZhciBpID0gY2hhbmdlc1xyXG4gICAgICAgICAgICB3aGlsZSAoaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCB2aWV3ID0gdGhpcy5jYXJkVmlld3MucG9wKClcclxuICAgICAgICAgICAgICAgIGlmICghdmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRyb2xsZXIgdW5kZWZpbmVkIHdoZW4gYXR0ZW1wdGluZyB0byByZW1vdmUuXCIpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmlldy5kZXRhY2goKVxyXG4gICAgICAgICAgICAgICAgKytpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKGNoYW5nZXMgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGFkZGVkIGNhcmRzLlxyXG4gICAgICAgICAgICB2YXIgaSA9IDBcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBjaGFuZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2FyZFZpZXcgPSBuZXcgRmxhc2hDYXJkQ29udHJvbGxlcih0aGlzLmxvYWRlcilcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNhcmRWaWV3LmxvYWRJbnRvUGFyZW50KHBhZ2VDb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRWaWV3cy5wdXNoKGNhcmRWaWV3KVxyXG4gICAgICAgICAgICAgICAgKytpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNhcmRWaWV3cy5sZW5ndGggIT0gY2FyZHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiVmlld01vZGVsIGFuZCBWaWV3IHNpemVzIGRvIG5vdCBtYXRjaC5cIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2aWV3cyA9IHRoaXMuY2FyZFZpZXdzW1N5bWJvbC5pdGVyYXRvcl0oKVxyXG4gICAgICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCB2aWV3ID0gdmlld3MubmV4dCgpLnZhbHVlXHJcbiAgICAgICAgICAgIHZpZXcudmlld01vZGVsID0gY2FyZFxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0gXHJcbiIsImltcG9ydCB7IER0byB9IGZyb20gXCIuL0R0b1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBPYmplY3RTdG9yZTxURHRvIGV4dGVuZHMgRHRvPiB7XHJcbiAgICBzYXZlKGR0bzogVER0byk6IFByb21pc2U8VER0bz5cclxuICAgIGdldEFsbCgpOiBQcm9taXNlPFREdG9bXT5cclxufVxyXG5cclxuY2xhc3MgQXV0b0luY3JlbWVudFN0b3JlPFREdG8gZXh0ZW5kcyBEdG8+IHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZGJQcm92aWRlcjogSURCRmFjdG9yeTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmVyc2lvbjogbnVtYmVyXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHN0b3JlTmFtZTogc3RyaW5nXHJcblxyXG4gICAgY29uc3RydWN0b3IoZGJQcm92aWRlcjogSURCRmFjdG9yeSwgc3RvcmVOYW1lOiBzdHJpbmcsIHZlcnNpb246IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuZGJQcm92aWRlciA9IGRiUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvblxyXG4gICAgICAgIHRoaXMuc3RvcmVOYW1lID0gc3RvcmVOYW1lXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNhdmUoZHRvOiBURHRvKTogUHJvbWlzZTxURHRvPiB7XHJcbiAgICAgICAgbGV0IGRiID0gYXdhaXQgdGhpcy5vcGVuKCk7XHJcbiAgICAgICAgbGV0IHRyYW5zYWN0aW9uID0gZGIudHJhbnNhY3Rpb24oXCJFbnRyaWVzXCIsIFwicmVhZHdyaXRlXCIpO1xyXG4gICAgICAgIGxldCBlbnRyaWVzU3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShcIkVudHJpZXNcIik7XHJcblxyXG4gICAgICAgIGxldCByZXF1ZXN0OiBJREJSZXF1ZXN0PElEQlZhbGlkS2V5PlxyXG4gICAgICAgIGlmICghZHRvLmlkKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZGluZyBhIG5ldyBpdGVtLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgdG91Y2ggb2YgaGFja2VyeSB0aGF0IHNpbXBseSBjb3BpZXMgdGhlIERUTyBhbmQgcmVtb3ZlcyB0aGUgXCJpZFwiIHByb3BlcnR5IFxyXG4gICAgICAgICAgICAvLyB0byBjb21wbHkgd2l0aCB0aGUgYWRkKCkgbWV0aG9kLCB3aGljaCBleHBlY3RzIHRoZSBrZXkgcGF0aCAoaWQgaW4gdGhpcyBjYXNlKSB0byBiZSBtaXNzaW5nLlxyXG4gICAgICAgICAgICBsZXQgYWRkaW5nID0gT2JqZWN0LmFzc2lnbih7fSwgZHRvKVxyXG4gICAgICAgICAgICBkZWxldGUgYWRkaW5nW1wiaWRcIl1cclxuICAgICAgICAgICAgcmVxdWVzdCA9IGVudHJpZXNTdG9yZS5hZGQoYWRkaW5nKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFVwZGF0aW5nIGFuIGV4aXN0aW5nIGl0ZW0uXHJcbiAgICAgICAgICAgIHJlcXVlc3QgPSBlbnRyaWVzU3RvcmUucHV0KGR0bylcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxURHRvPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGR0by5pZCA9IDxudW1iZXI+cmVxdWVzdC5yZXN1bHRcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZHRvKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGdldEFsbCgpOiBQcm9taXNlPFREdG9bXT4ge1xyXG4gICAgICAgIGxldCBkYiA9IGF3YWl0IHRoaXMub3BlbigpO1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gZGIudHJhbnNhY3Rpb24odGhpcy5zdG9yZU5hbWUpLm9iamVjdFN0b3JlKHRoaXMuc3RvcmVOYW1lKS5nZXRBbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPFREdG9bXT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IHggPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdFNldDogVER0b1tdID0gcmVxdWVzdC5yZXN1bHQgYXMgVER0b1tdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHRTZXQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlbigpOiBQcm9taXNlPElEQkRhdGFiYXNlPiB7XHJcbiAgICAgICAgbGV0IHJlcXVlc3QgPSB0aGlzLmRiUHJvdmlkZXIub3BlbihcIkZsYXNoQ2FyZHNcIiwgdGhpcy52ZXJzaW9uKVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUodGhpcy5zdG9yZU5hbWUsIHsgYXV0b0luY3JlbWVudDogdHJ1ZSwga2V5UGF0aDogXCJpZFwiIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIGlmIChkYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IG9wZW4gRmxhc2hDYXJkcyBkYXRhYmFzZS5cIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RTdG9yZUZhY3Rvcnkge1xyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVBdXRvSW5jcmVtZW50U3RvcmU8VER0byBleHRlbmRzIER0bz4oZGJQcm92aWRlcjogSURCRmFjdG9yeSwgc3RvcmVOYW1lOiBzdHJpbmcsIHZlcnNpb246IG51bWJlcik6IE9iamVjdFN0b3JlPFREdG8+IHtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dG9JbmNyZW1lbnRTdG9yZShkYlByb3ZpZGVyLCBzdG9yZU5hbWUsIHZlcnNpb24pIFxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgT2JqZWN0U3RvcmUsIE9iamVjdFN0b3JlRmFjdG9yeSB9IGZyb20gXCIuLi8uLi9Db3JlL0RhdGEvT2JqZWN0U3RvcmVcIjtcclxuaW1wb3J0IHsgRHRvIH0gZnJvbSBcIi4uLy4uL0NvcmUvRGF0YS9EdG9cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFbnRyeSB7XHJcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IG51bWJlciB8IG51bGxcclxuICAgIHB1YmxpYyByZWFkb25seSBxdWVzdGlvbjogRW50cnlRdWVzdGlvblxyXG4gICAgcHVibGljIHJlYWRvbmx5IGFuc3dlcjogRW50cnlBbnN3ZXJcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHF1ZXN0aW9uOiBFbnRyeVF1ZXN0aW9uLCBhbnN3ZXI6IEVudHJ5QW5zd2VyLCBpZD86IG51bWJlciB8IG51bGwpIHtcclxuICAgICAgICB0aGlzLnF1ZXN0aW9uID0gcXVlc3Rpb25cclxuICAgICAgICB0aGlzLmFuc3dlciA9IGFuc3dlclxyXG4gICAgICAgIHRoaXMuaWQgPSBpZCB8fCBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21EdG8oZHRvOiBFbnRyeURhdGEpOiBFbnRyeSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbnRyeShcclxuICAgICAgICAgICAgRW50cnlRdWVzdGlvbi5mcm9tU3RyaW5nKGR0by5xdWVzdGlvbiksXHJcbiAgICAgICAgICAgIEVudHJ5QW5zd2VyLmZyb21TdHJpbmcoZHRvLmFuc3dlciksXHJcbiAgICAgICAgICAgIGR0by5pZClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TXV0YWJsZUNvcHkoKTogTXV0YWJsZUVudHJ5IHtcclxuICAgICAgICByZXR1cm4gTXV0YWJsZUVudHJ5LmZyb21EYXRhKG5ldyBFbnRyeURhdGEoeyBpZDogdGhpcy5pZCwgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24udmFsdWUsIGFuc3dlcjogdGhpcy5hbnN3ZXIudmFsdWUgfSkpXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBNdXRhYmxlRW50cnkge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpZDogbnVtYmVyIHwgbnVsbFxyXG4gICAgcHVibGljIHF1ZXN0aW9uOiBzdHJpbmdcclxuICAgIHB1YmxpYyBhbnN3ZXI6IHN0cmluZ1xyXG5cclxuICAgIHByaXZhdGUgY29uc3RydWN0b3IocXVlc3Rpb246IHN0cmluZywgYW5zd2VyOiBzdHJpbmcsIGlkPzogbnVtYmVyIHwgbnVsbCkge1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb24gPSBxdWVzdGlvblxyXG4gICAgICAgIHRoaXMuYW5zd2VyID0gYW5zd2VyXHJcbiAgICAgICAgdGhpcy5pZCA9IGlkIHx8IG51bGxcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXNFbnRyeSgpIHtcclxuICAgICAgICByZXR1cm4gRW50cnkuZnJvbUR0byhuZXcgRW50cnlEYXRhKHsgaWQ6IHRoaXMuaWQsIHF1ZXN0aW9uOiB0aGlzLnF1ZXN0aW9uLCBhbnN3ZXI6IHRoaXMuYW5zd2VyIH0pKVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmcm9tRGF0YShkYXRhOiBFbnRyeURhdGEpOiBNdXRhYmxlRW50cnkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXV0YWJsZUVudHJ5KGRhdGEucXVlc3Rpb24sIGRhdGEuYW5zd2VyLCBkYXRhLmlkKVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW50cnlRdWVzdGlvbiB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IF92YWx1ZTogc3RyaW5nXHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgdmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlXHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGZyb21TdHJpbmcodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW50cnlRdWVzdGlvbih2YWx1ZSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVudHJ5QW5zd2VyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3ZhbHVlOiBzdHJpbmdcclxuXHJcbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB2YWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWVcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZnJvbVN0cmluZyh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbnRyeUFuc3dlcih2YWx1ZSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVudHJ5U2VydmljZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRhdGFiYXNlVmVyc2lvbjogbnVtYmVyID0gMTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3RvcmU6IE9iamVjdFN0b3JlPEVudHJ5RHRvPlxyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihkYlByb3ZpZGVyOiBJREJGYWN0b3J5KSB7XHJcbiAgICAgICAgdGhpcy5zdG9yZSA9IE9iamVjdFN0b3JlRmFjdG9yeS5jcmVhdGVBdXRvSW5jcmVtZW50U3RvcmUoZGJQcm92aWRlciwgXCJFbnRyaWVzXCIsIHRoaXMuZGF0YWJhc2VWZXJzaW9uKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKGVudHJ5OiBFbnRyeSk6IFByb21pc2U8RW50cnk+IHtcclxuICAgICAgICByZXR1cm4gRW50cnkuZnJvbUR0byhuZXcgRW50cnlEYXRhKGF3YWl0IHRoaXMuc3RvcmUuc2F2ZShFbnRyeVNlcnZpY2UuY3JlYXRlRW50cnlEdG8oZW50cnkpKSkpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUVudHJ5KHF1ZXN0aW9uOiBzdHJpbmcsIGFuc3dlcjogc3RyaW5nKTogRW50cnkge1xyXG4gICAgICAgIHJldHVybiBFbnRyeS5mcm9tRHRvKG5ldyBFbnRyeURhdGEoeyBpZDogbnVsbCwgcXVlc3Rpb246IHF1ZXN0aW9uLCBhbnN3ZXI6IGFuc3dlciB9KSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0QWxsKCk6IFByb21pc2U8RW50cnlbXT4ge1xyXG4gICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5zdG9yZS5nZXRBbGwoKSkubWFwKGR0byA9PiBFbnRyeS5mcm9tRHRvKG5ldyBFbnRyeURhdGEoZHRvKSkpXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlRW50cnlEdG8oZW50cnk6IEVudHJ5KTogRW50cnlEdG8ge1xyXG4gICAgICAgIHJldHVybiB7IGlkOiBlbnRyeS5pZCwgcXVlc3Rpb246IGVudHJ5LnF1ZXN0aW9uLnZhbHVlLCBhbnN3ZXI6IGVudHJ5LmFuc3dlci52YWx1ZSB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBFbnRyeUR0byBleHRlbmRzIER0byB7XHJcbiAgICByZWFkb25seSBpZDogbnVtYmVyIHwgbnVsbFxyXG4gICAgcmVhZG9ubHkgcXVlc3Rpb246IHN0cmluZ1xyXG4gICAgcmVhZG9ubHkgYW5zd2VyOiBzdHJpbmdcclxufVxyXG5cclxuY2xhc3MgRW50cnlEYXRhIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZHRvOiBFbnRyeUR0b1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGR0bzogRW50cnlEdG8pIHtcclxuICAgICAgICB0aGlzLmR0byA9IGR0b1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kdG8uaWRcclxuICAgIH1cclxuXHJcbiAgICBnZXQgcXVlc3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZHRvLnF1ZXN0aW9uXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGFuc3dlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kdG8uYW5zd2VyXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXRmOFBhcnNlciB7XHJcblxyXG4gICAgcHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBVdGY4QXJyYXlUb1N0cihhcnJheTogVWludDhBcnJheSk6IHN0cmluZyB7XHJcbiAgICAgICAgdmFyIG91dCwgaSwgbGVuLCBjO1xyXG4gICAgICAgIHZhciBjaGFyMiwgY2hhcjM7XHJcblxyXG4gICAgICAgIG91dCA9IFwiXCI7XHJcbiAgICAgICAgbGVuID0gYXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIGkgPSAwO1xyXG4gICAgICAgIHdoaWxlIChpIDwgbGVuKSB7XHJcbiAgICAgICAgICAgIGMgPSBhcnJheVtpKytdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGMgPj4gNCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IGNhc2UgMjogY2FzZSAzOiBjYXNlIDQ6IGNhc2UgNTogY2FzZSA2OiBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMHh4eHh4eHhcclxuICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTI6IGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMTEweCB4eHh4ICAgMTB4eCB4eHh4XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcjIgPSBhcnJheVtpKytdO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDB4MUYpIDw8IDYpIHwgKGNoYXIyICYgMHgzRikpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxNDpcclxuICAgICAgICAgICAgICAgICAgICAvLyAxMTEwIHh4eHggIDEweHggeHh4eCAgMTB4eCB4eHh4XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcjIgPSBhcnJheVtpKytdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXIzID0gYXJyYXlbaSsrXTtcclxuICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAweDBGKSA8PCAxMikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIyICYgMHgzRikgPDwgNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoKGNoYXIzICYgMHgzRikgPDwgMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVXRmOFBhcnNlciB9IGZyb20gXCIuLi9UZXh0VXRpbHMvVXRmOFBhcnNlclwiOyBcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUxvYWRlciB7XHJcbiAgICBsb2FkKGZpbGU6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVMb2FkZXJGYWN0b3J5IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRmV0Y2hIdG1sTG9hZGVyKGdsb2JhbEZldGNoOiBHbG9iYWxGZXRjaCk6IEZpbGVMb2FkZXIge1xyXG4gICAgICAgIHJldHVybiBuZXcgRmV0Y2hIdG1sTG9hZGVyKGdsb2JhbEZldGNoLCBcIi4vaHRtbC9cIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIEZldGNoSHRtbExvYWRlciBpbXBsZW1lbnRzIEZpbGVMb2FkZXIge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSByb290OiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGdsb2JhbEZldGNoOiBHbG9iYWxGZXRjaDtcclxuIFxyXG4gICAgY29uc3RydWN0b3IoZ2xvYmFsRmV0Y2g6IEdsb2JhbEZldGNoLCByb290OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnJvb3QgPSByb290O1xyXG4gICAgICAgIHRoaXMuZ2xvYmFsRmV0Y2ggPSBnbG9iYWxGZXRjaDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkKGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZmlsZVBhdGggPSB0aGlzLnJvb3QgKyBmaWxlTmFtZTtcclxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdsb2JhbEZldGNoLmZldGNoKGZpbGVQYXRoKTtcclxuICAgICAgICAvL2xldCByZXNwb25zZSA9IGF3YWl0IHdpbmRvdy5mZXRjaChmaWxlUGF0aCk7IC8vIFdvcmtzXHJcbiAgICAgICAgLy9sZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoRmlsZShmaWxlUGF0aCk7IC8vIERvZXNuJ3Qgd29ya1xyXG5cclxuICAgICAgICBpZiAoIXJlc3BvbnNlIHx8ICFyZXNwb25zZS5ib2R5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzdHJlYW0gPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xyXG4gICAgICAgIGxldCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCBzdHJlYW0ucmVhZCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gVXRmOFBhcnNlci5VdGY4QXJyYXlUb1N0cih2YWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFN1YmplY3QsIE9ic2VydmFibGUsIEJlaGF2aW9yU3ViamVjdCB9IGZyb20gXCJyeFwiXHJcbmltcG9ydCB7IEVudHJ5U2VydmljZSwgRW50cnkgfSBmcm9tIFwiLi4vU2VydmljZXMvRW50cmllcy9FbnRyeVNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0RW50cnlWaWV3TW9kZWwge1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBxdWVzdGlvblN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxzdHJpbmc+ID0gbmV3IEJlaGF2aW9yU3ViamVjdChcIlwiKVxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBhbnN3ZXJTdWJqZWN0OiBCZWhhdmlvclN1YmplY3Q8c3RyaW5nPiA9IG5ldyBCZWhhdmlvclN1YmplY3QoXCJcIilcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2FuRXhlY3V0ZVNhdmVTdWJqZWN0OiBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKVxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBpc0NhbmNlbGxlZFN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxib29sZWFuPiA9IG5ldyBCZWhhdmlvclN1YmplY3QoZmFsc2UpXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNhdmVkU3ViamVjdDogU3ViamVjdDxFbnRyeT4gPSBuZXcgU3ViamVjdCgpXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVudHJ5U2VydmljZTogRW50cnlTZXJ2aWNlXHJcbiAgICBwcml2YXRlIGVudHJ5OiBFbnRyeSB8IG51bGxcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZW50cnlTZXJ2aWNlOiBFbnRyeVNlcnZpY2UsIGVudHJ5PzogRW50cnkpIHtcclxuICAgICAgICB0aGlzLmVudHJ5U2VydmljZSA9IGVudHJ5U2VydmljZVxyXG4gICAgICAgIHRoaXMuZW50cnkgPSBlbnRyeSB8fCBudWxsXHJcblxyXG4gICAgICAgIGlmIChlbnRyeSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuc3dlclN1YmplY3Qub25OZXh0KGVudHJ5LmFuc3dlci52YWx1ZSlcclxuICAgICAgICAgICAgdGhpcy5xdWVzdGlvblN1YmplY3Qub25OZXh0KGVudHJ5LnF1ZXN0aW9uLnZhbHVlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYXZlZFN1YmplY3Quc3Vic2NyaWJlKGVudHJ5ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lbnRyeSA9IGVudHJ5XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYW5zd2VyLnN1YnNjcmliZShhbnN3ZXIgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbkV4ZWN1dGVTYXZlKClcclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICB0aGlzLnF1ZXN0aW9uLnN1YnNjcmliZShhbnN3ZXIgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbkV4ZWN1dGVTYXZlKClcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc2F2ZWQoKTogT2JzZXJ2YWJsZTxFbnRyeT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmVkU3ViamVjdC5hc09ic2VydmFibGUoKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaXNDYW5jZWxsZWQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDYW5jZWxsZWRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBhbnN3ZXIoKTogT2JzZXJ2YWJsZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hbnN3ZXJTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBxdWVzdGlvbigpOiBPYnNlcnZhYmxlPHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uU3ViamVjdC5hc09ic2VydmFibGUoKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2FuRXhlY3V0ZVNhdmUoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuRXhlY3V0ZVNhdmVTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEFuc3dlcih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hbnN3ZXJTdWJqZWN0Lm9uTmV4dCh2YWx1ZSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0UXVlc3Rpb24odmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMucXVlc3Rpb25TdWJqZWN0Lm9uTmV4dCh2YWx1ZSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMuaXNDYW5jZWxsZWRTdWJqZWN0Lm9uTmV4dCh0cnVlKVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdXBkYXRlQ2FuRXhlY3V0ZVNhdmUoKSB7XHJcbiAgICAgICAgdGhpcy5jYW5FeGVjdXRlU2F2ZVN1YmplY3Qub25OZXh0KCF0aGlzLmlzQ2FuY2VsbGVkU3ViamVjdC5nZXRWYWx1ZSgpICYmICEhdGhpcy5hbnN3ZXJTdWJqZWN0LmdldFZhbHVlKCkgJiYgISF0aGlzLnF1ZXN0aW9uU3ViamVjdC5nZXRWYWx1ZSgpKVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzYXZlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5jYW5FeGVjdXRlU2F2ZVN1YmplY3QuZ2V0VmFsdWUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlbnRyeTogRW50cnlcclxuICAgICAgICBpZiAodGhpcy5lbnRyeSkge1xyXG4gICAgICAgICAgICBsZXQgbXV0YWJsZSA9IHRoaXMuZW50cnkuZ2V0TXV0YWJsZUNvcHkoKVxyXG4gICAgICAgICAgICBtdXRhYmxlLnF1ZXN0aW9uID0gdGhpcy5xdWVzdGlvblN1YmplY3QuZ2V0VmFsdWUoKVxyXG4gICAgICAgICAgICBtdXRhYmxlLmFuc3dlciA9IHRoaXMuYW5zd2VyU3ViamVjdC5nZXRWYWx1ZSgpXHJcblxyXG4gICAgICAgICAgICBlbnRyeSA9IG11dGFibGUuYXNFbnRyeSgpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZW50cnkgPSB0aGlzLmVudHJ5U2VydmljZS5jcmVhdGVFbnRyeSh0aGlzLnF1ZXN0aW9uU3ViamVjdC5nZXRWYWx1ZSgpLCB0aGlzLmFuc3dlclN1YmplY3QuZ2V0VmFsdWUoKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc2F2ZWRTdWJqZWN0Lm9uTmV4dChhd2FpdCB0aGlzLmVudHJ5U2VydmljZS5zYXZlKGVudHJ5KSlcclxuICAgICAgICB0aGlzLnNldFF1ZXN0aW9uKFwiXCIpXHJcbiAgICAgICAgdGhpcy5zZXRBbnN3ZXIoXCJcIilcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCZWhhdmlvclN1YmplY3QsIENvbXBvc2l0ZURpc3Bvc2FibGUsIE9ic2VydmFibGUgfSBmcm9tIFwicnhcIjtcclxuaW1wb3J0IHsgRW50cnlTZXJ2aWNlLCBFbnRyeSB9IGZyb20gXCIuLi9TZXJ2aWNlcy9FbnRyaWVzL0VudHJ5U2VydmljZVwiO1xyXG5pbXBvcnQgeyBFZGl0RW50cnlWaWV3TW9kZWwgfSBmcm9tIFwiLi9FZGl0RW50cnlWaWV3TW9kZWxcIjtcclxuaW1wb3J0IHsgRmxhc2hDYXJkVmlld01vZGVsIH0gZnJvbSBcIi4vRmxhc2hDYXJkVmlld01vZGVsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdG9yUGFnZVZpZXdNb2RlbCB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGVudHJ5U2VydmljZTogRW50cnlTZXJ2aWNlXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNhbkV4ZWN1dGVBZGRDYXJkU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PGJvb2xlYW4+ID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0cnVlKVxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBlZGl0aW5nU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PEVkaXRFbnRyeVZpZXdNb2RlbCB8IG51bGw+ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKVxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBmbGFzaENhcmRzU3ViamVjdDogQmVoYXZpb3JTdWJqZWN0PEZsYXNoQ2FyZFZpZXdNb2RlbFtdPiA9IG5ldyBCZWhhdmlvclN1YmplY3QoW10pXHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1vZGVsTG9va3VwOiBNYXA8Rmxhc2hDYXJkVmlld01vZGVsLCBFbnRyeT4gPSBuZXcgTWFwKClcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlbnRyeVNlcnZpY2U6IEVudHJ5U2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuZW50cnlTZXJ2aWNlID0gZW50cnlTZXJ2aWNlXHJcbiAgICAgICAgdGhpcy5lZGl0aW5nU3ViamVjdC5zdWJzY3JpYmUoZWRpdGluZyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuRXhlY3V0ZUFkZENhcmRTdWJqZWN0Lm9uTmV4dCghZWRpdGluZylcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgY2FuRXhlY3V0ZUFkZENhcmQoKTogT2JzZXJ2YWJsZTxib29sZWFuPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuRXhlY3V0ZUFkZENhcmRTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBlZGl0aW5nRW50cnkoKTogT2JzZXJ2YWJsZTxFZGl0RW50cnlWaWV3TW9kZWwgfCBudWxsPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ1N1YmplY3QuYXNPYnNlcnZhYmxlKClcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGZsYXNoQ2FyZHMoKTogT2JzZXJ2YWJsZTxGbGFzaENhcmRWaWV3TW9kZWxbXT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZsYXNoQ2FyZHNTdWJqZWN0LmFzT2JzZXJ2YWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZENhcmQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmNhbkV4ZWN1dGVBZGRDYXJkU3ViamVjdC5nZXRWYWx1ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGVudHJ5Vmlld01vZGVsID0gbmV3IEVkaXRFbnRyeVZpZXdNb2RlbCh0aGlzLmVudHJ5U2VydmljZSlcclxuXHJcbiAgICAgICAgbGV0IGRpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXHJcbiAgICAgICAgZGlzcG9zYWJsZS5hZGQoXHJcbiAgICAgICAgICAgIGVudHJ5Vmlld01vZGVsLnNhdmVkLnRha2UoMSkuc3Vic2NyaWJlKGVudHJ5ID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBhIGNhcmQuXHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudENhcmRzID0gdGhpcy5mbGFzaENhcmRzU3ViamVjdC5nZXRWYWx1ZSgpXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2FyZHMucHVzaChuZXcgRmxhc2hDYXJkVmlld01vZGVsKGVudHJ5LnF1ZXN0aW9uLnZhbHVlLCBlbnRyeS5hbnN3ZXIudmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFzaENhcmRzU3ViamVjdC5vbk5leHQoY3VycmVudENhcmRzKVxyXG5cclxuICAgICAgICAgICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdTdWJqZWN0Lm9uTmV4dChudWxsKVxyXG4gICAgICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgZGlzcG9zYWJsZS5hZGQoXHJcbiAgICAgICAgICAgIGVudHJ5Vmlld01vZGVsXHJcbiAgICAgICAgICAgICAgICAuaXNDYW5jZWxsZWRcclxuICAgICAgICAgICAgICAgIC53aGVyZShpc0NhbmNlbGxlZCA9PiBpc0NhbmNlbGxlZClcclxuICAgICAgICAgICAgICAgIC50YWtlKDEpXHJcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKGlzQ2FuY2VsbGVkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwb3NhYmxlLmRpc3Bvc2UoKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ1N1YmplY3Qub25OZXh0KG51bGwpXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgdGhpcy5lZGl0aW5nU3ViamVjdC5vbk5leHQoZW50cnlWaWV3TW9kZWwpXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgbGV0IGVudHJpZXMgPSBhd2FpdCB0aGlzLmVudHJ5U2VydmljZS5nZXRBbGwoKVxyXG4gICAgICAgIHRoaXMuZmxhc2hDYXJkc1N1YmplY3Qub25OZXh0KGVudHJpZXMubWFwKGVudHJ5ID0+IHtcclxuICAgICAgICAgICAgbGV0IHZtID0gbmV3IEZsYXNoQ2FyZFZpZXdNb2RlbChlbnRyeS5xdWVzdGlvbi52YWx1ZSwgZW50cnkuYW5zd2VyLnZhbHVlKVxyXG4gICAgICAgICAgICB2bS5zZWxlY3RlZC5zdWJzY3JpYmUoc2VsZWN0ZWRDYXJkID0+IHRoaXMub25DYXJkU2VsZWN0ZWQoc2VsZWN0ZWRDYXJkKSlcclxuICAgICAgICAgICAgdGhpcy5tb2RlbExvb2t1cC5zZXQodm0sIGVudHJ5KVxyXG4gICAgICAgICAgICByZXR1cm4gdm1cclxuICAgICAgICB9KSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG9uQ2FyZFNlbGVjdGVkKHNlbGVjdGVkQ2FyZDogRmxhc2hDYXJkVmlld01vZGVsKSB7XHJcbiAgICAgICAgbGV0IGNhcmRNb2RlbCA9IHRoaXMubW9kZWxMb29rdXAuZ2V0KHNlbGVjdGVkQ2FyZClcclxuICAgICAgICBpZiAoIWNhcmRNb2RlbCkge1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlZGl0aW5nVm0gPSBuZXcgRWRpdEVudHJ5Vmlld01vZGVsKHRoaXMuZW50cnlTZXJ2aWNlLCBjYXJkTW9kZWwpXHJcbiAgICAgICAgbGV0IGRpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpXHJcbiAgICAgICAgZGlzcG9zYWJsZS5hZGQoXHJcbiAgICAgICAgICAgIGVkaXRpbmdWbS5zYXZlZC50YWtlKDEpLnN1YnNjcmliZShlbnRyeSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGNhcmQuXHJcbiAgICAgICAgICAgICAgICAvL2xldCBjdXJyZW50Q2FyZHMgPSB0aGlzLmZsYXNoQ2FyZHNTdWJqZWN0LmdldFZhbHVlKClcclxuICAgICAgICAgICAgICAgIC8vbGV0IGluZGV4ID0gY3VycmVudENhcmRzLmluZGV4T2Yoc2VsZWN0ZWRDYXJkKVxyXG4gICAgICAgICAgICAgICAgLy9pZiAoaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB0aHJvdyBFcnJvcihcIlNhdmVkIGFuIHVua25vd24gZW50cnk6IFwiICsgSlNPTi5zdHJpbmdpZnkoZW50cnkpKSBcclxuICAgICAgICAgICAgICAgIC8vfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vY3VycmVudENhcmRzW2luZGV4XSA9IG5ldyBGbGFzaENhcmRWaWV3TW9kZWwoZW50cnkucXVlc3Rpb24sIGVudHJ5LmFuc3dlcilcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5mbGFzaENhcmRzU3ViamVjdC5vbk5leHQoY3VycmVudENhcmRzKVxyXG5cclxuICAgICAgICAgICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdTdWJqZWN0Lm9uTmV4dChudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkKClcclxuICAgICAgICAgICAgfSkpXHJcblxyXG4gICAgICAgIGRpc3Bvc2FibGUuYWRkKFxyXG4gICAgICAgICAgICBlZGl0aW5nVm0uaXNDYW5jZWxsZWQudGFrZSgxKS5zdWJzY3JpYmUoaXNDYW5jZWxsZWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc0NhbmNlbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRpc3Bvc2FibGUuZGlzcG9zZSgpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVkaXRpbmdTdWJqZWN0Lm9uTmV4dChudWxsKVxyXG4gICAgICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBjYXJkIGJlaW5nIGVkaXRlZC4uLlxyXG4gICAgICAgIGxldCBmbGFzaENhcmRzID0gdGhpcy5mbGFzaENhcmRzU3ViamVjdC5nZXRWYWx1ZSgpXHJcbiAgICAgICAgbGV0IGVkaXRpbmdJbmRleCA9IGZsYXNoQ2FyZHMuaW5kZXhPZihzZWxlY3RlZENhcmQpXHJcbiAgICAgICAgZmxhc2hDYXJkcy5zcGxpY2UoZWRpdGluZ0luZGV4LCAxKVxyXG4gICAgICAgIHRoaXMuZmxhc2hDYXJkc1N1YmplY3Qub25OZXh0KGZsYXNoQ2FyZHMpXHJcblxyXG4gICAgICAgIC8vIC4uLiB0aGVuIHJlcGxhY2UgaXQgd2l0aCB0aGUgZWRpdG9yLlxyXG4gICAgICAgIHRoaXMuZWRpdGluZ1N1YmplY3Qub25OZXh0KGVkaXRpbmdWbSlcclxuICAgIH1cclxufSIsImltcG9ydCB7IEVkaXRvclBhZ2VDb250cm9sbGVyIH0gZnJvbSBcIi4vQ29udHJvbGxlcnMvRWRpdG9yUGFnZUNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IHsgSW5zdGFsbENob2ljZSB9IGZyb20gXCIuL0luc3RhbGxDaG9pY2VcIjtcclxuaW1wb3J0IHsgSW5zdGFsbFByb21wdCB9IGZyb20gXCIuL0luc3RhbGxQcm9tcHRcIjtcclxuaW1wb3J0IHsgUHdhSW5zdGFsbGVyIH0gZnJvbSBcIi4vUHdhSW5zdGFsbGVyXCI7XHJcbmltcG9ydCB7IEVudHJ5U2VydmljZSB9IGZyb20gXCIuL1NlcnZpY2VzL0VudHJpZXMvRW50cnlTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEZpbGVMb2FkZXJGYWN0b3J5IH0gZnJvbSBcIi4vVmlldy9WaWV3TG9hZGVyXCI7XHJcbmltcG9ydCB7IEVkaXRvclBhZ2VWaWV3TW9kZWwgfSBmcm9tIFwiLi9WaWV3TW9kZWxzL0VkaXRvclBhZ2VWaWV3TW9kZWxcIjtcclxuXHJcbmNsYXNzIEFwcGxpY2F0aW9uIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZW50cnlTZXJ2aWNlOiBFbnRyeVNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIGluc3RhbGxlcjogUHdhSW5zdGFsbGVyKSB7XHJcbiAgICAgICAgdGhpcy5lbnRyeVNlcnZpY2UgPSBuZXcgRW50cnlTZXJ2aWNlKHdpbmRvdy5pbmRleGVkREIpO1xyXG5cclxuICAgICAgICB3aW5kb3cub25sb2FkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9uV2luZG93TG9hZGVkKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclNlcnZpY2VXb3JrZXIobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBTaG93IHRoZSBpbnN0YWxsIHByb21wdC5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJlZm9yZWluc3RhbGxwcm9tcHRcIiwgKGU6IEJlZm9yZUluc3RhbGxQcm9tcHRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGluc3RhbGxlci5wcm9tcHRJbnN0YWxsYXRpb24oe1xyXG4gICAgICAgICAgICAgICAgcGxhdGZvcm1zOiBlLnBsYXRmb3JtcyxcclxuICAgICAgICAgICAgICAgIHVzZXJDaG9pY2U6IGUudXNlckNob2ljZSxcclxuICAgICAgICAgICAgICAgIHByb21wdDogKCkgPT4gZS5wcm9tcHQuY2FsbChlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEVudHJ5IHBvaW50IGZvciBsb2FkaW5nIHRoZSBVSS4gQ2FsbGVkIGFmdGVyIHRoZSB3aW5kb3cgaXMgbG9hZGVkIGFuZCByZWFkeS4gXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgb25XaW5kb3dMb2FkZWQoKSB7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBhcHAgaXMgY2FjaGVkIGZpcnN0LlxyXG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5O1xyXG5cclxuICAgICAgICBsZXQgdmlld0xvYWRlciA9IEZpbGVMb2FkZXJGYWN0b3J5LmNyZWF0ZUZldGNoSHRtbExvYWRlcih3aW5kb3cgYXMgR2xvYmFsRmV0Y2gpO1xyXG5cclxuICAgICAgICBsZXQgbWFpbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluJyk7XHJcbiAgICAgICAgaWYgKCFtYWluKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB2aWV3TW9kZWwgPSBuZXcgRWRpdG9yUGFnZVZpZXdNb2RlbCh0aGlzLmVudHJ5U2VydmljZSk7XHJcbiAgICAgICAgbGV0IGVkaXRvclBhZ2UgPSBuZXcgRWRpdG9yUGFnZUNvbnRyb2xsZXIodmlld0xvYWRlciwgdmlld01vZGVsKTtcclxuICAgICAgICBlZGl0b3JQYWdlLmxvYWRJbnRvUGFyZW50KG1haW4pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHdoZW4gYSBuZXcgU2VydmljZVdvcmtlciBpcyBpbnN0YWxsZWQuXHJcbiAgICAgKiBUaGlzIGluZGljYXRlcyB0aGF0IHRoZSBhcHAgbmVlZHMgdG8gYmUgcmVmcmVzaGVkIHRvIHJlZmxlY3QgdGhlIGNoYW5nZXMuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBuZXdXb3JrZXIgVGhlIG5ld2x5IGluc3RhbGxlZCBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBvblNlcnZpY2VXb3JrZXJDaGFuZ2VkKG5ld1dvcmtlcjogU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgIGxldCByZWZyZXNoQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dFJlZnJlc2gnKTtcclxuICAgICAgICBpZiAoIXJlZnJlc2hCdXR0b24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmV3V29ya2VyLnBvc3RNZXNzYWdlKHsgYWN0aW9uOiAnc2tpcFdhaXRpbmcnIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBOZXcgc2VydmljZSB3b3JrZXIgaW5zdGFsbGVkLCBzaG93IHRoZSByZWZyZXNoIGJ1dHRvbiBhbmQgYWxsb3cgdGhlIHVwZGF0ZS5cclxuICAgICAgICByZWZyZXNoQnV0dG9uLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKHNlcnZpY2VXb3JrZXI6IFNlcnZpY2VXb3JrZXJDb250YWluZXIpIHtcclxuICAgICAgICBzZXJ2aWNlV29ya2VyXHJcbiAgICAgICAgICAgIC5yZWdpc3RlcignL3NlcnZpY2Utd29ya2VyLmpzJylcclxuICAgICAgICAgICAgLnRoZW4ocmVnID0+IHtcclxuICAgICAgICAgICAgICAgIHJlZy5hZGRFdmVudExpc3RlbmVyKCd1cGRhdGVmb3VuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGVkIHNlcnZpY2Ugd29ya2VyIGZvdW5kLiBcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3V29ya2VyID0gcmVnLmluc3RhbGxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdXb3JrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3V29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoJ3N0YXRlY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1dvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5ld1dvcmtlci5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnaW5zdGFsbGVkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2VydmljZVdvcmtlckNoYW5nZWQobmV3V29ya2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGV0IHJlZnJlc2hpbmc6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8vIFRoZSBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGZpcmVkIHdoZW4gdGhlIHNlcnZpY2Ugd29ya2VyIHVwZGF0ZXNcclxuICAgICAgICAvLyBIZXJlIHdlIHJlbG9hZCB0aGUgcGFnZVxyXG4gICAgICAgIHNlcnZpY2VXb3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignY29udHJvbGxlcmNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHJlZnJlc2hpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICByZWZyZXNoaW5nID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgUHdhSW5zdGFsbGVyRGVmIGltcGxlbWVudHMgUHdhSW5zdGFsbGVyIHtcclxuICAgIHByb21wdEluc3RhbGxhdGlvbihwcm9tcHQ6IEluc3RhbGxQcm9tcHQpIHtcclxuICAgICAgICBsZXQgYnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J1dEFkZCcpO1xyXG4gICAgICAgIGlmIChidXR0b24pIHtcclxuICAgICAgICAgICAgYnV0dG9uLmhpZGRlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBidXR0b24ub25jbGljayA9IHByb21wdC5wcm9tcHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgQmVmb3JlSW5zdGFsbFByb21wdEV2ZW50IGV4dGVuZHMgRXZlbnQge1xyXG4gICAgdXNlckNob2ljZTogUHJvbWlzZTxJbnN0YWxsQ2hvaWNlPjtcclxuICAgIHByb21wdCgpOiB2b2lkO1xyXG4gICAgcGxhdGZvcm1zOiBzdHJpbmcsXHJcbn1cclxuXHJcbm5ldyBBcHBsaWNhdGlvbih3aW5kb3csIG5ldyBQd2FJbnN0YWxsZXJEZWYoKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==